!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=86)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancelAfter=t.getCancellationTokenId=t.getCancellationTokenFromId=t.disposeCancellationToken=t.createAnalysisCancellationTokenSource=t.getCancellationStrategyFromArgv=t.setCancellationFolderName=t.getCancellationFolderName=t.throwIfCancellationRequested=t.OperationCanceledException=void 0;const i=n(12),s=n(33),r=n(3),o=n(8),a=n(10);class c{static shouldCheck(){const e=Date.now().valueOf();return e-this._lastCheckTimestamp>=5&&(this._lastCheckTimestamp=e,!0)}}c._lastCheckTimestamp=0;class l{constructor(e){this.cancellationFilePath=e,this.isCancelled=!1}cancel(){this.isCancelled||(this.isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._disposeEmitter()))}get isCancellationRequested(){return!!this.isCancelled||(c.shouldCheck()&&this._pipeExists()&&this.cancel(),this.isCancelled)}get onCancellationRequested(){return this._emitter||(this._emitter=new a.Emitter),this._emitter.event}dispose(){this._disposeEmitter()}_disposeEmitter(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}_pipeExists(){try{return i.statSync(this.cancellationFilePath),!0}catch(e){return!1}}}class p extends l{constructor(e){super(e),this._disposed=!1}cancel(){this._disposed||this.isCancelled||(this._createPipe(),super.cancel())}get isCancellationRequested(){return this.isCancelled}dispose(){this._disposed=!0,super.dispose(),this._removePipe()}_createPipe(){try{i.writeFileSync(this.cancellationFilePath,"",{flag:"w"})}catch(e){}}_removePipe(){try{i.unlinkSync(this.cancellationFilePath)}catch(e){}}}class u{constructor(e,t=!1){this._cancellationFilePath=e,this._ownFile=t}get token(){return this._token||(this._token=this._ownFile?new p(this._cancellationFilePath):new l(this._cancellationFilePath)),this._token}cancel(){this._token?this._token.cancel():this._token=a.CancellationToken.Cancelled}dispose(){this._token?this._token instanceof l&&this._token.dispose():this._token=a.CancellationToken.None}}function d(e,t){return r.join(function(e){return r.join(s.tmpdir(),"python-languageserver-cancellation",e)}(e),`cancellation-${String(t)}.tmp`)}class h{constructor(e){this.folderName=e}createCancellationTokenSource(e){return new u(d(this.folderName,e))}}class f extends a.ResponseError{constructor(){super(a.ErrorCodes.RequestCancelled,"request cancelled")}static is(e){return e.code===a.ErrorCodes.RequestCancelled}}let m;function g(e){m=e}t.OperationCanceledException=f,t.throwIfCancellationRequested=function(e){if(e.isCancellationRequested)throw new f},t.getCancellationFolderName=function(){return m},t.setCancellationFolderName=g,t.getCancellationStrategyFromArgv=function(e){let t;for(let i=0;i<e.length;i++){const s=e[i];if("--cancellationReceive"===s)t=n(e[i+1]);else{const e=s.split("=");"--cancellationReceive"===e[0]&&(t=n(e[1]))}}return t&&!m&&g(t.folderName),t=t||a.CancellationReceiverStrategy.Message,{receiver:t,sender:a.CancellationSenderStrategy.Message};function n(e){const t=function(e){const t=e.match(/^file:(.+)$/);return t?t[1]:void 0}(e);return t?new h(t):void 0}};let y=0;t.createAnalysisCancellationTokenSource=function(){return m?new u(d(m,"analysis-"+String(y++)),!0):new o.CancellationTokenSource},t.disposeCancellationToken=function(e){e instanceof l&&e.dispose()},t.getCancellationTokenFromId=function(e){return e?new l(e):a.CancellationToken.None},t.getCancellationTokenId=function(e){return e instanceof l?e.cancellationFilePath:void 0},t.CancelAfter=function(...e){const t=new o.CancellationTokenSource,n=[];for(const i of e)n.push(i.onCancellationRequested(e=>{t.cancel()}));return n.push(t.token.onCancellationRequested(e=>{n.forEach(e=>e.dispose())})),t}},function(e,t,n){"use strict";var i,s;function r(e,t){return e.line<t.line?-1:e.line>t.line?1:e.character<t.character?-1:e.character>t.character?1:0}function o(){return{line:0,character:0}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyRange=t.rangesAreEqual=t.doesRangeContain=t.doRangesOverlap=t.getEmptyPosition=t.comparePositions=t.TextRange=void 0,function(e){function t(e,t){if(e<0)throw new Error("start must be non-negative");if(t<0)throw new Error("length must be non-negative");return{start:e,length:t}}function n(e){return e.start+e.length}e.create=t,e.fromBounds=function(e,n){if(e<0)throw new Error("start must be non-negative");if(e>n)throw new Error("end must be greater than or equal to start");return t(e,n-e)},e.getEnd=n,e.contains=function(e,t){return t>=e.start&&t<n(e)},e.extend=function e(t,i){i&&(Array.isArray(i)?i.forEach(n=>{e(t,n)}):(i.start<t.start&&(t.length+=t.start-i.start,t.start=i.start),n(i)>n(t)&&(t.length+=n(i)-n(t))))}}(t.TextRange||(t.TextRange={})),function(e){e.is=function(e){const t=e;return t&&void 0!==t.line&&void 0!==t.character}}(i||(i={})),function(e){e.is=function(e){const t=e;return t&&void 0!==t.start&&void 0!==t.end}}(s||(s={})),t.comparePositions=r,t.getEmptyPosition=o,t.doRangesOverlap=function(e,t){return!(r(t.start,e.end)>=0)&&!(r(e.start,t.end)>=0)},t.doesRangeContain=function e(t,n){return i.is(n)?r(t.start,n)<=0&&r(t.end,n)>=0:e(t,n.start)&&e(t,n.end)},t.rangesAreEqual=function(e,t){return 0===r(e.start,t.start)&&0===r(e.end,t.end)},t.getEmptyRange=function(){return{start:{line:0,character:0},end:{line:0,character:0}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatEnum=t.getFunctionName=t.assertNever=t.assertEachDefined=t.assertDefined=t.fail=t.assert=void 0;const i=n(42),s=n(23);function r(e,t){const n=new Error(e?"Debug Failure. "+e:"Debug Failure.");throw Error.captureStackTrace&&Error.captureStackTrace(n,t||r),n}function o(e,t){return null==e?r(t):e}t.assert=function e(t,n,i,s){t||(i&&(n+="\r\nVerbose Debug Information: "+("string"==typeof i?i:i())),r(n?"False expression: "+n:"False expression.",s||e))},t.fail=r,t.assertDefined=o,t.assertEachDefined=function(e,t){for(const n of e)o(n,t);return e},t.assertNever=function e(t,n="Illegal value:",i){return r(`${n} ${JSON.stringify(t)}`,i||e)},t.getFunctionName=function(e){if("function"!=typeof e)return"";if(s.hasProperty(e,"name"))return e.name;{const t=Function.prototype.toString.call(e),n=/^function\s+([\w$]+)\s*\(/.exec(t);return n?n[1]:""}},t.formatEnum=function(e=0,t,n){const r=function(e){const t=[];for(const n of Object.keys(e)){const i=e[n];"number"==typeof i&&t.push([i,n])}return i.stableSort(t,(e,t)=>s.compareValues(e[0],t[0]))}(t);if(0===e)return r.length>0&&0===r[0][0]?r[0][1]:"0";if(n){let t="",n=e;for(const[i,s]of r){if(i>e)break;0!==i&&i&e&&(t=`${t}${t?"|":""}${s}`,n&=~i)}if(0===n)return t}else for(const[t,n]of r)if(t===e)return n;return e.toString()}},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFileSystemCaseSensitiveInternal=t.isFileSystemCaseSensitive=t.convertPathToUri=t.convertUriToPath=t.isDiskPathRoot=t.isRootedDiskPath=t.getRegexEscapedSeparator=t.getFileSpec=t.getWildcardRoot=t.getWildcardRegexPattern=t.getFileSystemEntries=t.isFile=t.isDirectory=t.normalizePath=t.stripFileExtension=t.getFileName=t.getFileExtension=t.stripTrailingDirectorySeparator=t.hasTrailingDirectorySeparator=t.ensureTrailingDirectorySeparator=t.comparePathsCaseInsensitive=t.comparePathsCaseSensitive=t.getRelativePathComponentsFromDirectory=t.getRelativePathFromDirectory=t.getBaseFileName=t.getAnyExtensionFromPath=t.changeAnyExtension=t.containsPath=t.comparePaths=t.combinePaths=t.resolvePaths=t.normalizeSlashes=t.directoryExists=t.fileExists=t.getFileSize=t.makeDirectories=t.getRelativePath=t.combinePathComponents=t.reducePathComponents=t.getPathComponents=t.getRootLength=t.getDirectoryPath=t.forEachAncestorDirectory=t.FileSpec=void 0;const i=n(56),s=n(3),r=n(60),o=n(42),a=n(23),c=n(2),l=n(19);function p(e){return e.substr(0,Math.max(u(e),e.lastIndexOf(s.sep)))}function u(e){if(e.charAt(0)===s.sep){if(e.charAt(1)!==s.sep)return 1;const t=e.indexOf(s.sep,2);if(t<0)return 2;const n=e.indexOf(s.sep,t+1);return n<0?t+1:n+1}return":"===e.charAt(1)&&e.charAt(2)===s.sep?3:0}function d(e){const t=m(e),n=u(t),i=t.substring(0,n),r=t.substring(n).split(s.sep);return r.length>0&&!r[r.length-1]&&r.pop(),h([i,...r])}function h(e){if(!o.some(e))return[];const t=[e[0]];for(let n=1;n<e.length;n++){const i=e[n];if(i&&"."!==i){if(".."===i)if(t.length>1){if(".."!==t[t.length-1]){t.pop();continue}}else if(t[0])continue;t.push(i)}}return t}function f(e){if(0===e.length)return"";return m((e[0]&&v(e[0]))+e.slice(1).join(s.sep))}function m(e){return e.replace(/[\\/]/g,s.sep)}function g(e,...t){e&&(e=m(e));for(let n of t)n&&(n=m(n),e=e&&0===u(n)?v(e)+n:n);return e}function y(e,t,n){if(t)return function(e,t,n){if("string"==typeof t)return I(e,t,n)||"";for(const i of t){const t=I(e,i,n);if(t)return t}return""}(C(e),t,n?l.equateStringsCaseInsensitive:l.equateStringsCaseSensitive);const i=_(e),s=i.lastIndexOf(".");return s>=0?i.substring(s):""}function _(e,t,n){if(u(e=m(e))===e.length)return"";const i=(e=C(e)).slice(Math.max(u(e),e.lastIndexOf(s.sep)+1)),r=void 0!==t&&void 0!==n?y(i,t,n):void 0;return r?i.slice(0,i.length-r.length):i}function T(e,t,n){c.assert(u(e)>0==u(t)>0,"Paths must either both be absolute or both be relative");const i="function"==typeof n?n:a.identity;return function(e,t,n,i){const s=d(e),r=d(t);let o;for(o=0;o<s.length&&o<r.length;o++){const e=i(s[o]),t=i(r[o]);if(!(0===o?l.equateStringsCaseInsensitive:n)(e,t))break}if(0===o)return r;const a=r.slice(o),c=[];for(;o<s.length;o++)c.push("..");return["",...c,...a]}(e,t,"boolean"==typeof n&&n?l.equateStringsCaseInsensitive:l.equateStringsCaseSensitive,i)}function v(e){return b(e)?e:e+s.sep}function b(e){if(0===e.length)return!1;const t=e.charCodeAt(e.length-1);return 47===t||92===t}function C(e){return b(e)?e.substr(0,e.length-1):e}function S(e,t=!1){if(!t)return s.extname(e);const n=(e=x(e)).indexOf(".");return e.substr(n)}function x(e){return s.basename(e)}function k(e){return m(s.normalize(e))}function E(e,t){let n=k(g(e,t));n.endsWith(".py")||n.endsWith(".pyi")||(n=v(n));const i=d(n),s=A(),r=`(${s}[^${s}.][^${s}]*)*?`,o=new RegExp(`[^\\w\\s${s}]`,"g");i.length>0&&(i[0]=C(i[0]));let a="",c=!0;for(let e of i)"**"===e?a+=r:(c||(e=s+e),a+=e.replace(o,e=>"*"===e?`[^${s}]*`:"?"===e?`[^${s}]`:"\\"+e),c=!1);return a}function w(e,t){let n=k(g(e,t));n.endsWith(".py")||n.endsWith(".pyi")||(n=v(n));const i=d(n);i.length>0&&(i[0]=C(i[0]));let r="",o=!0;for(let e of i){if("**"===e)break;if(e.match(/[*?]/))break;o||(e=s.sep+e),r+=e,o=!1}return r}function A(){return"/"===s.sep?"/":"\\\\"}function D(e,t,n){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;const i=e.substring(0,u(e)),s=t.substring(0,u(t)),r=l.compareStringsCaseInsensitive(i,s);if(0!==r)return r;const o=A(),c=new RegExp(`(^|${o}).{0,2}($|${o})`),p=e.substring(i.length),h=t.substring(s.length);if(!c.test(p)&&!c.test(h))return n(p,h);const f=d(e),m=d(t),g=Math.min(f.length,m.length);for(let e=1;e<g;e++){const t=n(f[e],m[e]);if(0!==t)return t}return a.compareValues(f.length,m.length)}function I(e,t,n){if(t.startsWith(".")||(t="."+t),e.length>=t.length&&46===e.charCodeAt(e.length-t.length)){const i=e.slice(e.length-t.length);if(n(i,t))return i}}function P(e,t,n){try{const i=e.statSync(t);switch(n){case 0:return i.isFile();case 1:return i.isDirectory();default:return!1}}catch(e){return!1}}!function(e){e.is=function(e){const t=e;return t&&!!t.wildcardRoot&&!!t.regExp}}(t.FileSpec||(t.FileSpec={})),t.forEachAncestorDirectory=function(e,t){for(;;){const n=t(e);if(void 0!==n)return n;const i=p(e);if(i===e)return;e=i}},t.getDirectoryPath=p,t.getRootLength=u,t.getPathComponents=d,t.reducePathComponents=h,t.combinePathComponents=f,t.getRelativePath=function(e,t){if(!e.startsWith(v(t)))return;const n=d(e);let i=".";for(let e=d(t).length;e<n.length;e++)i+=s.sep+n[e];return i},t.makeDirectories=function(e,t,n){if(!t.startsWith(n))return;const i=d(t);let s=n;for(let t=d(n).length;t<i.length;t++)s=g(s,i[t]),e.existsSync(s)||e.mkdirSync(s)},t.getFileSize=function(e,t){try{const n=e.statSync(t);if(n.isFile())return n.size}catch(e){}return 0},t.fileExists=function(e,t){return P(e,t,0)},t.directoryExists=function(e,t){return P(e,t,1)},t.normalizeSlashes=m,t.resolvePaths=function(e,...t){return k(o.some(t)?g(e,...t):m(e))},t.combinePaths=g,t.comparePaths=function(e,t,n,i){return e=k(e),t=k(t),"string"==typeof n?(e=g(n,e),t=g(n,t)):"boolean"==typeof n&&(i=n),D(e,t,l.getStringComparer(i))},t.containsPath=function(e,t,n,i){if("string"==typeof n?(e=g(n,e),t=g(n,t)):"boolean"==typeof n&&(i=n),void 0===e||void 0===t)return!1;if(e===t)return!0;const s=d(e),r=d(t);if(r.length<s.length)return!1;const o=i?l.equateStringsCaseInsensitive:l.equateStringsCaseSensitive;for(let e=0;e<s.length;e++){if(!(0===e?l.equateStringsCaseInsensitive:o)(s[e],r[e]))return!1}return!0},t.changeAnyExtension=function(e,t,n,i){const s=void 0!==n&&void 0!==i?y(e,n,i):y(e);return s?e.slice(0,e.length-s.length)+(t.startsWith(".")?t:"."+t):e},t.getAnyExtensionFromPath=y,t.getBaseFileName=_,t.getRelativePathFromDirectory=function(e,t,n){return f(T(e,t,n))},t.getRelativePathComponentsFromDirectory=T,t.comparePathsCaseSensitive=function(e,t){return D(e,t,l.compareStringsCaseSensitive)},t.comparePathsCaseInsensitive=function(e,t){return D(e,t,l.compareStringsCaseInsensitive)},t.ensureTrailingDirectorySeparator=v,t.hasTrailingDirectorySeparator=b,t.stripTrailingDirectorySeparator=C,t.getFileExtension=S,t.getFileName=x,t.stripFileExtension=function(e,t=!1){const n=S(e,t);return e.substr(0,e.length-n.length)},t.normalizePath=k,t.isDirectory=function(e,t){let n;try{n=e.statSync(t)}catch(e){return!1}return n.isDirectory()},t.isFile=function(e,t){let n;try{n=e.statSync(t)}catch(e){return!1}return n.isFile()},t.getFileSystemEntries=function(e,t){try{const n=e.readdirEntriesSync(t||".").sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0),i=[],s=[];for(const e of n)"."!==e.name&&".."!==e.name&&(e.isFile()?i.push(e.name):e.isDirectory()&&(e.isSymbolicLink()||s.push(e.name)));return{files:i,directories:s}}catch(e){return{files:[],directories:[]}}},t.getWildcardRegexPattern=E,t.getWildcardRoot=w,t.getFileSpec=function(e,t){let n=E(e,t);n=`^(${n})($|${A()})`;const i=new RegExp(n);return{wildcardRoot:w(e,t),regExp:i}},t.getRegexEscapedSeparator=A,t.isRootedDiskPath=function(e){return u(e)>0},t.isDiskPathRoot=function(e){const t=u(e);return t>0&&t===e.length},t.convertUriToPath=function(e){let t=k(r.URI.parse(e).path);return t.match(/^\\[a-zA-Z]:\\/)&&(t=t.substr(1)),t},t.convertPathToUri=function(e){return r.URI.file(e).toString()};let F=void 0;function R(e){let t=void 0;try{let n,r;e.existsSync(e.tmpdir())||e.mkdirSync(e.tmpdir(),{recursive:!0});do{n=i.randomBytes(21).toString("hex")+"-a",t=s.join(e.tmpdir(),n),r=s.join(e.tmpdir(),n.toUpperCase())}while(e.existsSync(t)||e.existsSync(r));return e.writeFileSync(t,"","utf8"),!e.existsSync(r)}catch(e){return!1}finally{t&&e.unlinkSync(t)}}t.isFileSystemCaseSensitive=function(e){return void 0!==F||(F=R(e)),F},t.isFileSystemCaseSensitiveInternal=R},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertRangeToTextRange=t.convertPositionToOffset=t.convertOffsetsToRange=t.convertOffsetToPosition=void 0;const i=n(2),s=n(1);function r(e,t){if(0===t.end)return{line:0,character:0};let n=0;e>=t.end&&(e=t.end-1,n=1);const s=t.getItemContaining(e);i.assert(s>=0&&s<=t.length);const r=t.getItemAt(s);return i.assert(void 0!==r),{line:s,character:e-r.start+n}}function o(e,t){if(!(e.line>=t.count))return t.getItemAt(e.line).start+e.character}t.convertOffsetToPosition=r,t.convertOffsetsToRange=function(e,t,n){return{start:r(e,n),end:r(t,n)}},t.convertPositionToOffset=o,t.convertRangeToTextRange=function(e,t){const n=o(e.start,t);if(void 0===n)return;const i=o(e.end,t);return void 0!==i?s.TextRange.fromBounds(n,i):void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAssignmentToDefaultsFollowingNamedTuple=t.getDocString=t.isWithinDefaultParamInitializer=t.isMatchingExpression=t.isSuiteEmpty=t.isNodeContainedWithin=t.isFinalAllowedForAssignmentTarget=t.getExecutionScopeNode=t.getEvaluationScopeNode=t.getEvaluationNodeForAssignmentExpression=t.getEnclosingSuiteOrModule=t.getEnclosingFunction=t.getEnclosingClassOrModule=t.getEnclosingModule=t.getEnclosingClass=t.printOperator=t.printExpression=t.findNodeByOffset=t.findNodeByPosition=t.getNodeDepth=void 0;const i=n(2),s=n(5),r=n(1),o=n(25),a=n(66),c=n(11);function l(e,t){if(t<e.start||t>r.TextRange.getEnd(e))return;const n=(new c.ParseTreeWalker).visitNode(e);for(const e of n)if(e){const n=l(e,t);if(n)return n}return e}function p(e){const t={0:"+",1:"+=",2:"=",3:"&",4:"&=",5:"~",6:"|",7:"|=",8:"^",9:"^=",10:"/",11:"/=",12:"==",13:"//",14:"//=",15:">",16:">=",17:"<<",18:"<<=",19:"<>",20:"<",21:"<=",22:"@",23:"@=",24:"%",25:"%=",26:"*",27:"*=",28:"!=",29:"**",30:"**=",31:">>",32:">>=",33:"-",34:"-=",36:"and",37:"or",38:"not",39:"is",40:"is not",41:"in",42:"not in"};return t[e]?t[e]:"unknown"}function u(e,t=!1){let n=e.parent;for(;n;){if(10===n.nodeType)return n;if(37===n.nodeType)return;if(29===n.nodeType&&t)return;n=n.parent}}function d(e){let t=e.parent;for(;t;){if(29===t.nodeType)return t;if(10===t.nodeType)return;t=t.parent}}function h(e){let t,n=e,s=!1;for(;n;){switch(42===n.nodeType&&t===n.name&&(s=!0),n.nodeType){case 29:if(n.parameters.some(e=>e===t)){if(s)return n}else if(t===n.suite)return n;break;case 10:if(t===n.suite)return n;break;case 33:case 37:case 31:return n}t=n,n=n.parent}i.fail("Did not find evaluation scope")}t.getNodeDepth=function(e){let t=0,n=e;for(;n;)t++,n=n.parent;return t},t.findNodeByPosition=function(e,t,n){const i=s.convertPositionToOffset(t,n);if(void 0!==i)return l(e,i)},t.findNodeByOffset=l,t.printExpression=function e(t,n=0){switch(t.nodeType){case 39:return t.value;case 36:return e(t.leftExpression,n)+"."+t.memberName.value;case 9:return e(t.leftExpression,n)+"("+t.arguments.map(t=>{let i="";return 1===t.argumentCategory?i="*":2===t.argumentCategory&&(i="**"),t.name&&(i+=t.name.value+"="),i+=e(t.valueExpression,n),i}).join(", ")+")";case 24:return e(t.baseExpression,n)+"["+t.items.items.map(t=>e(t,n)).join(", ")+"]";case 56:return p(t.operator)+" "+e(t.expression,n);case 7:return e(t.leftExpression,n)+" "+p(t.operator)+" "+e(t.rightExpression,n);case 41:{let e=t.value.toString();return t.isImaginary&&(e+="j"),e}case 49:return 1&n&&t.typeAnnotation?e(t.typeAnnotation,n):t.strings.map(t=>e(t,n)).join(" ");case 50:{let e="";return 8&t.token.flags&&(e+="r"),16&t.token.flags&&(e+="u"),32&t.token.flags&&(e+="b"),64&t.token.flags&&(e+="f"),4&t.token.flags?1&t.token.flags?e+=`'''${t.token.escapedValue}'''`:e+=`"""${t.token.escapedValue}"""`:1&t.token.flags?e+=`'${t.token.escapedValue}'`:e+=`"${t.token.escapedValue}"`,e}case 3:return e(t.leftExpression,n)+" = "+e(t.rightExpression,n);case 4:return e(t.name,n)+" := "+e(t.rightExpression,n);case 55:return e(t.valueExpression,n)+": "+e(t.typeAnnotation,n);case 5:return e(t.leftExpression,n)+" "+p(t.operator)+" "+e(t.rightExpression,n);case 6:return"await "+e(t.expression,n);case 52:return e(t.ifExpression,n)+" if "+e(t.testExpression,n)+" else "+e(t.elseExpression,n);case 32:return`[${t.entries.map(t=>e(t,n)).join(", ")}]`;case 57:return"*"+e(t.expression,n);case 53:{const i=t.expressions.map(t=>e(t,n));return 1===i.length?`(${i[0]}, )`:`(${i.join(", ")})`}case 61:return t.expression?"yield "+e(t.expression,n):"yield";case 62:return"yield from "+e(t.expression,n);case 18:return"...";case 33:{let i="<ListExpression>";if(o.isExpressionNode(t.expression))i=e(t.expression,n);else if(17===t.expression.nodeType){i=`${e(t.expression.keyExpression,n)}: ${e(t.expression.valueExpression,n)}`}return i+" "+t.comprehensions.map(t=>34===t.nodeType?(t.isAsync?"async ":"")+"for "+e(t.targetExpression,n)+" in "+e(t.iterableExpression,n):"if "+e(t.testExpression,n)).join(" ")}case 47:{let i="";return t.startValue&&(i+=e(t.startValue,n)),t.endValue&&(i+=": "+e(t.endValue,n)),t.stepValue&&(i+=": "+e(t.stepValue,n)),i}case 31:return"lambda "+t.parameters.map(t=>{let i="";return 1===t.category?i+="*":2===t.category&&(i+="**"),t.name&&(i+=t.name.value),t.defaultValue&&(i+=" = "+e(t.defaultValue,n)),i}).join(", ")+": "+e(t.expression,n);case 11:if(31===t.constType)return"True";if(14===t.constType)return"False";if(8===t.constType)return"__debug__";if(24===t.constType)return"None";break;case 15:return`{ ${t.entries.map(t=>17===t.nodeType?e(t.keyExpression,n)+": "+e(t.valueExpression,n):e(t,n))} }`;case 16:return"**"+e(t.expandExpression,n);case 46:return t.entries.map(t=>e(t,n)).join(", ")}return"<Expression>"},t.printOperator=p,t.getEnclosingClass=u,t.getEnclosingModule=function(e){let t=e.parent;for(;t;){if(37===t.nodeType)return t;t=t.parent}i.fail("Module node not found")},t.getEnclosingClassOrModule=function(e,t=!1){let n=e.parent;for(;n;){if(10===n.nodeType)return n;if(37===n.nodeType)return n;if(29===n.nodeType&&t)return;n=n.parent}},t.getEnclosingFunction=d,t.getEnclosingSuiteOrModule=function(e){let t=e.parent;for(;t;){if(51===t.nodeType)return t;if(37===t.nodeType)return t;if(31===t.nodeType)return;t=t.parent}},t.getEvaluationNodeForAssignmentExpression=function(e){let t=h(e);for(;void 0!==t;){switch(t.nodeType){case 29:case 31:case 37:return t;case 10:return}t=t.parent}},t.getEvaluationScopeNode=h,t.getExecutionScopeNode=function(e){let t=h(e);for(;10===t.nodeType||33===t.nodeType;)t=h(t.parent);return t},t.isFinalAllowedForAssignmentTarget=function(e){if(39===e.nodeType)return!0;if(36===e.nodeType){if(39!==e.leftExpression.nodeType)return!1;if(!u(e))return!1;const t=d(e);return!!t&&"__init__"===t.name.value}return!1},t.isNodeContainedWithin=function(e,t){let n=e;for(;n;){if(n===t)return!0;n=n.parent}return!1},t.isSuiteEmpty=function(e){for(const t of e.statements){if(48!==t.nodeType)return!1;for(const e of t.statements)if(18===e.nodeType);else if(49!==e.nodeType)return!1}return!0},t.isMatchingExpression=function e(t,n){return 39===t.nodeType&&39===n.nodeType?t.value===n.value:36===t.nodeType&&36===n.nodeType&&(e(t.leftExpression,n.leftExpression)&&t.memberName.value===n.memberName.value)},t.isWithinDefaultParamInitializer=function(e){let t,n=e;for(;n;){if(42===n.nodeType&&t===n.defaultValue)return!0;if(31===n.nodeType||29===n.nodeType||10===n.nodeType||37===n.nodeType)return!1;t=n,n=n.parent}return!1},t.getDocString=function(e){if(0===e.length)return;if(48!==e[0].nodeType)return;const t=e[0];if(0===t.statements.length||49!==t.statements[0].nodeType)return;const n=t.statements[0];return 0==(64&n.strings[0].token.flags)?a.decodeDocString(n.strings[0].value):void 0},t.isAssignmentToDefaultsFollowingNamedTuple=function(e){if(9!==e.nodeType||!e.parent||3!==e.parent.nodeType||39!==e.parent.leftExpression.nodeType||!e.parent.parent||48!==e.parent.parent.nodeType)return!1;const t=e.parent.leftExpression.value,n=e.parent.parent;if(n.statements[0]!==e.parent||!n.parent||37!==n.parent.nodeType&&51!==n.parent.nodeType)return!1;const i=n.parent;let s=i.statements.findIndex(e=>e===n);if(s<0)return!1;for(s++;s<i.statements.length;){const e=i.statements[s];if(48!==e.nodeType)break;if(49!==e.statements[0].nodeType){if(3===e.statements[0].nodeType){const n=e.statements[0];if(36===n.leftExpression.nodeType&&"__defaults__"===n.leftExpression.memberName.value){const e=n.leftExpression.leftExpression;if(36===e.nodeType&&"__new__"===e.memberName.value&&39===e.leftExpression.nodeType&&e.leftExpression.value===t)return!0}}break}s++}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCodeUnreachable=t.setCodeFlowExpressions=t.getCodeFlowExpressions=t.setFileInfo=t.getFileInfo=t.setAfterFlowNode=t.getAfterFlowNode=t.setFlowNode=t.getFlowNode=t.setDeclaration=t.getDeclaration=t.setScope=t.getScope=t.setImportInfo=t.getImportInfo=t.cleanNodeAnalysisInfo=void 0;const i=n(44);function s(e){return e.flowNode}t.cleanNodeAnalysisInfo=function(e){const t=e;delete t.scope,delete t.declaration,delete t.flowNode,delete t.afterFlowNode,delete t.fileInfo},t.getImportInfo=function(e){return e.importInfo},t.setImportInfo=function(e,t){e.importInfo=t},t.getScope=function(e){return e.scope},t.setScope=function(e,t){e.scope=t},t.getDeclaration=function(e){return e.declaration},t.setDeclaration=function(e,t){e.declaration=t},t.getFlowNode=s,t.setFlowNode=function(e,t){e.flowNode=t},t.getAfterFlowNode=function(e){return e.afterFlowNode},t.setAfterFlowNode=function(e,t){e.afterFlowNode=t},t.getFileInfo=function(e){return e.fileInfo},t.setFileInfo=function(e,t){e.fileInfo=t},t.getCodeFlowExpressions=function(e){return e.codeFlowExpressions},t.setCodeFlowExpressions=function(e,t){e.codeFlowExpressions=t},t.isCodeUnreachable=function(e){let t=e;for(;t;){const e=s(t);if(e)return!!(e.flags&i.FlowFlags.Unreachable);t=t.parent}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(89);i.default.install();const s=n(53),r=n(3),o=n(33),a=n(56),c=n(95);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(53));class l extends s.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),s.Disposable.create(()=>this.process.off("message",e))}}t.IPCMessageReader=l;class p extends s.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){try{return"function"==typeof this.process.send&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}t.IPCMessageWriter=p;class u extends s.ReadableStreamMessageReader{constructor(e,t="utf-8"){super(i.default().stream.asReadableStream(e),t)}}t.SocketMessageReader=u;class d extends s.WriteableStreamMessageWriter{constructor(e,t){super(i.default().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}}t.SocketMessageWriter=d;class h extends s.ReadableStreamMessageReader{constructor(e,t){super(i.default().stream.asReadableStream(e),t)}}t.StreamMessageReader=h;class f extends s.WriteableStreamMessageWriter{constructor(e,t){super(i.default().stream.asWritableStream(e),t)}}t.StreamMessageWriter=f,t.generateRandomPipeName=function(){const e=a.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:r.join(o.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n;const i=new Promise((e,t)=>{n=e});return new Promise((s,r)=>{let o=c.createServer(e=>{o.close(),n([new u(e,t),new d(e,t)])});o.on("error",r),o.listen(e,()=>{o.removeListener("error",r),s({onConnected:()=>i})})})},t.createServerPipeTransport=function(e,t="utf-8"){const n=c.createConnection(e);return[new u(n,t),new d(n,t)]},t.createClientSocketTransport=function(e,t="utf-8"){let n;const i=new Promise((e,t)=>{n=e});return new Promise((s,r)=>{const o=c.createServer(e=>{o.close(),n([new u(e,t),new d(e,t)])});o.on("error",r),o.listen(e,"127.0.0.1",()=>{o.removeListener("error",r),s({onConnected:()=>i})})})},t.createServerSocketTransport=function(e,t="utf-8"){const n=c.createConnection(e,"127.0.0.1");return[new u(n,t),new d(n,t)]},t.createMessageConnection=function(e,t,n,i){n||(n=s.NullLogger);const r=void 0!==(o=e).listen&&void 0===o.read?e:new h(e);var o;const a=function(e){return void 0!==e.write&&void 0===e.end}(t)?t:new f(t);return s.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),s.createMessageConnection(r,a,n,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8);class s extends i.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=s;class r extends i.RequestType{constructor(e){super(e,i.ParameterStructures.byName)}}t.ProtocolRequestType=r;class o extends i.NotificationType{constructor(e){super(e,i.ParameterStructures.byName)}}t.ProtocolNotificationType=o;class a extends i.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(40),s=n(57),r=n(116),o=n(118);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(119)),function(e){e.uriToFilePath=r.uriToFilePath,e.resolveGlobalNodePath=r.resolveGlobalNodePath,e.resolveGlobalYarnPath=r.resolveGlobalYarnPath,e.resolve=r.resolve,e.resolveModulePath=r.resolveModulePath}(t.Files||(t.Files={}));let a=!1,c=void 0;!function(){function e(e){try{let t=parseInt(e);isNaN(t)||(c=setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(a?0:1)}},3e3))}catch(e){}}for(let t=2;t<process.argv.length;t++){let n=process.argv[t];if("--clientProcessId"===n&&t+1<process.argv.length)return void e(process.argv[t+1]);{let t=n.split("=");"--clientProcessId"===t[0]&&e(t[1])}}}();const l={initialize:e=>{const t=e.processId;i.number(t)&&void 0===c&&setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(a?0:1)}},3e3)},get shutdownReceived(){return a},set shutdownReceived(e){a=e},exit:e=>{process.exit(e)}};t.createConnection=function(e,t,n,r){let c,p,u,d;return void 0!==e&&"features"===e.__brand&&(c=e,e=t,t=n,n=r),o.ConnectionStrategy.is(e)||o.ConnectionOptions.is(e)?d=e:(p=e,u=t,d=n),function(e,t,n,r){if(!e&&!t&&process.argv.length>2){let n=void 0,i=void 0,s=process.argv.slice(2);for(let r=0;r<s.length;r++){let a=s[r];if("--node-ipc"===a){e=new o.IPCMessageReader(process),t=new o.IPCMessageWriter(process);break}if("--stdio"===a){e=process.stdin,t=process.stdout;break}if("--socket"===a){n=parseInt(s[r+1]);break}if("--pipe"===a){i=s[r+1];break}var c=a.split("=");if("--socket"===c[0]){n=parseInt(c[1]);break}if("--pipe"===c[0]){i=c[1];break}}if(n){let i=o.createServerSocketTransport(n);e=i[0],t=i[1]}else if(i){let n=o.createServerPipeTransport(i);e=n[0],t=n[1]}}var p="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+p);if(!t)throw new Error("Connection output stream is not set. "+p);if(i.func(e.read)&&i.func(e.on)){let t=e;t.on("end",()=>{process.exit(a?0:1)}),t.on("close",()=>{process.exit(a?0:1)})}return s.createConnection(i=>o.createProtocolConnection(e,t,i,n),l,r)}(p,u,d,c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseTreeWalker=void 0;const i=n(2);t.ParseTreeWalker=class{walk(e){const t=this.visitNode(e);t.length>0&&this.walkMultiple(t)}walkMultiple(e){e.forEach(e=>{e&&this.walk(e)})}visitNode(e){switch(e.nodeType){case 1:if(this.visitArgument(e))return[e.name,e.valueExpression];break;case 2:if(this.visitAssert(e))return[e.testExpression,e.exceptionExpression];break;case 3:if(this.visitAssignment(e))return[e.leftExpression,e.rightExpression,e.typeAnnotationComment];break;case 4:if(this.visitAssignmentExpression(e))return[e.name,e.rightExpression];break;case 5:if(this.visitAugmentedAssignment(e))return[e.leftExpression,e.rightExpression];break;case 6:if(this.visitAwait(e))return[e.expression];break;case 7:if(this.visitBinaryOperation(e))return[e.leftExpression,e.rightExpression];break;case 8:if(this.visitBreak(e))return[];break;case 9:if(this.visitCall(e))return[e.leftExpression,...e.arguments];break;case 10:if(this.visitClass(e))return[...e.decorators,e.name,...e.arguments,e.suite];break;case 52:if(this.visitTernary(e))return[e.ifExpression,e.testExpression,e.elseExpression];break;case 11:if(this.visitConstant(e))return[];break;case 12:if(this.visitContinue(e))return[];break;case 13:if(this.visitDecorator(e))return[e.leftExpression,...e.arguments||[]];break;case 14:if(this.visitDel(e))return e.expressions;break;case 15:if(this.visitDictionary(e))return e.entries;break;case 17:if(this.visitDictionaryKeyEntry(e))return[e.keyExpression,e.valueExpression];break;case 16:if(this.visitDictionaryExpandEntry(e))return[e.expandExpression];break;case 0:if(this.visitError(e))return[e.child];break;case 19:if(this.visitIf(e))return[e.testExpression,e.ifSuite,e.elseSuite];break;case 20:if(this.visitImport(e))return e.list;break;case 21:if(this.visitImportAs(e))return[e.module,e.alias];break;case 22:if(this.visitImportFrom(e))return[e.module,...e.imports];break;case 23:if(this.visitImportFromAs(e))return[e.name,e.alias];break;case 24:if(this.visitIndex(e))return[e.baseExpression,e.items];break;case 25:if(this.visitIndexItems(e))return e.items;break;case 18:if(this.visitEllipsis(e))return[];break;case 26:if(this.visitExcept(e))return[e.typeExpression,e.name,e.exceptSuite];break;case 27:if(this.visitFor(e))return[e.targetExpression,e.iterableExpression,e.forSuite,e.elseSuite];break;case 28:if(this.visitFormatString(e))return e.expressions;break;case 29:if(this.visitFunction(e))return[...e.decorators,e.name,...e.parameters,e.returnTypeAnnotation,e.suite];break;case 30:if(this.visitGlobal(e))return e.nameList;break;case 31:if(this.visitLambda(e))return[...e.parameters,e.expression];break;case 32:if(this.visitList(e))return e.entries;break;case 33:if(this.visitListComprehension(e))return[e.expression,...e.comprehensions];break;case 34:if(this.visitListComprehensionFor(e))return[e.targetExpression,e.iterableExpression];break;case 35:if(this.visitListComprehensionIf(e))return[e.testExpression];break;case 36:if(this.visitMemberAccess(e))return[e.leftExpression,e.memberName];break;case 37:if(this.visitModule(e))return[...e.statements];break;case 38:if(this.visitModuleName(e))return e.nameParts;break;case 39:if(this.visitName(e))return[];break;case 40:if(this.visitNonlocal(e))return e.nameList;break;case 41:if(this.visitNumber(e))return[];break;case 42:if(this.visitParameter(e))return[e.name,e.typeAnnotation,e.defaultValue];break;case 43:if(this.visitPass(e))return[];break;case 44:if(this.visitRaise(e))return[e.typeExpression,e.valueExpression,e.tracebackExpression];break;case 45:if(this.visitReturn(e))return[e.returnExpression];break;case 46:if(this.visitSet(e))return e.entries;break;case 47:if(this.visitSlice(e))return[e.startValue,e.endValue,e.stepValue];break;case 48:if(this.visitStatementList(e))return e.statements;break;case 50:if(this.visitString(e))return[];break;case 49:if(this.visitStringList(e))return[e.typeAnnotation,...e.strings];break;case 51:if(this.visitSuite(e))return[...e.statements];break;case 53:if(this.visitTuple(e))return e.expressions;break;case 54:if(this.visitTry(e))return[e.trySuite,...e.exceptClauses,e.elseSuite,e.finallySuite];break;case 55:if(this.visitTypeAnnotation(e))return[e.valueExpression,e.typeAnnotation];break;case 56:if(this.visitUnaryOperation(e))return[e.expression];break;case 57:if(this.visitUnpack(e))return[e.expression];break;case 58:if(this.visitWhile(e))return[e.testExpression,e.whileSuite,e.elseSuite];break;case 59:if(this.visitWith(e))return[...e.withItems,e.suite];break;case 60:if(this.visitWithItem(e))return[e.expression,e.target];break;case 61:if(this.visitYield(e))return[e.expression];break;case 62:if(this.visitYieldFrom(e))return[e.expression];break;default:i.fail("Unexpected node type")}return[]}visitArgument(e){return!0}visitAssert(e){return!0}visitAssignment(e){return!0}visitAssignmentExpression(e){return!0}visitAugmentedAssignment(e){return!0}visitAwait(e){return!0}visitBinaryOperation(e){return!0}visitBreak(e){return!0}visitCall(e){return!0}visitClass(e){return!0}visitTernary(e){return!0}visitContinue(e){return!0}visitConstant(e){return!0}visitDecorator(e){return!0}visitDel(e){return!0}visitDictionary(e){return!0}visitDictionaryKeyEntry(e){return!0}visitDictionaryExpandEntry(e){return!0}visitError(e){return!0}visitEllipsis(e){return!0}visitIf(e){return!0}visitImport(e){return!0}visitImportAs(e){return!0}visitImportFrom(e){return!0}visitImportFromAs(e){return!0}visitIndex(e){return!0}visitIndexItems(e){return!0}visitExcept(e){return!0}visitFor(e){return!0}visitFormatString(e){return!0}visitFunction(e){return!0}visitGlobal(e){return!0}visitLambda(e){return!0}visitList(e){return!0}visitListComprehension(e){return!0}visitListComprehensionFor(e){return!0}visitListComprehensionIf(e){return!0}visitMemberAccess(e){return!0}visitModule(e){return!0}visitModuleName(e){return!0}visitName(e){return!0}visitNonlocal(e){return!0}visitNumber(e){return!0}visitParameter(e){return!0}visitPass(e){return!0}visitRaise(e){return!0}visitReturn(e){return!0}visitSet(e){return!0}visitSlice(e){return!0}visitStatementList(e){return!0}visitString(e){return!0}visitStringList(e){return!0}visitSuite(e){return!0}visitTuple(e){return!0}visitTry(e){return!0}visitTypeAnnotation(e){return!0}visitUnaryOperation(e){return!0}visitUnpack(e){return!0}visitWhile(e){return!0}visitWith(e){return!0}visitWithItem(e){return!0}visitYield(e){return!0}visitYieldFrom(e){return!0}}},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";let i;function s(){if(void 0===i)throw new Error("No runtime abstraction layer installed");return i}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");i=e}}(s||(s={})),t.default=s},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const s=n(58);i(n(58)),i(n(96)),t.createProtocolConnection=function(e,t,n,i){return s.createMessageConnection(e,t,n,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isConstantName=t.isDunderName=t.isPrivateOrProtectedName=t.isProtectedName=t.isPrivateName=void 0;const i=/^[A-Z0-9_]+$/,s=/^[_]+$/;function r(e){return e.length>2&&e.startsWith("__")&&!e.endsWith("__")}function o(e){return e.length>1&&e.startsWith("_")&&!e.startsWith("__")}t.isPrivateName=r,t.isProtectedName=o,t.isPrivateOrProtectedName=function(e){return r(e)||o(e)},t.isDunderName=function(e){return e.length>4&&e.startsWith("__")&&e.endsWith("__")},t.isConstantName=function(e){return!!e.match(i)&&!e.match(s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.ConsoleWithLogLevel=t.StandardConsole=t.NullConsole=t.LogLevel=void 0;const i=n(2);var s;!function(e){e.Error="error",e.Warn="warn",e.Info="info",e.Log="log"}(s=t.LogLevel||(t.LogLevel={}));t.NullConsole=class{constructor(){this.logCount=0,this.infoCount=0,this.warnCount=0,this.errorCount=0}log(e){this.logCount++}info(e){this.infoCount++}warn(e){this.warnCount++}error(e){this.errorCount++}};t.StandardConsole=class{log(e){console.info(e)}info(e){console.info(e)}warn(e){console.warn(e)}error(e){console.error(e)}};function r(e,t,n){switch(t){case s.Log:e.log(n);break;case s.Info:e.info(n);break;case s.Warn:e.warn(n);break;case s.Error:e.error(n);break;default:i.fail(t+" is not expected")}}t.ConsoleWithLogLevel=class{constructor(e){this._console=e,this._levelMap=new Map([[s.Error,0],[s.Warn,1],[s.Info,2],[s.Log,3]]),this._maxLevel=2}get level(){switch(this._maxLevel){case 0:return s.Error;case 1:return s.Warn;case 2:return s.Info}return s.Log}set level(e){let t=this._levelMap.get(e);void 0===t&&(t=this._levelMap.get(s.Info)),this._maxLevel=t}error(e){this._log(s.Error,e)}warn(e){this._log(s.Warn,e)}info(e){this._log(s.Info,e)}log(e){this._log(s.Log,e)}_log(e,t){this._getNumericalLevel(e)>this._maxLevel||r(this._console,e,t)}_getNumericalLevel(e){const t=this._levelMap.get(e);return i.assert(void 0!==t,"Logger: unknown log level."),void 0!==t?t:2}},t.log=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printLiteralType=t.printLiteralValue=t.computeMroLinearization=t.requiresSpecialization=t.getConcreteTypeFromTypeVar=t.containsUnknown=t.getMembersForModule=t.getMembersForClass=t.convertToInstantiable=t.convertToInstance=t.getDeclaredGeneratorReturnType=t.getDeclaredGeneratorSendType=t.getDeclaredGeneratorYieldType=t.removeTruthinessFromType=t.removeFalsinessFromType=t.derivesFromClassRecursive=t.buildTypeVarMap=t.buildTypeVarMapFromSpecializedClass=t.setTypeArgumentsRecursive=t.stripFirstParameter=t.selfSpecializeClassType=t.getTypeVarArgumentsRecursive=t.addTypeVarsToListIfUnique=t.getMetaclass=t.lookUpClassMember=t.lookUpObjectMember=t.specializeType=t.makeTypeVarsConcrete=t.partiallySpecializeType=t.isProperty=t.isParameterSpecificationType=t.isNoReturnType=t.isEllipsisType=t.getSpecializedTupleType=t.canBeTruthy=t.canBeFalsy=t.transformTypeObjectToClass=t.stripLiteralTypeArgsValue=t.enumerateLiteralsForType=t.stripLiteralValue=t.derivesFromAnyOrUnknown=t.areTypesSame=t.doForSubtypes=t.isOptionalType=void 0;const i=n(35),s=n(31),r=n(21),o=n(67);function a(e,t){if(10===e.category){const n=[];return e.subtypes.forEach(e=>{const i=t(e);i&&n.push(i)}),r.combineTypes(n)}return t(e)||r.NeverType.create()}function c(e){return 8===e.category?(void 0!==e.classType.literalValue&&(e=r.ObjectType.create(r.ClassType.cloneWithLiteral(e.classType,void 0))),e):7===e.category?(void 0!==e.literalValue&&(e=r.ClassType.cloneWithLiteral(e,void 0)),e):10===e.category?a(e,e=>c(e)):e}function l(e,t=0){if(t>r.maxTypeRecursionCount)return!0;switch(e.category){case 0:case 1:case 2:case 4:case 3:return!0;case 10:return e.subtypes.some(e=>l(e,t+1));case 5:case 6:case 7:case 9:case 11:return!1;case 8:if(r.ClassType.isBuiltIn(e.classType,"Tuple")&&e.classType.typeArguments){if(0===e.classType.typeArguments.length)return!0;return!!u(e.classType.typeArguments[e.classType.typeArguments.length-1])}return!!f(e,"__len__")||(!!f(e,"__bool__")||!(!r.ClassType.isBuiltIn(e.classType,"bool")||!1!==e.classType.literalValue))}}function p(e,t=0){if(t>r.maxTypeRecursionCount)return!0;switch(e.category){case 1:case 5:case 6:case 7:case 9:case 11:case 2:return!0;case 10:return e.subtypes.some(e=>p(e,t+1));case 4:case 0:case 3:return!1;case 8:return(!r.ClassType.isBuiltIn(e.classType,"Tuple")||!e.classType.typeArguments||0!==e.classType.typeArguments.length)&&(!r.ClassType.isBuiltIn(e.classType,"bool")||!1!==e.classType.literalValue)}}function u(e){return!(2!==e.category||!e.isEllipsis)||7===e.category&&r.ClassType.isBuiltIn(e,"ellipsis")}function d(e,t){if(r.ClassType.isGeneric(t))return e;return h(e,_(t),!1)}function h(e,t,n=!1,i=0){if(i>r.maxTypeRecursionCount)return e;if(!k(e))return e;if(t&&!n&&0===t.typeVarCount())return e;if(r.isAnyOrUnknown(e))return e;if(r.isNoneOrNever(e))return e;if(11===e.category){if(!t)return e.boundType?h(e.boundType,void 0,!1,i+1):n?r.UnknownType.create():e;{const n=t.getTypeVar(e.name);if(n)return r.TypeBase.isInstantiable(e)&&!r.TypeBase.isInstantiable(n)?v(n):n}return e}if(10===e.category){const s=[];return e.subtypes.forEach(e=>{s.push(h(e,t,n,i+1))}),r.combineTypes(s)}if(8===e.category){const s=b(e.classType,t,n,i+1);if(r.ClassType.isBuiltIn(s,"Type")){const e=s.typeArguments;if(e&&e.length>=1){const s=e[0];if(8===s.category)return h(s.classType,t,n,i+1);if(11===s.category&&t){const e=t.getTypeVar(s.name);if(e&&8===e.category)return e.classType}}}return s===e.classType?e:r.ObjectType.create(s)}return 7===e.category?b(e,t,n,i+1):5===e.category?S(e,t,n,i+1):6===e.category?function(e,t,n,i){const s=e.overloads.map(e=>S(e,t,n,i)),o=r.OverloadedFunctionType.create();return s.forEach(e=>{r.OverloadedFunctionType.addOverload(o,e)}),o}(e,t,n,i+1):e}function f(e,t,n=0){if(8===e.category)return m(e.classType,t,n)}function m(e,t,n=0){const s=0!=(16&n);if(7===e.category){let o=!1;for(const i of e.details.mro){if(7!==i.category){o=!0;continue}const a=d(i,e);if(7===a.category&&!(4&n&&r.ClassType.isBuiltIn(a,"object"))){if(0==(1&n)||a.details!==e.details){const e=a.details.fields;if(0==(8&n)){const n=e.get(t);if(n&&n.isInstanceMember()&&(!s||n.hasTypedDeclarations()))return{symbol:n,isInstanceMember:!0,classType:a}}const i=e.get(t);if(i&&i.isClassMember()&&(!s||i.hasTypedDeclarations())){let e=!1;if(r.ClassType.isDataClass(a)||r.ClassType.isTypedDictClass(a)){const t=i.getDeclarations();t.length>0&&1===t[0].type&&(e=!0)}return{symbol:i,isInstanceMember:e,classType:a}}}if(0!=(2&n))break}}if(o&&!s)return{symbol:i.Symbol.createWithType(0,r.UnknownType.create()),isInstanceMember:!1,classType:r.UnknownType.create()}}else if(r.isAnyOrUnknown(e))return{symbol:i.Symbol.createWithType(0,r.UnknownType.create()),isInstanceMember:!1,classType:r.UnknownType.create()}}function g(e,t=0){if(!(t>r.maxTypeRecursionCount)){if(e.details.metaClass)return 7===e.details.metaClass.category?e.details.metaClass:r.UnknownType.create();for(const n of e.details.baseClasses)if(7===n.category){const e=g(n,t+1);if(e)return e}}}function y(e,t){for(const n of t)e.find(e=>r.isTypeSame(e,n))||e.push(n)}function _(e,t=!0){const n=r.ClassType.getTypeParameters(e);let i=e.typeArguments;if(i||t||(i=n),r.ClassType.isBuiltIn(e,"Tuple")&&e.typeArguments&&e.typeArguments.length>1){u(e.typeArguments[e.typeArguments.length-1])||(i=[r.combineTypes(e.typeArguments)])}return T(n,i)}function T(e,t){const n=new o.TypeVarMap;return e.forEach((e,i)=>{const s=e.name;let o;o=t?i>=t.length?r.AnyType.create():t[i]:C(e),n.setTypeVar(s,o,!1)}),n}function v(e){let t=a(e,e=>{switch(e.category){case 8:return e.classType;case 5:if(r.TypeBase.isInstance(e))return r.FunctionType.cloneAsInstantiable(e);break;case 11:if(r.TypeBase.isInstance(e))return r.TypeVarType.cloneAsInstantiable(e)}return e});return e.typeAliasInfo&&e!==t&&(t=r.TypeBase.cloneForTypeAlias(t,e.typeAliasInfo.aliasName,e.typeAliasInfo.typeParameters,e.typeAliasInfo.typeArguments)),t}function b(e,t,n,i){if(0===r.ClassType.getTypeParameters(e).length)return e;let s=[],o=!1;return e.typeArguments?s=e.typeArguments.map(e=>{const s=h(e,t,n,i+1);return s!==e&&(o=!0),s}):r.ClassType.getTypeParameters(e).forEach(e=>{let i;t&&t.getTypeVar(e.name)?(i=t.getTypeVar(e.name),o=!0):(i=n?C(e):e,i!==e&&(o=!0)),s.push(i)}),o?r.ClassType.cloneForSpecialization(e,s):e}function C(e,t=0){return e.boundType?h(e.boundType,void 0,!1,t+1):r.UnknownType.create()}function S(e,t,n,i){let s=e;if(s.details.parameterSpecification){const e=null==t?void 0:t.getParameterSpecification(s.details.parameterSpecification.name);s=r.FunctionType.cloneForParameterSpecification(s,e)}const o=s.specializedTypes&&s.specializedTypes.returnType?s.specializedTypes.returnType:s.details.declaredReturnType,a=o?h(o,t,n,i+1):void 0;let c=o!==a;const l={parameterTypes:[],returnType:a};for(let e=0;e<s.details.parameters.length;e++){const o=r.FunctionType.getEffectiveParameterType(s,e),a=h(o,t,n,i+1);l.parameterTypes.push(a),o!==a&&(c=!0)}if(!c)return s;let p;return s.inferredReturnType&&(p=h(s.inferredReturnType,t,n,i+1)),r.FunctionType.cloneForSpecialization(s,l,p)}function x(e){if(8===e.category){const t=e.classType;if(r.ClassType.isBuiltIn(t)){const e=t.details.name;if("Generator"===e||"AsyncGenerator"===e)return t.typeArguments;if("Iterator"===e||"AsyncIterator"===e||"AsyncIterable"===e)return t.typeArguments}}}function k(e,t=0){switch(e.category){case 7:return e.typeArguments?!(t>r.maxTypeRecursionCount)&&void 0!==e.typeArguments.find(e=>k(e,t+1)):r.ClassType.getTypeParameters(e).length>0;case 8:return!(t>r.maxTypeRecursionCount)&&k(e.classType,t+1);case 5:{if(t>r.maxTypeRecursionCount)return!1;for(let n=0;n<e.details.parameters.length;n++)if(k(r.FunctionType.getEffectiveParameterType(e,n),t+1))return!0;const n=e.specializedTypes&&e.specializedTypes.returnType?e.specializedTypes.returnType:e.details.declaredReturnType;if(n){if(k(n,t+1))return!0}else if(e.inferredReturnType&&k(e.inferredReturnType,t+1))return!0;return!1}case 6:return void 0!==e.overloads.find(e=>k(e,t+1));case 10:return void 0!==e.subtypes.find(e=>k(e,t+1));case 11:return!0}return!1}function E(e){const t=e.classType.literalValue;if(void 0===t)return"";let n;if("string"==typeof t){n=`${"bytes"===e.classType.details.name?"b":""}'${t.toString()}'`}else n="boolean"==typeof t?t?"True":"False":t instanceof r.EnumLiteral?`${t.className}.${t.itemName}`:t.toString();return n}t.isOptionalType=function(e){return 10===e.category&&e.subtypes.some(e=>r.isNoneOrNever(e))},t.doForSubtypes=a,t.areTypesSame=function(e){if(e.length<2)return!0;for(let t=1;t<e.length;t++)if(!r.isTypeSame(e[0],e[t]))return!1;return!0},t.derivesFromAnyOrUnknown=function(e){let t=!1;return a(e,n=>{r.isAnyOrUnknown(e)?t=!0:7===n.category?r.ClassType.hasUnknownBaseClass(n)&&(t=!0):8===n.category&&r.ClassType.hasUnknownBaseClass(n.classType)&&(t=!0)}),t},t.stripLiteralValue=c,t.enumerateLiteralsForType=function(e){if(r.ClassType.isBuiltIn(e.classType,"bool"))return[r.ObjectType.create(r.ClassType.cloneWithLiteral(e.classType,!0)),r.ObjectType.create(r.ClassType.cloneWithLiteral(e.classType,!1))];if(r.ClassType.isEnumClass(e.classType)){const t=[];return e.classType.details.fields.forEach((n,i)=>{n.isIgnoredForProtocolMatch()||n.isInstanceMember()||t.push(r.ObjectType.create(r.ClassType.cloneWithLiteral(e.classType,new r.EnumLiteral(e.classType.details.name,i))))}),t}},t.stripLiteralTypeArgsValue=function e(t,n=0){if(n>r.maxTypeRecursionCount)return t;if(7===t.category&&t.typeArguments){const i=t.typeArguments.map(t=>e(c(t),n+1));return r.ClassType.cloneForSpecialization(t,i,t.skipAbstractClassTest)}if(8===t.category)return t.classType.typeArguments&&(t=r.ObjectType.create(e(t.classType,n+1))),t;if(10===t.category)return a(t,t=>e(t,n+1));if(5===t.category){if(t.specializedTypes){const i={parameterTypes:t.specializedTypes.parameterTypes.map(t=>e(c(t),n+1)),returnType:t.specializedTypes.returnType?e(c(t.specializedTypes.returnType),n+1):void 0};t=r.FunctionType.cloneForSpecialization(t,i,t.inferredReturnType)}return t}if(6===t.category){const i=r.OverloadedFunctionType.create();return i.overloads=t.overloads.map(t=>e(t,n+1)),i}return t},t.transformTypeObjectToClass=function(e){if(8!==e.category)return e;const t=e.classType;if(!r.ClassType.isBuiltIn(t,"Type"))return e;if(!t.typeArguments||t.typeArguments.length<1)return e;const n=t.typeArguments[0];return 8!==n.category?e:n.classType},t.canBeFalsy=l,t.canBeTruthy=p,t.getSpecializedTupleType=function(e){let t;if(7===e.category?t=e:8===e.category&&(t=e.classType),t&&r.ClassType.isBuiltIn(t,"Tuple"))return t},t.isEllipsisType=u,t.isNoReturnType=function(e){if(8===e.category){const t=e.classType;if(r.ClassType.isBuiltIn(t,"NoReturn"))return!0}return!1},t.isParameterSpecificationType=function(e){return 11===e.category&&e.isParameterSpec},t.isProperty=function(e){return 8===e.category&&r.ClassType.isPropertyClass(e.classType)},t.partiallySpecializeType=d,t.makeTypeVarsConcrete=function(e){return a(e,e=>11===e.category?e.boundType?e.boundType:e.constraints.length>0?r.combineTypes(e.constraints):r.AnyType.create():e)},t.specializeType=h,t.lookUpObjectMember=f,t.lookUpClassMember=m,t.getMetaclass=g,t.addTypeVarsToListIfUnique=y,t.getTypeVarArgumentsRecursive=function e(t,n=0){if(n>r.maxTypeRecursionCount)return[];const i=t=>{const i=[];return t.typeArguments&&t.typeArguments.forEach(t=>{y(i,e(t,n+1))}),i};if(11===t.category)return[t];if(7===t.category)return i(t);if(8===t.category)return i(t.classType);if(10===t.category){const i=[];for(const s of t.subtypes)y(i,e(s,n+1));return i}if(5===t.category){const i=[];return t.details.parameters.forEach(t=>{y(i,e(t.type,n+1))}),t.details.declaredReturnType&&y(i,e(t.details.declaredReturnType,n+1)),i}return[]},t.selfSpecializeClassType=function(e,t=!1){if(!r.ClassType.isGeneric(e)&&!t)return e;const n=r.ClassType.getTypeParameters(e);return r.ClassType.cloneForSpecialization(e,n,t)},t.stripFirstParameter=function(e){return e.details.parameters.length>0&&0===e.details.parameters[0].category?r.FunctionType.clone(e,!0):e},t.setTypeArgumentsRecursive=function e(t,n,i,s=0){if(!(s>r.maxTypeRecursionCount||i.isLocked()))switch(t.category){case 10:t.subtypes.forEach(t=>{e(t,n,i,s+1)});break;case 7:t.typeArguments&&t.typeArguments.forEach(t=>{e(t,n,i,s+1)});break;case 8:e(t.classType,n,i,s+1);break;case 5:t.specializedTypes?(t.specializedTypes.parameterTypes.forEach(t=>{e(t,n,i,s+1)}),t.specializedTypes.returnType&&e(t.specializedTypes.returnType,n,i,s+1)):(t.details.parameters.forEach(t=>{e(t.type,n,i,s+1)}),t.details.declaredReturnType&&e(t.details.declaredReturnType,n,i,s+1));break;case 6:t.overloads.forEach(t=>{e(t,n,i,s+1)});break;case 11:i.hasTypeVar(t.name)||i.setTypeVar(t.name,n,i.isNarrowable(t.name))}},t.buildTypeVarMapFromSpecializedClass=_,t.buildTypeVarMap=T,t.derivesFromClassRecursive=function e(t,n,i){if(r.ClassType.isSameGenericClass(t,n))return!0;for(const s of t.details.baseClasses)if(7===s.category){if(e(s,n,i))return!0}else if(!i&&r.isAnyOrUnknown(s))return!0;return!1},t.removeFalsinessFromType=function(e){return a(e,e=>{if(8===e.category){if(void 0!==e.classType.literalValue)return e.classType.literalValue?e:void 0;if(r.ClassType.isBuiltIn(e.classType,"bool"))return r.ObjectType.create(r.ClassType.cloneWithLiteral(e.classType,!0))}if(p(e))return e})},t.removeTruthinessFromType=function(e){return a(e,e=>{if(8===e.category){if(void 0!==e.classType.literalValue)return e.classType.literalValue?void 0:e;if(r.ClassType.isBuiltIn(e.classType,"bool"))return r.ObjectType.create(r.ClassType.cloneWithLiteral(e.classType,!1))}if(l(e))return e})},t.getDeclaredGeneratorYieldType=function(e,t){const n=r.FunctionType.getSpecializedReturnType(e);if(n){const e=x(n);return e&&e.length>=1&&7===t.category?r.ObjectType.create(r.ClassType.cloneForSpecialization(t,[e[0]])):n}},t.getDeclaredGeneratorSendType=function(e){const t=r.FunctionType.getSpecializedReturnType(e);if(t){const e=x(t);return e&&e.length>=2?e[1]:r.UnknownType.create()}},t.getDeclaredGeneratorReturnType=function(e){const t=r.FunctionType.getSpecializedReturnType(e);if(t){const e=x(t);return e&&e.length>=3?e[2]:r.UnknownType.create()}},t.convertToInstance=function(e){let t=a(e,e=>{switch(e.category){case 7:return r.ObjectType.create(e);case 5:if(r.TypeBase.isInstantiable(e))return r.FunctionType.cloneAsInstance(e);break;case 11:if(r.TypeBase.isInstantiable(e))return r.TypeVarType.cloneAsInstance(e)}return e});return e.typeAliasInfo&&e!==t&&(t=r.TypeBase.cloneForTypeAlias(t,e.typeAliasInfo.aliasName,e.typeAliasInfo.typeParameters,e.typeAliasInfo.typeArguments)),t},t.convertToInstantiable=v,t.getMembersForClass=function(e,t,n){for(let i=e.details.mro.length-1;i>=0;i--){const o=e.details.mro[i];if(7===o.category){const e=r.ClassType.isTypedDictClass(o);o.details.fields.forEach((i,r)=>{(i.isClassMember()||n&&i.isInstanceMember())&&(e&&s.isTypedDictMemberAccessedThroughIndex(i)||t.get(r)||t.set(r,i))})}}if(!n){const n=g(e);n&&7===n.category&&n.details.fields.forEach((e,n)=>{t.get(n)||t.set(n,e)})}},t.getMembersForModule=function(e,t){e.loaderFields&&e.loaderFields.forEach((e,n)=>{t.set(n,e)}),e.fields.forEach((e,n)=>{t.set(n,e)})},t.containsUnknown=function e(t,n=!1,i=0){if(i>r.maxTypeRecursionCount)return!1;if(1===t.category)return!0;if(10===t.category){for(const s of t.subtypes)if(e(s,n,i+1))return!0;return!1}if(8===t.category)return e(t.classType,!1,i+1);if(7===t.category){if(t.typeArguments&&!n&&!r.ClassType.isPseudoGenericClass(t))for(const s of t.typeArguments)if(e(s,n,i+1))return!0;return!1}if(6===t.category)return t.overloads.some(t=>e(t,!1,i+1));if(5===t.category){for(let n=0;n<t.details.parameters.length;n++)if(t.details.parameters[n].name){if(e(r.FunctionType.getEffectiveParameterType(t,n),!1,i+1))return!0}return!(!t.details.declaredReturnType||!e(t.details.declaredReturnType))}return!1},t.getConcreteTypeFromTypeVar=C,t.requiresSpecialization=k,t.computeMroLinearization=function(e){let t=!0;const n=[];e.details.baseClasses.forEach(e=>{if(7===e.category){const t=_(e,!1);n.push(e.details.mro.map(e=>h(e,t)))}else n.push([e])}),n.push(e.details.baseClasses.map(t=>h(t,_(e,!1))));const i=_(e,!1);e.details.mro.push(h(e,i));const s=(e,t)=>t.some(t=>t.findIndex(t=>7===t.category&&r.ClassType.isSameGenericClass(t,e,!1))>0),o=(e,t)=>{for(let n=0;n<t.length;n++)t[n]=t[n].filter(t=>7!==t.category||!r.ClassType.isSameGenericClass(t,e,!1))};for(;;){let i=!1,r=void 0;for(let t=0;t<n.length;t++){const a=n[t];if(a.length>0){if(void 0===r&&(r=a),7!==a[0].category){i=!0,e.details.mro.push(a[0]),a.shift();break}if(!s(a[0],n)){i=!0,e.details.mro.push(a[0]),o(a[0],n);break}}}if(!r)break;i||(t=!1,7!==r[0].category?(e.details.mro.push(r[0]),r.shift()):(e.details.mro.push(r[0]),o(r[0],n)))}return t},t.printLiteralValue=E,t.printLiteralType=function(e){const t=E(e);return t?`Literal[${t}]`:""}},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equateStringsCaseSensitive=t.equateStringsCaseInsensitive=t.getStringComparer=t.compareStringsCaseSensitive=t.compareStringsCaseInsensitive=t.hashString=t.computeCompletionSimilarity=void 0;const i=n(121),s=n(23);function r(e,t){return e===t?0:void 0===e?-1:void 0===t?1:s.compareComparableValues(e.toUpperCase(),t.toUpperCase())}function o(e,t){return s.compareComparableValues(e,t)}t.computeCompletionSimilarity=function(e,t){if(t.startsWith(e))return 1;const n=t.toLocaleLowerCase(),s=e.toLocaleLowerCase();if(n.startsWith(s))return.75;let r=n.length,o=Number.MAX_VALUE;for(;r>0;){const e=i.default(n.substr(0,r),s);e<o&&(o=e),r--}return o>=e.length?0:.5*((e.length-o)/e.length)},t.hashString=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t},t.compareStringsCaseInsensitive=r,t.compareStringsCaseSensitive=o,t.getStringComparer=function(e){return e?r:o},t.equateStringsCaseInsensitive=function(e,t){return 0===r(e,t)},t.equateStringsCaseSensitive=function(e,t){return 0===o(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTypeAliasDeclaration=t.isFinalVariableDeclaration=t.areDeclarationsSame=t.hasTypeForDeclaration=void 0,t.hasTypeForDeclaration=function(e){switch(e.type){case 0:case 4:case 5:case 3:return!0;case 2:return!!e.node.typeAnnotation;case 1:return!!e.typeAnnotationNode;case 6:return!1}},t.areDeclarationsSame=function(e,t){return e.type===t.type&&(e.path===t.path&&(e.range.start.line===t.range.start.line&&e.range.start.character===t.range.start.character&&(6!==e.type||6!==t.type||e.symbolName===t.symbolName&&e.firstNamePart===t.firstNamePart&&e.usesLocalName===t.usesLocalName)))},t.isFinalVariableDeclaration=function(e){return 1===e.type&&!!e.isFinal},t.isTypeAliasDeclaration=function(e){return 1===e.type&&!!e.isTypeAlias}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSameWithoutLiteralValue=t.combineTypes=t.isUnionableType=t.removeFromUnion=t.removeNoneFromUnion=t.removeUnboundFromUnion=t.removeUnknownFromUnion=t.removeAnyFromUnion=t.isTypeSame=t.isPossiblyUnbound=t.isUnbound=t.isAnyOrUnknown=t.isNoneOrNever=t.isNever=t.TypeVarType=t.UnionType=t.AnyType=t.NeverType=t.NoneType=t.OverloadedFunctionType=t.FunctionType=t.ObjectType=t.ClassType=t.ModuleType=t.UnknownType=t.UnboundType=t.TypeBase=t.maxTypeRecursionCount=t.EnumLiteral=void 0;const i=n(2);class s{constructor(e,t){this.className=e,this.itemName=t}}var r,o,a,c,l,p,u,d;function h(e){return 4===e.category}function f(e){return 2===e.category||1===e.category||10===e.category&&void 0===e.subtypes.find(e=>!f(e))}function m(e,n,i=0){if(e.category!==n.category)return!1;if(i>t.maxTypeRecursionCount)return!0;switch(e.category){case 7:{const t=n;if(!a.isSameGenericClass(e,t,!0,i+1))return!1;const s=e.typeArguments||[],r=t.typeArguments||[],o=Math.max(s.length,r.length);for(let e=0;e<o;e++){if(!m(e<s.length?s[e]:u.create(),e<r.length?r[e]:u.create(),i+1))return!1}return!!a.isLiteralValueSame(e,t)}case 8:{const t=n;return m(e.classType,t.classType,i+1)}case 5:{const t=n,s=e.details.parameters,r=t.details.parameters;if(s.length!==r.length)return!1;for(let n=0;n<s.length;n++){const o=s[n],a=r[n];if(o.category!==a.category)return!1;if(o.name!==a.name)return!1;if(!m(l.getEffectiveParameterType(e,n),l.getEffectiveParameterType(t,n),i+1))return!1}let o=e.details.declaredReturnType;e.specializedTypes&&e.specializedTypes.returnType&&(o=e.specializedTypes.returnType);let a=t.details.declaredReturnType;return t.specializedTypes&&t.specializedTypes.returnType&&(a=t.specializedTypes.returnType),!!(!o&&!a||o&&a&&m(o,a,i+1))&&e.details.declaration===t.details.declaration}case 6:{const t=n;if(e.overloads.length!==t.overloads.length)return!1;for(let n=0;n<e.overloads.length;n++)if(!m(e.overloads[n],t.overloads[n]))return!1;return!0}case 10:{const t=n,s=e.subtypes,r=t.subtypes;return s.length===r.length&&void 0===s.find(e=>!d.containsType(t,e,i+1))}case 11:{const t=n;if(e.name!==t.name)return!1;const s=e.boundType,r=t.boundType;if(s){if(!r||!m(s,r,i+1))return!1}else if(r)return!1;if(e.isContravariant!==t.isContravariant)return!1;if(e.isCovariant!==t.isCovariant)return!1;const o=e.constraints,a=t.constraints;if(o.length!==a.length)return!1;for(let e=0;e<o.length;e++)if(!m(o[e],a[e],i+1))return!1;return!0}case 9:{const t=n;return e.fields===t.fields||0===e.fields.size&&0===t.fields.size}}return!0}function g(e,t){if(10===e.category){const n=e.subtypes.filter(e=>!t(e));if(n.length<e.subtypes.length)return y(n)}return e}function y(e){if(0===(e=e.filter(e=>4!==e.category)).length)return p.create();if(1===e.length)return e[0];let t=[];for(const n of e)10===n.category?t=t.concat(n.subtypes):t.push(n);t=t.sort((e,t)=>8===e.category&&void 0!==e.classType.literalValue||7===e.category&&void 0!==e.literalValue?1:8===t.category&&void 0!==t.classType.literalValue||7===t.category&&void 0!==t.literalValue?-1:0);const n=e=>8===e.category&&a.isBuiltIn(e.classType,"NoReturn");t.find(e=>n(e))&&(t=t.filter(e=>!n(e)));const i=[t[0]];return t.forEach((e,t)=>{t>0&&function(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(m(i,t))return;if(8===i.category&&8===t.category){if(_(i,t)&&void 0===i.classType.literalValue)return;if(a.isBuiltIn(i.classType,"bool")&&void 0!==t.classType.literalValue&&!t.classType.literalValue===i.classType.literalValue)return void(e[n]=c.create(a.cloneWithLiteral(i.classType,void 0)))}}e.push(t)}(i,e)}),1===i.length?i[0]:d.create(i)}function _(e,t){return!!m(e,t)||(7===t.category&&void 0!==t.literalValue?m(e,t=a.cloneWithLiteral(t,void 0)):8===t.category&&void 0!==t.classType.literalValue&&m(e,t=c.create(a.cloneWithLiteral(t.classType,void 0))))}t.EnumLiteral=s,t.maxTypeRecursionCount=16,function(e){e.isInstantiable=function(e){return 0!=(1&e.flags)},e.isInstance=function(e){return 0!=(2&e.flags)},e.cloneForTypeAlias=function(e,t,n,i){const s=Object.assign({},e);return s.typeAliasInfo={aliasName:t,typeParameters:n,typeArguments:i},s}}(r=t.TypeBase||(t.TypeBase={})),function(e){const t={category:0,flags:3};e.create=function(){return t}}(t.UnboundType||(t.UnboundType={})),function(e){const t={category:1,flags:3};e.create=function(){return t}}(o=t.UnknownType||(t.UnknownType={})),function(e){e.create=function(e){return{category:9,fields:e||new Map,loaderFields:new Map,flags:1}},e.getField=function(e,t){let n=e.fields.get(t);return!n&&e.loaderFields&&(n=e.loaderFields.get(t)),n}}(t.ModuleType||(t.ModuleType={})),function(e){function n(e,t,n,i){return{category:7,details:{name:e,flags:t,typeSourceId:n,baseClasses:[],mro:[],fields:new Map,typeParameters:[],docString:i},skipAbstractClassTest:!1,flags:1}}function i(e,t){return!!(1&e.details.flags)&&(void 0===t||e.details.name===t)}function r(e,n,i=!0,s=0){if(s>t.maxTypeRecursionCount)return!0;if(e.details===n.details)return!0;const r=i&&e.details.aliasClass?e.details.aliasClass.details:e.details,a=i&&n.details.aliasClass?n.details.aliasClass.details:n.details;if(r===a)return!0;if(r.name!==a.name||r.flags!==a.flags||r.typeSourceId!==a.typeSourceId||r.baseClasses.length!==a.baseClasses.length||r.typeParameters.length!==a.typeParameters.length)return!1;for(let e=0;e<r.baseClasses.length;e++)if(!m(r.baseClasses[e],a.baseClasses[e],s+1))return!1;if((r.metaClass||a.metaClass)&&(!r.metaClass||!a.metaClass||!m(r.metaClass,a.metaClass)))return!1;for(let e=0;e<r.typeParameters.length;e++)if(!m(r.typeParameters[e],a.typeParameters[e],s+1))return!1;const c=r.dataClassEntries||[],l=a.dataClassEntries||[];if(c.length!==l.length)return!1;for(let e=0;e<c.length;e++)if(c[e].name!==l[e].name||c[e].hasDefault!==l[e].hasDefault||!m(c[e].type,l[e].type,s+1))return!1;if(r.fields!==a.fields){if(r.fields.size!==a.fields.size)return!1;let e=!0;if(r.fields.forEach((t,n)=>{const i=a.fields.get(n);if(i){m(t.getSynthesizedType()||o.create(),i.getSynthesizedType()||o.create(),s+1)||(e=!1)}else e=!1}),!e)return!1}return!0}e.create=n,e.cloneForSpecialization=function(e,t,i=!1){const s=n(e.details.name,e.details.flags,e.details.typeSourceId);return s.details=e.details,s.typeArguments=t,void 0!==e.literalValue&&(s.literalValue=e.literalValue),void 0!==e.typeAliasInfo&&(s.typeAliasInfo=e.typeAliasInfo),i&&(s.skipAbstractClassTest=!0),s},e.cloneWithLiteral=function(e,t){const i=n(e.details.name,e.details.flags,e.details.typeSourceId);return i.details=e.details,e.typeArguments&&(i.typeArguments=e.typeArguments),void 0!==t&&(i.literalValue=t),void 0!==e.typeAliasInfo&&(i.typeAliasInfo=e.typeAliasInfo),e.skipAbstractClassTest&&(i.skipAbstractClassTest=!0),i},e.isLiteralValueSame=function(e,t){return void 0===e.literalValue?void 0===t.literalValue:void 0!==t.literalValue&&(e.literalValue instanceof s?t.literalValue instanceof s&&e.literalValue.itemName===t.literalValue.itemName:e.literalValue===t.literalValue)},e.isGeneric=function(e){return e.details.typeParameters.length>0&&void 0===e.typeArguments},e.isSpecialBuiltIn=function(e,t){return!!(2&e.details.flags)&&(void 0===t||e.details.name===t)},e.isBuiltIn=i,e.hasAbstractMethods=function(e){return!!(256&e.details.flags)&&!e.skipAbstractClassTest},e.supportsAbstractMethods=function(e){return!!(128&e.details.flags)},e.isDataClass=function(e){return!!(4&e.details.flags)},e.isSkipSynthesizedInit=function(e){return!!(8&e.details.flags)},e.isTypedDictClass=function(e){return!!(16&e.details.flags)},e.isCanOmitDictValues=function(e){return!!(32&e.details.flags)},e.isEnumClass=function(e){return!!(64&e.details.flags)},e.isPropertyClass=function(e){return!!(512&e.details.flags)},e.isFinal=function(e){return!!(1024&e.details.flags)},e.isProtocolClass=function(e){return!!(2048&e.details.flags)},e.isPseudoGenericClass=function(e){return!!(4096&e.details.flags)},e.getDataClassEntries=function(e){return e.details.dataClassEntries||[]},e.isRuntimeCheckable=function(e){return!!(8192&e.details.flags)},e.isTypingExtensionClass=function(e){return!!(16384&e.details.flags)},e.getTypeParameters=function(e){return e.details.aliasClass?e.details.aliasClass.details.typeParameters:e.details.typeParameters},e.hasUnknownBaseClass=function(e){return e.details.mro.some(e=>f(e))},e.isSameGenericClass=r,e.isDerivedFrom=function e(t,n,s){if(r(t,n))return s&&s.push(t),!0;if(i(t)&&i(n,"object"))return s&&s.push(n),!0;const a=t.details.aliasClass||t;for(const i of a.details.baseClasses)if(7===i.category){if(e(i,n,s))return s&&s.push(t),!0}else if(f(i))return s&&s.push(o.create()),!0;return!1}}(a=t.ClassType||(t.ClassType={})),function(e){e.create=function(e){return{category:8,classType:e,flags:2}}}(c=t.ObjectType||(t.ObjectType={})),function(e){function t(e,t,n,i){return{category:5,details:{name:e,flags:t,parameters:[],docString:i},flags:n}}e.createInstance=function(e,n,i){return t(e,n,2,i)},e.createInstantiable=function(e,n,i){return t(e,n,1,i)},e.clone=function(e,n=!1){const i=t(e.details.name,e.details.flags,e.flags,e.details.docString),s=n?1:0;return i.details={name:e.details.name,flags:e.details.flags,parameters:e.details.parameters.slice(s),declaredReturnType:e.details.declaredReturnType,declaration:e.details.declaration,builtInName:e.details.builtInName,docString:e.details.docString},n&&(i.details.flags&=-4,i.details.flags|=4,i.ignoreFirstParamOfDeclaration=!0),void 0!==e.typeAliasInfo&&(i.typeAliasInfo=e.typeAliasInfo),e.specializedTypes&&(i.specializedTypes={parameterTypes:e.specializedTypes.parameterTypes.slice(s),returnType:e.specializedTypes.returnType}),i.inferredReturnType=e.inferredReturnType,i},e.cloneAsInstance=function(e){i.assert(r.isInstantiable(e));const t=Object.assign({},e);return t.flags&=-2,t.flags|=2,t},e.cloneAsInstantiable=function(e){i.assert(r.isInstance(e));const t=Object.assign({},e);return t.flags&=-3,t.flags|=1,t},e.cloneForSpecialization=function(e,n,s){const r=t(e.details.name,e.details.flags,e.flags,e.details.docString);return r.details=e.details,i.assert(n.parameterTypes.length===e.details.parameters.length),r.specializedTypes=n,s&&(r.inferredReturnType=s),r},e.cloneForParameterSpecification=function(n,i){const s=t(n.details.name,n.details.flags,n.flags,n.details.docString);return s.details=Object.assign({},n.details),delete s.details.parameterSpecification,i?s.details.parameters=i.details.parameters:e.addDefaultParameters(s),s},e.addDefaultParameters=function(t,n=!1){e.addParameter(t,{category:1,name:"args",type:n?o.create():u.create()}),e.addParameter(t,{category:2,name:"kwargs",type:n?o.create():u.create()})},e.isInstanceMethod=function(e){return 0==(7&e.details.flags)},e.isConstructorMethod=function(e){return 0!=(1&e.details.flags)},e.isStaticMethod=function(e){return 0!=(4&e.details.flags)},e.isClassMethod=function(e){return 0!=(2&e.details.flags)},e.isAbstractMethod=function(e){return 0!=(8&e.details.flags)},e.isGenerator=function(e){return 0!=(16&e.details.flags)},e.isSynthesizedMethod=function(e){return 0!=(64&e.details.flags)},e.isSkipConstructorCheck=function(e){return 0!=(128&e.details.flags)},e.isOverloaded=function(e){return 0!=(256&e.details.flags)},e.isDefaultParameterCheckDisabled=function(e){return 0!=(32&e.details.flags)},e.isAsync=function(e){return 0!=(512&e.details.flags)},e.isWrapReturnTypeInAwait=function(e){return 0!=(1024&e.details.flags)},e.isStubDefinition=function(e){return 0!=(2048&e.details.flags)},e.isFinal=function(e){return 0!=(4096&e.details.flags)},e.hasUnannotatedParams=function(e){return 0!=(8192&e.details.flags)},e.getEffectiveParameterType=function(e,t){return i.assert(t<e.details.parameters.length),e.specializedTypes?e.specializedTypes.parameterTypes[t]:e.details.parameters[t].type},e.addParameter=function(e,t){e.details.parameters.push(t)},e.getSpecializedReturnType=function(e){return e.specializedTypes&&e.specializedTypes.returnType?e.specializedTypes.returnType:e.details.declaredReturnType}}(l=t.FunctionType||(t.FunctionType={})),function(e){e.create=function(e=[]){return{category:6,overloads:e,flags:2}},e.addOverload=function(e,t){e.overloads.push(t)}}(t.OverloadedFunctionType||(t.OverloadedFunctionType={})),function(e){const t={category:3,flags:3};e.create=function(){return t}}(t.NoneType||(t.NoneType={})),function(e){const t={category:4,flags:3};e.create=function(){return t}}(p=t.NeverType||(t.NeverType={})),function(e){const t={category:2,isEllipsis:!1,flags:3},n={category:2,isEllipsis:!0,flags:3};e.create=function(e=!1){return e?n:t}}(u=t.AnyType||(t.AnyType={})),function(e){function t(e,t){for(const n of t)i.assert(10!==n.category),i.assert(4!==n.category),e.flags&=n.flags,e.subtypes.push(n)}e.create=function(e=[]){const n={category:10,subtypes:[],flags:3};return t(n,e),n},e.addTypes=t,e.containsType=function(e,t,n=0){return void 0!==e.subtypes.find(e=>m(e,t,n+1))}}(d=t.UnionType||(t.UnionType={})),function(e){function t(e,t,n,i){return{category:11,name:e,constraints:[],isCovariant:!1,isContravariant:!1,isParameterSpec:t,isSynthesized:n,flags:i}}e.createInstance=function(e,n,i=!1){return t(e,n,i,2)},e.createInstantiable=function(e,n,i=!1){return t(e,n,i,1)},e.cloneAsInstance=function(e){i.assert(r.isInstantiable(e));const t=Object.assign({},e);return t.flags&=-2,t.flags|=2,t},e.cloneAsInstantiable=function(e){i.assert(r.isInstance(e));const t=Object.assign({},e);return t.flags&=-3,t.flags|=1,t},e.addConstraint=function(e,t){e.constraints.push(t)}}(t.TypeVarType||(t.TypeVarType={})),t.isNever=h,t.isNoneOrNever=function(e){return 3===e.category||h(e)},t.isAnyOrUnknown=f,t.isUnbound=function(e){return 0===e.category},t.isPossiblyUnbound=function e(t){return 0===t.category||10===t.category&&void 0!==t.subtypes.find(t=>e(t))},t.isTypeSame=m,t.removeAnyFromUnion=function(e){return g(e,e=>f(e))},t.removeUnknownFromUnion=function(e){return g(e,e=>1===e.category)},t.removeUnboundFromUnion=function(e){return g(e,e=>0===e.category)},t.removeNoneFromUnion=function(e){return g(e,e=>3===e.category)},t.removeFromUnion=g,t.isUnionableType=function(e){let t=3;for(const n of e)t&=n.flags;return 0!=(1&t)&&0==(2&t)},t.combineTypes=y,t.isSameWithoutLiteralValue=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Localizer=t.ParameterizedString=void 0;const i=n(2),s=n(133),r=n(134),o=n(135),a=n(136),c=n(137),l=n(138),p=n(139),u=n(140);class d{constructor(e){this._formatString=e}format(e){let t=this._formatString;return Object.keys(e).forEach(n=>{t=t.replace(`{${n}}`,e[n].toString())}),t}getFormatString(){return this._formatString}}t.ParameterizedString=d;const h={de:r,"en-us":s,es:o,fr:a,ja:c,ru:l,"zh-cn":p,"zh-tw":u};let f=void 0,m={};function g(e){void 0===f&&(m=function(){const e=_("en-us");return e||(console.error("Could not load default strings"),{})}(),f=function(e){if("en-us"===e)return{};let t=_(e);if(void 0!==t)return t;const n=e.split("-");return n.length>0&&n[0]&&(t=_(n[0]),void 0!==t)?t:{}}(function(){const e=process.env,t=e.VSCODE_NLS_CONFIG;if(t)try{return JSON.parse(t).locale}catch(e){}const n=e.LC_ALL||e.LC_MESSAGES||e.LANG||e.LANGUAGE;if(n){const e=n.split(".");if(e.length>0&&e[0])return e[0]}return"en-us"}()));const t=e.split("."),n=y(f,t)||y(m,t);if(n)return n;i.fail(`Missing localized string for key "${e}"`)}function y(e,t){let n=e;for(const e of t){if(!n[e])return;n=n[e]}return n}function _(e){return h[e]}!function(e){let t,n,i;!function(e){e.annotatedTypeArgMissing=()=>g("Diagnostic.annotatedTypeArgMissing"),e.annotationFormatString=()=>g("Diagnostic.annotationFormatString"),e.annotationNotSupported=()=>g("Diagnostic.annotationNotSupported"),e.annotationSpansStrings=()=>g("Diagnostic.annotationSpansStrings"),e.annotationStringEscape=()=>g("Diagnostic.annotationStringEscape"),e.annotationTripleQuote=()=>g("Diagnostic.annotationTripleQuote"),e.argAssignment=()=>new d(g("Diagnostic.argAssignment")),e.argAssignmentFunction=()=>new d(g("Diagnostic.argAssignmentFunction")),e.argAssignmentParam=()=>new d(g("Diagnostic.argAssignmentParam")),e.argAssignmentParamFunction=()=>new d(g("Diagnostic.argAssignmentParamFunction")),e.argMissingForParam=()=>new d(g("Diagnostic.argMissingForParam")),e.argMissingForParams=()=>new d(g("Diagnostic.argMissingForParams")),e.argPositional=()=>g("Diagnostic.argPositional"),e.argPositionalExpectedCount=()=>new d(g("Diagnostic.argPositionalExpectedCount")),e.argPositionalExpectedOne=()=>g("Diagnostic.argPositionalExpectedOne"),e.argTypePartiallyUnknown=()=>g("Diagnostic.argTypePartiallyUnknown"),e.argTypeUnknown=()=>g("Diagnostic.argTypeUnknown"),e.assertAlwaysTrue=()=>g("Diagnostic.assertAlwaysTrue"),e.assignmentExprContext=()=>g("Diagnostic.assignmentExprContext"),e.assignmentExprComprehension=()=>new d(g("Diagnostic.assignmentExprComprehension")),e.assignmentInProtocol=()=>g("Diagnostic.assignmentInProtocol"),e.assignmentTargetExpr=()=>g("Diagnostic.assignmentTargetExpr"),e.awaitIllegal=()=>g("Diagnostic.awaitIllegal"),e.awaitNotInAsync=()=>g("Diagnostic.awaitNotInAsync"),e.backticksIllegal=()=>g("Diagnostic.backticksIllegal"),e.baseClassCircular=()=>g("Diagnostic.baseClassCircular"),e.baseClassDoubleGeneric=()=>g("Diagnostic.baseClassDoubleGeneric"),e.baseClassInvalid=()=>g("Diagnostic.baseClassInvalid"),e.baseClassFinal=()=>new d(g("Diagnostic.baseClassFinal")),e.baseClassUnknown=()=>g("Diagnostic.baseClassUnknown"),e.breakOutsideLoop=()=>g("Diagnostic.breakOutsideLoop"),e.callableExtraArgs=()=>g("Diagnostic.callableExtraArgs"),e.callableFirstArg=()=>g("Diagnostic.callableFirstArg"),e.classMethodClsParam=()=>g("Diagnostic.classMethodClsParam"),e.classDecoratorTypeUnknown=()=>g("Diagnostic.classDecoratorTypeUnknown"),e.classVarFirstArgMissing=()=>g("Diagnostic.classVarFirstArgMissing"),e.classVarTooManyArgs=()=>g("Diagnostic.classVarTooManyArgs"),e.comprehensionInDict=()=>g("Diagnostic.comprehensionInDict"),e.comprehensionInSet=()=>g("Diagnostic.comprehensionInSet"),e.constantRedefinition=()=>new d(g("Diagnostic.constantRedefinition")),e.constructorNoArgs=()=>new d(g("Diagnostic.constructorNoArgs")),e.continueInFinally=()=>g("Diagnostic.continueInFinally"),e.continueOutsideLoop=()=>g("Diagnostic.continueOutsideLoop"),e.dataClassFieldWithDefault=()=>g("Diagnostic.dataClassFieldWithDefault"),e.declaredReturnTypePartiallyUnknown=()=>new d(g("Diagnostic.declaredReturnTypePartiallyUnknown")),e.declaredReturnTypeUnknown=()=>g("Diagnostic.declaredReturnTypeUnknown"),e.defaultValueContainsCall=()=>g("Diagnostic.defaultValueContainsCall"),e.defaultValueNotAllowed=()=>g("Diagnostic.defaultValueNotAllowed"),e.dictInAnnotation=()=>g("Diagnostic.dictInAnnotation"),e.dictKeyValuePairs=()=>g("Diagnostic.dictKeyValuePairs"),e.delTargetExpr=()=>g("Diagnostic.delTargetExpr"),e.duplicateArgsParam=()=>g("Diagnostic.duplicateArgsParam"),e.duplicateCatchAll=()=>g("Diagnostic.duplicateCatchAll"),e.duplicateImport=()=>new d(g("Diagnostic.duplicateImport")),e.duplicateKwargsParam=()=>g("Diagnostic.duplicateKwargsParam"),e.duplicateNameOnly=()=>g("Diagnostic.duplicateNameOnly"),e.duplicateParam=()=>new d(g("Diagnostic.duplicateParam")),e.duplicatePositionOnly=()=>g("Diagnostic.duplicatePositionOnly"),e.duplicateUnpack=()=>g("Diagnostic.duplicateUnpack"),e.ellipsisContext=()=>g("Diagnostic.ellipsisContext"),e.ellipsisSecondArg=()=>g("Diagnostic.ellipsisSecondArg"),e.enumFirstArg=()=>g("Diagnostic.enumFirstArg"),e.enumSecondArg=()=>g("Diagnostic.enumSecondArg"),e.exceptionTypeIncorrect=()=>new d(g("Diagnostic.exceptionTypeIncorrect")),e.exceptionTypeNotClass=()=>new d(g("Diagnostic.exceptionTypeNotClass")),e.expectedAfterDecorator=()=>g("Diagnostic.expectedAfterDecorator"),e.expectedAsAfterException=()=>g("Diagnostic.expectedAsAfterException"),e.expectedAssignRightHandExpr=()=>g("Diagnostic.expectedAssignRightHandExpr"),e.expectedBinaryRightHandExpr=()=>g("Diagnostic.expectedBinaryRightHandExpr"),e.expectedBoolLiteral=()=>g("Diagnostic.expectedBoolLiteral"),e.expectedClassName=()=>g("Diagnostic.expectedClassName"),e.expectedCloseBracket=()=>g("Diagnostic.expectedCloseBracket"),e.expectedCloseBrace=()=>g("Diagnostic.expectedCloseBrace"),e.expectedCloseParen=()=>g("Diagnostic.expectedCloseParen"),e.expectedColon=()=>g("Diagnostic.expectedColon"),e.expectedDecoratorName=()=>g("Diagnostic.expectedDecoratorName"),e.expectedDecoratorNewline=()=>g("Diagnostic.expectedDecoratorNewline"),e.expectedDelExpr=()=>g("Diagnostic.expectedDelExpr"),e.expectedElse=()=>g("Diagnostic.expectedElse"),e.expectedExceptionClass=()=>g("Diagnostic.expectedExceptionClass"),e.expectedExceptionObj=()=>g("Diagnostic.expectedExceptionObj"),e.expectedExpr=()=>g("Diagnostic.expectedExpr"),e.expectedImport=()=>g("Diagnostic.expectedImport"),e.expectedImportAlias=()=>g("Diagnostic.expectedImportAlias"),e.expectedImportSymbols=()=>g("Diagnostic.expectedImportSymbols"),e.expectedIdentifier=()=>g("Diagnostic.expectedIdentifier"),e.expectedIndentedBlock=()=>g("Diagnostic.expectedIndentedBlock"),e.expectedIn=()=>g("Diagnostic.expectedIn"),e.expectedInExpr=()=>g("Diagnostic.expectedInExpr"),e.expectedFunctionAfterAsync=()=>g("Diagnostic.expectedFunctionAfterAsync"),e.expectedFunctionName=()=>g("Diagnostic.expectedFunctionName"),e.expectedMemberName=()=>g("Diagnostic.expectedMemberName"),e.expectedModuleName=()=>g("Diagnostic.expectedModuleName"),e.expectedNameAfterAs=()=>g("Diagnostic.expectedNameAfterAs"),e.expectedNamedArgument=()=>g("Diagnostic.expectedNamedArgument"),e.expectedNewlineOrSemicolon=()=>g("Diagnostic.expectedNewlineOrSemicolon"),e.expectedOpenParen=()=>g("Diagnostic.expectedOpenParen"),e.expectedParamName=()=>g("Diagnostic.expectedParamName"),e.expectedReturnExpr=()=>g("Diagnostic.expectedReturnExpr"),e.expectedSliceIndex=()=>g("Diagnostic.expectedSliceIndex"),e.expectedTypeNotString=()=>g("Diagnostic.expectedTypeNotString"),e.expectedYieldExpr=()=>g("Diagnostic.expectedYieldExpr"),e.finalContext=()=>g("Diagnostic.finalContext"),e.finalMethodOverride=()=>new d(g("Diagnostic.finalMethodOverride")),e.finalReassigned=()=>new d(g("Diagnostic.finalReassigned")),e.finalRedeclaration=()=>new d(g("Diagnostic.finalRedeclaration")),e.finalRedeclarationBySubclass=()=>new d(g("Diagnostic.finalRedeclarationBySubclass")),e.finalTooManyArgs=()=>g("Diagnostic.finalTooManyArgs"),e.finalUnassigned=()=>new d(g("Diagnostic.finalUnassigned")),e.formatStringBrace=()=>g("Diagnostic.formatStringBrace"),e.formatStringBytes=()=>g("Diagnostic.formatStringBytes"),e.formatStringEscape=()=>g("Diagnostic.formatStringEscape"),e.formatStringIllegal=()=>g("Diagnostic.formatStringIllegal"),e.formatStringUnicode=()=>g("Diagnostic.formatStringUnicode"),e.formatStringUnterminated=()=>g("Diagnostic.formatStringUnterminated"),e.functionDecoratorTypeUnknown=()=>g("Diagnostic.functionDecoratorTypeUnknown"),e.genericClassAssigned=()=>g("Diagnostic.genericClassAssigned"),e.genericClassDeleted=()=>g("Diagnostic.genericClassDeleted"),e.genericTypeArgMissing=()=>g("Diagnostic.genericTypeArgMissing"),e.genericTypeArgTypeVar=()=>g("Diagnostic.genericTypeArgTypeVar"),e.genericTypeArgUnique=()=>g("Diagnostic.genericTypeArgUnique"),e.globalReassignment=()=>new d(g("Diagnostic.globalReassignment")),e.globalRedefinition=()=>new d(g("Diagnostic.globalRedefinition")),e.implicitStringConcat=()=>g("Diagnostic.implicitStringConcat"),e.importCycleDetected=()=>g("Diagnostic.importCycleDetected"),e.importDepthExceeded=()=>new d(g("Diagnostic.importDepthExceeded")),e.importResolveFailure=()=>new d(g("Diagnostic.importResolveFailure")),e.importSourceResolveFailure=()=>new d(g("Diagnostic.importSourceResolveFailure")),e.importSymbolUnknown=()=>new d(g("Diagnostic.importSymbolUnknown")),e.incompatibleMethodOverride=()=>new d(g("Diagnostic.incompatibleMethodOverride")),e.inconsistentIndent=()=>g("Diagnostic.inconsistentIndent"),e.inconsistentTabs=()=>g("Diagnostic.inconsistentTabs"),e.initSubclassClsParam=()=>g("Diagnostic.initSubclassClsParam"),e.instanceMethodSelfParam=()=>g("Diagnostic.instanceMethodSelfParam"),e.invalidIdentifierChar=()=>g("Diagnostic.invalidIdentifierChar"),e.invalidTokenChars=()=>new d(g("Diagnostic.invalidTokenChars")),e.keyRequiredDeleted=()=>new d(g("Diagnostic.keyRequiredDeleted")),e.keyValueInSet=()=>g("Diagnostic.keyValueInSet"),e.lambdaReturnTypeUnknown=()=>g("Diagnostic.lambdaReturnTypeUnknown"),e.lambdaReturnTypePartiallyUnknown=()=>new d(g("Diagnostic.lambdaReturnTypePartiallyUnknown")),e.listInAnnotation=()=>g("Diagnostic.listInAnnotation"),e.literalUnsupportedType=()=>g("Diagnostic.literalUnsupportedType"),e.literalEmptyArgs=()=>g("Diagnostic.literalEmptyArgs"),e.memberAccess=()=>new d(g("Diagnostic.memberAccess")),e.memberDelete=()=>new d(g("Diagnostic.memberDelete")),e.memberSet=()=>new d(g("Diagnostic.memberSet")),e.metaclassDuplicate=()=>g("Diagnostic.metaclassDuplicate"),e.methodNotDefined=()=>new d(g("Diagnostic.methodNotDefined")),e.methodNotDefinedOnType=()=>new d(g("Diagnostic.methodNotDefinedOnType")),e.methodOrdering=()=>g("Diagnostic.methodOrdering"),e.methodReturnsNonObject=()=>new d(g("Diagnostic.methodReturnsNonObject")),e.moduleContext=()=>g("Diagnostic.moduleContext"),e.moduleUnknownMember=()=>new d(g("Diagnostic.moduleUnknownMember")),e.namedExceptAfterCatchAll=()=>g("Diagnostic.namedExceptAfterCatchAll"),e.namedTupleEmptyName=()=>g("Diagnostic.namedTupleEmptyName"),e.namedTupleFirstArg=()=>g("Diagnostic.namedTupleFirstArg"),e.namedTupleNameString=()=>g("Diagnostic.namedTupleNameString"),e.namedTupleNameType=()=>g("Diagnostic.namedTupleNameType"),e.namedTupleNameUnique=()=>g("Diagnostic.namedTupleNameUnique"),e.namedTupleNoTypes=()=>g("Diagnostic.namedTupleNoTypes"),e.namedTupleSecondArg=()=>g("Diagnostic.namedTupleSecondArg"),e.newClsParam=()=>g("Diagnostic.newClsParam"),e.nonDefaultAfterDefault=()=>g("Diagnostic.nonDefaultAfterDefault"),e.noneNotCallable=()=>g("Diagnostic.noneNotCallable"),e.noneNotIterable=()=>g("Diagnostic.noneNotIterable"),e.noneNotSubscriptable=()=>g("Diagnostic.noneNotSubscriptable"),e.noneNotUsableWith=()=>g("Diagnostic.noneNotUsableWith"),e.noneOperator=()=>new d(g("Diagnostic.noneOperator")),e.noneUnknownMember=()=>new d(g("Diagnostic.noneUnknownMember")),e.nonLocalNoBinding=()=>new d(g("Diagnostic.nonLocalNoBinding")),e.nonLocalReassignment=()=>new d(g("Diagnostic.nonLocalReassignment")),e.nonLocalRedefinition=()=>new d(g("Diagnostic.nonLocalRedefinition")),e.nonLocalInModule=()=>g("Diagnostic.nonLocalInModule"),e.noOverload=()=>new d(g("Diagnostic.noOverload")),e.noReturnContainsReturn=()=>g("Diagnostic.noReturnContainsReturn"),e.noReturnContainsYield=()=>g("Diagnostic.noReturnContainsYield"),e.noReturnReturnsNone=()=>g("Diagnostic.noReturnReturnsNone"),e.objectNotCallable=()=>new d(g("Diagnostic.objectNotCallable")),e.obscuredClassDeclaration=()=>new d(g("Diagnostic.obscuredClassDeclaration")),e.obscuredFunctionDeclaration=()=>new d(g("Diagnostic.obscuredFunctionDeclaration")),e.obscuredParameterDeclaration=()=>new d(g("Diagnostic.obscuredParameterDeclaration")),e.obscuredVariableDeclaration=()=>new d(g("Diagnostic.obscuredVariableDeclaration")),e.operatorLessOrGreaterDeprecated=()=>g("Diagnostic.operatorLessOrGreaterDeprecated"),e.optionalExtraArgs=()=>g("Diagnostic.optionalExtraArgs"),e.paramAfterKwargsParam=()=>g("Diagnostic.paramAfterKwargsParam"),e.paramAlreadyAssigned=()=>new d(g("Diagnostic.paramAlreadyAssigned")),e.paramNameMissing=()=>new d(g("Diagnostic.paramNameMissing")),e.paramSpecAssignedName=()=>new d(g("Diagnostic.paramSpecAssignedName")),e.paramSpecContext=()=>g("Diagnostic.paramSpecContext"),e.paramSpecIllegal=()=>g("Diagnostic.paramSpecIllegal"),e.paramSpecFirstArg=()=>g("Diagnostic.paramSpecFirstArg"),e.paramSpecUnknownArg=()=>g("Diagnostic.paramSpecUnknownArg"),e.paramSpecUnknownMember=()=>new d(g("Diagnostic.paramSpecUnknownMember")),e.paramSpecUnknownParam=()=>new d(g("Diagnostic.paramSpecUnknownParam")),e.paramTypeUnknown=()=>new d(g("Diagnostic.paramTypeUnknown")),e.paramAssignmentMismatch=()=>new d(g("Diagnostic.paramAssignmentMismatch")),e.paramTypePartiallyUnknown=()=>new d(g("Diagnostic.paramTypePartiallyUnknown")),e.positionArgAfterNamedArg=()=>g("Diagnostic.positionArgAfterNamedArg"),e.positionOnlyAfterNameOnly=()=>g("Diagnostic.positionOnlyAfterNameOnly"),e.positionOnlyIncompatible=()=>g("Diagnostic.positionOnlyIncompatible"),e.privateUsedOutsideOfClass=()=>new d(g("Diagnostic.privateUsedOutsideOfClass")),e.privateUsedOutsideOfModule=()=>new d(g("Diagnostic.privateUsedOutsideOfModule")),e.protectedUsedOutsideOfClass=()=>new d(g("Diagnostic.protectedUsedOutsideOfClass")),e.protocolIllegal=()=>g("Diagnostic.protocolIllegal"),e.protocolUsedInCall=()=>new d(g("Diagnostic.protocolUsedInCall")),e.raiseParams=()=>g("Diagnostic.raiseParams"),e.returnMissing=()=>new d(g("Diagnostic.returnMissing")),e.returnOutsideFunction=()=>g("Diagnostic.returnOutsideFunction"),e.returnTypeMismatch=()=>new d(g("Diagnostic.returnTypeMismatch")),e.returnTypeUnknown=()=>g("Diagnostic.returnTypeUnknown"),e.returnTypePartiallyUnknown=()=>new d(g("Diagnostic.returnTypePartiallyUnknown")),e.staticClsSelfParam=()=>g("Diagnostic.staticClsSelfParam"),e.stubFileMissing=()=>new d(g("Diagnostic.stubFileMissing")),e.stringNonAsciiBytes=()=>g("Diagnostic.stringNonAsciiBytes"),e.stringUnsupportedEscape=()=>g("Diagnostic.stringUnsupportedEscape"),e.stringUnterminated=()=>g("Diagnostic.stringUnterminated"),e.sublistParamsIncompatible=()=>g("Diagnostic.sublistParamsIncompatible"),e.superCallArgCount=()=>g("Diagnostic.superCallArgCount"),e.superCallFirstArg=()=>new d(g("Diagnostic.superCallFirstArg")),e.superCallSecondArg=()=>new d(g("Diagnostic.superCallSecondArg")),e.superCallZeroArgForm=()=>g("Diagnostic.superCallZeroArgForm"),e.symbolIsUnbound=()=>new d(g("Diagnostic.symbolIsUnbound")),e.symbolIsUndefined=()=>new d(g("Diagnostic.symbolIsUndefined")),e.symbolIsPossiblyUnbound=()=>new d(g("Diagnostic.symbolIsPossiblyUnbound")),e.tupleInAnnotation=()=>g("Diagnostic.tupleInAnnotation"),e.tupleSizeMismatch=()=>new d(g("Diagnostic.tupleSizeMismatch")),e.typeAbstract=()=>new d(g("Diagnostic.typeAbstract")),e.typeAliasNotInModule=()=>g("Diagnostic.typeAliasNotInModule"),e.typeAliasRedeclared=()=>new d(g("Diagnostic.typeAliasRedeclared")),e.typeArgsExpectingNone=()=>g("Diagnostic.typeArgsExpectingNone"),e.typeArgsMismatchOne=()=>new d(g("Diagnostic.typeArgsMismatchOne")),e.typeArgsTooMany=()=>new d(g("Diagnostic.typeArgsTooMany")),e.typeAssignmentMismatch=()=>new d(g("Diagnostic.typeAssignmentMismatch")),e.typeCallNotAllowed=()=>g("Diagnostic.typeCallNotAllowed"),e.typeClassFirstArg=()=>g("Diagnostic.typeClassFirstArg"),e.typeClassSecondArg=()=>g("Diagnostic.typeClassSecondArg"),e.typedDictAccess=()=>g("Diagnostic.typedDictAccess"),e.typedDictBadVar=()=>g("Diagnostic.typedDictBadVar"),e.typedDictBaseClass=()=>g("Diagnostic.typedDictBaseClass"),e.typedDictDelete=()=>g("Diagnostic.typedDictDelete"),e.typedDictEmptyName=()=>g("Diagnostic.typedDictEmptyName"),e.typedDictEntryName=()=>g("Diagnostic.typedDictEntryName"),e.typedDictEntryUnique=()=>g("Diagnostic.typedDictEntryUnique"),e.typedDictExtraArgs=()=>g("Diagnostic.typedDictExtraArgs"),e.typedDictFirstArg=()=>g("Diagnostic.typedDictFirstArg"),e.typedDictSecondArgDict=()=>g("Diagnostic.typedDictSecondArgDict"),e.typedDictSecondArgDictEntry=()=>g("Diagnostic.typedDictSecondArgDictEntry"),e.typedDictSet=()=>g("Diagnostic.typedDictSet"),e.typedDictTotalParam=()=>g("Diagnostic.typedDictTotalParam"),e.typeExpectedClass=()=>new d(g("Diagnostic.typeExpectedClass")),e.typeNotAwaitable=()=>new d(g("Diagnostic.typeNotAwaitable")),e.typeNotCallable=()=>new d(g("Diagnostic.typeNotCallable")),e.typeNotIntantiable=()=>new d(g("Diagnostic.typeNotIntantiable")),e.typeNotIterable=()=>new d(g("Diagnostic.typeNotIterable")),e.typeNotSpecializable=()=>new d(g("Diagnostic.typeNotSpecializable")),e.typeNotSubscriptable=()=>new d(g("Diagnostic.typeNotSubscriptable")),e.typeNotUsableWith=()=>new d(g("Diagnostic.typeNotUsableWith")),e.typeNotSupportBinaryOperator=()=>new d(g("Diagnostic.typeNotSupportBinaryOperator")),e.typeNotSupportUnaryOperator=()=>new d(g("Diagnostic.typeNotSupportUnaryOperator")),e.typePartiallyUnknown=()=>new d(g("Diagnostic.typePartiallyUnknown")),e.typeUnknown=()=>new d(g("Diagnostic.typeUnknown")),e.typeVarAssignedName=()=>new d(g("Diagnostic.typeVarAssignedName")),e.typeVarAssignmentMismatch=()=>new d(g("Diagnostic.typeVarAssignmentMismatch")),e.typeVarBoundAndConstrained=()=>g("Diagnostic.typeVarBoundAndConstrained"),e.typeVarFirstArg=()=>g("Diagnostic.typeVarFirstArg"),e.typeVarGeneric=()=>g("Diagnostic.typeVarGeneric"),e.typeVarUnknownParam=()=>new d(g("Diagnostic.typeVarUnknownParam")),e.typeVarVariance=()=>g("Diagnostic.typeVarVariance"),e.unaccessedClass=()=>new d(g("Diagnostic.unaccessedClass")),e.unaccessedFunction=()=>new d(g("Diagnostic.unaccessedFunction")),e.unaccessedImport=()=>new d(g("Diagnostic.unaccessedImport")),e.unaccessedSymbol=()=>new d(g("Diagnostic.unaccessedSymbol")),e.unaccessedVariable=()=>new d(g("Diagnostic.unaccessedVariable")),e.unexpectedAsyncToken=()=>g("Diagnostic.unexpectedAsyncToken"),e.unexpectedExprToken=()=>g("Diagnostic.unexpectedExprToken"),e.unexpectedIndent=()=>g("Diagnostic.unexpectedIndent"),e.unexpectedUnindent=()=>g("Diagnostic.unexpectedUnindent"),e.unionSyntaxIllegal=()=>g("Diagnostic.unionSyntaxIllegal"),e.unnecessaryCast=()=>new d(g("Diagnostic.unnecessaryCast")),e.unnecessaryIsInstanceNever=()=>new d(g("Diagnostic.unnecessaryIsInstanceNever")),e.unnecessaryIsInstanceAlways=()=>new d(g("Diagnostic.unnecessaryIsInstanceAlways")),e.unnecessaryIsSubclassAlways=()=>new d(g("Diagnostic.unnecessaryIsSubclassAlways")),e.unnecessaryIsSubclassNever=()=>new d(g("Diagnostic.unnecessaryIsSubclassNever")),e.unpackInDict=()=>g("Diagnostic.unpackInDict"),e.unpackInSet=()=>g("Diagnostic.unpackInSet"),e.unpackTuplesIllegal=()=>g("Diagnostic.unpackTuplesIllegal"),e.unreachableCode=()=>g("Diagnostic.unreachableCode"),e.varAnnotationIllegal=()=>g("Diagnostic.varAnnotationIllegal"),e.walrusIllegal=()=>g("Diagnostic.walrusIllegal"),e.walrusNotAllowed=()=>g("Diagnostic.walrusNotAllowed"),e.wildcardInFunction=()=>g("Diagnostic.wildcardInFunction"),e.yieldFromIllegal=()=>g("Diagnostic.yieldFromIllegal"),e.yieldFromOutsideAsync=()=>g("Diagnostic.yieldFromOutsideAsync"),e.yieldOutsideFunction=()=>g("Diagnostic.yieldOutsideFunction"),e.yieldTypeMismatch=()=>new d(g("Diagnostic.yieldTypeMismatch"))}(t=e.Diagnostic||(e.Diagnostic={})),function(e){e.argParam=()=>new d(g("DiagnosticAddendum.argParam")),e.argParamFunction=()=>new d(g("DiagnosticAddendum.argParamFunction")),e.argumentType=()=>new d(g("DiagnosticAddendum.argumentType")),e.argumentTypes=()=>new d(g("DiagnosticAddendum.argumentTypes")),e.assignToNone=()=>g("DiagnosticAddendum.assignToNone"),e.asyncHelp=()=>g("DiagnosticAddendum.asyncHelp"),e.finalMethod=()=>g("DiagnosticAddendum.finalMethod"),e.functionReturnTypeMismatch=()=>new d(g("DiagnosticAddendum.functionReturnTypeMismatch")),e.functionTooFewParams=()=>new d(g("DiagnosticAddendum.functionTooFewParams")),e.functionTooManyParams=()=>new d(g("DiagnosticAddendum.functionTooManyParams")),e.keyUndefined=()=>new d(g("DiagnosticAddendum.keyUndefined")),e.literalAssignmentMismatch=()=>new d(g("DiagnosticAddendum.literalAssignmentMismatch")),e.memberAssignment=()=>new d(g("DiagnosticAddendum.memberAssignment")),e.memberIsAbstract=()=>new d(g("DiagnosticAddendum.memberIsAbstract")),e.memberIsAbstractMore=()=>new d(g("DiagnosticAddendum.memberIsAbstractMore")),e.memberSetClassVar=()=>new d(g("DiagnosticAddendum.memberSetClassVar")),e.memberTypeMismatch=()=>new d(g("DiagnosticAddendum.memberTypeMismatch")),e.memberUnknown=()=>new d(g("DiagnosticAddendum.memberUnknown")),e.namedParamMissingInDest=()=>new d(g("DiagnosticAddendum.namedParamMissingInDest")),e.namedParamMissingInSource=()=>new d(g("DiagnosticAddendum.namedParamMissingInSource")),e.namedParamTypeMismatch=()=>new d(g("DiagnosticAddendum.namedParamTypeMismatch")),e.noOverloadAssignable=()=>new d(g("DiagnosticAddendum.noOverloadAssignable")),e.overloadCallName=()=>new d(g("DiagnosticAddendum.overloadCallName")),e.overriddenMethod=()=>g("DiagnosticAddendum.overriddenMethod"),e.overrideParamCount=()=>new d(g("DiagnosticAddendum.overrideParamCount")),e.overrideParamName=()=>new d(g("DiagnosticAddendum.overrideParamName")),e.overrideParamType=()=>new d(g("DiagnosticAddendum.overrideParamType")),e.overrideReturnType=()=>new d(g("DiagnosticAddendum.overrideReturnType")),e.overrideType=()=>new d(g("DiagnosticAddendum.overrideType")),e.paramAssignment=()=>new d(g("DiagnosticAddendum.paramAssignment")),e.paramType=()=>new d(g("DiagnosticAddendum.paramType")),e.propertyMissingDeleter=()=>new d(g("DiagnosticAddendum.propertyMissingDeleter")),e.propertyMissingSetter=()=>new d(g("DiagnosticAddendum.propertyMissingSetter")),e.protocolMemberClassVar=()=>new d(g("DiagnosticAddendum.protocolMemberClassVar")),e.protocolMemberMissing=()=>new d(g("DiagnosticAddendum.protocolMemberMissing")),e.seeDeclaration=()=>g("DiagnosticAddendum.seeDeclaration"),e.seeClassDeclaration=()=>g("DiagnosticAddendum.seeClassDeclaration"),e.seeFunctionDeclaration=()=>g("DiagnosticAddendum.seeFunctionDeclaration"),e.seeMethodDeclaration=()=>g("DiagnosticAddendum.seeMethodDeclaration"),e.seeParameterDeclaration=()=>g("DiagnosticAddendum.seeParameterDeclaration"),e.seeVariableDeclaration=()=>g("DiagnosticAddendum.seeVariableDeclaration"),e.tupleEntryTypeMismatch=()=>new d(g("DiagnosticAddendum.tupleEntryTypeMismatch")),e.tupleSizeMismatch=()=>new d(g("DiagnosticAddendum.tupleSizeMismatch")),e.typeAssignmentMismatch=()=>new d(g("DiagnosticAddendum.typeAssignmentMismatch")),e.typeBound=()=>new d(g("DiagnosticAddendum.typeBound")),e.typeConstrainedTypeVar=()=>new d(g("DiagnosticAddendum.typeConstrainedTypeVar")),e.typeConstraint=()=>new d(g("DiagnosticAddendum.typeConstraint")),e.typedDictFieldMissing=()=>new d(g("DiagnosticAddendum.typedDictFieldMissing")),e.typedDictFieldNotRequired=()=>new d(g("DiagnosticAddendum.typedDictFieldNotRequired")),e.typedDictFieldRequired=()=>new d(g("DiagnosticAddendum.typedDictFieldRequired")),e.typedDictFieldTypeMismatch=()=>new d(g("DiagnosticAddendum.typedDictFieldTypeMismatch")),e.typedDictFieldUndefined=()=>new d(g("DiagnosticAddendum.typedDictFieldUndefined")),e.typeIncompatible=()=>new d(g("DiagnosticAddendum.typeIncompatible")),e.typeNotClass=()=>new d(g("DiagnosticAddendum.typeNotClass")),e.typeParamSpec=()=>new d(g("DiagnosticAddendum.typeParamSpec")),e.typeNotStringLiteral=()=>new d(g("DiagnosticAddendum.typeNotStringLiteral")),e.typeOfSymbol=()=>new d(g("DiagnosticAddendum.typeOfSymbol")),e.typeUnsupported=()=>new d(g("DiagnosticAddendum.typeUnsupported")),e.typeVarIsContravariant=()=>new d(g("DiagnosticAddendum.typeVarIsContravariant")),e.typeVarIsCovariant=()=>new d(g("DiagnosticAddendum.typeVarIsCovariant")),e.typeVarIsInvariant=()=>new d(g("DiagnosticAddendum.typeVarIsInvariant")),e.useDictInstead=()=>g("DiagnosticAddendum.useDictInstead"),e.useListInstead=()=>g("DiagnosticAddendum.useListInstead"),e.useTupleInstead=()=>g("DiagnosticAddendum.useTupleInstead"),e.useTypeInstead=()=>g("DiagnosticAddendum.useTypeInstead")}(n=e.DiagnosticAddendum||(e.DiagnosticAddendum={})),function(e){e.addOptionalToAnnotation=()=>g("CodeAction.addOptionalToAnnotation"),e.createTypeStub=()=>g("CodeAction.createTypeStub"),e.createTypeStubFor=()=>new d(g("CodeAction.createTypeStubFor")),e.executingCommand=()=>g("CodeAction.executingCommand"),e.filesToAnalyzeOne=()=>g("CodeAction.filesToAnalyzeOne"),e.filesToAnalyzeCount=()=>new d(g("CodeAction.filesToAnalyzeCount")),e.findingReferences=()=>g("CodeAction.findingReferences"),e.organizeImports=()=>g("CodeAction.organizeImports")}(i=e.CodeAction||(e.CodeAction={}))}(t.Localizer||(t.Localizer={}))},function(e,t,n){"use strict";function i(e,t){return e===t?0:void 0===e?-1:void 0===t?1:e<t?-1:1}Object.defineProperty(t,"__esModule",{value:!0}),t.isDebugMode=t.toBoolean=t.hasProperty=t.isNumber=t.isString=t.isArray=t.compareValues=t.compareComparableValues=t.equateValues=t.toLowerCase=t.identity=t.returnUndefined=t.returnTrue=t.returnFalse=void 0,t.returnFalse=function(){return!1},t.returnTrue=function(){return!0},t.returnUndefined=function(){},t.identity=function(e){return e},t.toLowerCase=function(e){return e.toLowerCase()},t.equateValues=function(e,t){return e===t},t.compareComparableValues=i,t.compareValues=function(e,t){return i(e,t)},t.isArray=function(e){return Array.isArray?Array.isArray(e):e instanceof Array},t.isString=function(e){return"string"==typeof e},t.isNumber=function(e){return"number"==typeof e};const s=Object.prototype.hasOwnProperty;t.hasProperty=function(e,t){return s.call(e,t)},t.toBoolean=function(e){return"TRUE"===(null==e?void 0:e.trim().toUpperCase())},t.isDebugMode=function(){const e=process.execArgv.join();return e.includes("inspect")||e.includes("debug")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timingStats=t.TimingStats=t.TimingStat=t.Duration=void 0;class i{constructor(){this._startTime=Date.now()}getDurationInMilliseconds(){return Date.now()-this._startTime}getDurationInSeconds(){return this.getDurationInMilliseconds()/1e3}}t.Duration=i;class s{constructor(){this.totalTime=0,this.isTiming=!1}timeOperation(e){if(this.isTiming)e();else{this.isTiming=!0;const t=new i;e(),this.totalTime+=t.getDurationInMilliseconds(),this.isTiming=!1}}subtractFromTime(e){if(this.isTiming){this.isTiming=!1;const t=new i;e(),this.totalTime-=t.getDurationInMilliseconds(),this.isTiming=!0}else e()}printTime(){const e=this.totalTime/1e3;return(Math.round(100*e)/100).toString()+"sec"}}t.TimingStat=s;class r{constructor(){this.totalDuration=new i,this.findFilesTime=new s,this.readFileTime=new s,this.tokenizeFileTime=new s,this.parseFileTime=new s,this.resolveImportsTime=new s,this.cycleDetectionTime=new s,this.bindTime=new s,this.typeCheckerTime=new s}printSummary(e){e.info(`Completed in ${this.totalDuration.getDurationInSeconds()}sec`)}printDetails(e){e.info(""),e.info("Timing stats"),e.info("Find Source Files:    "+this.findFilesTime.printTime()),e.info("Read Source Files:    "+this.readFileTime.printTime()),e.info("Tokenize:             "+this.tokenizeFileTime.printTime()),e.info("Parse:                "+this.parseFileTime.printTime()),e.info("Resolve Imports:      "+this.resolveImportsTime.printTime()),e.info("Bind:                 "+this.bindTime.printTime()),e.info("Check:                "+this.typeCheckerTime.printTime()),e.info("Detect Cycles:        "+this.cycleDetectionTime.printTime())}}t.TimingStats=r,t.timingStats=new r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RaiseNode=t.ReturnNode=t.ContinueNode=t.BreakNode=t.AssertNode=t.NonlocalNode=t.GlobalNode=t.ImportFromAsNode=t.ImportFromNode=t.ImportAsNode=t.ModuleNameNode=t.ImportNode=t.PassNode=t.DelNode=t.ArgumentNode=t.ListNode=t.SetNode=t.DictionaryExpandEntryNode=t.DictionaryKeyEntryNode=t.DictionaryNode=t.StringListNode=t.FormatStringNode=t.StringNode=t.NumberNode=t.EllipsisNode=t.ConstantNode=t.NameNode=t.LambdaNode=t.MemberAccessNode=t.YieldFromNode=t.YieldNode=t.SliceNode=t.IndexNode=t.IndexItemsNode=t.ListComprehensionNode=t.CallNode=t.TupleNode=t.UnpackNode=t.TernaryNode=t.AwaitNode=t.AugmentedAssignmentNode=t.TypeAnnotationNode=t.AssignmentNode=t.AssignmentExpressionNode=t.BinaryOperationNode=t.UnaryOperationNode=t.ErrorNode=t.isExpressionNode=t.StatementListNode=t.DecoratorNode=t.WithItemNode=t.WithNode=t.ClassNode=t.ParameterNode=t.FunctionNode=t.ExceptNode=t.TryNode=t.ListComprehensionIfNode=t.ListComprehensionForNode=t.ForNode=t.WhileNode=t.IfNode=t.SuiteNode=t.ModuleNode=t.extendRange=t.getNextNodeId=void 0;const i=n(1);let s=1;function r(e,t){t.start<e.start&&(e.length+=e.start-t.start,e.start=t.start),i.TextRange.getEnd(t)>i.TextRange.getEnd(e)&&(e.length=i.TextRange.getEnd(t)-e.start)}t.getNextNodeId=function(){return s++},t.extendRange=r,function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:37,id:s++,statements:[]}}}(t.ModuleNode||(t.ModuleNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:51,id:s++,statements:[]}}}(t.SuiteNode||(t.SuiteNode={})),function(e){e.create=function(e,t,n,i){const o={start:e.start,length:e.length,nodeType:19,id:s++,testExpression:t,ifSuite:n,elseSuite:i};return t.parent=o,n.parent=o,r(o,t),r(o,n),i&&(r(o,i),i.parent=o),o}}(t.IfNode||(t.IfNode={})),function(e){e.create=function(e,t,n){const i={start:e.start,length:e.length,nodeType:58,id:s++,testExpression:t,whileSuite:n};return t.parent=i,n.parent=i,r(i,n),i}}(t.WhileNode||(t.WhileNode={})),function(e){e.create=function(e,t,n,i){const o={start:e.start,length:e.length,nodeType:27,id:s++,targetExpression:t,iterableExpression:n,forSuite:i};return t.parent=o,n.parent=o,i.parent=o,r(o,i),o}}(t.ForNode||(t.ForNode={})),function(e){e.create=function(e,t,n){const i={start:e.start,length:e.length,nodeType:34,id:s++,targetExpression:t,iterableExpression:n};return t.parent=i,n.parent=i,r(i,t),r(i,n),i}}(t.ListComprehensionForNode||(t.ListComprehensionForNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:35,id:s++,testExpression:t};return t.parent=n,r(n,t),n}}(t.ListComprehensionIfNode||(t.ListComprehensionIfNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:54,id:s++,trySuite:t,exceptClauses:[]};return t.parent=n,r(n,t),n}}(t.TryNode||(t.TryNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:26,id:s++,exceptSuite:t};return t.parent=n,r(n,t),n}}(t.ExceptNode||(t.ExceptNode={})),function(e){e.create=function(e,t,n){const i={start:e.start,length:e.length,nodeType:29,id:s++,decorators:[],name:t,parameters:[],suite:n};return t.parent=i,n.parent=i,r(i,n),i}}(t.FunctionNode||(t.FunctionNode={})),function(e){e.create=function(e,t){return{start:e.start,length:e.length,nodeType:42,id:s++,category:t}}}(t.ParameterNode||(t.ParameterNode={})),function(e){e.create=function(e,t,n){const i={start:e.start,length:e.length,nodeType:10,id:s++,decorators:[],name:t,arguments:[],suite:n};return t.parent=i,n.parent=i,r(i,n),i},e.createDummyForDecorators=function(e){const t={start:0,length:0,nodeType:10,id:s++,decorators:e,name:{start:0,length:0,id:0,nodeType:39,token:{type:7,start:0,length:0,comments:[],value:""},value:""},arguments:[],suite:{start:0,length:0,id:0,nodeType:51,statements:[]}};return e.forEach(e=>{e.parent=t,r(t,e)}),t.name.parent=t,t.suite.parent=t,t}}(t.ClassNode||(t.ClassNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:59,id:s++,withItems:[],suite:t};return t.parent=n,r(n,t),n}}(t.WithNode||(t.WithNode={})),function(e){e.create=function(e){const t={start:e.start,length:e.length,nodeType:60,id:s++,expression:e};return e.parent=t,t}}(t.WithItemNode||(t.WithItemNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:13,id:s++,leftExpression:t,arguments:void 0};return t.parent=n,r(n,t),n}}(t.DecoratorNode||(t.DecoratorNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:48,id:s++,statements:[]}}}(t.StatementListNode||(t.StatementListNode={})),t.isExpressionNode=function(e){switch(e.nodeType){case 0:case 56:case 7:case 4:case 55:case 6:case 52:case 57:case 53:case 9:case 33:case 24:case 47:case 61:case 62:case 36:case 31:case 39:case 11:case 18:case 41:case 50:case 28:case 49:case 15:case 16:case 32:case 46:return!0;default:return!1}},function(e){e.create=function(e,t,n){const i={start:e.start,length:e.length,nodeType:0,id:s++,category:t,child:n};return n&&(n.parent=i,r(i,n)),i}}(t.ErrorNode||(t.ErrorNode={})),function(e){e.create=function(e,t,n){const i={start:e.start,length:e.length,nodeType:56,id:s++,operator:n,operatorToken:e,expression:t};return t.parent=i,r(i,t),i}}(t.UnaryOperationNode||(t.UnaryOperationNode={})),function(e){e.create=function(e,t,n,i){const o={start:e.start,length:e.length,nodeType:7,id:s++,leftExpression:e,operatorToken:n,operator:i,rightExpression:t};return e.parent=o,t.parent=o,r(o,t),o}}(t.BinaryOperationNode||(t.BinaryOperationNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:4,id:s++,name:e,rightExpression:t};return e.parent=n,t.parent=n,r(n,t),n}}(t.AssignmentExpressionNode||(t.AssignmentExpressionNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:3,id:s++,leftExpression:e,rightExpression:t};return e.parent=n,t.parent=n,r(n,t),n}}(t.AssignmentNode||(t.AssignmentNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:55,id:s++,valueExpression:e,typeAnnotation:t};return e.parent=n,t.parent=n,r(n,t),n}}(t.TypeAnnotationNode||(t.TypeAnnotationNode={})),function(e){e.create=function(e,t,n,i){const o={start:e.start,length:e.length,nodeType:5,id:s++,leftExpression:e,operator:n,rightExpression:t,destExpression:i};return e.parent=o,t.parent=o,i.parent=o,r(o,t),o}}(t.AugmentedAssignmentNode||(t.AugmentedAssignmentNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:6,id:s++,expression:t};return t.parent=n,r(n,t),n}}(t.AwaitNode||(t.AwaitNode={})),function(e){e.create=function(e,t,n){const i={start:e.start,length:e.length,nodeType:52,id:s++,ifExpression:e,testExpression:t,elseExpression:n};return e.parent=i,t.parent=i,n.parent=i,r(i,n),i}}(t.TernaryNode||(t.TernaryNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:57,id:s++,expression:t};return t.parent=n,r(n,t),n}}(t.UnpackNode||(t.UnpackNode={})),function(e){e.create=function(e,t){return{start:e.start,length:e.length,nodeType:53,id:s++,expressions:[],enclosedInParens:t}}}(t.TupleNode||(t.TupleNode={})),function(e){e.create=function(e){const t={start:e.start,length:e.length,nodeType:9,id:s++,leftExpression:e,arguments:[]};return e.parent=t,t}}(t.CallNode||(t.CallNode={})),function(e){e.create=function(e){const t={start:e.start,length:e.length,nodeType:33,id:s++,expression:e,comprehensions:[]};return e.parent=t,t}}(t.ListComprehensionNode||(t.ListComprehensionNode={})),function(e){e.create=function(e,t,n){const i={start:e.start,length:e.length,nodeType:25,id:s++,items:n};return n.forEach(e=>{e.parent=i}),r(i,t),i}}(t.IndexItemsNode||(t.IndexItemsNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:24,id:s++,baseExpression:e,items:t};return e.parent=n,t.parent=n,r(n,t),n}}(t.IndexNode||(t.IndexNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:47,id:s++}}}(t.SliceNode||(t.SliceNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:61,id:s++,expression:t};return t&&(t.parent=n,r(n,t)),n}}(t.YieldNode||(t.YieldNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:62,id:s++,expression:t};return t.parent=n,r(n,t),n}}(t.YieldFromNode||(t.YieldFromNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:36,id:s++,leftExpression:e,memberName:t};return e.parent=n,t.parent=n,r(n,t),n}}(t.MemberAccessNode||(t.MemberAccessNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:31,id:s++,parameters:[],expression:t};return t.parent=n,r(n,t),n}}(t.LambdaNode||(t.LambdaNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:39,id:s++,token:e,value:e.value}}}(t.NameNode||(t.NameNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:11,id:s++,constType:e.keywordType}}}(t.ConstantNode||(t.ConstantNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:18,id:s++}}}(t.EllipsisNode||(t.EllipsisNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:41,id:s++,value:e.value,isInteger:e.isInteger,isImaginary:e.isImaginary}}}(t.NumberNode||(t.NumberNode={})),function(e){e.create=function(e,t,n){return{start:e.start,length:e.length,nodeType:50,id:s++,token:e,value:t,hasUnescapeErrors:n}}}(t.StringNode||(t.StringNode={})),function(e){e.create=function(e,t,n,i){const r={start:e.start,length:e.length,nodeType:28,id:s++,token:e,value:t,hasUnescapeErrors:n,expressions:i};return i.forEach(e=>{e.parent=r}),r}}(t.FormatStringNode||(t.FormatStringNode={})),function(e){e.create=function(e){const t={start:e[0].start,length:e[0].length,nodeType:49,id:s++,strings:e};return e.length>0&&(e.forEach(e=>{e.parent=t}),r(t,e[e.length-1])),t}}(t.StringListNode||(t.StringListNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:15,id:s++,entries:[]}}}(t.DictionaryNode||(t.DictionaryNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:17,id:s++,keyExpression:e,valueExpression:t};return e.parent=n,t.parent=n,r(n,t),n}}(t.DictionaryKeyEntryNode||(t.DictionaryKeyEntryNode={})),function(e){e.create=function(e){const t={start:e.start,length:e.length,nodeType:16,id:s++,expandExpression:e};return e.parent=t,t}}(t.DictionaryExpandEntryNode||(t.DictionaryExpandEntryNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:46,id:s++,entries:[]}}}(t.SetNode||(t.SetNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:32,id:s++,entries:[]}}}(t.ListNode||(t.ListNode={})),function(e){e.create=function(e,t,n){const i={start:e.start,length:e.length,nodeType:1,id:s++,valueExpression:t,argumentCategory:n};return t.parent=i,r(i,t),i}}(t.ArgumentNode||(t.ArgumentNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:14,id:s++,expressions:[]}}}(t.DelNode||(t.DelNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:43,id:s++}}}(t.PassNode||(t.PassNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:20,id:s++,list:[]}}}(t.ImportNode||(t.ImportNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:38,id:s++,leadingDots:0,nameParts:[]}}}(t.ModuleNameNode||(t.ModuleNameNode={})),function(e){e.create=function(e){const t={start:e.start,length:e.length,nodeType:21,id:s++,module:e};return e.parent=t,t}}(t.ImportAsNode||(t.ImportAsNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:22,id:s++,module:t,imports:[],isWildcardImport:!1,usesParens:!1};return t.parent=n,r(n,t),n}}(t.ImportFromNode||(t.ImportFromNode={})),function(e){e.create=function(e){const t={start:e.start,length:e.length,nodeType:23,id:s++,name:e};return e.parent=t,t}}(t.ImportFromAsNode||(t.ImportFromAsNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:30,id:s++,nameList:[]}}}(t.GlobalNode||(t.GlobalNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:40,id:s++,nameList:[]}}}(t.NonlocalNode||(t.NonlocalNode={})),function(e){e.create=function(e,t){const n={start:e.start,length:e.length,nodeType:2,id:s++,testExpression:t};return t.parent=n,r(n,t),n}}(t.AssertNode||(t.AssertNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:8,id:s++}}}(t.BreakNode||(t.BreakNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:12,id:s++}}}(t.ContinueNode||(t.ContinueNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:45,id:s++}}}(t.ReturnNode||(t.ReturnNode={})),function(e){e.create=function(e){return{start:e.start,length:e.length,nodeType:44,id:s++}}}(t.RaiseNode||(t.RaiseNode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticAddendum=t.Diagnostic=t.convertLevelToCategory=void 0,t.convertLevelToCategory=function(e){switch(e){case"error":return 0;case"warning":return 1;case"information":return 2;default:throw new Error(e+" is not expected")}};t.Diagnostic=class{constructor(e,t,n){this.category=e,this.message=t,this.range=n,this._relatedInfo=[]}addAction(e){void 0===this._actions?this._actions=[e]:this._actions.push(e)}getActions(){return this._actions}setRule(e){this._rule=e}getRule(){return this._rule}addRelatedInfo(e,t,n){this._relatedInfo.push({filePath:t,message:e,range:n})}getRelatedInfo(){return this._relatedInfo}};class i{constructor(){this._messages=[],this._childAddenda=[]}addMessage(e){this._messages.push(e)}createAddendum(){const e=new i;return this.addAddendum(e),e}getString(e=5,t=5){let n=this._getLinesRecursive(e);n.length>t&&(n=n.slice(0,t),n.push("..."));const i=n.join("\n");return i.length>0?"\n"+i:""}isEmpty(){return 0===this._getMessageCount()}addAddendum(e){this._childAddenda.push(e)}_getMessageCount(){let e=this._messages.length;for(const t of this._childAddenda)e+=t._getMessageCount();return e}_getLinesRecursive(e){if(e<=0)return[];const t=[];for(const n of this._childAddenda)t.push(...n._getLinesRecursive(e-1));const n=this._messages.length>0?"  ":"";return this._messages.concat(t).map(e=>n+e)}}t.DiagnosticAddendum=i},function(e,t){e.exports=require("worker_threads")},function(e,t,n){"use strict";function i(e){return"string"==typeof e||e instanceof String}function s(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=s,t.stringArray=function(e){return s(e)&&e.every(e=>i(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(13);!function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class s{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e){if(this._contexts[i]===t)return this._callbacks.splice(i,1),void this._contexts.splice(i,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),s=this._contexts.slice(0);for(let r=0,o=n.length;r<o;r++)try{t.push(n[r].apply(s[r],e))}catch(e){i.default().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new s),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),i.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=r,r._noop=function(){}},function(e,t,n){"use strict";var i;function s(e){return e>>8==3}Object.defineProperty(t,"__esModule",{value:!0}),t.is3x=t.versionFromString=t.versionToString=t.latestPythonVersion=t.latestStablePythonVersion=t.PythonVersion=void 0,function(e){e[e.V24=516]="V24",e[e.V25=517]="V25",e[e.V26=518]="V26",e[e.V27=519]="V27",e[e.V30=768]="V30",e[e.V31=769]="V31",e[e.V32=770]="V32",e[e.V33=771]="V33",e[e.V34=772]="V34",e[e.V35=773]="V35",e[e.V36=774]="V36",e[e.V37=775]="V37",e[e.V38=776]="V38",e[e.V39=777]="V39"}(i=t.PythonVersion||(t.PythonVersion={})),t.latestStablePythonVersion=i.V38,t.latestPythonVersion=i.V38,t.versionToString=function(e){return`${e>>8&255}.${255&e}`},t.versionFromString=function(e){const t=e.split(".");if(t.length<2)return;const n=parseInt(t[0],10),r=parseInt(t[1],10);if(isNaN(n)||isNaN(r))return;if(n>255||r>255)return;const o=256*n+r;return void 0!==i[o]&&s(o)?o:void 0},t.is3x=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFinalVariable=t.isTypedDictMemberAccessedThroughIndex=t.getLastTypedDeclaredForSymbol=void 0;const i=n(20);t.getLastTypedDeclaredForSymbol=function(e){const t=e.getTypedDeclarations();if(t.length>0)return t[t.length-1]},t.isTypedDictMemberAccessedThroughIndex=function(e){const t=e.getTypedDeclarations();if(t.length>0){if(1===t[t.length-1].type)return!0}return!1},t.isFinalVariable=function(e){return e.getDeclarations().some(e=>i.isFinalVariableDeclaration(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigOptions=t.getStrictDiagnosticRuleSet=t.getBasicDiagnosticRuleSet=t.getOffDiagnosticRuleSet=t.getStrictModeNotOverriddenRules=t.getDiagLevelDiagnosticRules=t.getBooleanDiagnosticRules=t.cloneDiagnosticRuleSet=t.ExecutionEnvironment=void 0;const i=n(41),s=n(3),r=n(62),o=n(4),a=n(30);class c{constructor(e,t,n){this.extraPaths=[],this.root=e,this.pythonVersion=t||a.latestStablePythonVersion,this.pythonPlatform=n}}function l(){return{printUnknownAsAny:!0,omitTypeArgsIfAny:!0,pep604Printing:!0,strictListInference:!1,strictDictionaryInference:!1,strictParameterNoneValue:!1,enableTypeIgnoreComments:!0,reportGeneralTypeIssues:"none",reportMissingImports:"warning",reportMissingModuleSource:"warning",reportMissingTypeStubs:"none",reportImportCycles:"none",reportUnusedImport:"none",reportUnusedClass:"none",reportUnusedFunction:"none",reportUnusedVariable:"none",reportDuplicateImport:"none",reportOptionalSubscript:"none",reportOptionalMemberAccess:"none",reportOptionalCall:"none",reportOptionalIterable:"none",reportOptionalContextManager:"none",reportOptionalOperand:"none",reportUntypedFunctionDecorator:"none",reportUntypedClassDecorator:"none",reportUntypedBaseClass:"none",reportUntypedNamedTuple:"none",reportPrivateUsage:"none",reportConstantRedefinition:"none",reportIncompatibleMethodOverride:"none",reportInvalidStringEscapeSequence:"none",reportUnknownParameterType:"none",reportUnknownArgumentType:"none",reportUnknownLambdaType:"none",reportUnknownVariableType:"none",reportUnknownMemberType:"none",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"none",reportUnnecessaryCast:"none",reportAssertAlwaysTrue:"none",reportSelfClsParameterName:"none",reportImplicitStringConcatenation:"none",reportUnboundVariable:"warning",reportUndefinedVariable:"warning"}}function p(){return{printUnknownAsAny:!1,omitTypeArgsIfAny:!1,pep604Printing:!0,strictListInference:!1,strictDictionaryInference:!1,strictParameterNoneValue:!1,enableTypeIgnoreComments:!0,reportGeneralTypeIssues:"error",reportMissingImports:"error",reportMissingModuleSource:"warning",reportMissingTypeStubs:"none",reportImportCycles:"none",reportUnusedImport:"none",reportUnusedClass:"none",reportUnusedFunction:"none",reportUnusedVariable:"none",reportDuplicateImport:"none",reportOptionalSubscript:"none",reportOptionalMemberAccess:"none",reportOptionalCall:"none",reportOptionalIterable:"none",reportOptionalContextManager:"none",reportOptionalOperand:"none",reportUntypedFunctionDecorator:"none",reportUntypedClassDecorator:"none",reportUntypedBaseClass:"none",reportUntypedNamedTuple:"none",reportPrivateUsage:"none",reportConstantRedefinition:"none",reportIncompatibleMethodOverride:"none",reportInvalidStringEscapeSequence:"warning",reportUnknownParameterType:"none",reportUnknownArgumentType:"none",reportUnknownLambdaType:"none",reportUnknownVariableType:"none",reportUnknownMemberType:"none",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"none",reportUnnecessaryCast:"none",reportAssertAlwaysTrue:"warning",reportSelfClsParameterName:"warning",reportImplicitStringConcatenation:"none",reportUnboundVariable:"error",reportUndefinedVariable:"error"}}function u(){return{printUnknownAsAny:!1,omitTypeArgsIfAny:!1,pep604Printing:!0,strictListInference:!0,strictDictionaryInference:!0,strictParameterNoneValue:!0,enableTypeIgnoreComments:!0,reportGeneralTypeIssues:"error",reportMissingImports:"error",reportMissingModuleSource:"warning",reportMissingTypeStubs:"error",reportImportCycles:"error",reportUnusedImport:"error",reportUnusedClass:"error",reportUnusedFunction:"error",reportUnusedVariable:"error",reportDuplicateImport:"error",reportOptionalSubscript:"error",reportOptionalMemberAccess:"error",reportOptionalCall:"error",reportOptionalIterable:"error",reportOptionalContextManager:"error",reportOptionalOperand:"error",reportUntypedFunctionDecorator:"error",reportUntypedClassDecorator:"error",reportUntypedBaseClass:"error",reportUntypedNamedTuple:"error",reportPrivateUsage:"error",reportConstantRedefinition:"error",reportIncompatibleMethodOverride:"error",reportInvalidStringEscapeSequence:"error",reportUnknownParameterType:"error",reportUnknownArgumentType:"error",reportUnknownLambdaType:"error",reportUnknownVariableType:"error",reportUnknownMemberType:"error",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"error",reportUnnecessaryCast:"error",reportAssertAlwaysTrue:"error",reportSelfClsParameterName:"error",reportImplicitStringConcatenation:"none",reportUnboundVariable:"error",reportUndefinedVariable:"error"}}t.ExecutionEnvironment=c,t.cloneDiagnosticRuleSet=function(e){return Object.assign({},e)},t.getBooleanDiagnosticRules=function(){return["strictListInference","strictDictionaryInference","strictParameterNoneValue"]},t.getDiagLevelDiagnosticRules=function(){return["reportGeneralTypeIssues","reportMissingImports","reportMissingModuleSource","reportMissingTypeStubs","reportImportCycles","reportUnusedImport","reportUnusedClass","reportUnusedFunction","reportUnusedVariable","reportDuplicateImport","reportOptionalSubscript","reportOptionalMemberAccess","reportOptionalCall","reportOptionalIterable","reportOptionalContextManager","reportOptionalOperand","reportUntypedFunctionDecorator","reportUntypedClassDecorator","reportUntypedBaseClass","reportUntypedNamedTuple","reportPrivateUsage","reportConstantRedefinition","reportIncompatibleMethodOverride","reportInvalidStringEscapeSequence","reportUnknownParameterType","reportUnknownArgumentType","reportUnknownLambdaType","reportUnknownVariableType","reportUnknownMemberType","reportCallInDefaultInitializer","reportUnnecessaryIsInstance","reportUnnecessaryCast","reportAssertAlwaysTrue","reportSelfClsParameterName","reportImplicitStringConcatenation","reportUndefinedVariable","reportUnboundVariable"]},t.getStrictModeNotOverriddenRules=function(){return["reportMissingModuleSource"]},t.getOffDiagnosticRuleSet=l,t.getBasicDiagnosticRuleSet=p,t.getStrictDiagnosticRuleSet=u;class d{constructor(e,t){this.include=[],this.exclude=[],this.ignore=[],this.strict=[],this.executionEnvironments=[],this.projectRoot=e,this.diagnosticRuleSet=d.getDiagnosticRuleSet(t)}static getDiagnosticRuleSet(e){return"strict"===e?{printUnknownAsAny:!1,omitTypeArgsIfAny:!1,pep604Printing:!0,strictListInference:!0,strictDictionaryInference:!0,strictParameterNoneValue:!0,enableTypeIgnoreComments:!0,reportGeneralTypeIssues:"error",reportMissingImports:"error",reportMissingModuleSource:"warning",reportMissingTypeStubs:"error",reportImportCycles:"error",reportUnusedImport:"error",reportUnusedClass:"error",reportUnusedFunction:"error",reportUnusedVariable:"error",reportDuplicateImport:"error",reportOptionalSubscript:"error",reportOptionalMemberAccess:"error",reportOptionalCall:"error",reportOptionalIterable:"error",reportOptionalContextManager:"error",reportOptionalOperand:"error",reportUntypedFunctionDecorator:"error",reportUntypedClassDecorator:"error",reportUntypedBaseClass:"error",reportUntypedNamedTuple:"error",reportPrivateUsage:"error",reportConstantRedefinition:"error",reportIncompatibleMethodOverride:"error",reportInvalidStringEscapeSequence:"error",reportUnknownParameterType:"error",reportUnknownArgumentType:"error",reportUnknownLambdaType:"error",reportUnknownVariableType:"error",reportUnknownMemberType:"error",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"error",reportUnnecessaryCast:"error",reportAssertAlwaysTrue:"error",reportSelfClsParameterName:"error",reportImplicitStringConcatenation:"none",reportUnboundVariable:"error",reportUndefinedVariable:"error"}:"off"===e?{printUnknownAsAny:!0,omitTypeArgsIfAny:!0,pep604Printing:!0,strictListInference:!1,strictDictionaryInference:!1,strictParameterNoneValue:!1,enableTypeIgnoreComments:!0,reportGeneralTypeIssues:"none",reportMissingImports:"warning",reportMissingModuleSource:"warning",reportMissingTypeStubs:"none",reportImportCycles:"none",reportUnusedImport:"none",reportUnusedClass:"none",reportUnusedFunction:"none",reportUnusedVariable:"none",reportDuplicateImport:"none",reportOptionalSubscript:"none",reportOptionalMemberAccess:"none",reportOptionalCall:"none",reportOptionalIterable:"none",reportOptionalContextManager:"none",reportOptionalOperand:"none",reportUntypedFunctionDecorator:"none",reportUntypedClassDecorator:"none",reportUntypedBaseClass:"none",reportUntypedNamedTuple:"none",reportPrivateUsage:"none",reportConstantRedefinition:"none",reportIncompatibleMethodOverride:"none",reportInvalidStringEscapeSequence:"none",reportUnknownParameterType:"none",reportUnknownArgumentType:"none",reportUnknownLambdaType:"none",reportUnknownVariableType:"none",reportUnknownMemberType:"none",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"none",reportUnnecessaryCast:"none",reportAssertAlwaysTrue:"none",reportSelfClsParameterName:"none",reportImplicitStringConcatenation:"none",reportUnboundVariable:"warning",reportUndefinedVariable:"warning"}:{printUnknownAsAny:!1,omitTypeArgsIfAny:!1,pep604Printing:!0,strictListInference:!1,strictDictionaryInference:!1,strictParameterNoneValue:!1,enableTypeIgnoreComments:!0,reportGeneralTypeIssues:"error",reportMissingImports:"error",reportMissingModuleSource:"warning",reportMissingTypeStubs:"none",reportImportCycles:"none",reportUnusedImport:"none",reportUnusedClass:"none",reportUnusedFunction:"none",reportUnusedVariable:"none",reportDuplicateImport:"none",reportOptionalSubscript:"none",reportOptionalMemberAccess:"none",reportOptionalCall:"none",reportOptionalIterable:"none",reportOptionalContextManager:"none",reportOptionalOperand:"none",reportUntypedFunctionDecorator:"none",reportUntypedClassDecorator:"none",reportUntypedBaseClass:"none",reportUntypedNamedTuple:"none",reportPrivateUsage:"none",reportConstantRedefinition:"none",reportIncompatibleMethodOverride:"none",reportInvalidStringEscapeSequence:"warning",reportUnknownParameterType:"none",reportUnknownArgumentType:"none",reportUnknownLambdaType:"none",reportUnknownVariableType:"none",reportUnknownMemberType:"none",reportCallInDefaultInitializer:"none",reportUnnecessaryIsInstance:"none",reportUnnecessaryCast:"none",reportAssertAlwaysTrue:"warning",reportSelfClsParameterName:"warning",reportImplicitStringConcatenation:"none",reportUnboundVariable:"error",reportUndefinedVariable:"error"}}findExecEnvironment(e){let t=this.executionEnvironments.find(t=>{const n=o.ensureTrailingDirectorySeparator(o.normalizePath(o.combinePaths(this.projectRoot,t.root)));return e.startsWith(n)});return t||(t=new c(this.projectRoot,this.defaultPythonVersion,this.defaultPythonPlatform)),t}addExecEnvironmentForExtraPaths(e,t,n){const i=[];if(t){const t=o.normalizePath(o.combinePaths(this.projectRoot,r.src));e.existsSync(t)&&!e.existsSync(o.combinePaths(t,"__init__.py"))&&i.push(t)}if(n.length>0)for(const e of n)i.push(o.normalizePath(o.combinePaths(this.projectRoot,e)));if(i.length>0){const e=new c(this.projectRoot,this.defaultPythonVersion,this.defaultPythonPlatform);e.extraPaths.push(...i),this.executionEnvironments.push(e)}}initializeFromJson(e,t,n,i,r){if(this.include=[],void 0!==e.include)if(Array.isArray(e.include)){e.include.forEach((e,t)=>{"string"!=typeof e?n.info(`Index ${t} of "include" array should be a string.`):s.isAbsolute(e)?n.info(`Ignoring path "${e}" in "include" array because it is not relative.`):this.include.push(o.getFileSpec(this.projectRoot,e))})}else n.info('Config "include" entry must must contain an array.');if(this.exclude=[],void 0!==e.exclude)if(Array.isArray(e.exclude)){e.exclude.forEach((e,t)=>{"string"!=typeof e?n.info(`Index ${t} of "exclude" array should be a string.`):s.isAbsolute(e)?n.info(`Ignoring path "${e}" in "exclude" array because it is not relative.`):this.exclude.push(o.getFileSpec(this.projectRoot,e))})}else n.info('Config "exclude" entry must contain an array.');if(this.ignore=[],void 0!==e.ignore)if(Array.isArray(e.ignore)){e.ignore.forEach((e,t)=>{"string"!=typeof e?n.info(`Index ${t} of "ignore" array should be a string.`):s.isAbsolute(e)?n.info(`Ignoring path "${e}" in "ignore" array because it is not relative.`):this.ignore.push(o.getFileSpec(this.projectRoot,e))})}else n.info('Config "ignore" entry must contain an array.');if(this.strict=[],void 0!==e.strict)if(Array.isArray(e.strict)){e.strict.forEach((e,t)=>{"string"!=typeof e?n.info(`Index ${t} of "strict" array should be a string.`):s.isAbsolute(e)?n.info(`Ignoring path "${e}" in "strict" array because it is not relative.`):this.strict.push(o.getFileSpec(this.projectRoot,e))})}else n.info('Config "strict" entry must contain an array.');let c;void 0!==e.typeCheckingMode&&("off"===e.typeCheckingMode||"basic"===e.typeCheckingMode||"strict"===e.typeCheckingMode?c=e.typeCheckingMode:n.info('Config "typeCheckingMode" entry must contain "off", "basic", or "strict".'));const l=d.getDiagnosticRuleSet(c||t);if(this.applyDiagnosticOverrides(i),this.diagnosticRuleSet={printUnknownAsAny:l.printUnknownAsAny,omitTypeArgsIfAny:l.omitTypeArgsIfAny,pep604Printing:l.pep604Printing,strictListInference:this._convertBoolean(e.strictListInference,"strictListInference",l.strictListInference),strictDictionaryInference:this._convertBoolean(e.strictDictionaryInference,"strictDictionaryInference",l.strictDictionaryInference),strictParameterNoneValue:this._convertBoolean(e.strictParameterNoneValue,"strictParameterNoneValue",l.strictParameterNoneValue),enableTypeIgnoreComments:this._convertBoolean(e.enableTypeIgnoreComments,"enableTypeIgnoreComments",l.enableTypeIgnoreComments),reportGeneralTypeIssues:this._convertDiagnosticLevel(e.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.reportGeneralTypeIssues),reportMissingImports:this._convertDiagnosticLevel(e.reportMissingImports,"reportMissingImports",l.reportMissingImports),reportUnusedImport:this._convertDiagnosticLevel(e.reportUnusedImport,"reportUnusedImport",l.reportUnusedImport),reportUnusedClass:this._convertDiagnosticLevel(e.reportUnusedClass,"reportUnusedClass",l.reportUnusedClass),reportUnusedFunction:this._convertDiagnosticLevel(e.reportUnusedFunction,"reportUnusedFunction",l.reportUnusedFunction),reportUnusedVariable:this._convertDiagnosticLevel(e.reportUnusedVariable,"reportUnusedVariable",l.reportUnusedVariable),reportDuplicateImport:this._convertDiagnosticLevel(e.reportDuplicateImport,"reportDuplicateImport",l.reportDuplicateImport),reportMissingModuleSource:this._convertDiagnosticLevel(e.reportMissingModuleSource,"reportMissingModuleSource",l.reportMissingModuleSource),reportMissingTypeStubs:this._convertDiagnosticLevel(e.reportMissingTypeStubs,"reportMissingTypeStubs",l.reportMissingTypeStubs),reportImportCycles:this._convertDiagnosticLevel(e.reportImportCycles,"reportImportCycles",l.reportImportCycles),reportOptionalSubscript:this._convertDiagnosticLevel(e.reportOptionalSubscript,"reportOptionalSubscript",l.reportOptionalSubscript),reportOptionalMemberAccess:this._convertDiagnosticLevel(e.reportOptionalMemberAccess,"reportOptionalMemberAccess",l.reportOptionalMemberAccess),reportOptionalCall:this._convertDiagnosticLevel(e.reportOptionalCall,"reportOptionalCall",l.reportOptionalCall),reportOptionalIterable:this._convertDiagnosticLevel(e.reportOptionalIterable,"reportOptionalIterable",l.reportOptionalIterable),reportOptionalContextManager:this._convertDiagnosticLevel(e.reportOptionalContextManager,"reportOptionalContextManager",l.reportOptionalContextManager),reportOptionalOperand:this._convertDiagnosticLevel(e.reportOptionalOperand,"reportOptionalOperand",l.reportOptionalOperand),reportUntypedFunctionDecorator:this._convertDiagnosticLevel(e.reportUntypedFunctionDecorator,"reportUntypedFunctionDecorator",l.reportUntypedFunctionDecorator),reportUntypedClassDecorator:this._convertDiagnosticLevel(e.reportUntypedClassDecorator,"reportUntypedClassDecorator",l.reportUntypedClassDecorator),reportUntypedBaseClass:this._convertDiagnosticLevel(e.reportUntypedBaseClass,"reportUntypedBaseClass",l.reportUntypedBaseClass),reportUntypedNamedTuple:this._convertDiagnosticLevel(e.reportUntypedNamedTuple,"reportUntypedNamedTuple",l.reportUntypedNamedTuple),reportPrivateUsage:this._convertDiagnosticLevel(e.reportPrivateUsage,"reportPrivateUsage",l.reportPrivateUsage),reportConstantRedefinition:this._convertDiagnosticLevel(e.reportConstantRedefinition,"reportConstantRedefinition",l.reportConstantRedefinition),reportIncompatibleMethodOverride:this._convertDiagnosticLevel(e.reportIncompatibleMethodOverride,"reportIncompatibleMethodOverride",l.reportIncompatibleMethodOverride),reportInvalidStringEscapeSequence:this._convertDiagnosticLevel(e.reportInvalidStringEscapeSequence,"reportInvalidStringEscapeSequence",l.reportInvalidStringEscapeSequence),reportUnknownParameterType:this._convertDiagnosticLevel(e.reportUnknownParameterType,"reportUnknownParameterType",l.reportUnknownParameterType),reportUnknownArgumentType:this._convertDiagnosticLevel(e.reportUnknownArgumentType,"reportUnknownArgumentType",l.reportUnknownArgumentType),reportUnknownLambdaType:this._convertDiagnosticLevel(e.reportUnknownLambdaType,"reportUnknownLambdaType",l.reportUnknownLambdaType),reportUnknownVariableType:this._convertDiagnosticLevel(e.reportUnknownVariableType,"reportUnknownVariableType",l.reportUnknownVariableType),reportUnknownMemberType:this._convertDiagnosticLevel(e.reportUnknownMemberType,"reportUnknownMemberType",l.reportUnknownMemberType),reportCallInDefaultInitializer:this._convertDiagnosticLevel(e.reportCallInDefaultInitializer,"reportCallInDefaultInitializer",l.reportCallInDefaultInitializer),reportUnnecessaryIsInstance:this._convertDiagnosticLevel(e.reportUnnecessaryIsInstance,"reportUnnecessaryIsInstance",l.reportUnnecessaryIsInstance),reportUnnecessaryCast:this._convertDiagnosticLevel(e.reportUnnecessaryCast,"reportUnnecessaryCast",l.reportUnnecessaryCast),reportAssertAlwaysTrue:this._convertDiagnosticLevel(e.reportAssertAlwaysTrue,"reportAssertAlwaysTrue",l.reportAssertAlwaysTrue),reportSelfClsParameterName:this._convertDiagnosticLevel(e.reportSelfClsParameterName,"reportSelfClsParameterName",l.reportSelfClsParameterName),reportImplicitStringConcatenation:this._convertDiagnosticLevel(e.reportImplicitStringConcatenation,"reportImplicitStringConcatenation",l.reportImplicitStringConcatenation),reportUndefinedVariable:this._convertDiagnosticLevel(e.reportUndefinedVariable,"reportUndefinedVariable",l.reportUndefinedVariable),reportUnboundVariable:this._convertDiagnosticLevel(e.reportUnboundVariable,"reportUnboundVariable",l.reportUnboundVariable)},this.venvPath=void 0,void 0!==e.venvPath&&("string"!=typeof e.venvPath?n.info('Config "venvPath" field must contain a string.'):this.venvPath=o.normalizePath(o.combinePaths(this.projectRoot,e.venvPath))),this.defaultVenv=void 0,void 0!==e.venv&&("string"!=typeof e.venv?n.info('Config "venv" field must contain a string.'):this.defaultVenv=e.venv),this.defaultPythonVersion=void 0,void 0!==e.pythonVersion)if("string"==typeof e.pythonVersion){const t=a.versionFromString(e.pythonVersion);t?this.defaultPythonVersion=t:n.info('Config "pythonVersion" field contains unsupported version.')}else n.info('Config "pythonVersion" field must contain a string.');if(this.ensureDefaultPythonVersion(r,n),this.defaultPythonPlatform=void 0,void 0!==e.pythonPlatform&&("string"!=typeof e.pythonPlatform?n.info('Config "pythonPlatform" field must contain a string.'):this.defaultPythonPlatform=e.pythonPlatform),this.ensureDefaultPythonPlatform(n),this.typeshedPath=void 0,void 0!==e.typeshedPath&&("string"!=typeof e.typeshedPath?n.info('Config "typeshedPath" field must contain a string.'):this.typeshedPath=e.typeshedPath?o.normalizePath(o.combinePaths(this.projectRoot,e.typeshedPath)):""),this.stubPath=void 0,void 0!==e.typingsPath&&("string"!=typeof e.typingsPath?n.info('Config "typingsPath" field must contain a string.'):(n.info('Config "typingsPath" is now deprecated. Please, use stubPath instead.'),this.stubPath=o.normalizePath(o.combinePaths(this.projectRoot,e.typingsPath)))),void 0!==e.stubPath&&("string"!=typeof e.stubPath?n.info('Config "stubPath" field must contain a string.'):this.stubPath=o.normalizePath(o.combinePaths(this.projectRoot,e.stubPath))),void 0!==e.verboseOutput&&("boolean"!=typeof e.verboseOutput?n.info('Config "verboseOutput" field must be true or false.'):this.verboseOutput=e.verboseOutput),void 0!==e.useLibraryCodeForTypes&&("boolean"!=typeof e.useLibraryCodeForTypes?n.info('Config "useLibraryCodeForTypes" field must be true or false.'):this.useLibraryCodeForTypes=e.useLibraryCodeForTypes),this.executionEnvironments=[],void 0!==e.executionEnvironments)if(Array.isArray(e.executionEnvironments)){e.executionEnvironments.forEach((e,t)=>{const i=this._initExecutionEnvironmentFromJson(e,t,n);i&&this.executionEnvironments.push(i)})}else n.info('Config "executionEnvironments" field must contain an array.')}ensureDefaultPythonPlatform(e){void 0===this.defaultPythonPlatform&&("darwin"===process.platform?this.defaultPythonPlatform="Darwin":"linux"===process.platform?this.defaultPythonPlatform="Linux":"win32"===process.platform&&(this.defaultPythonPlatform="Windows"),void 0!==this.defaultPythonPlatform&&e.info("Assuming Python platform "+this.defaultPythonPlatform))}ensureDefaultPythonVersion(e,t){void 0===this.defaultPythonVersion&&(this.defaultPythonVersion=this._getPythonVersionFromPythonInterpreter(e,t),void 0!==this.defaultPythonVersion&&t.info("Assuming Python version "+a.versionToString(this.defaultPythonVersion)))}applyDiagnosticOverrides(e){if(e)for(const[t,n]of Object.entries(e))this.diagnosticRuleSet[t]=n}_convertBoolean(e,t,n){return void 0===e?n:"boolean"==typeof e?!!e:(console.log(`Config "${t}" entry must be true or false.`),n)}_convertDiagnosticLevel(e,t,n){return void 0===e?n:"boolean"==typeof e?e?"error":"none":"string"!=typeof e||"error"!==e&&"warning"!==e&&"information"!==e&&"none"!==e?(console.log(`Config "${t}" entry must be true, false, "error", "warning", "information" or "none".`),n):e}_initExecutionEnvironmentFromJson(e,t,n){try{const i=new c(this.projectRoot,this.defaultPythonVersion,this.defaultPythonPlatform);if(e.root&&"string"==typeof e.root?i.root=o.normalizePath(o.combinePaths(this.projectRoot,e.root)):n.info(`Config executionEnvironments index ${t}: missing root value.`),e.extraPaths)if(Array.isArray(e.extraPaths)){e.extraPaths.forEach((e,s)=>{"string"!=typeof e?n.info(`Config executionEnvironments index ${t}: extraPaths field ${s} must be a string.`):i.extraPaths.push(o.normalizePath(o.combinePaths(this.projectRoot,e)))})}else n.info(`Config executionEnvironments index ${t}: extraPaths field must contain an array.`);if(e.pythonVersion)if("string"==typeof e.pythonVersion){const s=a.versionFromString(e.pythonVersion);s?i.pythonVersion=s:n.info(`Config executionEnvironments index ${t} contains unsupported pythonVersion.`)}else n.info(`Config executionEnvironments index ${t} pythonVersion must be a string.`);return e.pythonPlatform&&("string"==typeof e.pythonPlatform?i.pythonPlatform=e.pythonPlatform:n.info(`Config executionEnvironments index ${t} pythonPlatform must be a string.`)),e.venv&&("string"==typeof e.venv?i.venv=e.venv:n.info(`Config executionEnvironments index ${t} venv must be a string.`)),i}catch(e){n.info(`Config executionEnvironments index ${t} is not accessible.`)}}_getPythonVersionFromPythonInterpreter(e,t){try{const n=["--version"];let s;s=e?i.execFileSync(e,n,{encoding:"utf8"}):i.execFileSync("python",n,{encoding:"utf8"});const r=s.match(/[0-9]+.[0-9]+.[0-9]+/);if(!r)return void t.info(`Unable to get Python version from interpreter. Received "${s}"`);const o=r[0],c=a.versionFromString(o);return void 0===c?void t.info(`Unable to get Python version from interpreter. Received "${s}"`):c<a.PythonVersion.V30?void t.info(`Python version from interpreter is unsupported: "${s}"`):c}catch(e){return void t.info("Unable to get Python version from interpreter")}}}t.ConfigOptions=d},function(e,t){e.exports=require("os")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllImportNames=t.getContainingImportStatement=t.getTextEditsForAutoImportInsertion=t.getTextEditsForAutoImportSymbolAddition=t.getTopLevelImports=t.compareImportStatements=t.getImportGroup=void 0;const i=n(0),s=n(5),r=n(1),o=n(7),a=n(15);function c(e){return e.importResult?0===e.importResult.importType?0:1===e.importResult.importType||e.importResult.isLocalTypingsFile?1:e.importResult.isRelative?3:2:2}function l(e){let t="";for(let n=0;n<e.leadingDots;n++)t+=".";return t+=e.nameParts.map(e=>e.value).join("."),t}t.getImportGroup=c,t.compareImportStatements=function(e,t){const n=c(e),i=c(t);return n<i?-1:n>i?1:e.moduleName<t.moduleName?-1:1},t.getTopLevelImports=function(e){const t={orderedImports:[],mapByFilePath:new Map};let n=!1,i=!1;return e.statements.forEach(e=>{48===e.nodeType?e.statements.forEach(e=>{20===e.nodeType?(i=!0,function(e,t,n){e.list.forEach(i=>{const s=o.getImportInfo(i.module);let r;s&&s.isImportFound&&(r=s.resolvedPaths[s.resolvedPaths.length-1]);const a={node:e,subnode:i,importResult:s,resolvedPath:r,moduleName:l(i.module),followsNonImportStatement:n};t.orderedImports.push(a),r&&(t.mapByFilePath.has(r)||t.mapByFilePath.set(r,a))})}(e,t,n),n=!1):22===e.nodeType?(i=!0,function(e,t,n){const i=o.getImportInfo(e.module);let s;i&&i.isImportFound&&(s=i.resolvedPaths[i.resolvedPaths.length-1]);const r={node:e,importResult:i,resolvedPath:s,moduleName:l(e.module),followsNonImportStatement:n};if(t.orderedImports.push(r),s){const e=t.mapByFilePath.get(s);(!e||20===e.node.nodeType||e.moduleName.length>r.moduleName.length)&&t.mapByFilePath.set(s,r)}}(e,t,n),n=!1):n=i}):n=i}),t},t.getTextEditsForAutoImportSymbolAddition=function(e,t,n,i){const o=[];let a;if(t.node&&22===t.node.nodeType&&!t.node.imports.some(t=>t.name.value===e)){for(const n of t.node.imports){if(n.name.value>e)break;a=n}const c=a?r.TextRange.getEnd(a):t.node.imports.length>0?t.node.imports[0].start:t.node.start+t.node.length,l=s.convertOffsetToPosition(c,n.tokenizerOutput.lines),p=i?`${e} as ${i}`:e;o.push({range:{start:l,end:l},replacementText:a?", "+p:p+", "})}return o},t.getTextEditsForAutoImportInsertion=function(e,t,n,i,o,l){const p=[],u=e||n,d=l?`${u} as ${l}`:u;let h,f=e?`from ${n} import ${d}`:"import "+d;if(t.orderedImports.length>0){let e=!0,a=t.orderedImports[0],l=0;for(const s of t.orderedImports){const r=s.importResult?c(s):l;if(i<r){!e&&l<i&&(f=o.tokenizerOutput.predominantEndOfLineSequence+f);break}if(i===r&&s.moduleName>n)break;if(s.followsNonImportStatement){i>l&&(f=o.tokenizerOutput.predominantEndOfLineSequence+f);break}s===t.orderedImports[t.orderedImports.length-1]&&i>r&&(f=o.tokenizerOutput.predominantEndOfLineSequence+f),e=!e&&i<l&&i===r,l=r,a=s}a?(e?f+=o.tokenizerOutput.predominantEndOfLineSequence:f=o.tokenizerOutput.predominantEndOfLineSequence+f,h=s.convertOffsetToPosition(e?a.node.start:r.TextRange.getEnd(a.node),o.tokenizerOutput.lines)):h={line:0,character:0}}else{h={line:0,character:0};let e=!1;for(const t of o.parseTree.statements){let n=!0;if(48===t.nodeType&&1===t.statements.length){const e=t.statements[0];(49===e.nodeType||3===e.nodeType&&39===e.leftExpression.nodeType&&a.isDunderName(e.leftExpression.value))&&(n=!1)}if(n){h=s.convertOffsetToPosition(t.start,o.tokenizerOutput.lines),e=!1;break}h=s.convertOffsetToPosition(t.start+t.length,o.tokenizerOutput.lines),e=!0}f+=o.tokenizerOutput.predominantEndOfLineSequence+o.tokenizerOutput.predominantEndOfLineSequence,e?f=o.tokenizerOutput.predominantEndOfLineSequence+f:f+=o.tokenizerOutput.predominantEndOfLineSequence}return p.push({range:{start:h,end:h},replacementText:f}),p},t.getContainingImportStatement=function(e,t){for(;e&&(i.throwIfCancellationRequested(t),20!==e.nodeType&&22!==e.nodeType);)e=e.parent;return e},t.getAllImportNames=function(e){if(20===e.nodeType){return e.list}return e.imports}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Symbol=t.indeterminateSymbolId=void 0;const i=n(20);let s=1;t.indeterminateSymbolId=0;class r{constructor(e=4){this.id=s++,this._flags=e}static createWithType(e,t){const n=new r(e);return n._synthesizedType=t,n}isInitiallyUnbound(){return!!(1&this._flags)}setIsExternallyHidden(){this._flags|=2}isExternallyHidden(){return!!(2&this._flags)}setIsIgnoredForProtocolMatch(){this._flags|=32}isIgnoredForProtocolMatch(){return!!(32&this._flags)}setIsClassMember(){this._flags|=4}isClassMember(){return!!(4&this._flags)}setIsInstanceMember(){this._flags|=8}isInstanceMember(){return!!(8&this._flags)}setIsClassVar(){this._flags|=64}isClassVar(){return!!(64&this._flags)}setIsPrivateMember(){this._flags|=16}isPrivateMember(){return!!(16&this._flags)}addDeclaration(e){if(this._declarations){const t=this._declarations.findIndex(t=>i.areDeclarationsSame(t,e));if(t<0)this._declarations.push(e);else{const n=this._declarations[t];i.hasTypeForDeclaration(e)?(this._declarations[t]=e,1===n.type&&1===e.type&&!e.inferredTypeSource&&n.inferredTypeSource&&(e.inferredTypeSource=n.inferredTypeSource)):1===e.type&&1===n.type&&(e.isFinal&&(n.isFinal=!0),e.isTypeAlias&&(n.isTypeAlias=!0),!n.inferredTypeSource&&e.inferredTypeSource&&(n.inferredTypeSource=e.inferredTypeSource))}}else this._declarations=[e]}hasDeclarations(){return!!this._declarations&&this._declarations.length>0}getDeclarations(){return this._declarations?this._declarations:[]}hasTypedDeclarations(){return!!this._synthesizedType||this.getDeclarations().some(e=>i.hasTypeForDeclaration(e))}getTypedDeclarations(){return this.getDeclarations().filter(e=>i.hasTypeForDeclaration(e))}getSynthesizedType(){return this._synthesizedType}}t.Symbol=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStubFile=t.SourceMapper=void 0;const i=n(7),s=n(6),r=n(4);function o(e){return".pyi"===r.getAnyExtensionFromPath(e,[".pyi"],!1)}function a(e){return void 0!==e}t.SourceMapper=class{constructor(e,t,n,i){this._importResolver=e,this._execEnv=t,this._evaluator=n,this._fileBinder=i}findModules(e){return this._getBoundSourceFiles(e).map(e=>{var t;return null===(t=e.getParseResults())||void 0===t?void 0:t.parseTree}).filter(a)}findDeclarations(e){return 4===e.type?this.findClassDeclarations(e):3===e.type?this.findFunctionDeclarations(e):[]}findClassDeclarations(e){const t=this._getFullClassName(e.node);return this._getBoundSourceFiles(e.path).flatMap(e=>this._findClassDeclarations(e,t))}findFunctionDeclarations(e){const t=e.node.name.value,n=this._getBoundSourceFiles(e.path);if(e.isMethod){const i=s.getEnclosingClass(e.node);if(void 0===i)return[];const r=this._getFullClassName(i);return n.flatMap(e=>this._findMethodDeclarations(e,r,t))}return n.flatMap(e=>this._findFunctionDeclarations(e,t))}_findMethodDeclarations(e,t,n){const i=[],s=this._findClassDeclarations(e,t);for(const e of s){const t=this._lookUpSymbolDeclarations(e.node,n);for(const e of t)3===e.type&&e.isMethod&&i.push(e)}return i}_findFunctionDeclarations(e,t){var n;const i=[],s=this._lookUpSymbolDeclarations(null===(n=e.getParseResults())||void 0===n?void 0:n.parseTree,t);for(const e of s)if(3===e.type)i.push(e);else if(6===e.type){const t=this._evaluator.resolveAliasDeclaration(e,!0);t&&3===t.type&&(o(t.path)?i.push(...this.findFunctionDeclarations(t)):i.push(t))}return i}_findClassDeclarations(e,t){var n;let i=[];const s=null===(n=e.getParseResults())||void 0===n?void 0:n.parseTree;if(s){let n=t.split(".");n.length>0&&(i=this._findClassDeclarationsUnderNode(e,n[0],s),n=n.slice(1));for(const t of n)i=this._findClassDeclarationsUnderClass(e,t,i)}return i}_findClassDeclarationsUnderClass(e,t,n){return n.flatMap(n=>this._findClassDeclarationsUnderNode(e,t,n.node))}_findClassDeclarationsUnderNode(e,t,n){const i=[];for(const e of this._lookUpSymbolDeclarations(n,t))4===e.type&&i.push(e);return i}_lookUpSymbolDeclarations(e,t){if(void 0===e)return[];const n=i.getScope(e),s=null==n?void 0:n.lookUpSymbol(t),r=null==s?void 0:s.getDeclarations();return null!=r?r:[]}_getFullClassName(e){const t=[];let n=e;for(;void 0!==n;)t.push(n.name.value),n=s.getEnclosingClass(n);return t.reverse().join(".")}_getBoundSourceFiles(e){return this._importResolver.getSourceFilesFromStub(e,this._execEnv).map(t=>this._fileBinder(e,t)).filter(a)}},t.isStubFile=o},function(e,t,n){"use strict";const i=n(3),s={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:"\\.{1,2}(?:\\/|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|\\/)\\.{1,2}(?:\\/|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:\\/|$))",QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},r={...s,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:i.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?r:s}},function(e,t,n){"use strict";const i=n(3),s={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:"\\.{1,2}(?:\\/|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|\\/)\\.{1,2}(?:\\/|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:\\/|$))",QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},r={...s,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:i.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?r:s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDeferredFromPromise=t.createDeferredFrom=t.createDeferred=void 0;class i{constructor(e=null){this.scope=e,this._resolved=!1,this._rejected=!1,this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}resolve(e){this._resolve.apply(this.scope?this.scope:this,arguments),this._resolved=!0}reject(e){this._reject.apply(this.scope?this.scope:this,arguments),this._rejected=!0}get promise(){return this._promise}get resolved(){return this._resolved}get rejected(){return this._rejected}get completed(){return this._rejected||this._resolved}}function s(e=null){return new i(e)}t.createDeferred=s,t.createDeferredFrom=function(...e){const t=s();return Promise.all(e).then(t.resolve.bind(t)).catch(t.reject.bind(t)),t},t.createDeferredFromPromise=function(e){const t=s();return e.then(t.resolve.bind(t)).catch(t.reject.bind(t)),t}},function(e,t,n){"use strict";function i(e){return"string"==typeof e||e instanceof String}function s(e){return"function"==typeof e}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=s,t.array=r,t.stringArray=function(e){return r(e)&&e.every(e=>i(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&s(e.then)}},function(e,t){e.exports=require("child_process")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNestedProperty=t.flatten=t.binarySearchKey=t.binarySearch=t.every=t.some=t.map=t.stableSort=t.cloneAndSort=t.insertAt=t.addRange=t.find=t.append=t.contains=t.emptyArray=void 0;const i=n(23);function s(e,t){return t<0?e.length+t:t}function r(e,t,n,i){if(void 0===t||0===t.length)return e;if(void 0===e)return t.slice(n,i);n=void 0===n?0:s(t,n),i=void 0===i?t.length:s(t,i);for(let s=n;s<i&&s<t.length;s++)void 0!==t[s]&&e.push(t[s]);return e}function o(e,t){return t}function a(e,t){return!!e&&(t?e.some(t):e.length>0)}function c(e,t,n,i,s){if(!a(e))return-1;let r=s||0,o=e.length-1;for(;r<=o;){const s=r+(o-r>>1);switch(i(n(e[s]),t)){case-1:r=s+1;break;case 0:return s;case 1:o=s-1}}return~r}t.emptyArray=[],t.contains=function(e,t,n=i.equateValues){if(e)for(const i of e)if(n(i,t))return!0;return!1},t.append=function(e,t){return void 0===t?e:void 0===e?[t]:(e.push(t),e)},t.find=function(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(t(i,n))return i}},t.addRange=r,t.insertAt=function(e,t,n){if(0===t)e.unshift(n);else if(t===e.length)e.push(n);else{for(let n=e.length;n>t;n--)e[n]=e[n-1];e[t]=n}return e},t.cloneAndSort=function(e,t){return 0===e.length?e:e.slice().sort(t)},t.stableSort=function(e,t){const n=function(e){return e.map(o)}(e);return function(e,t,n){t.sort((t,s)=>n(e[t],e[s])||i.compareValues(t,s))}(e,n,t),n.map(t=>e[t])},t.map=function(e,t){if(e)return e.map(t)},t.some=a,t.every=function(e,t){return!e||e.every(t)},t.binarySearch=function(e,t,n,i,s){return c(e,n(t),n,i,s)},t.binarySearchKey=c,t.flatten=function(e){const t=[];for(const n of e)n&&(i.isArray(n)?r(t,n):t.push(n));return t},t.getNestedProperty=function(e,t){return t.split(".").reduce((e,t)=>e&&e[t],e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportResolver=void 0;const i=n(4),s=n(30),r=n(19),o=n(19),a=n(61),c=n(15),l=[".pyd",".so",".dylib"],p=[".py",".pyi",...l];t.ImportResolver=class{constructor(e,t){this._cachedPythonSearchPaths=new Map,this._cachedImportResults=new Map,this.fileSystem=e,this._configOptions=t}invalidateCache(){this._cachedPythonSearchPaths=new Map,this._cachedImportResults=new Map}resolveImport(e,t,n){const i=this._formatImportName(n),s=[],r={importName:i,isRelative:!1,isImportFound:!1,isNamespacePackage:!1,importFailureInfo:s,resolvedPaths:[],importType:2,isStubFile:!1,isNativeLib:!1,implicitImports:[],nonStubImportResult:void 0};if(n.leadingDots>0){const t=this._resolveRelativeImport(e,n,i,s);if(t)return t.isRelative=!0,t}else{const s=this._lookUpResultsInCache(t,i,n.importedSymbols);if(s)return s;const o=this._resolveBestAbsoluteImport(e,t,n,!0);if(o)return o.isStubFile&&(o.nonStubImportResult=this._resolveBestAbsoluteImport(e,t,n,!1)||r),this._addResultsToCache(t,i,o,n.importedSymbols)}return this._addResultsToCache(t,i,r,void 0)}_resolveBestAbsoluteImport(e,t,n,i){const s=this._formatImportName(n),r=[];if(i&&n.nameParts.length>0){const e=this._findTypeshedPath(t,n,s,!0,r);if(e)return e.isTypeshedFile=!0,e}let o;r.push(`Looking in root directory of execution environment '${t.root}'`);let a=this.resolveAbsoluteImport(t.root,n,s,r,void 0,void 0,void 0,i);if(a&&a.isImportFound&&!a.isNamespacePackage)return a;o=a;for(const e of t.extraPaths){if(r.push(`Looking in extraPath '${e}'`),a=this.resolveAbsoluteImport(e,n,s,r,void 0,void 0,void 0,i),a&&a.isImportFound)return a;a&&(void 0===o||!o.isImportFound&&a.isImportFound||o.isNamespacePackage&&!a.isNamespacePackage||a.resolvedPaths.length>o.resolvedPaths.length)&&(o=a)}if(i){if(this._configOptions.stubPath){r.push(`Looking in stubPath '${this._configOptions.stubPath}'`);const e=this.resolveAbsoluteImport(this._configOptions.stubPath,n,s,r);if(e&&e.isImportFound)return e.importType=2,e.isLocalTypingsFile=!0,e}r.push("Looking for typeshed path");const e=this._findTypeshedPath(t,n,s,!1,r);if(e)return e.isTypeshedFile=!0,e}const c=this._getPythonSearchPaths(t,r);if(c.length>0)for(const e of c){r.push(`Looking in python search path '${e}'`);const t=this.resolveAbsoluteImport(e,n,s,r,!0,!0,!0,i);if(t){if(t.importType=1,t.isImportFound&&t.isStubFile)return t;(void 0===o||!o.isImportFound&&t.isImportFound||o.isNamespacePackage&&!t.isNamespacePackage||t.resolvedPaths.length>o.resolvedPaths.length)&&(o=t)}}else r.push("No python interpreter search path");const l=this.resolveImportEx(e,t,n,s,r,i);return void 0!==l?l:o}resolveImportEx(e,t,n,i,s=[],r=!0){}getCompletionSuggestions(e,t,n,i){const s=[],r=[];if(n.leadingDots>0)this._getCompletionSuggestionsRelative(e,n,r,i);else{n.nameParts.length>0&&this._getCompletionSuggestionsTypeshedPath(t,n,!0,r,i),this._getCompletionSuggestionsAbsolute(t.root,n,r,i);for(const e of t.extraPaths)this._getCompletionSuggestionsAbsolute(e,n,r,i);this._configOptions.stubPath&&this._getCompletionSuggestionsAbsolute(this._configOptions.stubPath,n,r,i),this._getCompletionSuggestionsTypeshedPath(t,n,!1,r,i);const e=this._getPythonSearchPaths(t,s);for(const t of e)this._getCompletionSuggestionsAbsolute(t,n,r,i)}return r}getSourceFilesFromStub(e,t){const n=[];if(this._cachedImportResults.forEach((t,i)=>{t.forEach((t,i)=>{if(t.isStubFile&&t.isImportFound&&t.nonStubImportResult&&t.resolvedPaths.some(t=>t===e)&&t.nonStubImportResult.isImportFound){const e=t.nonStubImportResult.resolvedPaths.filter(e=>e.endsWith(".py"));n.push(...e)}})}),0===n.length){const t=i.changeAnyExtension(e,".py");this.fileSystem.existsSync(t)&&n.push(t)}if(0===n.length){const s=this.getImportRoots(t,!0),r=[];for(const t of s)if(i.containsPath(t,e,!0)){const n=i.getRelativePathComponentsFromDirectory(t,e,!0);if(n.length>1){const e="-stubs";n[1].endsWith(e)&&(n[1]=n[1].substr(0,n[1].length-e.length));const t=i.combinePathComponents(n);t&&r.push(t)}}for(const e of r)for(const t of s){const s=i.resolvePaths(t,e);let r=i.changeAnyExtension(s,".py");if(this.fileSystem.existsSync(r))n.push(r);else{const e=i.stripFileExtension(r);e.endsWith("__init__")?(r=e.substr(0,e.length-9)+".py",this.fileSystem.existsSync(r)&&n.push(r)):(r=i.combinePaths(e,"__init__.py"),this.fileSystem.existsSync(r)&&n.push(r))}}}return n}getModuleNameForImport(e,t){let n,i=0,s=!1;const r=[],o=this._getTypeshedPath(!0,t,r);if(o&&(n=this._getModuleNameFromPath(o,e,!0),n))return{moduleName:n,importType:i,isLocalTypingsFile:s};n=this._getModuleNameFromPath(t.root,e);for(const s of t.extraPaths){const t=this._getModuleNameFromPath(s,e);(!n||t&&t.length<n.length)&&(n=t,i=2)}if(this._configOptions.stubPath){const t=this._getModuleNameFromPath(this._configOptions.stubPath,e);(!n||t&&t.length<n.length)&&(n=t,i=2,s=!0)}const a=this._getTypeshedPath(!1,t,r);if(a){const t=this._getModuleNameFromPath(a,e,!0);(!n||t&&t.length<n.length)&&(n=t,i=1)}const c=this._getPythonSearchPaths(t,r);for(const t of c){const s=this._getModuleNameFromPath(t,e);(!n||s&&s.length<n.length)&&(n=s,i=1)}return n?{moduleName:n,importType:i,isLocalTypingsFile:s}:{moduleName:"",importType:2,isLocalTypingsFile:s}}getImportRoots(e,t){const n=[],r=[],o=255&e.pythonVersion,a=["2and3","3"];o>0&&a.push(s.versionToString(768+o));const c=this._getTypeshedPath(!0,e,n);c&&(t?r.push(...a.map(e=>i.combinePaths(c,e))):r.push(c)),r.push(e.root),r.push(...e.extraPaths),this._configOptions.stubPath&&r.push(this._configOptions.stubPath);const l=this._getTypeshedPath(!1,e,n);l&&(t?r.push(...a.map(e=>i.combinePaths(l,e))):r.push(l));const p=this._getPythonSearchPaths(e,n);return p.length>0&&r.push(...p),r}_lookUpResultsInCache(e,t,n){const i=this._cachedImportResults.get(e.root);if(!i)return;const s=i.get(t);return s?this._filterImplicitImports(s,n):void 0}_addResultsToCache(e,t,n,i){let s=this._cachedImportResults.get(e.root);return s||(s=new Map,this._cachedImportResults.set(e.root,s)),s.set(t,n),this._filterImplicitImports(n,i)}_getModuleNameFromPath(e,t,n=!1){e=i.ensureTrailingDirectorySeparator(e);let s=i.stripFileExtension(t);if(!s.startsWith(e))return;s.endsWith("__init__")&&(s=s.substr(0,s.length-9));const r=s.substr(e.length),o=i.getPathComponents(r);if(o.shift(),n){if(0===o.length)return;o.shift()}if(0===o.length)return;return o[0].endsWith("-stubs")&&(o[0]=o[0].substr(0,o[0].length-"-stubs".length)),o.join(".")}_getPythonSearchPaths(e,t){const n=e.venv?e.venv:"<default>";return this._cachedPythonSearchPaths.has(n)||this._cachedPythonSearchPaths.set(n,a.findPythonSearchPaths(this.fileSystem,this._configOptions,e.venv,t)||[]),this._cachedPythonSearchPaths.get(n)}_findTypeshedPath(e,t,n,r,o){o.push(`Looking for typeshed ${r?"stdlib":"third_party"} path`);const a=this._getTypeshedPath(r,e,o);if(!a)return;let c=255&e.pythonVersion;for(;;){const e=c>0?s.versionToString(768+c):0===c?"3":"2and3",l=i.combinePaths(a,e);if(this.fileSystem.existsSync(l)){const e=this.resolveAbsoluteImport(l,t,n,o);if(e&&e.isImportFound)return e.importType=r?0:1,e}if(-1===c)break;c--}o.push("Typeshed path not found")}_getCompletionSuggestionsTypeshedPath(e,t,n,r,o){const a=this._getTypeshedPath(n,e,[]);if(!a)return;let c=255&e.pythonVersion;for(;;){const e=c>0?s.versionToString(768+c):0===c?"3":"2and3",n=i.combinePaths(a,e);if(this.fileSystem.existsSync(n)&&this._getCompletionSuggestionsAbsolute(n,t,r,o),-1===c)break;c--}}_getTypeshedPath(e,t,n){if(e){if(void 0!==this._cachedTypeshedStdLibPath)return this._cachedTypeshedStdLibPath}else if(void 0!==this._cachedTypeshedThirdPartyPath)return this._cachedTypeshedThirdPartyPath;let s="";if(this._configOptions.typeshedPath){const e=this._configOptions.typeshedPath;this.fileSystem.existsSync(e)&&i.isDirectory(this.fileSystem,e)&&(s=e)}else{const e=this._getPythonSearchPaths(t,n);for(const t of e){const e=i.combinePaths(t,"typeshed");if(this.fileSystem.existsSync(e)&&i.isDirectory(this.fileSystem,e)){s=e;break}}}if(s||(s=a.getTypeShedFallbackPath(this.fileSystem)||""),s=a.getTypeshedSubdirectory(s,e),this.fileSystem.existsSync(s)&&i.isDirectory(this.fileSystem,s))return e?this._cachedTypeshedStdLibPath=s:this._cachedTypeshedThirdPartyPath=s,s}_resolveRelativeImport(e,t,n,s){s.push("Attempting to resolve relative import");let r=i.getDirectoryPath(e);for(let e=1;e<t.leadingDots;e++){if(""===r)return void s.push(`Invalid relative path '${n}'`);r=i.getDirectoryPath(r)}const o=this.resolveAbsoluteImport(r,t,n,s);if(o)return this._filterImplicitImports(o,t.importedSymbols)}_getCompletionSuggestionsRelative(e,t,n,s){let r=i.getDirectoryPath(e);for(let e=1;e<t.leadingDots;e++){if(""===r)return;r=i.getDirectoryPath(r)}this._getCompletionSuggestionsAbsolute(r,t,n,s)}resolveAbsoluteImport(e,t,n,s,o=!1,a=!1,c=!1,p=!0){s.push(`Attempting to resolve using root path '${e}'`);const u=[];let d,h=e,f=!1,m=!1,g=!1,y=[];if(0===t.nameParts.length){const e="__init__",t=i.combinePaths(h,e+".py"),n=i.combinePaths(h,e+".pyi");p&&this.fileSystem.existsSync(n)&&i.isFile(this.fileSystem,n)?(s.push(`Resolved import with file '${n}'`),u.push(n),m=!0):this.fileSystem.existsSync(t)&&i.isFile(this.fileSystem,t)?(s.push(`Resolved import with file '${t}'`),u.push(t)):(s.push(`Partially resolved import with directory '${h}'`),u.push(""),f=!0),y=this._findImplicitImports(h,[t,n])}else for(let e=0;e<t.nameParts.length;e++){const n=e===t.nameParts.length-1;h=i.combinePaths(h,t.nameParts[e]);let o=!1;if(p&&c){const e=h+"-stubs";o=this.fileSystem.existsSync(e)&&i.isDirectory(this.fileSystem,e),o&&(h=e)}if(o||(o=this.fileSystem.existsSync(h)&&i.isDirectory(this.fileSystem,h)),o){if(!n){u.push("");continue}const e="__init__",t=i.combinePaths(h,e+".py"),r=i.combinePaths(h,e+".pyi");let o=!1;if(p&&this.fileSystem.existsSync(r)&&i.isFile(this.fileSystem,r)?(s.push(`Resolved import with file '${r}'`),u.push(r),n&&(m=!0),o=!0):this.fileSystem.existsSync(t)&&i.isFile(this.fileSystem,t)&&(s.push(`Resolved import with file '${t}'`),u.push(t),o=!0),o){y=this._findImplicitImports(h,[t,r]);break}}let d=i.stripTrailingDirectorySeparator(h);const _=i.getFileName(d);d=i.getDirectoryPath(d);const T=i.combinePaths(d,_+".py"),v=i.combinePaths(d,_+".pyi");if(p&&this.fileSystem.existsSync(v)&&i.isFile(this.fileSystem,v))s.push(`Resolved import with file '${v}'`),u.push(v),n&&(m=!0);else if(this.fileSystem.existsSync(T)&&i.isFile(this.fileSystem,T))s.push(`Resolved import with file '${T}'`),u.push(T);else{if(a){const e=this._getFilesInDirectory(d).find(e=>{const t=i.getFileExtension(e,!1).toLowerCase(),n=i.stripFileExtension(e,!0);return!(!l.some(e=>e===t)||!r.equateStringsCaseInsensitive(_,n))});if(e){const t=i.combinePaths(d,e);s.push(`Resolved import with file '${t}'`),u.push(t),g=!0}}!g&&o?(s.push(`Partially resolved import with directory '${h}'`),u.push(""),n&&(y=this._findImplicitImports(h,[T,v]),f=!0)):s.push(`Did not find file '${v}' or '${T}'`)}break}return o?d=u.length>0:(d=u.length>=t.nameParts.length,f&&0===y.length&&(d=!1)),{importName:n,isRelative:!1,isNamespacePackage:f,isImportFound:d,importFailureInfo:s,importType:2,resolvedPaths:u,searchPath:e,isStubFile:m,isNativeLib:g,implicitImports:y}}_getFilesInDirectory(e){return this.fileSystem.readdirEntriesSync(e).filter(e=>e.isFile()).map(e=>e.name)}_getCompletionSuggestionsAbsolute(e,t,n,s){let r=e;const o=t.nameParts.map(e=>e);if(t.hasTrailingDot&&o.push(""),0===o.length)this._addFilteredSuggestions(r,"",n,s);else for(let e=0;e<o.length&&(e===o.length-1&&this._addFilteredSuggestions(r,o[e],n,s),r=i.combinePaths(r,o[e]),this.fileSystem.existsSync(r)&&i.isDirectory(this.fileSystem,r));e++);}_addFilteredSuggestions(e,t,n,s){const r=i.getFileSystemEntries(this.fileSystem,e);r.files.forEach(e=>{const r=i.getFileExtension(e,!1).toLowerCase(),a=i.stripFileExtension(e,!0);p.some(e=>e===r)&&"__init__"!==a&&(!t||o.computeCompletionSimilarity(t,a)>=s)&&this._addUniqueSuggestion(a,n)}),r.directories.forEach(e=>{t&&!e.startsWith(t)||this._addUniqueSuggestion(e,n)})}_addUniqueSuggestion(e,t){t.some(t=>t===e)||/[.-]/.test(e)||c.isDunderName(e)||t.push(e)}_filterImplicitImports(e,t){if(void 0===t){const t=Object.assign({},e);return t.implicitImports=[],t}if(0===t.length)return e;if(0===e.implicitImports.length)return e;const n=e.implicitImports.filter(e=>t.some(t=>t===e.name));if(n.length===e.implicitImports.length)return e;const i=Object.assign({},e);return i.implicitImports=n,i}_findImplicitImports(e,t){const n=new Map,s=i.getFileSystemEntries(this.fileSystem,e);for(const r of s.files)if(r.endsWith(".py")||r.endsWith(".pyi")){const s=i.combinePaths(e,r);if(!t.find(e=>e===s)){const e=i.stripFileExtension(r),t={isStubFile:r.endsWith(".pyi"),name:e,path:s},o=n.get(t.name);o&&o.isStubFile||n.set(t.name,t)}}for(const r of s.directories){const s=i.combinePaths(e,r,"__init__.py"),o=s+"i";let a=!1,c="";if(this.fileSystem.existsSync(o)&&i.isFile(this.fileSystem,o)?(a=!0,c=o):this.fileSystem.existsSync(s)&&i.isFile(this.fileSystem,s)&&(c=s),c&&!t.find(e=>e===c)){const e={isStubFile:a,name:r,path:c};n.set(e.name,e)}}return[...n.values()]}_formatImportName(e){let t="";for(let n=0;n<e.leadingDots;n++)t+=".";return t+e.nameParts.map(e=>e).join(".")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createKeyForReference=t.isCodeFlowSupportedForReference=t.getUniqueFlowNodeId=t.FlowFlags=void 0;const i=n(2);!function(e){e[e.Unreachable=1]="Unreachable",e[e.Start=2]="Start",e[e.BranchLabel=4]="BranchLabel",e[e.LoopLabel=8]="LoopLabel",e[e.Assignment=16]="Assignment",e[e.Unbind=32]="Unbind",e[e.WildcardImport=64]="WildcardImport",e[e.TrueCondition=128]="TrueCondition",e[e.FalseCondition=512]="FalseCondition",e[e.Call=1024]="Call",e[e.PreFinallyGate=2048]="PreFinallyGate",e[e.PostFinally=4096]="PostFinally",e[e.AssignmentAlias=8192]="AssignmentAlias"}(t.FlowFlags||(t.FlowFlags={}));let s=1;t.getUniqueFlowNodeId=function(){return s++},t.isCodeFlowSupportedForReference=function e(t){return 39===t.nodeType||36===t.nodeType&&e(t.leftExpression)},t.createKeyForReference=function(e){let t;if(39===e.nodeType)t=e.value;else{t=e.memberName.value;let n=e.leftExpression;for(;36===n.nodeType;)t=n.memberName.value+"."+t,n=n.leftExpression;i.assert(39===n.nodeType),t=n.value+"."+t}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScopeForNode=t.getBuiltInScope=void 0;const i=n(7),s=n(6);t.getBuiltInScope=function(e){let t=e;for(;4!==t.type;)t=t.parent;return t},t.getScopeForNode=function(e){const t=s.getEvaluationScopeNode(e);return i.getScope(t)}},function(e,t,n){"use strict";const i=n(3),s="win32"===process.platform,{REGEX_BACKSLASH:r,REGEX_REMOVE_BACKSLASH:o,REGEX_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_GLOBAL:c}=n(37);t.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t.hasRegexChars=e=>a.test(e),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=e=>e.replace(c,"\\$1"),t.toPosixSlashes=e=>e.replace(r,"/"),t.removeBackslashes=e=>e.replace(o,e=>"\\"===e?"":e),t.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return 3===e.length&&e[0]>=9||8===e[0]&&e[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===s||"\\"===i.sep,t.escapeLast=(e,n,i)=>{const s=e.lastIndexOf(n,i);return-1===s?e:"\\"===e[s-1]?t.escapeLast(e,n,s-1):`${e.slice(0,s)}\\${e.slice(s)}`},t.removePrefix=(e,t={})=>{let n=e;return n.startsWith("./")&&(n=n.slice(2),t.prefix="./"),n},t.wrapOutput=(e,t={},n={})=>{let i=`${n.contains?"":"^"}(?:${e})${n.contains?"":"$"}`;return!0===t.negated&&(i=`(?:^(?!${i}).*$)`),i}},function(e,t,n){"use strict";const i=n(3),s="win32"===process.platform,{REGEX_BACKSLASH:r,REGEX_REMOVE_BACKSLASH:o,REGEX_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_GLOBAL:c}=n(38);t.hasRegexChars=e=>a.test(e),t.escapeRegex=e=>e.replace(c,"\\$1"),t.toPosixSlashes=e=>e.replace(r,"/"),t.removeBackslashes=e=>e.replace(o,e=>"\\"===e?"":e),t.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return 3===e.length&&e[0]>=9||8===e[0]&&e[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===s||"\\"===i.sep,t.escapeLast=(e,n,i)=>{const s=e.lastIndexOf(n,i);return-1===s?e:"\\"===e[s-1]?t.escapeLast(e,n,s-1):e.slice(0,s)+"\\"+e.slice(s)},t.removePrefix=(e,t={})=>{let n=e;return n.startsWith("./")&&(n=n.slice(2),t.prefix="./"),n},t.wrapOutput=(e,t={},n={})=>{let i=`${n.contains?"":"^"}(?:${e})${n.contains?"":"$"}`;return!0===t.negated&&(i=`(?:^(?!${i}).*$)`),i}},function(e,t,n){"use strict";const i=n(49);e.exports=(e,t={})=>{let n=(e,s={})=>{let r=t.escapeInvalid&&i.isInvalidBrace(s),o=!0===e.invalid&&!0===t.escapeInvalid,a="";if(e.value)return(r||o)&&i.isOpenOrClose(e)?"\\"+e.value:e.value;if(e.value)return e.value;if(e.nodes)for(let t of e.nodes)a+=n(t);return a};return n(e)}},function(e,t,n){"use strict";t.isInteger=e=>"number"==typeof e?Number.isInteger(e):"string"==typeof e&&""!==e.trim()&&Number.isInteger(Number(e)),t.find=(e,t)=>e.nodes.find(e=>e.type===t),t.exceedsLimit=(e,n,i=1,s)=>!1!==s&&(!(!t.isInteger(e)||!t.isInteger(n))&&(Number(n)-Number(e))/Number(i)>=s),t.escapeNode=(e,t=0,n)=>{let i=e.nodes[t];i&&(n&&i.type===n||"open"===i.type||"close"===i.type)&&!0!==i.escaped&&(i.value="\\"+i.value,i.escaped=!0)},t.encloseBrace=e=>"brace"===e.type&&(e.commas>>0+e.ranges>>0==0&&(e.invalid=!0,!0)),t.isInvalidBrace=e=>"brace"===e.type&&(!(!0!==e.invalid&&!e.dollar)||(e.commas>>0+e.ranges>>0==0||!0!==e.open||!0!==e.close)&&(e.invalid=!0,!0)),t.isOpenOrClose=e=>"open"===e.type||"close"===e.type||(!0===e.open||!0===e.close),t.reduce=e=>e.reduce((e,t)=>("text"===t.type&&e.push(t.value),"range"===t.type&&(t.type="text"),e),[]),t.flatten=(...e)=>{const t=[],n=e=>{for(let i=0;i<e.length;i++){let s=e[i];Array.isArray(s)?n(s,t):void 0!==s&&t.push(s)}return t};return n(e),t}},function(e,t,n){"use strict";const{sep:i}=n(3),{platform:s}=process;t.EV_ALL="all",t.EV_READY="ready",t.EV_ADD="add",t.EV_CHANGE="change",t.EV_ADD_DIR="addDir",t.EV_UNLINK="unlink",t.EV_UNLINK_DIR="unlinkDir",t.EV_RAW="raw",t.EV_ERROR="error",t.STR_DATA="data",t.STR_END="end",t.STR_CLOSE="close",t.FSEVENT_CREATED="created",t.FSEVENT_MODIFIED="modified",t.FSEVENT_DELETED="deleted",t.FSEVENT_MOVED="moved",t.FSEVENT_CLONED="cloned",t.FSEVENT_UNKNOWN="unknown",t.FSEVENT_TYPE_FILE="file",t.FSEVENT_TYPE_DIRECTORY="directory",t.FSEVENT_TYPE_SYMLINK="symlink",t.KEY_LISTENERS="listeners",t.KEY_ERR="errHandlers",t.KEY_RAW="rawEmitters",t.HANDLER_KEYS=[t.KEY_LISTENERS,t.KEY_ERR,t.KEY_RAW],t.DOT_SLASH="."+i,t.BACK_SLASH_RE=/\\/g,t.DOUBLE_SLASH_RE=/\/\//,t.SLASH_OR_BACK_SLASH_RE=/[/\\]/,t.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,t.REPLACER_RE=/^\.[/\\]/,t.SLASH="/",t.BRACE_START="{",t.BANG="!",t.ONE_DOT=".",t.TWO_DOTS="..",t.STAR="*",t.GLOBSTAR="**",t.ROOT_GLOBSTAR="/**/*",t.SLASH_GLOBSTAR="/**",t.DIR_SUFFIX="Dir",t.ANYMATCH_OPTS={dot:!0},t.STRING_TYPE="string",t.FUNCTION_TYPE="function",t.EMPTY_STR="",t.EMPTY_FN=()=>{},t.IDENTITY_FN=e=>e,t.isWindows="win32"===s,t.isMacos="darwin"===s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.analyzeProgram=t.nullCallback=void 0;const i=n(0),s=n(2),r=n(24);t.nullCallback=e=>{},t.analyzeProgram=function(e,n,o,a,c,l){let p=!1;a=null!=a?a:t.nullCallback;try{i.throwIfCancellationRequested(l);const t=new r.Duration;p=e.analyze(n,l);const c=e.getFilesToAnalyzeCount();s.assert(0===c||p);const u=e.getDiagnostics(o),d=u.length,h=t.getDurationInSeconds();(d>0||!p)&&a({diagnostics:u,filesInProgram:e.getFileCount(),filesRequiringAnalysis:c,checkingOnlyOpenFiles:e.isCheckingOnlyOpenFiles(),fatalErrorOccurred:!1,configParseErrorOccurred:!1,elapsedTime:h})}catch(e){if(i.OperationCanceledException.is(e))return!1;const t=(e.stack?e.stack.toString():void 0)||("string"==typeof e.message?e.message:void 0)||JSON.stringify(e);c.error("Error performing analysis: "+t),a({diagnostics:[],filesInProgram:0,filesRequiringAnalysis:0,checkingOnlyOpenFiles:!0,fatalErrorOccurred:!0,configParseErrorOccurred:!1,elapsedTime:0})}return p}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(54);t.RequestType=i.RequestType,t.RequestType0=i.RequestType0,t.RequestType1=i.RequestType1,t.RequestType2=i.RequestType2,t.RequestType3=i.RequestType3,t.RequestType4=i.RequestType4,t.RequestType5=i.RequestType5,t.RequestType6=i.RequestType6,t.RequestType7=i.RequestType7,t.RequestType8=i.RequestType8,t.RequestType9=i.RequestType9,t.ResponseError=i.ResponseError,t.ErrorCodes=i.ErrorCodes,t.NotificationType=i.NotificationType,t.NotificationType0=i.NotificationType0,t.NotificationType1=i.NotificationType1,t.NotificationType2=i.NotificationType2,t.NotificationType3=i.NotificationType3,t.NotificationType4=i.NotificationType4,t.NotificationType5=i.NotificationType5,t.NotificationType6=i.NotificationType6,t.NotificationType7=i.NotificationType7,t.NotificationType8=i.NotificationType8,t.NotificationType9=i.NotificationType9,t.ParameterStructures=i.ParameterStructures;const s=n(52);t.Disposable=s.Disposable;const r=n(29);t.Event=r.Event,t.Emitter=r.Emitter;const o=n(55);t.CancellationTokenSource=o.CancellationTokenSource,t.CancellationToken=o.CancellationToken;const a=n(90);t.MessageReader=a.MessageReader,t.AbstractMessageReader=a.AbstractMessageReader,t.ReadableStreamMessageReader=a.ReadableStreamMessageReader;const c=n(91);t.MessageWriter=c.MessageWriter,t.AbstractMessageWriter=c.AbstractMessageWriter,t.WriteableStreamMessageWriter=c.WriteableStreamMessageWriter;const l=n(93);t.ConnectionStrategy=l.ConnectionStrategy,t.ConnectionOptions=l.ConnectionOptions,t.NullLogger=l.NullLogger,t.createMessageConnection=l.createMessageConnection,t.ProgressType=l.ProgressType,t.Trace=l.Trace,t.TraceFormat=l.TraceFormat,t.SetTraceNotification=l.SetTraceNotification,t.LogTraceNotification=l.LogTraceNotification,t.ConnectionErrors=l.ConnectionErrors,t.ConnectionError=l.ConnectionError,t.CancellationReceiverStrategy=l.CancellationReceiverStrategy,t.CancellationSenderStrategy=l.CancellationSenderStrategy,t.CancellationStrategy=l.CancellationStrategy;const p=n(13);t.RAL=p.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(28);var s;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.ContentModified=-32801,e.MessageWriteError=1,e.MessageReadError=2}(s=t.ErrorCodes||(t.ErrorCodes={}));class r extends Error{constructor(e,t,n){super(t),this.code=i.number(e)?e:s.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,r.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=r;class o{constructor(e){this.kind=e}static is(e){return e===o.auto||e===o.byName||e===o.byPosition}toString(){return this.kind}}t.ParameterStructures=o,o.auto=new o("auto"),o.byPosition=new o("byPosition"),o.byName=new o("byName");class a{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}get parameterStructures(){return o.auto}}t.AbstractMessageSignature=a;t.RequestType0=class extends a{constructor(e){super(e,0)}};t.RequestType=class extends a{constructor(e,t=o.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.RequestType1=class extends a{constructor(e,t=o.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.RequestType2=class extends a{constructor(e){super(e,2)}};t.RequestType3=class extends a{constructor(e){super(e,3)}};t.RequestType4=class extends a{constructor(e){super(e,4)}};t.RequestType5=class extends a{constructor(e){super(e,5)}};t.RequestType6=class extends a{constructor(e){super(e,6)}};t.RequestType7=class extends a{constructor(e){super(e,7)}};t.RequestType8=class extends a{constructor(e){super(e,8)}};t.RequestType9=class extends a{constructor(e){super(e,9)}};t.NotificationType=class extends a{constructor(e,t=o.auto){super(e,1),this._parameterStructures=t,this._=void 0}get parameterStructures(){return this._parameterStructures}};t.NotificationType0=class extends a{constructor(e){super(e,0)}};t.NotificationType1=class extends a{constructor(e,t=o.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.NotificationType2=class extends a{constructor(e){super(e,2)}};t.NotificationType3=class extends a{constructor(e){super(e,3)}};t.NotificationType4=class extends a{constructor(e){super(e,4)}};t.NotificationType5=class extends a{constructor(e){super(e,5)}};t.NotificationType6=class extends a{constructor(e){super(e,6)}};t.NotificationType7=class extends a{constructor(e){super(e,7)}};t.NotificationType8=class extends a{constructor(e){super(e,8)}};t.NotificationType9=class extends a{constructor(e){super(e,9)}},t.isRequestMessage=function(e){const t=e;return t&&i.string(t.method)&&(i.string(t.id)||i.number(t.id))},t.isNotificationMessage=function(e){const t=e;return t&&i.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(i.string(t.id)||i.number(t.id)||null===t.id)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(13),s=n(28),r=n(29);var o;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None}),e.is=function(t){const n=t;return n&&(n===e.None||n===e.Cancelled||s.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(o=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){const n=i.default().timer.setTimeout(e.bind(t),0);return{dispose(){i.default().timer.clearTimeout(n)}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=o.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=o.None}}},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),s=n(40),r=n(59),o=n(112),a=n(113),c=n(114),l=n(115);function p(e){if(null!==e)return e}t.TextDocuments=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new i.Emitter,this._onDidOpen=new i.Emitter,this._onDidClose=new i.Emitter,this._onDidSave=new i.Emitter,this._onWillSave=new i.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=i.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(e=>{let t=e.textDocument,n=this._configuration.create(t.uri,t.languageId,t.version,t.text);this._documents[t.uri]=n;let i=Object.freeze({document:n});this._onDidOpen.fire(i),this._onDidChangeContent.fire(i)}),e.onDidChangeTextDocument(e=>{let t=e.textDocument,n=e.contentChanges;if(0===n.length)return;let i=this._documents[t.uri];const{version:s}=t;if(null==s)throw new Error(`Received document change event for ${t.uri} without valid version identifier`);i=this._configuration.update(i,n,s),this._documents[t.uri]=i,this._onDidChangeContent.fire(Object.freeze({document:i}))}),e.onDidCloseTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&(delete this._documents[e.textDocument.uri],this._onDidClose.fire(Object.freeze({document:t})))}),e.onWillSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))}),e.onWillSaveTextDocumentWaitUntil((e,t)=>{let n=this._documents[e.textDocument.uri];return n&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]}),e.onDidSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onDidSave.fire(Object.freeze({document:t}))})}};t.ErrorMessageTracker=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}};class u{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(i.MessageType.Error,e)}warn(e){this.send(i.MessageType.Warning,e)}info(e){this.send(i.MessageType.Info,e)}log(e){this.send(i.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(i.LogMessageNotification.type,{type:e,message:t})}}const d=o.ProgressFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let n={type:i.MessageType.Error,message:e,actions:t};return this.connection.sendRequest(i.ShowMessageRequest.type,n).then(p)}showWarningMessage(e,...t){let n={type:i.MessageType.Warning,message:e,actions:t};return this.connection.sendRequest(i.ShowMessageRequest.type,n).then(p)}showInformationMessage(e,...t){let n={type:i.MessageType.Info,message:e,actions:t};return this.connection.sendRequest(i.ShowMessageRequest.type,n).then(p)}});!function(e){e.create=function(){return new h}}(t.BulkRegistration||(t.BulkRegistration={}));class h{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const n=s.string(e)?e:e.method;if(this._registered.has(n))throw new Error(n+" is already added to this registration");const i=r.generateUuid();this._registrations.push({id:i,method:n,registerOptions:t||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}}!function(e){e.create=function(){return new f(void 0,[])}}(t.BulkUnregistration||(t.BulkUnregistration={}));class f{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(e=>{this._unregistrations.set(e.method,e)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let t={unregisterations:e};this._connection.sendRequest(i.UnregistrationRequest.type,t).then(void 0,e=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){const t=s.string(e)?e:e.method,n=this._unregistrations.get(t);if(!n)return!1;let r={unregisterations:[n]};return this._connection.sendRequest(i.UnregistrationRequest.type,r).then(()=>{this._unregistrations.delete(t)},e=>{this._connection.console.info(`Unregistering request handler for ${n.id} failed.`)}),!0}}class m{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof h?this.registerMany(e):e instanceof f?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,t,n){const o=s.string(t)?t:t.method,a=r.generateUuid();let c={registrations:[{id:a,method:o,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(i.RegistrationRequest.type,c).then(t=>(e.add({id:a,method:o}),e),e=>(this.connection.console.info(`Registering request handler for ${o} failed.`),Promise.reject(e)))}registerSingle2(e,t){const n=s.string(e)?e:e.method,o=r.generateUuid();let a={registrations:[{id:o,method:n,registerOptions:t||{}}]};return this.connection.sendRequest(i.RegistrationRequest.type,a).then(e=>i.Disposable.create(()=>{this.unregisterSingle(o,n)}),e=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(e)))}unregisterSingle(e,t){let n={unregisterations:[{id:e,method:t}]};return this.connection.sendRequest(i.UnregistrationRequest.type,n).then(void 0,t=>{this.connection.console.info(`Unregistering request handler for ${e} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this.connection.sendRequest(i.RegistrationRequest.type,t).then(()=>new f(this._connection,t.registrations.map(e=>({id:e.id,method:e.method}))),e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e)))}}const g=c.WorkspaceFoldersFeature(a.ConfigurationFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let t=(n=e)&&n.edit?e:{edit:e};var n;return this.connection.sendRequest(i.ApplyWorkspaceEditRequest.type,t)}}));class y{constructor(){this._trace=i.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==i.Trace.Off&&this.connection.sendNotification(i.LogTraceNotification.type,{message:e,verbose:this._trace===i.Trace.Verbose?t:void 0})}}class _{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(i.TelemetryEventNotification.type,e)}}class T{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return o.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,t){return o.attachPartialResult(this.connection,t)}}t._LanguagesImpl=T;const v=l.CallHierarchyFeature(T);function b(e,t){return function(n){return t(e(n))}}function C(e,t){return function(n){return t(e(n))}}function S(e,t){return function(n){return t(e(n))}}function x(e,t){return function(n){return t(e(n))}}function k(e,t){return function(n){return t(e(n))}}function E(e,t){return function(n){return t(e(n))}}t.combineConsoleFeatures=b,t.combineTelemetryFeatures=C,t.combineTracerFeatures=S,t.combineClientFeatures=x,t.combineWindowFeatures=k,t.combineWorkspaceFeatures=E,t.combineLanguagesFeatures=function(e,t){return function(n){return t(e(n))}},t.combineFeatures=function(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}return{__brand:"features",console:n(e.console,t.console,b),tracer:n(e.tracer,t.tracer,S),telemetry:n(e.telemetry,t.telemetry,C),client:n(e.client,t.client,x),window:n(e.window,t.window,k),workspace:n(e.workspace,t.workspace,E)}},t.createConnection=function(e,t,n){const r=n&&n.console?new(n.console(u)):new u,a=e(r);r.rawAttach(a);const c=n&&n.tracer?new(n.tracer(y)):new y,l=n&&n.telemetry?new(n.telemetry(_)):new _,p=n&&n.client?new(n.client(m)):new m,h=n&&n.window?new(n.window(d)):new d,f=n&&n.workspace?new(n.workspace(g)):new g,T=n&&n.languages?new(n.languages(v)):new v,b=[r,c,l,p,h,f,T];function C(e){return e instanceof Promise?e:s.thenable(e)?new Promise((t,n)=>{e.then(e=>t(e),e=>n(e))}):Promise.resolve(e)}let S=void 0,x=void 0,k=void 0,E={listen:()=>a.listen(),sendRequest:(e,...t)=>a.sendRequest(s.string(e)?e:e.method,...t),onRequest:(e,t)=>a.onRequest(e,t),sendNotification:(e,t)=>{const n=s.string(e)?e:e.method;1===arguments.length?a.sendNotification(n):a.sendNotification(n,t)},onNotification:(e,t)=>a.onNotification(e,t),onProgress:a.onProgress,sendProgress:a.sendProgress,onInitialize:e=>x=e,onInitialized:e=>a.onNotification(i.InitializedNotification.type,e),onShutdown:e=>S=e,onExit:e=>k=e,get console(){return r},get telemetry(){return l},get tracer(){return c},get client(){return p},get window(){return h},get workspace(){return f},get languages(){return T},onDidChangeConfiguration:e=>a.onNotification(i.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>a.onNotification(i.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>a.onNotification(i.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>a.onNotification(i.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>a.onNotification(i.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>a.onNotification(i.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>a.onRequest(i.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>a.onNotification(i.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>a.sendNotification(i.PublishDiagnosticsNotification.type,e),onHover:e=>a.onRequest(i.HoverRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),void 0)),onCompletion:e=>a.onRequest(i.CompletionRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onCompletionResolve:e=>a.onRequest(i.CompletionResolveRequest.type,e),onSignatureHelp:e=>a.onRequest(i.SignatureHelpRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),void 0)),onDeclaration:e=>a.onRequest(i.DeclarationRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onDefinition:e=>a.onRequest(i.DefinitionRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onTypeDefinition:e=>a.onRequest(i.TypeDefinitionRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onImplementation:e=>a.onRequest(i.ImplementationRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onReferences:e=>a.onRequest(i.ReferencesRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onDocumentHighlight:e=>a.onRequest(i.DocumentHighlightRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onDocumentSymbol:e=>a.onRequest(i.DocumentSymbolRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onWorkspaceSymbol:e=>a.onRequest(i.WorkspaceSymbolRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onCodeAction:e=>a.onRequest(i.CodeActionRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onCodeLens:e=>a.onRequest(i.CodeLensRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onCodeLensResolve:e=>a.onRequest(i.CodeLensResolveRequest.type,(t,n)=>e(t,n)),onDocumentFormatting:e=>a.onRequest(i.DocumentFormattingRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),void 0)),onDocumentRangeFormatting:e=>a.onRequest(i.DocumentRangeFormattingRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),void 0)),onDocumentOnTypeFormatting:e=>a.onRequest(i.DocumentOnTypeFormattingRequest.type,(t,n)=>e(t,n)),onRenameRequest:e=>a.onRequest(i.RenameRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),void 0)),onPrepareRename:e=>a.onRequest(i.PrepareRenameRequest.type,(t,n)=>e(t,n)),onDocumentLinks:e=>a.onRequest(i.DocumentLinkRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onDocumentLinkResolve:e=>a.onRequest(i.DocumentLinkResolveRequest.type,(t,n)=>e(t,n)),onDocumentColor:e=>a.onRequest(i.DocumentColorRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onColorPresentation:e=>a.onRequest(i.ColorPresentationRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onFoldingRanges:e=>a.onRequest(i.FoldingRangeRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onSelectionRanges:e=>a.onRequest(i.SelectionRangeRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),o.attachPartialResult(a,t))),onExecuteCommand:e=>a.onRequest(i.ExecuteCommandRequest.type,(t,n)=>e(t,n,o.attachWorkDone(a,t),void 0)),dispose:()=>a.dispose()};for(let e of b)e.attach(E);return a.onRequest(i.InitializeRequest.type,e=>{t.initialize(e),s.string(e.trace)&&(c.trace=i.Trace.fromString(e.trace));for(let t of b)t.initialize(e.capabilities);if(x){return C(x(e,(new i.CancellationTokenSource).token,o.attachWorkDone(a,e),void 0)).then(e=>{if(e instanceof i.ResponseError)return e;let t=e;t||(t={capabilities:{}});let n=t.capabilities;n||(n={},t.capabilities=n),void 0===n.textDocumentSync||null===n.textDocumentSync?n.textDocumentSync=s.number(E.__textDocumentSync)?E.__textDocumentSync:i.TextDocumentSyncKind.None:s.number(n.textDocumentSync)||s.number(n.textDocumentSync.change)||(n.textDocumentSync.change=s.number(E.__textDocumentSync)?E.__textDocumentSync:i.TextDocumentSyncKind.None);for(let e of b)e.fillServerCapabilities(n);return t})}{let e={capabilities:{textDocumentSync:i.TextDocumentSyncKind.None}};for(let t of b)t.fillServerCapabilities(e.capabilities);return e}}),a.onRequest(i.ShutdownRequest.type,()=>(t.shutdownReceived=!0,S?S((new i.CancellationTokenSource).token):void 0)),a.onNotification(i.ExitNotification.type,()=>{try{k&&k()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}}),a.onNotification(i.SetTraceNotification.type,e=>{c.trace=i.Trace.fromString(e.value)}),E}},function(e,t,n){"use strict";e.exports=n(8)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class s extends i{constructor(){super([s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),"-",s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),"-","4",s._randomHex(),s._randomHex(),s._randomHex(),"-",s._oneOf(s._timeHighBits),s._randomHex(),s._randomHex(),s._randomHex(),"-",s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return s._oneOf(s._chars)}}function r(){return new s}s._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],s._timeHighBits=["8","9","a","b"],t.empty=new i("00000000-0000-0000-0000-000000000000"),t.v4=r;const o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e){return o.test(e)}t.isUUID=a,t.parse=function(e){if(!a(e))throw new Error("invalid uuid");return new i(e)},t.generateUuid=function(){return r().asHex()}},function(e,t,n){"use strict";n.r(t),n.d(t,"URI",(function(){return h})),n.d(t,"uriToFsPath",(function(){return T}));var i,s,r,o=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});if("object"==typeof process)r="win32"===process.platform;else if("object"==typeof navigator){var a=navigator.userAgent;r=a.indexOf("Windows")>=0}var c=/^\w[\w\d+.-]*$/,l=/^\//,p=/^\/\//;var u="/",d=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,h=function(){function e(e,t,n,i,s,r){void 0===r&&(r=!1),"object"==typeof e?(this.scheme=e.scheme||"",this.authority=e.authority||"",this.path=e.path||"",this.query=e.query||"",this.fragment=e.fragment||""):(this.scheme=function(e,t){return e||t?e:"file"}(e,r),this.authority=t||"",this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==u&&(t=u+t):t=u}return t}(this.scheme,n||""),this.query=i||"",this.fragment=s||"",function(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+e.authority+'", path: "'+e.path+'", query: "'+e.query+'", fragment: "'+e.fragment+'"}');if(e.scheme&&!c.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!l.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,r))}return e.isUri=function(t){return t instanceof e||!!t&&("string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"function"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString)},Object.defineProperty(e.prototype,"fsPath",{get:function(){return T(this,!1)},enumerable:!0,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,n=e.authority,i=e.path,s=e.query,r=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=""),void 0===n?n=this.authority:null===n&&(n=""),void 0===i?i=this.path:null===i&&(i=""),void 0===s?s=this.query:null===s&&(s=""),void 0===r?r=this.fragment:null===r&&(r=""),t===this.scheme&&n===this.authority&&i===this.path&&s===this.query&&r===this.fragment?this:new m(t,n,i,s,r)},e.parse=function(e,t){void 0===t&&(t=!1);var n=d.exec(e);return n?new m(n[2]||"",C(n[4]||""),C(n[5]||""),C(n[7]||""),C(n[9]||""),t):new m("","","","","")},e.file=function(e){var t="";if(r&&(e=e.replace(/\\/g,u)),e[0]===u&&e[1]===u){var n=e.indexOf(u,2);-1===n?(t=e.substring(2),e=u):(t=e.substring(2,n),e=e.substring(n)||u)}return new m("file",t,e,"","")},e.from=function(e){return new m(e.scheme,e.authority,e.path,e.query,e.fragment)},e.prototype.toString=function(e){return void 0===e&&(e=!1),v(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var n=new m(t);return n._formatted=t.external,n._fsPath=t._sep===f?t.fsPath:null,n}return t},e}(),f=r?1:void 0,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return o(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=T(this,!1)),this._fsPath},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?v(this,!0):(this._formatted||(this._formatted=v(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=f),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(h),g=((s={})[58]="%3A",s[47]="%2F",s[63]="%3F",s[35]="%23",s[91]="%5B",s[93]="%5D",s[64]="%40",s[33]="%21",s[36]="%24",s[38]="%26",s[39]="%27",s[40]="%28",s[41]="%29",s[42]="%2A",s[43]="%2B",s[44]="%2C",s[59]="%3B",s[61]="%3D",s[32]="%20",s);function y(e,t){for(var n=void 0,i=-1,s=0;s<e.length;s++){var r=e.charCodeAt(s);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||45===r||46===r||95===r||126===r||t&&47===r)-1!==i&&(n+=encodeURIComponent(e.substring(i,s)),i=-1),void 0!==n&&(n+=e.charAt(s));else{void 0===n&&(n=e.substr(0,s));var o=g[r];void 0!==o?(-1!==i&&(n+=encodeURIComponent(e.substring(i,s)),i=-1),n+=o):-1===i&&(i=s)}}return-1!==i&&(n+=encodeURIComponent(e.substring(i))),void 0!==n?n:e}function _(e){for(var t=void 0,n=0;n<e.length;n++){var i=e.charCodeAt(n);35===i||63===i?(void 0===t&&(t=e.substr(0,n)),t+=g[i]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function T(e,t){var n;return n=e.authority&&e.path.length>1&&"file"===e.scheme?"//"+e.authority+e.path:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,r&&(n=n.replace(/\//g,"\\")),n}function v(e,t){var n=t?_:y,i="",s=e.scheme,r=e.authority,o=e.path,a=e.query,c=e.fragment;if(s&&(i+=s,i+=":"),(r||"file"===s)&&(i+=u,i+=u),r){var l=r.indexOf("@");if(-1!==l){var p=r.substr(0,l);r=r.substr(l+1),-1===(l=p.indexOf(":"))?i+=n(p,!1):(i+=n(p.substr(0,l),!1),i+=":",i+=n(p.substr(l+1),!1)),i+="@"}-1===(l=(r=r.toLowerCase()).indexOf(":"))?i+=n(r,!1):(i+=n(r.substr(0,l),!1),i+=r.substr(l))}if(o){if(o.length>=3&&47===o.charCodeAt(0)&&58===o.charCodeAt(2))(d=o.charCodeAt(1))>=65&&d<=90&&(o="/"+String.fromCharCode(d+32)+":"+o.substr(3));else if(o.length>=2&&58===o.charCodeAt(1)){var d;(d=o.charCodeAt(0))>=65&&d<=90&&(o=String.fromCharCode(d+32)+":"+o.substr(2))}i+=n(o,!0)}return a&&(i+="?",i+=n(a,!1)),c&&(i+="#",i+=t?c:y(c,!1)),i}var b=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function C(e){return e.match(b)?e.replace(b,(function(e){return function e(t){try{return decodeURIComponent(t)}catch(n){return t.length>3?t.substr(0,3)+e(t.substr(3)):t}}(e)})):e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPythonPathFromPythonInterpreter=t.findPythonSearchPaths=t.getTypeshedSubdirectory=t.getTypeShedFallbackPath=void 0;const i=n(41),s=n(62),r=n(4),o=new Map;function a(e,t,n){const s=t||"",a=o.get(s);if(a)return a;const c={paths:[],prefix:""};try{const s=["-c","import sys, json; json.dump(dict(path=sys.path, prefix=sys.prefix), sys.stdout)"];let o;t?(n.push(`Executing interpreter at '${t}'`),o=i.execFileSync(t,s,{encoding:"utf8"})):(n.push("Executing python interpreter"),o=i.execFileSync("python",s,{encoding:"utf8"}));try{const t=JSON.parse(o);for(let i of t.path)if(i=i.trim(),i){const t=r.normalizePath(i);e.existsSync(t)&&r.isDirectory(e,t)?c.paths.push(t):n.push(`Skipping '${t}' because it is not a valid directory`)}c.prefix=t.prefix,0===c.paths.length&&n.push("Found no valid directories")}catch(e){throw n.push(`Could not parse output: '${o}'`),e}}catch(e){c.paths=[],c.prefix=""}return o.set(s,c),n.push(`Received ${c.paths.length} paths from interpreter`),c.paths.forEach(e=>{n.push("  "+e)}),c}t.getTypeShedFallbackPath=function(e){let t=e.getModulePath();if(!t)return;t=r.getDirectoryPath(r.ensureTrailingDirectorySeparator(r.normalizePath(t)));const n=r.combinePaths(t,s.typeshedFallback);if(e.existsSync(n))return n;const i=r.combinePaths(r.getDirectoryPath(t),s.typeshedFallback);return e.existsSync(i)?i:void 0},t.getTypeshedSubdirectory=function(e,t){return r.combinePaths(e,t?"stdlib":"third_party")},t.findPythonSearchPaths=function(e,t,n,i,o,c){let l;if(i.push("Finding python search paths"),void 0!==n?t.venvPath&&(l=r.combinePaths(t.venvPath,n)):t.defaultVenv&&t.venvPath&&(l=r.combinePaths(t.venvPath,t.defaultVenv)),l){let t=r.combinePaths(l,s.lib);if(e.existsSync(t)?i.push(`Found path '${t}'; looking for ${s.sitePackages}`):(i.push(`Did not find '${t}'; trying 'Lib' instead`),t=r.combinePaths(l,"Lib"),e.existsSync(t)?i.push(`Found path '${t}'; looking for ${s.sitePackages}`):(i.push(`Did not find '${t}'`),t="")),t){const n=r.combinePaths(t,s.sitePackages);if(e.existsSync(n))return i.push(`Found path '${n}'`),[n];i.push(`Did not find '${n}', so looking for python subdirectory`);const o=r.getFileSystemEntries(e,t);for(let n=0;n<o.directories.length;n++){const a=o.directories[n];if(a.startsWith("python")){const n=r.combinePaths(t,a,s.sitePackages);if(e.existsSync(n))return i.push(`Found path '${n}'`),[n];i.push(`Path '${n}' is not a valid directory`)}}}i.push(`Did not find '${s.sitePackages}'. Falling back on python interpreter.`)}const p=a(e,t.pythonPath,i);if(o&&c){return p.paths.filter(e=>!r.containsPath(c,e,!0)||r.containsPath(p.prefix,e,!0))}return p.paths},t.getPythonPathFromPythonInterpreter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.src=t.sitePackages=t.lib=t.typeshedFallback=void 0,t.typeshedFallback="typeshed-fallback",t.lib="lib",t.sitePackages="site-packages",t.src="src"},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Program=void 0;const s=n(10),r=n(27),o=n(0),a=n(16),c=n(23),l=n(2),p=n(64),u=n(4),d=n(5),h=n(1),f=n(24),m=n(65),g=n(122),y=n(7),_=n(123),T=n(6),v=n(45),b=n(124),C=n(36),S=n(150),x=n(152);class k{constructor(e,t,n,i){this._extension=i,this._sourceFileList=[],this._sourceFileMap=new Map,this._lookUpImport=e=>{const t=this._sourceFileMap.get(e);if(!t)return;t.sourceFile.isBindingRequired()&&f.timingStats.typeCheckerTime.subtractFromTime(()=>{this._bindFile(t)});const n=t.sourceFile.getModuleSymbolTable();return n?{symbolTable:n,docString:t.sourceFile.getModuleDocString()}:void 0},this._console=n||new a.StandardConsole,this._logTracker=new p.LogTracker(n,r.isMainThread?"FG":"BG"),this._importResolver=e,this._configOptions=t,this._createNewEvaluator()}setConfigOptions(e){this._configOptions=e,this._createNewEvaluator()}setImportResolver(e){this._importResolver=e}setTrackedFiles(e){if(this._sourceFileList.length>0){const t=new Map;e.forEach(e=>{t.set(e,e)}),this._sourceFileList.forEach(e=>{const n=e.sourceFile.getFilePath();t.has(n)||(e.isTracked=!1)})}return this._addTrackedFiles(e),this._removeUnneededFiles()}setAllowedThirdPartyImports(e){this._allowedThirdPartyImports=e}addTrackedFiles(e){e.forEach(e=>{this.addTrackedFile(e)})}addTrackedFile(e){let t=this._sourceFileMap.get(e);if(t)return t.isTracked=!0,t.sourceFile;const n=new b.SourceFile(this._fs,e,!1,this._console,this._logTracker);return t={sourceFile:n,isTracked:!0,isOpenByClient:!1,isTypeshedFile:!1,isThirdPartyImport:!1,diagnosticsVersion:n.getDiagnosticVersion(),imports:[],importedBy:[],shadows:[],shadowedBy:[]},this._addToSourceFileListAndMap(t),n}setFileOpened(e,t,n){let i=this._sourceFileMap.get(e);if(i)i.isOpenByClient=!0,i.diagnosticsVersion=-1;else{const t=new b.SourceFile(this._fs,e,!1,this._console,this._logTracker);i={sourceFile:t,isTracked:!1,isOpenByClient:!0,isTypeshedFile:!1,isThirdPartyImport:!1,diagnosticsVersion:t.getDiagnosticVersion(),imports:[],importedBy:[],shadows:[],shadowedBy:[]},this._addToSourceFileListAndMap(i)}i.sourceFile.setClientVersion(t,n)}setFileClosed(e){const t=this._sourceFileMap.get(e);return t&&(t.isOpenByClient=!1,t.sourceFile.setClientVersion(null,""),t.diagnosticsVersion=-1),this._removeUnneededFiles()}markAllFilesDirty(e){const t=new Map;this._sourceFileList.forEach(n=>{e?n.sourceFile.markDirty():n.sourceFile.didContentsChangeOnDisk()&&(n.sourceFile.markDirty(),this._markFileDirtyRecursive(n,t))}),t.size>0&&this._createNewEvaluator()}markFilesDirty(e,t){const n=new Map;e.forEach(e=>{const i=this._sourceFileMap.get(e);i&&(t||!i.isOpenByClient&&i.sourceFile.didContentsChangeOnDisk())&&(i.sourceFile.markDirty(),this._markFileDirtyRecursive(i,n))}),n.size>0&&this._createNewEvaluator()}getFileCount(){return this._sourceFileList.length}getFilesToAnalyzeCount(){let e=0;return this._sourceFileList.forEach(t=>{(t.sourceFile.isParseRequired()||t.sourceFile.isBindingRequired()||t.sourceFile.isCheckingRequired())&&this._shouldCheckFile(t)&&e++}),e}isCheckingOnlyOpenFiles(){return this._configOptions.checkOnlyOpenFiles}getSourceFile(e){const t=this._sourceFileMap.get(e);if(t)return t.sourceFile}getBoundSourceFile(e){const t=this._sourceFileMap.get(e);if(t)return this._bindFile(t),this.getSourceFile(e)}analyze(e,t=s.CancellationToken.None){return this._runEvaluatorWithCancellationToken(t,()=>{const t=new f.Duration,n=this._sourceFileList.filter(e=>e.isOpenByClient&&e.sourceFile.isCheckingRequired());if(n.length>0){const i=e?e.openFilesTimeInMs:Number.MAX_VALUE;for(const e of n)if(this._checkTypes(e)&&t.getDurationInMilliseconds()>i)return!0;if(void 0!==e)return!0}if(!this._configOptions.checkOnlyOpenFiles){const n=this._sourceFileList,i=e?e.noOpenFilesTimeInMs:Number.MAX_VALUE;for(const e of n)if(this._checkTypes(e)&&t.getDurationInMilliseconds()>i)return!0}return!1})}printDependencies(e,t){const n=this._sourceFileList.filter(e=>!e.isTypeshedFile).sort((e,t)=>e.sourceFile.getFilePath()<t.sourceFile.getFilePath()?1:-1),i=[];n.forEach(n=>{this._console.info("");let s=n.sourceFile.getFilePath();const r=u.getRelativePath(s,e);r&&(s=r),this._console.info(""+s),this._console.info(` Imports     ${n.imports.length} file`+(1===n.imports.length?"":"s")),t&&n.imports.forEach(e=>{this._console.info("    "+e.sourceFile.getFilePath())}),this._console.info(` Imported by ${n.importedBy.length} file`+(1===n.importedBy.length?"":"s")),t&&n.importedBy.forEach(e=>{this._console.info("    "+e.sourceFile.getFilePath())}),0===n.importedBy.length&&i.push(n.sourceFile)}),i.length>0&&(this._console.info(""),this._console.info(`${i.length} file${1===i.length?"":"s"} not explicitly imported`),i.forEach(e=>{this._console.info("    "+e.getFilePath())}))}writeTypeStub(e,t,n,i){for(const s of this._sourceFileList){o.throwIfCancellationRequested(i);const r=s.sourceFile.getFilePath(),a=u.getRelativePath(r,e);if(void 0!==a){let e=u.normalizePath(u.combinePaths(n,a));e=t?u.combinePaths(u.getDirectoryPath(e),"__init__.pyi"):u.stripFileExtension(e)+".pyi";const r=u.getDirectoryPath(e);try{u.makeDirectories(this._fs,r,n)}catch(e){throw new Error(`Could not create directory for '${r}'`)}this._bindFile(s),this._runEvaluatorWithCancellationToken(i,()=>{new x.TypeStubWriter(e,s.sourceFile,this._evaluator).write()})}}}static _getPrintTypeFlags(e){let t=0;return e.diagnosticRuleSet.printUnknownAsAny&&(t|=1),e.diagnosticRuleSet.omitTypeArgsIfAny&&(t|=2),e.diagnosticRuleSet.pep604Printing&&(t|=4),t}get _fs(){return this._importResolver.fileSystem}_addTrackedFiles(e){e.forEach(e=>{this._addTrackedFile(e)})}_addTrackedFile(e){let t=this._sourceFileMap.get(e);if(t)return t.isTracked=!0,t.sourceFile;const n=new b.SourceFile(this._fs,e,!1,this._console,this._logTracker);return t={sourceFile:n,isTracked:!0,isOpenByClient:!1,isTypeshedFile:!1,isThirdPartyImport:!1,diagnosticsVersion:n.getDiagnosticVersion(),imports:[],importedBy:[],shadows:[],shadowedBy:[]},this._addToSourceFileListAndMap(t),n}_addShadowedFile(e,t){let n=this._sourceFileMap.get(t);if(!n){const e=new b.SourceFile(this._fs,t,!1,this._console,this._logTracker);n={sourceFile:e,isTracked:!1,isOpenByClient:!1,isTypeshedFile:!1,isThirdPartyImport:!1,diagnosticsVersion:e.getDiagnosticVersion(),imports:[],importedBy:[],shadows:[],shadowedBy:[]},this._addToSourceFileListAndMap(n)}return n.shadows.includes(e)||n.shadows.push(e),e.shadowedBy.includes(n)||e.shadowedBy.push(n),n.sourceFile}_createNewEvaluator(){this._evaluator=S.createTypeEvaluator(this._lookUpImport,k._getPrintTypeFlags(this._configOptions))}_parseFile(e){if(this._isFileNeeded(e)&&e.sourceFile.isParseRequired()&&(e.sourceFile.parse(this._configOptions,this._importResolver)&&this._updateSourceFileImports(e,this._configOptions),e.sourceFile.isFileDeleted())){e.isTracked=!1;const t=new Map;this._markFileDirtyRecursive(e,t),this._importResolver.invalidateCache()}}_bindFile(e){if(!this._isFileNeeded(e)||!e.sourceFile.isBindingRequired())return;let t;if(this._parseFile(e),e.builtinsImport){this._bindFile(e.builtinsImport);const n=e.builtinsImport.sourceFile.getParseResults();n&&(t=y.getScope(n.parseTree),l.assert(void 0!==t))}e.sourceFile.bind(this._configOptions,this._lookUpImport,t)}_buildModuleSymbolsMap(e,t){return m.buildModuleSymbolsMap(this._sourceFileList.filter(t=>t!==e),t)}_shouldCheckFile(e){return!!e.isOpenByClient||!(this._configOptions.checkOnlyOpenFiles||!e.isTracked)}_checkTypes(e){return this._logTracker.log("analyzing: "+e.sourceFile.getFilePath(),t=>{if(!this._isFileNeeded(e))return t.add("analysis not needed"),!1;if(!e.sourceFile.isCheckingRequired())return t.add("cache hit"),!1;if(!this._shouldCheckFile(e))return t.add("analysis not needed"),!1;if(this._bindFile(e),this._evaluator.getTypeCacheSize()>75e4){const e=Math.round(process.memoryUsage().heapUsed/1048576);e>1536&&(this._console.info(`Emptying type cache to avoid heap overflow. Heap size used: ${e}MB`),this._createNewEvaluator())}if(e.sourceFile.check(this._evaluator),"none"!==this._configOptions.diagnosticRuleSet.reportImportCycles&&!this._allowedThirdPartyImports){const t=new Map;this._getImportsRecursive(e,t,0),t.forEach(e=>{f.timingStats.cycleDetectionTime.timeOperation(()=>{this._detectAndReportImportCycles(e)})})}return!0})}_getImportsRecursive(e,t,n){const i=e.sourceFile.getFilePath();if(!t.has(i))if(n>256)e.sourceFile.setHitMaxImportDepth(256);else{t.set(i,e);for(const i of e.imports)this._getImportsRecursive(i,t,n+1)}}_detectAndReportImportCycles(e,t=[],n=new Map){if(e.sourceFile.isStubFile()||e.isThirdPartyImport)return;const i=e.sourceFile.getFilePath();if(n.has(i))t.length>1&&e===t[0]&&this._logImportCycle(t);else{if(n.has(i))return;n.set(i,!0),t.push(e);for(const i of e.imports)this._detectAndReportImportCycles(i,t,n);n.set(i,!1),t.pop()}}_logImportCycle(e){const t=new _.CircularDependency;e.forEach(e=>{t.appendPath(e.sourceFile.getFilePath())}),t.normalizeOrder();const n=t.getPaths()[0],i=this._sourceFileMap.get(n);l.assert(void 0!==i),i.sourceFile.addCircularDependency(t)}_markFileDirtyRecursive(e,t){const n=e.sourceFile.getFilePath();t.has(n)||(e.sourceFile.markReanalysisRequired(),t.set(n,!0),e.importedBy.forEach(e=>{this._markFileDirtyRecursive(e,t)}))}getAutoImports(e,t,n,i,s,r){const o=this._sourceFileMap.get(e);if(!o)return[];const a=o.sourceFile,c=a.getFileContents();return c?this._runEvaluatorWithCancellationToken(r,()=>{this._bindFile(o);const e=a.getParseResults(),l=d.convertRangeToTextRange(t,e.tokenizerOutput.lines);if(!l)return[];const p=T.findNodeByOffset(e.parseTree,l.start);if(!p)return[];const u=c.substr(l.start,l.length),h=this._buildModuleSymbolsMap(o,r),f=new m.AutoImporter(this._configOptions,a.getFilePath(),this._importResolver,e,h,s),g=v.getScopeForNode(p),y=[],_=null==i?void 0:i.get(u);if(_){const e=1;y.push(...f.getAutoImportCandidates(_,e,[],u,r))}return y.push(...f.getAutoImportCandidates(u,n,[],void 0,r).filter(e=>!g.lookUpSymbolRecursive(e.name))),y}):[]}getDiagnostics(e){const t=this._removeUnneededFiles();return this._sourceFileList.forEach(n=>{if(n.isOpenByClient||!e.checkOnlyOpenFiles&&!n.isThirdPartyImport){const i=n.sourceFile.getDiagnostics(e,n.diagnosticsVersion);void 0!==i&&(t.push({filePath:n.sourceFile.getFilePath(),diagnostics:i}),n.diagnosticsVersion=n.sourceFile.getDiagnosticVersion())}else!n.isOpenByClient&&e.checkOnlyOpenFiles&&void 0!==n.diagnosticsVersion&&(t.push({filePath:n.sourceFile.getFilePath(),diagnostics:[]}),n.diagnosticsVersion=void 0)}),t}getDiagnosticsForRange(e,t){const n=this.getSourceFile(e);if(!n)return[];const i=n.getDiagnostics(this._configOptions);return i?i.filter(e=>h.doRangesOverlap(e.range,t)):[]}getDefinitionsForPosition(e,t,n){return this._runEvaluatorWithCancellationToken(n,()=>{const i=this._sourceFileMap.get(e);if(!i)return;this._bindFile(i);const s=this._configOptions.findExecEnvironment(e);return i.sourceFile.getDefinitionsForPosition(this._createSourceMapper(s),t,this._evaluator,n)})}getReferencesForPosition(e,t,n,i){return this._runEvaluatorWithCancellationToken(i,()=>{const s=this._sourceFileMap.get(e);if(!s)return;this._bindFile(s);const r=this._configOptions.findExecEnvironment(e),a=s.sourceFile.getDeclarationForPosition(this._createSourceMapper(r),t,this._evaluator,i);if(a){if(a.requiresGlobalSearch){for(const e of this._sourceFileList)o.throwIfCancellationRequested(i),(e.isOpenByClient||this._isUserCode(e))&&(this._bindFile(e),e.sourceFile.addReferences(a,n,this._evaluator,i));if(n)for(const e of a.declarations){if(o.throwIfCancellationRequested(i),a.locations.some(t=>t.path===e.path))continue;const t=this._sourceFileMap.get(e.path);if(!t)continue;const s={requiresGlobalSearch:a.requiresGlobalSearch,nodeAtOffset:a.nodeAtOffset,symbolName:a.symbolName,declarations:a.declarations,locations:[]};t.sourceFile.addReferences(s,n,this._evaluator,i);for(const t of s.locations)t.path===e.path&&h.doesRangeContain(e.range,t.range)&&a.locations.push(t)}}else s.sourceFile.addReferences(a,n,this._evaluator,i);return a.locations}})}addSymbolsForDocument(e,t,n){return this._runEvaluatorWithCancellationToken(n,()=>{const i=this._sourceFileMap.get(e);i&&(this._bindFile(i),i.sourceFile.addHierarchicalSymbolsForDocument(t,this._evaluator,n))})}addSymbolsForWorkspace(e,t,n){return this._runEvaluatorWithCancellationToken(n,()=>{if(t)for(const i of this._sourceFileList)this._bindFile(i),i.sourceFile.addSymbolsForDocument(e,this._evaluator,t,n)})}getHoverForPosition(e,t,n){return this._runEvaluatorWithCancellationToken(n,()=>{const i=this._sourceFileMap.get(e);if(!i)return;this._bindFile(i);const s=this._configOptions.findExecEnvironment(e);return i.sourceFile.getHoverForPosition(this._createSourceMapper(s),t,this._evaluator,n)})}getDocumentHighlight(e,t,n){return this._runEvaluatorWithCancellationToken(n,()=>{const i=this._sourceFileMap.get(e);if(!i)return;this._bindFile(i);const s=this._configOptions.findExecEnvironment(e);return i.sourceFile.getDocumentHighlight(this._createSourceMapper(s),t,this._evaluator,n)})}getSignatureHelpForPosition(e,t,n){return this._runEvaluatorWithCancellationToken(n,()=>{const i=this._sourceFileMap.get(e);if(i)return this._bindFile(i),i.sourceFile.getSignatureHelpForPosition(t,this._lookUpImport,this._evaluator,n)})}getCompletionsForPosition(e,t,n,s){var r;return i(this,void 0,void 0,(function*(){const i=this._sourceFileMap.get(e);if(!i)return;let o=this._runEvaluatorWithCancellationToken(s,()=>{this._bindFile(i);const r=this._configOptions.findExecEnvironment(e);return i.sourceFile.getCompletionsForPosition(t,n,this._configOptions,this._importResolver,this._lookUpImport,this._evaluator,this._createSourceMapper(r),()=>this._buildModuleSymbolsMap(i,s),s)});if(!o||!(null===(r=this._extension)||void 0===r?void 0:r.completionListExtension))return o;const a=i.sourceFile.getParseResults(),c=i.sourceFile.getFileContents();if((null==a?void 0:a.parseTree)&&c){const e=d.convertPositionToOffset(t,a.tokenizerOutput.lines);void 0!==e&&(o=yield this._extension.completionListExtension.updateCompletionList(o,a.parseTree,c,e,this._configOptions,s))}return o}))}resolveCompletionItem(e,t,n){return this._runEvaluatorWithCancellationToken(n,()=>{const i=this._sourceFileMap.get(e);if(!i)return;this._bindFile(i);const s=this._configOptions.findExecEnvironment(e);i.sourceFile.resolveCompletionItem(this._configOptions,this._importResolver,this._lookUpImport,this._evaluator,this._createSourceMapper(s),()=>this._buildModuleSymbolsMap(i,n),t,n)})}renameSymbolAtPosition(e,t,n,i){return this._runEvaluatorWithCancellationToken(i,()=>{const s=this._sourceFileMap.get(e);if(!s)return;this._bindFile(s);const r=this._configOptions.findExecEnvironment(e),o=s.sourceFile.getDeclarationForPosition(this._createSourceMapper(r),t,this._evaluator,i);if(!o)return;if(o.declarations.some(e=>!this._isUserCode(this._sourceFileMap.get(e.path))))return;if(0===o.declarations.length)return;if(o.requiresGlobalSearch)for(const e of this._sourceFileList)this._isUserCode(e)&&(this._bindFile(e),e.sourceFile.addReferences(o,!0,this._evaluator,i));else this._isUserCode(s)&&s.sourceFile.addReferences(o,!0,this._evaluator,i);const a=[];return o.locations.forEach(e=>{a.push({filePath:e.path,range:e.range,replacementText:n})}),a})}getCallForPosition(e,t,n){const i=this._sourceFileMap.get(e);if(!i)return;this._bindFile(i);const s=this._configOptions.findExecEnvironment(e),r=i.sourceFile.getDeclarationForPosition(this._createSourceMapper(s),t,this._evaluator,n);if(!r||0===r.declarations.length)return;const o=g.CallHierarchyProvider.getTargetDeclaration(r.declarations,r.nodeAtOffset);return g.CallHierarchyProvider.getCallForDeclaration(r.symbolName,o,this._evaluator,n)}getIncomingCallsForPosition(e,t,n){const i=this._sourceFileMap.get(e);if(!i)return;this._bindFile(i);const s=this._configOptions.findExecEnvironment(e),r=i.sourceFile.getDeclarationForPosition(this._createSourceMapper(s),t,this._evaluator,n);if(!r||0===r.declarations.length)return;const o=g.CallHierarchyProvider.getTargetDeclaration(r.declarations,r.nodeAtOffset);let a=[];for(const e of this._sourceFileList)if(this._isUserCode(e)||e.isOpenByClient){this._bindFile(e);const t=g.CallHierarchyProvider.getIncomingCallsForDeclaration(e.sourceFile.getFilePath(),r.symbolName,o,e.sourceFile.getParseResults(),this._evaluator,n);t&&(a=a.concat(...t))}return a}getOutgoingCallsForPosition(e,t,n){const i=this._sourceFileMap.get(e);if(!i)return;this._bindFile(i);const s=this._configOptions.findExecEnvironment(e),r=i.sourceFile.getDeclarationForPosition(this._createSourceMapper(s),t,this._evaluator,n);if(!r||0===r.declarations.length)return;const o=g.CallHierarchyProvider.getTargetDeclaration(r.declarations,r.nodeAtOffset);return g.CallHierarchyProvider.getOutgoingCallsForDeclaration(o,i.sourceFile.getParseResults(),this._evaluator,n)}performQuickAction(e,t,n,i){const s=this._sourceFileMap.get(e);if(s)return this._bindFile(s),s.sourceFile.performQuickAction(t,n,i)}_isUserCode(e){return e&&e.isTracked&&!e.isThirdPartyImport&&!e.isTypeshedFile}_runEvaluatorWithCancellationToken(e,t){try{return e&&!c.isDebugMode()?this._evaluator.runWithCancellationToken(e,t):t()}catch(e){throw e instanceof o.OperationCanceledException||this._createNewEvaluator(),e}}_removeUnneededFiles(){const e=[];for(let t=0;t<this._sourceFileList.length;){const n=this._sourceFileList[t];this._isFileNeeded(n)?(this._shouldCheckFile(n)||n.diagnosticsVersion===n.sourceFile.getDiagnosticVersion()||(void 0!==n.diagnosticsVersion&&0!==n.diagnosticsVersion&&e.push({filePath:n.sourceFile.getFilePath(),diagnostics:[]}),n.diagnosticsVersion=n.sourceFile.getDiagnosticVersion()),t++):(e.push({filePath:n.sourceFile.getFilePath(),diagnostics:[]}),n.sourceFile.prepareForClose(),this._sourceFileMap.delete(n.sourceFile.getFilePath()),this._sourceFileList.splice(t,1),n.imports.forEach(i=>{const s=i.importedBy.findIndex(e=>e===n);if(l.assert(s>=0),i.importedBy.splice(s,1),!this._isFileNeeded(i)){const n=this._sourceFileList.findIndex(e=>e===i);n>=0&&n<t&&(e.push({filePath:i.sourceFile.getFilePath(),diagnostics:[]}),i.sourceFile.prepareForClose(),this._sourceFileMap.delete(i.sourceFile.getFilePath()),this._sourceFileList.splice(n,1),t--)}}),n.shadowedBy.forEach(e=>{e.shadows=e.shadows.filter(e=>e!==n)}),n.shadowedBy=[])}return e}_isFileNeeded(e){return!e.sourceFile.isFileDeleted()&&(!(!e.isTracked&&!e.isOpenByClient)||(e.shadows.length>0||0!==e.importedBy.length&&this._isImportNeededRecursive(e,new Map)))}_isImportNeededRecursive(e,t){if(e.isTracked||e.isOpenByClient||e.shadows.length>0)return!0;const n=e.sourceFile.getFilePath();if(t.has(n))return!1;t.set(n,!0);for(const n of e.importedBy)if(this._isImportNeededRecursive(n,t))return!0;return!1}_createSourceMapper(e){return new C.SourceMapper(this._importResolver,e,this._evaluator,(e,t)=>{const n=this._sourceFileMap.get(e);if(n)return this._addShadowedFile(n,t),this.getBoundSourceFile(t)})}_isImportAllowed(e,t,n){let i=this._configOptions.useLibraryCodeForTypes;return!((1===t.importType||e.isThirdPartyImport&&2===t.importType)&&(this._allowedThirdPartyImports&&(t.isRelative||this._allowedThirdPartyImports.some(e=>t.importName===e||!!t.importName.startsWith(e+".")))&&(i=!0),!n))||i}_updateSourceFileImports(e,t){const n=[],i=e.sourceFile.getImports(),s=new Map;i.forEach(n=>{if(n.isImportFound){if(this._isImportAllowed(e,n,n.isStubFile)&&n.resolvedPaths.length>0){const t=n.resolvedPaths[n.resolvedPaths.length-1];t&&s.set(t,{isTypeshedFile:!!n.isTypeshedFile,isThirdPartyImport:1===n.importType||e.isThirdPartyImport&&2===n.importType})}n.implicitImports.forEach(t=>{this._isImportAllowed(e,n,t.isStubFile)&&s.set(t.path,{isTypeshedFile:!!n.isTypeshedFile,isThirdPartyImport:1===n.importType||e.isThirdPartyImport&&2===n.importType})})}else t.verboseOutput&&(this._console.info(`Could not import '${n.importName}' in file '${e.sourceFile.getFilePath()}'`),n.importFailureInfo&&n.importFailureInfo.forEach(e=>{this._console.info("  "+e)}))});const r=new Map;e.imports.forEach(t=>{const n=t.sourceFile.getFilePath();s.has(n)?r.set(n,t):t.importedBy=t.importedBy.filter(t=>t.sourceFile.getFilePath()!==e.sourceFile.getFilePath())}),s.forEach((t,i)=>{if(!r.has(i)){let s;if(this._sourceFileMap.has(i))s=this._sourceFileMap.get(i);else{const e=new b.SourceFile(this._fs,i,t.isThirdPartyImport,this._console,this._logTracker);s={sourceFile:e,isTracked:!1,isOpenByClient:!1,isTypeshedFile:t.isTypeshedFile,isThirdPartyImport:t.isThirdPartyImport,diagnosticsVersion:e.getDiagnosticVersion(),imports:[],importedBy:[],shadows:[],shadowedBy:[]},this._addToSourceFileListAndMap(s),n.push(s)}s.importedBy.push(e),r.set(i,s)}}),e.imports=[],s.forEach((t,n)=>{this._sourceFileMap.has(n)&&e.imports.push(this._sourceFileMap.get(n))}),e.builtinsImport=void 0;const o=e.sourceFile.getBuiltinsImport();if(o){const t=o.resolvedPaths[o.resolvedPaths.length-1];e.builtinsImport=this._sourceFileMap.get(t)}return n}_addToSourceFileListAndMap(e){const t=e.sourceFile.getFilePath();l.assert(!this._sourceFileMap.has(t)),this._sourceFileList.push(e),this._sourceFileMap.set(t,e)}}t.Program=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogTracker=void 0;const i=n(16),s=n(24);t.LogTracker=class{constructor(e,t){this._console=e,this._prefix=t,this._dummyState=new r,this._indentation="",this._previousTitles=[]}log(e,t){if(void 0===this._console)return t(this._dummyState);const n=this._console.level;if(void 0===n||n!==i.LogLevel.Log)return t(this._dummyState);const o=new s.Duration,a=this._indentation;this._previousTitles.push(`${a}${e} ...`),this._indentation+="  ";const c=new r;try{return t(c)}finally{this._printPreviousTitles(),this._indentation=a,this._console.log(`[${this._prefix}] ${this._indentation}${e}${c.get()} (${o.getDurationInMilliseconds()}ms)`)}}_printPreviousTitles(){if(this._previousTitles.pop(),!(this._previousTitles.length<=0)){for(const e of this._previousTitles)this._console.log(`[${this._prefix}] ${e}`);this._previousTitles.length=0}}};class r{add(e){this._addendum=e}get(){return this._addendum?` [${this._addendum}]`:""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoImporter=t.buildModuleSymbolsMap=void 0;const i=n(34),s=n(15),r=n(0),o=n(4),a=n(19);t.buildModuleSymbolsMap=function(e,t){const n=new Map;return e.forEach(e=>{if(r.throwIfCancellationRequested(t),e.shadows.length>0)return;const i=e.sourceFile.getModuleSymbolTable();i&&n.set(e.sourceFile.getFilePath(),i)}),n};t.AutoImporter=class{constructor(e,t,n,i,s,r){this._configOptions=e,this._filePath=t,this._importResolver=n,this._parseResults=i,this._moduleSymbolMap=s,this._packageMap=r}getAutoImportCandidates(e,t,n,s,r){const o=[],a=i.getTopLevelImports(this._parseResults.parseTree);return this._addImportsFromModuleMap(e,t,n,s,a,o,r),this._addImportsFromPackages(e,t,n,s,a,o,r),o}_addImportsFromPackages(e,t,n,i,o,a,c){this._packageMap&&this._packageMap.forEach((l,p)=>{if(r.throwIfCancellationRequested(c),s.isPrivateOrProtectedName(p))return;this._isSimilar(e,p,t)&&l.forEach((e,t)=>{r.throwIfCancellationRequested(c);const s=this._getImportParts(e);s&&this._addAutoImports(s,n,o,i,a)})})}_addImportsFromModuleMap(e,t,n,a,c,l,p){this._moduleSymbolMap.forEach((u,d)=>{r.throwIfCancellationRequested(p);const h=o.stripFileExtension(o.getFileName(d));if(s.isPrivateOrProtectedName(h))return;u.forEach((s,o)=>{if(r.throwIfCancellationRequested(p),!this._isSimilar(e,o,t)||s.isExternallyHidden())return;if(this._containsName(o,void 0,n,l))return;const u=s.getDeclarations();if(!u||0===u.length)return;if(u[0].path!==d)return;let h,f,m=2;const g=c.mapByFilePath.get(d);if(g)h=g.moduleName,m=i.getImportGroup(g);else{if(f=this._getModuleNameAndTypeFromFilePath(d),h=f.moduleName,!h)return;m=this._getImportGroupFromModuleNameAndType(f)}const y=this._getTextEditsForAutoImportByFilePath(o,c,d,h,m,a);l.push({name:o,symbol:s,source:h,edits:y,isImportFrom:!0,alias:a})});const f=o.getDirectoryPath(d),m=o.combinePaths(f,"__init__.py"),g=m+"i",y=d.endsWith(".pyi"),_=this._moduleSymbolMap.has(m)||this._moduleSymbolMap.has(g);if(!y&&!_)return;const T=this._getImportParts(d);T&&this._isSimilar(e,T.importName,t)&&this._addAutoImports(T,n,c,a,l)})}_addAutoImports(e,t,n,i,s){if(this._containsName(e.importName,e.importSource,t,s))return;const r=this._getImportGroupFromModuleNameAndType(e.moduleAndType),o=this._getTextEditsForAutoImportByFilePath(e.namePart,n,e.filePath,e.importSource,r,i);s.push({name:e.importName,alias:i,symbol:void 0,source:e.importSource,edits:o,isImportFrom:!!e.namePart})}_getImportParts(e){return t("__init__"===o.stripFileExtension(o.getFileName(e))?this._getModuleNameAndTypeFromFilePath(o.getDirectoryPath(e)):this._getModuleNameAndTypeFromFilePath(e));function t(t){const n=t.moduleName;if(!n)return;const i=n.lastIndexOf("."),s=i>0?n.substring(i+1):void 0;return{namePart:s,importName:i>0?s:n,importSource:i>0?n.substring(0,i):n,filePath:e,moduleAndType:t}}}_isSimilar(e,t,n){return 1===n?e===t:e.length>2?a.computeCompletionSimilarity(e,t)>n:e.length>0&&t.startsWith(e)}_containsName(e,t,n,i){return!!n.find(t=>t===e)||!!i.find(n=>n.name===e&&n.source===t)}_getModuleNameAndTypeFromFilePath(e){const t=this._configOptions.findExecEnvironment(this._filePath);return this._importResolver.getModuleNameForImport(e,t)}_getImportGroupFromModuleNameAndType(e){let t=2;return e.isLocalTypingsFile||1===e.importType?t=1:0===e.importType&&(t=0),t}_getTextEditsForAutoImportByFilePath(e,t,n,s,r,o){if(e){const s=t.mapByFilePath.get(n);if(s&&22===s.node.nodeType)return i.getTextEditsForAutoImportSymbolAddition(e,s,this._parseResults,o)}return i.getTextEditsForAutoImportInsertion(e,t,s,r,this._parseResults,o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractParameterDocumentation=t.decodeDocString=void 0,t.decodeDocString=function(e){const t=e.replace(/\r/g,"").replace(/\t/g,"        ").split("\n");let n=Number.MAX_VALUE;t.forEach((e,i)=>{if(t.length<=1||i>0){const t=e.trimLeft();t&&(n=Math.min(n,e.length-t.length))}});const i=[];for(n<Number.MAX_VALUE&&t.forEach((e,t)=>{0===t?i.push(e.trimRight()):i.push(e.substr(n).trimRight())});i.length>0&&0===i[0].length;)i.shift();for(;i.length>0&&0===i[i.length-1].length;)i.pop();return i.join("\n")},t.extractParameterDocumentation=function(e,t){if(!e||!t)return;const n=e.split("\n");for(const e of n){const n=e.trim();let i=n.indexOf("@param "+t);if(i>=0)return n.substr(i+7);if(i=n.indexOf(":param "+t),i>=0)return n.substr(i+7);if(i=n.indexOf(t+": "),i>=0)return n.substr(i);if(i=n.indexOf(t+" ("),i>=0)return n.substr(i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeVarMap=void 0;const i=n(2);class s{constructor(){this._isLocked=!1,this._typeVarMap=new Map,this._parameterSpecificationMap=new Map,this._isNarrowableMap=new Map}clone(){const e=new s;return this._typeVarMap.forEach((t,n)=>{e.setTypeVar(n,t,this.isNarrowable(n))}),this._parameterSpecificationMap.forEach((t,n)=>{e.setParameterSpecification(n,t)}),e._isLocked=this._isLocked,e}hasTypeVar(e){return this._typeVarMap.has(e)}getTypeVar(e){return this._typeVarMap.get(e)}setTypeVar(e,t,n){i.assert(!this._isLocked),this._typeVarMap.set(e,t),this._isNarrowableMap.set(e,n)}hasParameterSpecification(e){return this._parameterSpecificationMap.has(e)}getParameterSpecification(e){return this._parameterSpecificationMap.get(e)}setParameterSpecification(e,t){i.assert(!this._isLocked),this._parameterSpecificationMap.set(e,t)}typeVarCount(){return this._typeVarMap.size}isNarrowable(e){const t=this._isNarrowableMap.get(e);return void 0===t||t}lock(){i.assert(!this._isLocked),this._isLocked=!0}isLocked(){return this._isLocked}}t.TypeVarMap=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextRangeDiagnosticSink=t.DiagnosticSink=void 0;const i=n(26),s=n(5);class r{constructor(e){this._diagnosticList=e||[],this._diagnosticMap=new Map}fetchAndClear(){const e=this._diagnosticList;return this._diagnosticList=[],this._diagnosticMap.clear(),e}addError(e,t){return this.addDiagnostic(new i.Diagnostic(0,e,t))}addWarning(e,t){return this.addDiagnostic(new i.Diagnostic(1,e,t))}addInformation(e,t){return this.addDiagnostic(new i.Diagnostic(2,e,t))}addUnusedCode(e,t,n){const s=new i.Diagnostic(3,e,t);return n&&s.addAction(n),this.addDiagnostic(s)}addDiagnostic(e){const t=`${e.range.start.line},${e.range.start.character}-${e.range.end.line}-${e.range.end.character}:${e.message.substr(0,25)}}`;return this._diagnosticMap.has(t)||(this._diagnosticList.push(e),this._diagnosticMap.set(t,e)),e}addDiagnostics(e){this._diagnosticList.push(...e)}getErrors(){return this._diagnosticList.filter(e=>0===e.category)}getWarnings(){return this._diagnosticList.filter(e=>1===e.category)}}t.DiagnosticSink=r;t.TextRangeDiagnosticSink=class extends r{constructor(e,t){super(t),this._lines=e}addDiagnosticWithTextRange(e,t,n){const i=s.convertOffsetsToRange(n.start,n.start+n.length,this._lines);switch(e){case"error":return this.addError(t,i);case"warning":return this.addWarning(t,i);case"information":return this.addInformation(t,i);default:throw new Error(e+" is not expected value")}}addUnusedCodeWithTextRange(e,t,n){return this.addUnusedCode(e,s.convertOffsetsToRange(t.start,t.start+t.length,this._lines),n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextRangeCollection=void 0;const i=n(1);t.TextRangeCollection=class{constructor(e){this._items=e}get start(){return this._items.length>0?this._items[0].start:0}get end(){const e=this._items[this._items.length-1];return this._items.length>0?e.start+e.length:0}get length(){return this.end-this.start}get count(){return this._items.length}contains(e){return e>=this.start&&e<this.end}getItemAt(e){if(e<0||e>=this._items.length)throw new Error("index is out of range");return this._items[e]}getItemAtPosition(e){if(0===this.count)return-1;if(e<this.start)return-1;if(e>this.end)return-1;let t=0,n=this.count-1;for(;t<n;){const i=Math.floor(t+(n-t)/2),s=this._items[i];if(e>=s.start&&(i>=this.count-1||e<this._items[i+1].start))return i;e<s.start?n=i-1:t=i+1}return t}getItemContaining(e){if(0===this.count)return-1;if(e<this.start)return-1;if(e>this.end)return-1;let t=0,n=this.count-1;for(;t<=n;){const s=Math.floor(t+(n-t)/2),r=this._items[s];if(i.TextRange.contains(r,e))return s;if(s<this.count-1&&i.TextRange.getEnd(r)<=e&&e<this._items[s+1].start)return-1;e<r.start?n=s-1:t=s+1}return-1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertDocStringToMarkdown=void 0,t.convertDocStringToMarkdown=function(e){return new C(e).convert()};const i=/\S|$/,s=/\r?\n/,r=/\S/,o=/^\s*~~~+$/,a=/^\s*\+\+\++$/,c=/^(\s+\* )(.*)$/,l=/^\s*\.\. /,p=/^\s*\.\.\s+(\w+)::\s*(.*)$/,u=/ *>>> /,d=/^\s*:(param|arg|type|return|rtype|raise|except|var|ivar|cvar|copyright|license)/,h=[{exp:/^\s*=+(\s+=+)+$/,replacement:"="},{exp:/^\s*-+(\s+-+)+$/,replacement:"-"},{exp:/^\s*~+(\s+-+)+$/,replacement:"~"},{exp:/^\s*\++(\s+\++)+$/,replacement:"+"}],f=/\s/g,m=/``/g,g=/\t/g,y=/~/g,_=/\+/g,T=/(?<!\\)([_*~[\]])/g,v=/^\s*::$/,b=[{exp:/\s+::$/g,replacement:""},{exp:/(\S)\s*::$/g,replacement:"$1:"},{exp:/:[\w_\-+:.]+:`/g,replacement:"`"},{exp:/`:[\w_\-+:.]+:/g,replacement:"`"}];class C{constructor(e){this._builder="",this._skipAppendEmptyLine=!0,this._insideInlineCode=!1,this._appendDirectiveBlock=!1,this._stateStack=[],this._lineNum=0,this._blockIndent=0,this._state=this._parseText,this._lines=function(e){let t=(e=e.replace(g," ".repeat(8))).split(s).map(e=>e.trimRight());if(t.length>0){let e=t[0].trimLeft();""===e?e=void 0:t.splice(0,1),t=function(e,t){const n=void 0===t?function(e){const t=e.filter(e=>!x(e)).map(S);return t.length>0?Math.min(...t):0}(e):t;return e.map(e=>n>e.length?"":e.substr(n))}(t),void 0!==e&&t.splice(0,0,e)}return t}(e)}convert(){for(;void 0!==this._currentLineOrUndefined();){const e=this._state,t=this._lineNum;if(this._state(),this._state===e&&this._lineNum===t)break}return this._state===this._parseBacktickBlock||this._state===this._parseDocTest||this._state===this._parseLiteralBlock?this._trimOutputAndAppendLine("```"):this._insideInlineCode&&this._trimOutputAndAppendLine("`",!0),this._builder.trim()}_eatLine(){this._lineNum++}_currentLineOrUndefined(){return this._lineNum<this._lines.length?this._lines[this._lineNum]:void 0}_currentLine(){return this._currentLineOrUndefined()||""}_currentIndent(){return S(this._currentLine())}_lineAt(e){return e<this._lines.length?this._lines[e]:void 0}_nextBlockIndent(){return S(this._lines.slice(this._lineNum+1).find(e=>!x(e))||"")}_currentLineIsOutsideBlock(){return this._currentIndent()<this._blockIndent}_currentLineWithinBlock(){return this._currentLine().substr(this._blockIndent)}_pushAndSetState(e){this._state===this._parseText&&(this._insideInlineCode=!1),this._stateStack.push(this._state),this._state=e}_popState(){this._state=this._stateStack.splice(0,1)[0],this._state===this._parseText&&(this._insideInlineCode=!1)}_parseText(){x(this._currentLineOrUndefined())?this._state=this._parseEmpty:this._beginBacktickBlock()||this._beginLiteralBlock()||this._beginDocTest()||this._beginDirective()||(this._appendTextLine(this._currentLine()),this._eatLine())}_appendTextLine(e){e=this._preprocessTextLine(e),!this._insideInlineCode&&d.test(e)&&this._appendLine();const t=e.split("`");for(let e=0;e<t.length;e++){let n=t[e];if(e>0&&(this._insideInlineCode=!this._insideInlineCode,this._append("`")),this._insideInlineCode)this._append(n);else{if(0===e){if(1===t.length){for(const e of h)if(e.exp.test(n)){n=n.replace(f,e.replacement);break}if(o.test(n)){this._append(n.replace(y,"-"));continue}if(a.test(n)){this._append(n.replace(_,"-"));continue}}const e=c.exec(n);null!==e&&3===e.length&&(this._append(e[1]),n=e[2])}n=n.replace(T,"\\$1"),this._append(n)}}this._builder+="\n"}_preprocessTextLine(e){return v.test(e)?"":(b.forEach(t=>e=e.replace(t.exp,t.replacement)),e=e.replace(m,"`"))}_parseEmpty(){if(x(this._currentLineOrUndefined()))return this._appendLine(),void this._eatLine();this._state=this._parseText}_beginMinIndentCodeBlock(e){this._appendLine("```"),this._pushAndSetState(e),this._blockIndent=this._currentIndent()}_beginBacktickBlock(){return!!this._currentLine().startsWith("```")&&(this._appendLine(this._currentLine()),this._pushAndSetState(this._parseBacktickBlock),this._eatLine(),!0)}_parseBacktickBlock(){this._currentLine().startsWith("```")?(this._appendLine("```"),this._appendLine(),this._popState()):this._appendLine(this._currentLine()),this._eatLine()}_beginDocTest(){return!!u.test(this._currentLine())&&(this._beginMinIndentCodeBlock(this._parseDocTest),this._appendLine(this._currentLineWithinBlock()),this._eatLine(),!0)}_parseDocTest(){if(this._currentLineIsOutsideBlock()||x(this._currentLine()))return this._trimOutputAndAppendLine("```"),this._appendLine(),void this._popState();this._appendLine(this._currentLineWithinBlock()),this._eatLine()}_beginLiteralBlock(){const e=this._lineAt(this._lineNum-1);if(void 0===e)return!1;if(!x(e))return!1;let t=this._lineNum-2;for(;t>=0;t--){const e=this._lineAt(t);if(!x(e)){if(e.endsWith("::"))break;return!1}}return!(t<0)&&(0===this._currentIndent()?(this._appendLine("```"),this._pushAndSetState(this._parseLiteralBlockSingleLine),!0):(this._beginMinIndentCodeBlock(this._parseLiteralBlock),!0))}_parseLiteralBlock(){return x(this._currentLineOrUndefined())?(this._appendLine(),void this._eatLine()):this._currentLineIsOutsideBlock()?(this._trimOutputAndAppendLine("```"),this._appendLine(),void this._popState()):(this._appendLine(this._currentLineWithinBlock()),void this._eatLine())}_parseLiteralBlockSingleLine(){this._appendLine(this._currentLine()),this._appendLine("```"),this._appendLine(),this._popState(),this._eatLine()}_beginDirective(){return!!l.test(this._currentLine())&&(this._pushAndSetState(this._parseDirective),this._blockIndent=this._nextBlockIndent(),this._appendDirectiveBlock=!1,!0)}_parseDirective(){const e=p.exec(this._currentLine());if(null!==e&&3===e.length){const t=e[1],n=e[2];"class"===t&&(this._appendDirectiveBlock=!0,this._appendLine(),this._appendLine("```"),this._appendLine(n),this._appendLine("```"),this._appendLine())}0===this._blockIndent?this._popState():this._state=this._parseDirectiveBlock,this._eatLine()}_parseDirectiveBlock(){x(this._currentLineOrUndefined())||!this._currentLineIsOutsideBlock()?(this._appendDirectiveBlock&&this._appendTextLine(this._currentLine().trimLeft()),this._eatLine()):this._popState()}_appendLine(e){x(e)?this._skipAppendEmptyLine||(this._builder+="\n",this._skipAppendEmptyLine=!0):(this._builder+=e+"\n",this._skipAppendEmptyLine=!1)}_append(e){this._builder+=e,this._skipAppendEmptyLine=!1}_trimOutputAndAppendLine(e,t=!1){this._builder=this._builder.trimRight(),this._skipAppendEmptyLine=!1,t||this._appendLine(),this._appendLine(e)}}function S(e){return e.search(i)}function x(e){return void 0===e||!r.test(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionDocStringFromDeclaration=t.getFunctionDocStringFromType=t.getClassDocString=t.getModuleDocString=t.getOverloadedFunctionDocStrings=void 0;const i=n(6),s=n(36);function r(e,t){let n=o([e]);if(!n&&s.isStubFile(e.path)){n=o(t.findFunctionDeclarations(e))}return n}function o(e){var t,n;for(const s of e){const e=i.getDocString(null===(n=null===(t=s.node)||void 0===t?void 0:t.suite)||void 0===n?void 0:n.statements);if(e)return e}}t.getOverloadedFunctionDocStrings=function(e,t,n){const i=[];if(e.overloads.some(e=>e.details.docString))e.overloads.forEach(e=>{e.details.docString&&i.push(e.details.docString)});else if(t&&s.isStubFile(t.path)&&3===t.type){const e=o(n.findFunctionDeclarations(t));e&&i.push(e)}return i},t.getModuleDocString=function(e,t,n){let r=e.docString;if(!r&&t&&s.isStubFile(t.path)){r=function(e){for(const t of e)if(t.statements){const e=i.getDocString(t.statements);if(e)return e}return}(n.findModules(t.path))}return r},t.getClassDocString=function(e,t,n){let i=e.details.docString;if(!i&&t&&s.isStubFile(t.path)&&4===t.type){i=o(n.findClassDeclarations(t))}return i},t.getFunctionDocStringFromType=function(e,t){let n=e.details.docString;return!n&&e.details.declaration&&(n=r(e.details.declaration,t)),n},t.getFunctionDocStringFromDeclaration=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertHoverResults=t.HoverProvider=void 0;const i=n(10),s=n(70),r=n(6),o=n(71),a=n(21),c=n(17),l=n(0),p=n(5),u=n(1);t.HoverProvider=class{static getHoverForPosition(e,t,n,i,s){l.throwIfCancellationRequested(s);const o=p.convertPositionToOffset(n,t.tokenizerOutput.lines);if(void 0===o)return;const c=r.findNodeByOffset(t.parseTree,o);if(void 0===c)return;const d={parts:[],range:{start:p.convertOffsetToPosition(c.start,t.tokenizerOutput.lines),end:p.convertOffsetToPosition(u.TextRange.getEnd(c),t.tokenizerOutput.lines)}};if(39===c.nodeType){const t=i.getDeclarationsForNameNode(c);if(t&&t.length>0)this._addResultsForDeclaration(e,d.parts,t[0],c,i);else if((!c.parent||38!==c.parent.nodeType)&&0===d.parts.length){const t=i.getType(c)||a.UnknownType.create();let n="";n=9===t.category?"(module) "+c.value:c.value+": "+i.printType(t,!1),this._addResultsPart(d.parts,n,!0),this._addDocumentationPart(e,d.parts,c,i,void 0)}}return d.parts.length>0?d:void 0}static _addResultsForDeclaration(e,t,n,i,s){var r;const o=s.resolveAliasDeclaration(n,!0);if(o)switch(o.type){case 0:this._addResultsPart(t,i.value+this._getTypeText(i,s),!0),this._addDocumentationPart(e,t,i,s,o);break;case 1:{let a=o.isConstant||o.isFinal?"constant":"variable",c=i;21===n.node.nodeType||23===n.node.nodeType?n.node.alias&&i!==n.node.alias&&39===o.node.nodeType&&(c=o.node):1===(null===(r=i.parent)||void 0===r?void 0:r.nodeType)&&i.parent.name===i&&39===n.node.nodeType&&(c=n.node);const l=s.getType(c);let p=!1;(null==l?void 0:l.typeAliasInfo)&&(l.typeAliasInfo.aliasName===c.value&&(p=!0),a="type alias"),this._addResultsPart(t,`(${a}) `+i.value+this._getTypeText(c,s,p),!0),this._addDocumentationPart(e,t,i,s,o);break}case 2:this._addResultsPart(t,"(parameter) "+i.value+this._getTypeText(i,s),!0),this._addDocumentationPart(e,t,i,s,o);break;case 4:case 5:{let n=i.value,r=i;if(r.parent&&36===r.parent.nodeType&&i===r.parent.memberName&&(r=i.parent),r&&r.parent&&9===r.parent.nodeType&&r.parent.leftExpression===r){const e=s.getType(i);if(e&&7===e.category){const t=c.lookUpClassMember(e,"__init__",12);if(t){const e=s.getTypeOfMember(t);if(e&&5===e.category){n+=`(${s.printFunctionParts(e)[0].join(", ")})`}}}}this._addResultsPart(t,"(class) "+n,!0),this._addDocumentationPart(e,t,i,s,o);break}case 3:{let n="function";if(o.isMethod){const e=s.getTypeForDeclaration(o);n=e&&c.isProperty(e)?"property":"method"}this._addResultsPart(t,`(${n}) `+i.value+this._getTypeText(i,s),!0),this._addDocumentationPart(e,t,i,s,o);break}case 6:this._addResultsPart(t,"(module) "+i.value,!0),this._addDocumentationPart(e,t,i,s,o)}else this._addResultsPart(t,"(import) "+i.value+this._getTypeText(i,s),!0)}static _getTypeText(e,t,n=!1){const i=t.getType(e)||a.UnknownType.create();return": "+t.printType(i,n)}static _addDocumentationPart(e,t,n,i,s){const r=i.getType(n);r&&this._addDocumentationPartForType(e,t,r,s)}static _addDocumentationPartForType(e,t,n,i){const s=[];9===n.category?s.push(o.getModuleDocString(n,i,e)):7===n.category?s.push(o.getClassDocString(n,i,e)):5===n.category?s.push(o.getFunctionDocStringFromType(n,e)):6===n.category?s.push(...o.getOverloadedFunctionDocStrings(n,i,e)):3===(null==i?void 0:i.type)&&s.push(o.getFunctionDocStringFromDeclaration(i,e));for(const e of s)e&&this._addDocumentationResultsPart(t,e)}static _addDocumentationResultsPart(e,t){t&&this._addResultsPart(e,s.convertDocStringToMarkdown(t))}static _addResultsPart(e,t,n=!1){e.push({python:n,text:t})}},t.convertHoverResults=function(e){if(!e)return;const t=e.parts.map(e=>e.python?"```python\n"+e.text+"\n```\n":e.text).join("");return{contents:{kind:i.MarkupKind.Markdown,value:t},range:e.range}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=t.ParseOptions=void 0;const i=n(2),s=n(26),r=n(68),o=n(5),a=n(30),c=n(24),l=n(22),p=n(25),u=n(74),d=n(141),h=n(76);class f{constructor(){this.isStubFile=!1,this.pythonVersion=a.latestStablePythonVersion}}t.ParseOptions=f;class m{constructor(){this._tokenIndex=0,this._parseOptions=new f,this._diagSink=new r.DiagnosticSink,this._isInLoop=!1,this._isInFunction=!1,this._isInFinally=!1,this._isParsingTypeAnnotation=!1,this._isParsingIndexTrailer=!1,this._futureImportMap=new Map,this._importedModules=[],this._containsWildcardImport=!1,this._assignmentExpressionsAllowed=!0}parseSourceFile(e,t,n){c.timingStats.tokenizeFileTime.timeOperation(()=>{this._startNewParse(e,0,e.length,t,n)});const s=p.ModuleNode.create({start:0,length:e.length});return c.timingStats.parseFileTime.timeOperation(()=>{for(;!this._atEof();)if(!this._consumeTokenIfType(2)){const e=this._peekToken();if(3===e.type){this._getNextToken();const t=e;t.isIndentAmbiguous?this._addError(l.Localizer.Diagnostic.inconsistentTabs(),t):this._addError(l.Localizer.Diagnostic.unexpectedIndent(),e)}const t=this._parseStatement();t?(t.parent=s,s.statements.push(t)):this._consumeTokensUntilType([2])}}),i.assert(void 0!==this._tokenizerOutput),{text:e,parseTree:s,importedModules:this._importedModules,futureImports:this._futureImportMap,tokenizerOutput:this._tokenizerOutput,containsWildcardImport:this._containsWildcardImport}}parseTextExpression(e,t,n,i,s){const o=new r.DiagnosticSink;let a;return this._startNewParse(e,t,n,i,o),a=s?this._parseTypeAnnotation(!1):this._parseTestExpression(!1),2===this._peekTokenType()&&this._getNextToken(),this._atEof()||this._addError(l.Localizer.Diagnostic.unexpectedExprToken(),this._peekToken()),{parseTree:a,lines:this._tokenizerOutput.lines,diagnostics:o.fetchAndClear()}}_startNewParse(e,t,n,i,s){this._fileContents=e,this._parseOptions=i,this._diagSink=s;const r=new d.Tokenizer;this._tokenizerOutput=r.tokenize(e,t,n),this._tokenIndex=0}_parseStatement(){switch(this._consumeTokenIfType(4)&&this._addError(l.Localizer.Diagnostic.unexpectedUnindent(),this._peekToken()),this._peekKeywordType()){case 19:return this._parseIfStatement();case 33:return this._parseWhileStatement();case 16:return this._parseForStatement();case 32:return this._parseTryStatement();case 34:return this._parseWithStatement();case 9:return this._parseFunctionDef();case 6:return this._parseClassDef();case 3:return this._parseAsyncStatement()}return 22===this._peekOperatorType()?this._parseDecorated():this._parseSimpleStatement()}_parseAsyncStatement(){const e=this._getKeywordToken(3);switch(this._peekKeywordType()){case 9:return this._parseFunctionDef(e);case 34:return this._parseWithStatement(e);case 16:return this._parseForStatement(e)}this._addError(l.Localizer.Diagnostic.unexpectedAsyncToken(),e)}_parseIfStatement(e=19){const t=this._getKeywordToken(e),n=this._parseTestExpression(!0),i=this._parseSuite(this._isInFunction),s=p.IfNode.create(t,n,i);return this._consumeTokenIfKeyword(12)?(s.elseSuite=this._parseSuite(this._isInFunction),s.elseSuite.parent=s,p.extendRange(s,s.elseSuite)):11===this._peekKeywordType()&&(s.elseSuite=this._parseIfStatement(11),s.elseSuite.parent=s,p.extendRange(s,s.elseSuite)),s}_parseLoopSuite(){const e=this._isInLoop,t=this._isInFinally;this._isInLoop=!0,this._isInFinally=!1;const n=this._parseSuite(this._isInFunction);return this._isInLoop=e,this._isInFinally=t,n}_parseSuite(e=!1){const t=this._peekToken(),n=p.SuiteNode.create(t);this._consumeTokenIfType(10)||(this._addError(l.Localizer.Diagnostic.expectedColon(),t),this._consumeTokensUntilType([2,10])&&this._getNextToken());const i=this._isInFunction;if(this._isInFunction=e,this._consumeTokenIfType(2)){const e=this._peekToken();if(this._consumeTokenIfType(3)){const t=e;t.isIndentAmbiguous&&this._addError(l.Localizer.Diagnostic.inconsistentTabs(),t)}else this._addError(l.Localizer.Diagnostic.expectedIndentedBlock(),this._peekToken());for(;;){const e=this._peekToken();if(3===e.type){this._getNextToken();const t=e;t.isIndentAmbiguous?this._addError(l.Localizer.Diagnostic.inconsistentTabs(),t):this._addError(l.Localizer.Diagnostic.unexpectedIndent(),e)}const t=this._parseStatement();t?(t.parent=n,n.statements.push(t)):this._consumeTokensUntilType([2]);const i=this._peekToken();if(this._consumeTokenIfType(4)){i.matchesIndent||this._addError(l.Localizer.Diagnostic.inconsistentIndent(),i);break}if(1===this._peekTokenType())break}}else{const e=this._parseSimpleStatement();n.statements.push(e),e.parent=n}return n.statements.length>0&&p.extendRange(n,n.statements[n.statements.length-1]),this._isInFunction=i,n}_parseForStatement(e){const t=this._getKeywordToken(16),n=this._parseExpressionList(!0),i=this._makeExpressionOrTuple(n,!1);let s,r,o;this._consumeTokenIfKeyword(21)?(s=this._parseTestListAsExpression(2,l.Localizer.Diagnostic.expectedInExpr()),r=this._parseLoopSuite(),this._consumeTokenIfKeyword(12)&&(o=this._parseSuite(this._isInFunction))):(s=this._handleExpressionParseError(0,l.Localizer.Diagnostic.expectedIn()),r=p.SuiteNode.create(this._peekToken()));const a=p.ForNode.create(t,i,s,r);return a.elseSuite=o,o&&(p.extendRange(a,o),o.parent=a),e&&(a.isAsync=!0,p.extendRange(a,e)),a}_tryParseListComprehension(e){const t=this._tryParseCompForStatement();if(!t)return;const n=p.ListComprehensionNode.create(e),i=[t];for(;;){const e=this._tryParseCompForStatement()||this._tryParseCompIfStatement();if(!e)break;e.parent=n,i.push(e)}return n.comprehensions=i,i.length>0&&(i.forEach(e=>{e.parent=n}),p.extendRange(n,i[i.length-1])),n}_tryParseCompForStatement(){const e=this._peekKeywordType();if(3===e){const e=this._peekToken(1);if(8!==e.type||16!==e.keywordType)return}else if(16!==e)return;let t;3===this._peekKeywordType()&&(t=this._getKeywordToken(3));const n=this._getKeywordToken(16),i=this._parseExpressionList(!0),s=this._makeExpressionOrTuple(i,!1);let r;this._consumeTokenIfKeyword(21)?this._disallowAssignmentExpression(()=>{r=this._parseOrTest()}):r=this._handleExpressionParseError(0,l.Localizer.Diagnostic.expectedIn());const o=p.ListComprehensionForNode.create(t||n,s,r);return t&&(o.isAsync=!0),o}_tryParseCompIfStatement(){if(19!==this._peekKeywordType())return;const e=this._getKeywordToken(19),t=this._tryParseLambdaExpression()||this._parseAssignmentExpression();return p.ListComprehensionIfNode.create(e,t)}_parseWhileStatement(){const e=this._getKeywordToken(33),t=p.WhileNode.create(e,this._parseTestExpression(!0),this._parseLoopSuite());return this._consumeTokenIfKeyword(12)&&(t.elseSuite=this._parseSuite(this._isInFunction),t.elseSuite.parent=t,p.extendRange(t,t.elseSuite)),t}_parseTryStatement(){const e=this._getKeywordToken(32),t=this._parseSuite(this._isInFunction),n=p.TryNode.create(e,t);let i=!1;for(;;){const e=this._peekToken();if(!this._consumeTokenIfKeyword(13))break;let t,s;if(10!==this._peekTokenType())if(t=this._parseTestExpression(!0),this._consumeTokenIfKeyword(1))s=this._getTokenIfIdentifier(),s||this._addError(l.Localizer.Diagnostic.expectedNameAfterAs(),this._peekToken());else{const e=this._peekToken();this._consumeTokenIfType(12)&&(this._addError(l.Localizer.Diagnostic.expectedAsAfterException(),e),this._parseTestExpression(!1))}t?i&&this._addError(l.Localizer.Diagnostic.namedExceptAfterCatchAll(),t):(i&&this._addError(l.Localizer.Diagnostic.duplicateCatchAll(),e),i=!0);const r=this._parseSuite(this._isInFunction),o=p.ExceptNode.create(e,r);t&&(o.typeExpression=t,o.typeExpression.parent=o),s&&(o.name=p.NameNode.create(s),o.name.parent=o),n.exceptClauses.push(o),o.parent=n}return n.exceptClauses.length>0&&(p.extendRange(n,n.exceptClauses[n.exceptClauses.length-1]),this._consumeTokenIfKeyword(12)&&(n.elseSuite=this._parseSuite(this._isInFunction),n.elseSuite.parent=n,p.extendRange(n,n.elseSuite))),this._consumeTokenIfKeyword(15)&&(n.finallySuite=this._parseSuite(this._isInFunction),n.finallySuite.parent=n,p.extendRange(n,n.finallySuite)),n}_parseFunctionDef(e,t){const n=this._getKeywordToken(9),i=this._getTokenIfIdentifier();if(!i)return this._addError(l.Localizer.Diagnostic.expectedFunctionName(),n),p.ErrorNode.create(n,10);if(!this._consumeTokenIfType(13))return this._addError(l.Localizer.Diagnostic.expectedOpenParen(),this._peekToken()),p.ErrorNode.create(i,10,p.NameNode.create(i));const s=this._parseVarArgsList(14,!0);let r;this._consumeTokenIfType(14)||(this._addError(l.Localizer.Diagnostic.expectedCloseParen(),this._peekToken()),this._consumeTokensUntilType([10])),this._consumeTokenIfType(21)&&(r=this._parseTypeAnnotation());const o=this._parseSuite(!0),a=p.FunctionNode.create(n,p.NameNode.create(i),o);return e&&(a.isAsync=!0,p.extendRange(a,e)),a.parameters=s,s.forEach(e=>{e.parent=a}),t&&(a.decorators=t,t.forEach(e=>{e.parent=a}),t.length>0&&p.extendRange(a,t[0])),r&&(a.returnTypeAnnotation=r,a.returnTypeAnnotation.parent=a,p.extendRange(a,r)),a}_parseVarArgsList(e,t){const n=new Map,i=[];let s=!1,r=!1,o=!1,a=!1,c=!1,p=!1;for(;this._peekTokenType()!==e;){const u=this._parseParameter(t);if(!u){this._consumeTokensUntilType([e]);break}if(u.name){const e=u.name.value;n.has(e)?this._addError(l.Localizer.Diagnostic.duplicateParam().format({name:e}),u.name):n.set(e,e)}if(0===u.category&&(u.name?u.defaultValue?s=!0:!s||o||c||r||(this._addError(l.Localizer.Diagnostic.nonDefaultAfterDefault(),u),r=!0):(a?this._addError(l.Localizer.Diagnostic.duplicatePositionOnly(),u):o&&this._addError(l.Localizer.Diagnostic.positionOnlyAfterNameOnly(),u),a=!0)),i.push(u),1===u.category&&(u.name?(c&&this._addError(l.Localizer.Diagnostic.duplicateArgsParam(),u),c=!0):(o&&this._addError(l.Localizer.Diagnostic.duplicateNameOnly(),u),o=!0)),2===u.category?(p&&this._addError(l.Localizer.Diagnostic.duplicateKwargsParam(),u),p=!0):p&&this._addError(l.Localizer.Diagnostic.paramAfterKwargsParam(),u),!this._consumeTokenIfType(12))break}if(i.length>0){const e=i[i.length-1];1!==e.category||e.name||this._addError(l.Localizer.Diagnostic.expectedNamedArgument(),e)}return i}_parseParameter(e){let t=0,n=0;const i=this._peekToken();this._consumeTokenIfOperator(26)?t=1:this._consumeTokenIfOperator(29)?t=2:this._consumeTokenIfOperator(10)&&(this._getLanguageVersion()<a.PythonVersion.V38&&this._addError(l.Localizer.Diagnostic.positionOnlyIncompatible(),i),n=1);const s=this._getTokenIfIdentifier();if(!s){if(1===t){return p.ParameterNode.create(i,1)}if(1===n){return p.ParameterNode.create(i,0)}if(13===this._peekTokenType()){const e=this._getNextToken();this._consumeTokensUntilType([14])&&this._getNextToken(),this._addError(l.Localizer.Diagnostic.sublistParamsIncompatible(),e)}else this._addError(l.Localizer.Diagnostic.expectedParamName(),this._peekToken())}let r=0;1===t?r=1:2===t&&(r=2);const o=p.ParameterNode.create(i,r);return s&&(o.name=p.NameNode.create(s),o.name.parent=o,p.extendRange(o,s)),e&&this._consumeTokenIfType(10)&&(o.typeAnnotation=this._parseTypeAnnotation(),o.typeAnnotation.parent=o,p.extendRange(o,o.typeAnnotation)),this._consumeTokenIfOperator(2)&&(o.defaultValue=this._parseTestExpression(!1),o.defaultValue.parent=o,p.extendRange(o,o.defaultValue),t>0&&this._addError(l.Localizer.Diagnostic.defaultValueNotAllowed(),o.defaultValue)),o}_parseWithStatement(e){const t=this._getKeywordToken(34),n=[];for(;n.push(this._parseWithItem()),this._consumeTokenIfType(12););const i=this._parseSuite(this._isInFunction),s=p.WithNode.create(t,i);return e&&(s.isAsync=!0,p.extendRange(s,e)),s.withItems=n,n.forEach(e=>{e.parent=s}),s}_parseWithItem(){const e=this._parseTestExpression(!0),t=p.WithItemNode.create(e);return this._consumeTokenIfKeyword(1)&&(t.target=this._parseExpression(!1),t.target.parent=t,p.extendRange(t,t.target)),t}_parseDecorated(){const e=[];for(;22===this._peekOperatorType();)e.push(this._parseDecorator());const t=this._peekToken();if(8===t.type)if(3===t.keywordType){if(this._getNextToken(),9===this._peekKeywordType())return this._parseFunctionDef(t,e);this._addError(l.Localizer.Diagnostic.expectedFunctionAfterAsync(),this._peekToken())}else{if(9===t.keywordType)return this._parseFunctionDef(void 0,e);if(6===t.keywordType)return this._parseClassDef(e)}return this._addError(l.Localizer.Diagnostic.expectedAfterDecorator(),this._peekToken()),p.ClassNode.createDummyForDecorators(e)}_parseDecorator(){const e=this._getNextToken();let t;for(i.assert(22===e.operatorType);;){const e=this._getTokenIfIdentifier();if(!e){this._addError(l.Localizer.Diagnostic.expectedDecoratorName(),this._peekToken()),t=t?p.ErrorNode.create(this._peekToken(),7,t):p.ErrorNode.create(this._peekToken(),4);break}const n=p.NameNode.create(e);if(t=t?p.MemberAccessNode.create(t,n):n,!this._consumeTokenIfType(20))break}const n=p.DecoratorNode.create(e,t);if(this._consumeTokenIfType(13)){n.arguments=this._parseArgList(),n.arguments.forEach(e=>{e.parent=n,p.extendRange(n,e)});const e=this._peekToken();this._consumeTokenIfType(14)?p.extendRange(n,e):this._addError(l.Localizer.Diagnostic.expectedCloseParen(),this._peekToken())}return this._consumeTokenIfType(2)||(this._addError(l.Localizer.Diagnostic.expectedDecoratorNewline(),this._peekToken()),this._consumeTokensUntilType([2])),n}_parseClassDef(e){const t=this._getKeywordToken(6);let n=this._getTokenIfIdentifier();n||(this._addError(l.Localizer.Diagnostic.expectedClassName(),this._peekToken()),n=h.IdentifierToken.create(0,0,"",void 0));let i=[];this._consumeTokenIfType(13)&&(i=this._parseArgList(),this._consumeTokenIfType(14)||this._addError(l.Localizer.Diagnostic.expectedCloseParen(),this._peekToken()));const s=this._parseSuite(!1),r=p.ClassNode.create(t,p.NameNode.create(n),s);return r.arguments=i,i.forEach(e=>{e.parent=r}),e&&(r.decorators=e,e.length>0&&(e.forEach(e=>{e.parent=r}),p.extendRange(r,e[0]))),r}_parsePassStatement(){return p.PassNode.create(this._getKeywordToken(28))}_parseBreakStatement(){const e=this._getKeywordToken(5);return this._isInLoop||this._addError(l.Localizer.Diagnostic.breakOutsideLoop(),e),p.BreakNode.create(e)}_parseContinueStatement(){const e=this._getKeywordToken(7);return this._isInLoop?this._isInFinally&&this._addError(l.Localizer.Diagnostic.continueInFinally(),e):this._addError(l.Localizer.Diagnostic.continueOutsideLoop(),e),p.ContinueNode.create(e)}_parseReturnStatement(){const e=this._getKeywordToken(30),t=p.ReturnNode.create(e);if(this._isInFunction||this._addError(l.Localizer.Diagnostic.returnOutsideFunction(),e),!this._isNextTokenNeverExpression()){const e=this._parseTestOrStarListAsExpression(!0,2,l.Localizer.Diagnostic.expectedReturnExpr());this._reportConditionalErrorForStarTupleElement(e),t.returnExpression=e,t.returnExpression.parent=t,p.extendRange(t,e)}return t}_parseFromStatement(){const e=this._getKeywordToken(17),t=this._parseDottedModuleName(!0),n=p.ImportFromNode.create(e,t),i=0===t.leadingDots&&1===t.nameParts.length&&"__future__"===t.nameParts[0].value,s=this._peekToken();if(this._consumeTokenIfKeyword(20)){p.extendRange(n,s);const e=this._peekToken();if(this._consumeTokenIfOperator(26))p.extendRange(n,e),n.isWildcardImport=!0,this._containsWildcardImport=!0;else{const e=this._consumeTokenIfType(13);for(;;){const e=this._getTokenIfIdentifier();if(!e)break;const t=p.ImportFromAsNode.create(p.NameNode.create(e));if(this._consumeTokenIfKeyword(1)){const e=this._getTokenIfIdentifier();e?(t.alias=p.NameNode.create(e),t.alias.parent=t,p.extendRange(t,e)):this._addError(l.Localizer.Diagnostic.expectedImportAlias(),this._peekToken())}if(n.imports.push(t),t.parent=n,p.extendRange(n,t),i&&this._futureImportMap.set(e.value,!0),!this._consumeTokenIfType(12))break}if(0===n.imports.length&&this._addError(l.Localizer.Diagnostic.expectedImportSymbols(),this._peekToken()),e){n.usesParens=!0;const e=this._peekToken();this._consumeTokenIfType(14)?p.extendRange(n,e):this._addError(l.Localizer.Diagnostic.expectedCloseParen(),this._peekToken())}}}else this._addError(l.Localizer.Diagnostic.expectedImport(),this._peekToken()),t.hasTrailingDot||(n.missingImportKeyword=!0);return this._importedModules.push({nameNode:n.module,leadingDots:n.module.leadingDots,nameParts:n.module.nameParts.map(e=>e.value),importedSymbols:n.imports.map(e=>e.name.value)}),n}_parseImportStatement(){const e=this._getKeywordToken(20),t=p.ImportNode.create(e);for(;;){const e=this._parseDottedModuleName(),n=p.ImportAsNode.create(e);if(this._consumeTokenIfKeyword(1)){const e=this._getTokenIfIdentifier();e?(n.alias=p.NameNode.create(e),n.alias.parent=n,p.extendRange(n,n.alias)):this._addError(l.Localizer.Diagnostic.expectedImportAlias(),this._peekToken())}if(t.list.push(n),n.parent=t,this._importedModules.push({nameNode:n.module,leadingDots:n.module.leadingDots,nameParts:n.module.nameParts.map(e=>e.value),importedSymbols:void 0}),!this._consumeTokenIfType(12))break}return t.list.length>0&&p.extendRange(t,t.list[t.list.length-1]),t}_parseDottedModuleName(e=!1){const t=p.ModuleNameNode.create(this._peekToken());for(;;)if(this._consumeTokenIfType(19))t.leadingDots+=3;else{if(!this._consumeTokenIfType(20))break;t.leadingDots++}for(;;){const n=this._getTokenIfIdentifier([20]);if(!n){e&&0!==t.leadingDots||(this._addError(l.Localizer.Diagnostic.expectedModuleName(),this._peekToken()),t.hasTrailingDot=!0);break}const i=p.NameNode.create(n);t.nameParts.push(i),i.parent=t,p.extendRange(t,i);const s=this._peekToken();if(!this._consumeTokenIfType(20))break;p.extendRange(t,s)}return t}_parseGlobalStatement(){const e=this._getKeywordToken(18),t=p.GlobalNode.create(e);return t.nameList=this._parseNameList(),t.nameList.length>0&&(t.nameList.forEach(e=>{e.parent=t}),p.extendRange(t,t.nameList[t.nameList.length-1])),t}_parseNonlocalStatement(){const e=this._getKeywordToken(25),t=p.NonlocalNode.create(e);return t.nameList=this._parseNameList(),t.nameList.length>0&&(t.nameList.forEach(e=>{e.parent=t}),p.extendRange(t,t.nameList[t.nameList.length-1])),t}_parseNameList(){const e=[];for(;;){const t=this._getTokenIfIdentifier();if(!t){this._addError(l.Localizer.Diagnostic.expectedIdentifier(),this._peekToken());break}if(e.push(p.NameNode.create(t)),!this._consumeTokenIfType(12))break}return e}_parseRaiseStatement(){const e=this._getKeywordToken(29),t=p.RaiseNode.create(e);return this._isNextTokenNeverExpression()||(t.typeExpression=this._parseTestExpression(!0),t.typeExpression.parent=t,p.extendRange(t,t.typeExpression),this._consumeTokenIfKeyword(17)?(t.valueExpression=this._parseTestExpression(!0),t.valueExpression.parent=t,p.extendRange(t,t.valueExpression)):this._consumeTokenIfType(12)&&(t.valueExpression=this._parseTestExpression(!0),t.valueExpression.parent=t,p.extendRange(t,t.valueExpression),this._consumeTokenIfType(12)&&(t.tracebackExpression=this._parseTestExpression(!0),t.tracebackExpression.parent=t,p.extendRange(t,t.tracebackExpression)))),t}_parseAssertStatement(){const e=this._getKeywordToken(2),t=this._parseTestExpression(!0),n=p.AssertNode.create(e,t);if(this._consumeTokenIfType(12)){const e=this._parseTestExpression(!0);n.exceptionExpression=e,n.exceptionExpression.parent=n,p.extendRange(n,e)}return n}_parseDelStatement(){const e=this._getKeywordToken(10),t=this._parseExpressionList(!0);t.parseError||0!==t.list.length||this._addError(l.Localizer.Diagnostic.expectedDelExpr(),this._peekToken());const n=p.DelNode.create(e);return n.expressions=t.list,n.expressions.length>0&&(n.expressions.forEach(e=>{e.parent=n}),p.extendRange(n,n.expressions[n.expressions.length-1])),n}_parseYieldExpression(){const e=this._getKeywordToken(35),t=this._peekToken();if(this._consumeTokenIfKeyword(17))return this._getLanguageVersion()<a.PythonVersion.V33&&this._addError(l.Localizer.Diagnostic.yieldFromIllegal(),t),p.YieldFromNode.create(e,this._parseTestExpression(!0));let n;return this._isNextTokenNeverExpression()||(n=this._parseTestOrStarListAsExpression(!0,2,l.Localizer.Diagnostic.expectedYieldExpr()),this._reportConditionalErrorForStarTupleElement(n)),p.YieldNode.create(e,n)}_tryParseYieldExpression(){if(35===this._peekKeywordType())return this._parseYieldExpression()}_parseSimpleStatement(){const e=p.StatementListNode.create(this._peekToken());for(;;){if(0===this._peekTokenType()){const e=this._getNextToken(),t=this._fileContents.substr(e.start,e.length).replace(/[\S\W]/g,"");this._addError(l.Localizer.Diagnostic.invalidTokenChars().format({text:t}),e),this._consumeTokensUntilType([2]);break}const t=this._parseSmallStatement();if(e.statements.push(t),t.parent=e,p.extendRange(e,t),0===t.nodeType)break;if(!this._consumeTokenIfType(11))break;const n=this._peekTokenType();if(2===n||1===n)break}return this._consumeTokenIfType(2)||this._addError(l.Localizer.Diagnostic.expectedNewlineOrSemicolon(),this._peekToken()),e}_parseSmallStatement(){switch(this._peekKeywordType()){case 28:return this._parsePassStatement();case 5:return this._parseBreakStatement();case 7:return this._parseContinueStatement();case 30:return this._parseReturnStatement();case 17:return this._parseFromStatement();case 20:return this._parseImportStatement();case 18:return this._parseGlobalStatement();case 25:return this._parseNonlocalStatement();case 29:return this._parseRaiseStatement();case 2:return this._parseAssertStatement();case 10:return this._parseDelStatement();case 35:return this._parseYieldExpression()}return this._parseExpressionStatement()}_makeExpressionOrTuple(e,t){if(1===e.list.length&&!e.trailingComma)return e.list[0];const n=e.list.length>0?e.list[0]:this._peekToken(-1),i=p.TupleNode.create(n,t);return i.expressions=e.list,e.list.length>0&&(e.list.forEach(e=>{e.parent=i}),p.extendRange(i,e.list[e.list.length-1])),i}_parseTestListAsExpression(e,t){if(this._isNextTokenNeverExpression())return this._handleExpressionParseError(e,t);const n=this._parseTestExpressionList();return n.parseError?n.parseError:this._makeExpressionOrTuple(n,!1)}_parseTestOrStarListAsExpression(e,t,n){if(this._isNextTokenNeverExpression())return this._handleExpressionParseError(t,n);const i=this._parseTestOrStarExpressionList(e);return i.parseError?i.parseError:this._makeExpressionOrTuple(i,!1)}_parseExpressionList(e){return this._parseExpressionListGeneric(()=>this._parseExpression(e))}_parseTestExpressionList(){return this._parseExpressionListGeneric(()=>this._parseTestExpression(!1))}_parseTestOrStarExpressionList(e){const t=this._parseExpressionListGeneric(()=>this._parseTestOrStarExpression(e));if(!t.parseError){let e=!1;for(const n of t.list)if(57===n.nodeType){if(e){this._addError(l.Localizer.Diagnostic.duplicateUnpack(),n);break}e=!0}}return t}_parseExpression(e){const t=this._peekToken();return e&&this._consumeTokenIfOperator(26)?p.UnpackNode.create(t,this._parseExpression(!1)):this._parseBitwiseOrExpression()}_parseTestOrStarExpression(e){return 26===this._peekOperatorType()?this._parseExpression(!0):this._parseTestExpression(e)}_parseTestExpression(e){if(23===this._peekKeywordType())return this._parseLambdaExpression();const t=e?this._parseAssignmentExpression():this._parseOrTest();if(0===t.nodeType)return t;if(!this._consumeTokenIfKeyword(19))return t;const n=this._parseAssignmentExpression();if(0===n.nodeType)return n;if(!this._consumeTokenIfKeyword(12))return this._handleExpressionParseError(1,l.Localizer.Diagnostic.expectedElse());const i=this._parseTestExpression(!0);return 0===i.nodeType?i:p.TernaryNode.create(t,n,i)}_parseAssignmentExpression(){const e=this._parseOrTest();if(0===e.nodeType)return e;if(39!==e.nodeType)return e;const t=this._peekToken();if(!this._consumeTokenIfOperator(35))return e;let n;return this._assignmentExpressionsAllowed||this._addError(l.Localizer.Diagnostic.walrusNotAllowed(),t),this._getLanguageVersion()<a.PythonVersion.V38&&this._addError(l.Localizer.Diagnostic.walrusIllegal(),t),n=23===this._peekKeywordType()?this._parseLambdaExpression():this._parseOrTest(),p.AssignmentExpressionNode.create(e,n)}_parseOrTest(){let e=this._parseAndTest();if(0===e.nodeType)return e;for(;;){const t=this._peekToken();if(!this._consumeTokenIfKeyword(27))break;const n=this._parseAndTest();e=p.BinaryOperationNode.create(e,n,t,37)}return e}_parseAndTest(){let e=this._parseNotTest();if(0===e.nodeType)return e;for(;;){const t=this._peekToken();if(!this._consumeTokenIfKeyword(0))break;const n=this._parseNotTest();e=p.BinaryOperationNode.create(e,n,t,36)}return e}_parseNotTest(){const e=this._peekToken();if(this._consumeTokenIfKeyword(26)){const t=this._parseNotTest();return p.UnaryOperationNode.create(e,t,38)}return this._parseComparison()}_parseComparison(){let e=this._parseBitwiseOrExpression();if(0===e.nodeType)return e;for(;;){let t;const n=this._peekToken();if(d.Tokenizer.isOperatorComparison(this._peekOperatorType()))t=this._peekOperatorType(),19===t&&(this._addError(l.Localizer.Diagnostic.operatorLessOrGreaterDeprecated(),n),t=28),this._getNextToken();else if(this._consumeTokenIfKeyword(21))t=41;else if(this._consumeTokenIfKeyword(22))t=this._consumeTokenIfKeyword(26)?40:39;else if(26===this._peekKeywordType()){const e=this._peekToken(1);8===e.type&&21===e.keywordType&&(this._getNextToken(),this._getNextToken(),t=42)}if(void 0===t)break;const i=this._parseBitwiseOrExpression();e=p.BinaryOperationNode.create(e,i,n,t)}return e}_parseBitwiseOrExpression(){let e=this._parseBitwiseXorExpression();if(0===e.nodeType)return e;for(;;){const t=this._peekToken();if(!this._consumeTokenIfOperator(6))break;const n=this._parseBitwiseXorExpression();e=p.BinaryOperationNode.create(e,n,t,6)}return e}_parseBitwiseXorExpression(){let e=this._parseBitwiseAndExpression();if(0===e.nodeType)return e;for(;;){const t=this._peekToken();if(!this._consumeTokenIfOperator(8))break;const n=this._parseBitwiseAndExpression();e=p.BinaryOperationNode.create(e,n,t,8)}return e}_parseBitwiseAndExpression(){let e=this._parseShiftExpression();if(0===e.nodeType)return e;for(;;){const t=this._peekToken();if(!this._consumeTokenIfOperator(3))break;const n=this._parseShiftExpression();e=p.BinaryOperationNode.create(e,n,t,3)}return e}_parseShiftExpression(){let e=this._parseArithmeticExpression();if(0===e.nodeType)return e;let t=this._peekToken(),n=this._peekOperatorType();for(;17===n||31===n;){this._getNextToken();const i=this._parseArithmeticExpression();e=p.BinaryOperationNode.create(e,i,t,n),t=this._peekToken(),n=this._peekOperatorType()}return e}_parseArithmeticExpression(){let e=this._parseArithmeticTerm();if(0===e.nodeType)return e;let t=this._peekToken(),n=this._peekOperatorType();for(;0===n||33===n;){this._getNextToken();const i=this._parseArithmeticTerm();if(0===i.nodeType)return i;e=p.BinaryOperationNode.create(e,i,t,n),t=this._peekToken(),n=this._peekOperatorType()}return e}_parseArithmeticTerm(){let e=this._parseArithmeticFactor();if(0===e.nodeType)return e;let t=this._peekToken(),n=this._peekOperatorType();for(;26===n||22===n||10===n||24===n||13===n;){this._getNextToken();const i=this._parseArithmeticFactor();e=p.BinaryOperationNode.create(e,i,t,n),t=this._peekToken(),n=this._peekOperatorType()}return e}_parseArithmeticFactor(){const e=this._peekToken(),t=this._peekOperatorType();if(0===t||33===t||5===t){this._getNextToken();const n=this._parseArithmeticFactor();return p.UnaryOperationNode.create(e,n,t)}const n=this._parseAtomExpression();if(0===n.nodeType)return n;const i=this._peekToken();if(this._consumeTokenIfOperator(29)){const e=this._parseArithmeticFactor();return p.BinaryOperationNode.create(n,e,i,29)}return n}_isTypingAnnotation(e,t){if(39===e.nodeType){if(e.value===t)return!0}else if(36===e.nodeType&&39===e.leftExpression.nodeType&&("typing"===e.leftExpression.value||"t"===e.leftExpression.value)&&e.memberName.value===t)return!0;return!1}_parseAtomExpression(){let e;4!==this._peekKeywordType()||this._isParsingTypeAnnotation||(e=this._getKeywordToken(4),this._getLanguageVersion()<a.PythonVersion.V35&&this._addError(l.Localizer.Diagnostic.awaitIllegal(),e));let t=this._parseAtom();if(0===t.nodeType)return t;for(;;){const e=this._peekToken();if(this._consumeTokenIfType(13)){const e=this._isParsingTypeAnnotation;this._isParsingTypeAnnotation=!1;const n=this._parseArgList(),i=p.CallNode.create(t);i.arguments=n,n.length>0&&(n.forEach(e=>{e.parent=i}),p.extendRange(i,n[n.length-1]));const r=this._peekToken();let o=!1;if(this._consumeTokenIfType(14)?(p.extendRange(i,r),o=!0):(this._addError(l.Localizer.Diagnostic.expectedCloseParen(),this._peekToken()),this._consumeTokensUntilType([2]),p.extendRange(i,this._peekToken())),this._isParsingTypeAnnotation=e,this._isParsingTypeAnnotation){const e=new s.DiagnosticAddendum;39===t.nodeType&&"type"===t.value&&(e.addMessage(l.Localizer.DiagnosticAddendum.useTypeInstead()),this._addError(l.Localizer.Diagnostic.typeCallNotAllowed()+e.getString(),i))}if(t=i,!o)break}else if(this._consumeTokenIfType(15)){const n=this._isTypingAnnotation(t,"Literal"),i=this._isParsingIndexTrailer,s=this._isParsingTypeAnnotation;n&&(this._isParsingTypeAnnotation=!1),this._isParsingIndexTrailer=!0;const r=this._parseSubscriptList();this._isParsingTypeAnnotation=s,this._isParsingIndexTrailer=i;const o=this._peekToken(),a=p.IndexItemsNode.create(e,o,r),c=p.IndexNode.create(t,a);if(p.extendRange(c,c),!this._consumeTokenIfType(16))return this._handleExpressionParseError(6,l.Localizer.Diagnostic.expectedCloseBracket(),c);t=c}else{if(!this._consumeTokenIfType(20))break;{const e=this._getTokenIfIdentifier();if(!e)return this._handleExpressionParseError(7,l.Localizer.Diagnostic.expectedMemberName(),t);t=p.MemberAccessNode.create(t,p.NameNode.create(e))}}}return e?p.AwaitNode.create(e,t):t}_parseSubscriptList(){const e=this._parseExpressionListGeneric(()=>this._parseSubscript(),()=>10!==this._peekTokenType()&&this._isNextTokenNeverExpression());return e.parseError?[e.parseError]:0===e.list.length?[this._handleExpressionParseError(3,l.Localizer.Diagnostic.expectedSliceIndex())]:e.list}_parseSubscript(){const e=this._peekToken(),t=[void 0,void 0,void 0];let n=0,i=!1;for(;;){const e=this._peekTokenType();if(16===e||12===e)break;if(10!==e&&(t[n]=this._parseTestExpression(!1)),n++,n>=3||!this._consumeTokenIfType(10))break;i=!0}if(!i)return t[0];const s=p.SliceNode.create(e);s.startValue=t[0],s.startValue&&(s.startValue.parent=s),s.endValue=t[1],s.endValue&&(s.endValue.parent=s),s.stepValue=t[2],s.stepValue&&(s.stepValue.parent=s);const r=t[2]||t[1]||t[0];return r&&p.extendRange(s,r),s}_parseArgList(){const e=[];let t=!1;for(;;){const n=this._peekTokenType();if(14===n||2===n||1===n)break;const i=this._parseArgument();if(i.name?t=!0:t&&0===i.argumentCategory&&this._addError(l.Localizer.Diagnostic.positionArgAfterNamedArg(),i),e.push(i),!this._consumeTokenIfType(12))break}return e}_parseArgument(){const e=this._peekToken();let t=0;this._consumeTokenIfOperator(26)?t=1:this._consumeTokenIfOperator(29)&&(t=2);let n,i=this._parseTestExpression(!0);if(0===t)if(this._consumeTokenIfOperator(2)){const e=i;i=this._parseTestExpression(!1),39===e.nodeType?n=e.token:this._addError(l.Localizer.Diagnostic.expectedParamName(),e)}else{const e=this._tryParseListComprehension(i);e&&(i=e)}const s=p.ArgumentNode.create(e,i,t);return n&&(s.name=p.NameNode.create(n),s.name.parent=s),s}_parseAtom(){const e=this._peekToken();if(19===e.type)return p.EllipsisNode.create(this._getNextToken());if(6===e.type)return p.NumberNode.create(this._getNextToken());if(7===e.type)return p.NameNode.create(this._getNextToken());if(5===e.type)return this._parseStringList();if(22===e.type){this._getNextToken(),this._addError(l.Localizer.Diagnostic.backticksIllegal(),e);const t=this._parseTestListAsExpression(2,l.Localizer.Diagnostic.expectedExpr());return this._consumeTokenIfType(22),t}if(13===e.type){const e=this._parseTupleAtom();if(this._isParsingTypeAnnotation&&!this._isParsingIndexTrailer){const t=new s.DiagnosticAddendum;t.addMessage(l.Localizer.DiagnosticAddendum.useTupleInstead()),this._addError(l.Localizer.Diagnostic.tupleInAnnotation()+t.getString(),e)}return e}if(15===e.type){const e=this._parseListAtom();if(this._isParsingTypeAnnotation&&!this._isParsingIndexTrailer){const t=new s.DiagnosticAddendum;t.addMessage(l.Localizer.DiagnosticAddendum.useListInstead()),this._addError(l.Localizer.Diagnostic.listInAnnotation()+t.getString(),e)}return e}if(17===e.type){const e=this._parseDictionaryOrSetAtom();if(this._isParsingTypeAnnotation){const t=new s.DiagnosticAddendum;t.addMessage(l.Localizer.DiagnosticAddendum.useDictInstead()),this._addError(l.Localizer.Diagnostic.dictInAnnotation()+t.getString(),e)}return e}if(8===e.type){const t=e;if(14===t.keywordType||31===t.keywordType||8===t.keywordType||24===t.keywordType)return p.ConstantNode.create(this._getNextToken());const n=this._getTokenIfIdentifier();if(n)return p.NameNode.create(n)}return this._handleExpressionParseError(2,l.Localizer.Diagnostic.expectedExpr())}_handleExpressionParseError(e,t,n){this._addError(t,this._peekToken());const i=p.ErrorNode.create(this._peekToken(),e,n);return this._consumeTokensUntilType([2]),i}_parseLambdaExpression(e=!0){const t=this._getKeywordToken(23),n=this._parseVarArgsList(10,!1);let i;this._consumeTokenIfType(10)||this._addError(l.Localizer.Diagnostic.expectedColon(),this._peekToken()),i=e?this._parseTestExpression(!1):this._tryParseLambdaExpression(!1)||this._parseOrTest();const s=p.LambdaNode.create(t,i);return s.parameters=n,n.forEach(e=>{e.parent=s}),s}_tryParseLambdaExpression(e=!0){if(23===this._peekKeywordType())return this._parseLambdaExpression(e)}_parseTupleAtom(){const e=this._getNextToken();i.assert(13===e.type);const t=this._tryParseYieldExpression();if(t)return 14!==this._peekTokenType()?this._handleExpressionParseError(8,l.Localizer.Diagnostic.expectedCloseParen()):(p.extendRange(t,this._getNextToken()),t);const n=this._parseTestListWithComprehension(),s=this._makeExpressionOrTuple(n,!0);return 14!==this._peekTokenType()?this._handleExpressionParseError(8,l.Localizer.Diagnostic.expectedCloseParen()):(p.extendRange(s,this._getNextToken()),s)}_parseListAtom(){const e=this._getNextToken();i.assert(15===e.type);const t=this._parseTestListWithComprehension(),n=this._peekToken();if(!this._consumeTokenIfType(16))return this._handleExpressionParseError(9,l.Localizer.Diagnostic.expectedCloseBracket());const s=p.ListNode.create(e);return p.extendRange(s,n),t.list.length>0&&(t.list.forEach(e=>{e.parent=s}),p.extendRange(s,t.list[t.list.length-1])),s.entries=t.list,s}_parseTestListWithComprehension(){let e=!1;return this._parseExpressionListGeneric(()=>{let t=this._parseTestOrStarExpression(!0);const n=this._tryParseListComprehension(t);return n&&(t=n,e=!0),t},()=>this._isNextTokenNeverExpression(),()=>e)}_parseDictionaryOrSetAtom(){const e=this._getNextToken();i.assert(17===e.type);const t=[],n=[];let s=!1,r=!1,o=!1,a=!0;for(;18!==this._peekTokenType();){let e,c,u;if(this._consumeTokenIfOperator(29)?e=this._parseExpression(!1):(c=this._parseTestOrStarExpression(!0),this._consumeTokenIfType(10)&&(u=this._parseTestExpression(!1))),c&&u)if(57===c.nodeType&&this._addError(l.Localizer.Diagnostic.unpackInDict(),c),r)this._addError(l.Localizer.Diagnostic.keyValueInSet(),u);else{const e=p.DictionaryKeyEntryNode.create(c,u);let n=e;const i=this._tryParseListComprehension(e);i&&(n=i,o=!0,a||this._addError(l.Localizer.Diagnostic.comprehensionInDict(),n)),t.push(n),s=!0}else if(e)if(r)this._addError(l.Localizer.Diagnostic.unpackInSet(),e);else{const n=p.DictionaryExpandEntryNode.create(e);let i=n;const r=this._tryParseListComprehension(n);r&&(i=r,o=!0,a||this._addError(l.Localizer.Diagnostic.comprehensionInDict(),e)),t.push(i),s=!0}else if(i.assert(void 0!==c),c)if(s)this._addError(l.Localizer.Diagnostic.dictKeyValuePairs(),c);else{const e=this._tryParseListComprehension(c);e&&(c=e,o=!0,a||this._addError(l.Localizer.Diagnostic.comprehensionInSet(),c)),n.push(c),r=!0}if(o)break;if(!this._consumeTokenIfType(12))break;a=!1}let c=this._peekToken();if(this._consumeTokenIfType(18)||(this._addError(l.Localizer.Diagnostic.expectedCloseBrace(),this._peekToken()),c=void 0),r){const t=p.SetNode.create(e);return c&&p.extendRange(t,c),n.length>0&&p.extendRange(t,n[n.length-1]),n.forEach(e=>{e.parent=t}),t.entries=n,t}const u=p.DictionaryNode.create(e);return c&&p.extendRange(u,c),t.length>0&&(t.forEach(e=>{e.parent=u}),p.extendRange(u,t[t.length-1])),u.entries=t,u}_parseExpressionListGeneric(e,t=(()=>this._isNextTokenNeverExpression()),n=(()=>!1)){let i=!1;const s=[];let r;for(;!t();){const t=e();if(0===t.nodeType){r=t;break}if(s.push(t),n())break;if(!this._consumeTokenIfType(12)){i=!1;break}i=!0}return{trailingComma:i,list:s,parseError:r}}_parseExpressionStatement(){let e,t=this._parseTestOrStarListAsExpression(!1,2,l.Localizer.Diagnostic.expectedExpr());if(0===t.nodeType)return t;if(this._consumeTokenIfType(10)){if(e=this._parseTypeAnnotation(),t=p.TypeAnnotationNode.create(t,e),!this._parseOptions.isStubFile&&this._getLanguageVersion()<a.PythonVersion.V36&&this._addError(l.Localizer.Diagnostic.varAnnotationIllegal(),e),!this._consumeTokenIfOperator(2))return t;const n=this._isTypingAnnotation(e,"TypeAlias"),i=this._isParsingTypeAnnotation;n&&(this._isParsingTypeAnnotation=!0);const s=this._parseTestExpression(!1);return this._isParsingTypeAnnotation=i,p.AssignmentNode.create(t,s)}if(this._consumeTokenIfOperator(2))return this._parseChainAssignments(t);if(!e&&d.Tokenizer.isOperatorAssignment(this._peekOperatorType())){const e=this._getNextToken(),n=this._tryParseYieldExpression()||this._parseTestListAsExpression(2,l.Localizer.Diagnostic.expectedBinaryRightHandExpr()),i=Object.assign({},t);return i.id=p.getNextNodeId(),p.AugmentedAssignmentNode.create(t,n,e.operatorType,i)}return t}_parseChainAssignments(e){let t;if(t=this._tryParseYieldExpression(),t||(t=this._parseTestOrStarListAsExpression(!1,2,l.Localizer.Diagnostic.expectedAssignRightHandExpr())),0===t.nodeType)return p.AssignmentNode.create(e,t);if(this._consumeTokenIfOperator(2)&&(t=this._parseChainAssignments(t),0===t.nodeType))return t;const n=p.AssignmentNode.create(e,t),i=this._getTypeAnnotationComment();return i&&(n.typeAnnotationComment=i,n.typeAnnotationComment.parent=n,p.extendRange(n,n.typeAnnotationComment)),n}_parseTypeAnnotation(e=!0){const t=this._isParsingTypeAnnotation;let n,i;for(this._isParsingTypeAnnotation=!0;;){const t=this._parseAtomExpression();if(n=void 0===n||void 0===i?t:p.BinaryOperationNode.create(n,t,i,6),!e)break;if(i=this._peekToken(),6!==this._peekOperatorType())break;this._getNextToken()}return this._isParsingTypeAnnotation=t,n}_reportStringTokenErrors(e,t){65536&e.flags&&this._addError(l.Localizer.Diagnostic.stringUnterminated(),e),t.nonAsciiInBytes&&this._addError(l.Localizer.Diagnostic.stringNonAsciiBytes(),e),64&e.flags&&(this._getLanguageVersion()<a.PythonVersion.V36&&this._addError(l.Localizer.Diagnostic.formatStringIllegal(),e),32&e.flags&&this._addError(l.Localizer.Diagnostic.formatStringBytes(),e),16&e.flags&&this._addError(l.Localizer.Diagnostic.formatStringUnicode(),e))}_makeStringNode(e){const t=u.getUnescapedString(e);return this._reportStringTokenErrors(e,t),p.StringNode.create(e,t.value,t.unescapeErrors.length>0)}_getTypeAnnotationComment(){if(0===this._tokenIndex)return;const e=this._tokenizerOutput.tokens.getItemAt(this._tokenIndex-1),t=this._tokenizerOutput.tokens.getItemAt(this._tokenIndex);if(e.start+e.length===t.start)return;const n=this._fileContents.substring(e.start+e.length,t.start).match(/^(\s*#\s*type:\s*)([^\r\n]*)/);if(!n)return;const i=n[2];if(i.trim().match(/^ignore(\s|$)/))return;const s=e.start+e.length+n[1].length,r=h.StringToken.create(s,i.length,0,i,0,void 0),o=this._makeStringNode(r),a=p.StringListNode.create([o]),c=(new m).parseTextExpression(this._fileContents,s,i.length,this._parseOptions,!0);return c.diagnostics.forEach(e=>{this._addError(e.message,a)}),c.parseTree?c.parseTree:void 0}_parseFormatStringSegment(e,t,n,s){i.assert(t.isExpression);const r=(new m).parseTextExpression(this._fileContents,e.start+e.prefixLength+e.quoteMarkLength+t.offset+n,s,this._parseOptions,!1);return r.diagnostics.forEach(t=>{const n=(t.range?o.convertPositionToOffset(t.range.start,r.lines):e.start)||e.start,i={start:n,length:((t.range?(o.convertPositionToOffset(t.range.end,r.lines)||0)+1:e.start+e.length)||e.start+e.length)-n};this._addError(t.message,i)}),r.parseTree}_parseFormatString(e){const t=u.getUnescapedString(e);this._reportStringTokenErrors(e,t);const n=[];for(const i of t.formatStringSegments)if(i.isExpression){const t=this._getFormatStringExpressionLength(i.value),s=this._parseFormatStringSegment(e,i,0,t);s&&n.push(s);const r=i.value.substr(t);let o=0,a=0;for(let s=0;s<r.length;s++)if(123===r.charCodeAt(s))0===o&&(a=s+1),o++;else if(125===r.charCodeAt(s)&&o>0&&(o--,0===o)){const r=this._parseFormatStringSegment(e,i,t+a,s-a);r&&n.push(r)}}return p.FormatStringNode.create(e,t.value,t.unescapeErrors.length>0,n)}_getFormatStringExpressionLength(e){let t=0,n=!1,i=!1,s=0,r=0,o=0,c=!1;for(;t<e.length;){const a=e[t],l=n||i||s>0||r>0||o>0,p=n||i;if("="===a)c=!0;else{if(":"===a){if(!l)break}else if("!"===a){if(!l&&(t===e.length-1||"="!==e[t+1]))break}else"'"===a?i||(n=!n):'"'===a?n||(i=!i):"("===a?p||r++:")"===a?!p&&r>0&&r--:"{"===a?p||s++:"}"===a?!p&&s>0&&s--:"["===a?p||o++:"]"===a&&!p&&o>0&&o--;c=!1}t++}return this._parseOptions.pythonVersion>=a.PythonVersion.V38&&c&&t--,t}_parseStringList(){const e=[];for(;5===this._peekTokenType();){const t=this._getNextToken();64&t.flags?e.push(this._parseFormatString(t)):e.push(this._makeStringNode(t))}const t=p.StringListNode.create(e);if(this._isParsingTypeAnnotation)if(t.strings.length>1)this._addError(l.Localizer.Diagnostic.annotationSpansStrings(),t);else if(4&t.strings[0].token.flags)this._addError(l.Localizer.Diagnostic.annotationTripleQuote(),t);else if(64&t.strings[0].token.flags)this._addError(l.Localizer.Diagnostic.annotationFormatString(),t);else{const e=t.strings[0].token,n=u.getUnescapedString(t.strings[0].token).value,i=e.start,s=e.prefixLength+e.quoteMarkLength;if(n.length!==e.length-s-e.quoteMarkLength)this._addError(l.Localizer.Diagnostic.annotationStringEscape(),t);else{const e=(new m).parseTextExpression(this._fileContents,i+s,n.length,this._parseOptions,!0);e.diagnostics.forEach(e=>{this._addError(e.message,t)}),e.parseTree&&(t.typeAnnotation=e.parseTree,t.typeAnnotation.parent=t)}}return t}_reportConditionalErrorForStarTupleElement(e){if(53===e.nodeType&&!(e.enclosedInParens||this._parseOptions.pythonVersion>=a.PythonVersion.V38))for(const t of e.expressions)if(57===t.nodeType)return void this._addError(l.Localizer.Diagnostic.unpackTuplesIllegal(),t)}_isNextTokenNeverExpression(){switch(this._peekToken().type){case 8:switch(this._peekKeywordType()){case 16:case 21:case 19:return!0}break;case 9:switch(this._peekOperatorType()){case 1:case 34:case 27:case 11:case 25:case 4:case 7:case 9:case 18:case 32:case 30:case 14:case 2:return!0}break;case 3:case 4:case 2:case 1:case 11:case 14:case 16:case 18:case 12:case 10:return!0}return!1}_disallowAssignmentExpression(e){const t=this._assignmentExpressionsAllowed;this._assignmentExpressionsAllowed=!1,e(),this._assignmentExpressionsAllowed=t}_getNextToken(){const e=this._tokenizerOutput.tokens.getItemAt(this._tokenIndex);return this._atEof()||this._tokenIndex++,e}_atEof(){return this._tokenIndex>=this._tokenizerOutput.tokens.count-1}_peekToken(e=0){return this._tokenIndex+e<0&&this._tokenizerOutput.tokens.getItemAt(0),this._tokenIndex+e>=this._tokenizerOutput.tokens.count?this._tokenizerOutput.tokens.getItemAt(this._tokenizerOutput.tokens.count-1):this._tokenizerOutput.tokens.getItemAt(this._tokenIndex+e)}_peekTokenType(){return this._peekToken().type}_peekKeywordType(){const e=this._peekToken();if(8===e.type)return e.keywordType}_peekOperatorType(){const e=this._peekToken();if(9===e.type)return e.operatorType}_getTokenIfIdentifier(e=[]){const t=this._peekToken();if(7===t.type)return this._getNextToken();if(0===t.type)return this._getNextToken(),this._addError(l.Localizer.Diagnostic.invalidIdentifierChar(),t),h.IdentifierToken.create(t.start,t.length,"",t.comments);if(8===t.type){const n=this._peekKeywordType();if(!e.find(e=>e===n)){const e=this._fileContents.substr(t.start,t.length);return this._getNextToken(),h.IdentifierToken.create(t.start,t.length,e,t.comments)}}}_consumeTokensUntilType(e){for(;;){const t=this._peekToken();if(e.some(e=>e===t.type))return!0;if(1===t.type)return!1;this._getNextToken()}}_consumeTokenIfType(e){return this._peekTokenType()===e&&(this._getNextToken(),!0)}_consumeTokenIfKeyword(e){return this._peekKeywordType()===e&&(this._getNextToken(),!0)}_consumeTokenIfOperator(e){return this._peekOperatorType()===e&&(this._getNextToken(),!0)}_getKeywordToken(e){const t=this._getNextToken();return i.assert(8===t.type),i.assert(t.keywordType===e),t}_getLanguageVersion(){return this._parseOptions.pythonVersion}_addError(e,t){i.assert(void 0!==t),this._diagSink.addError(e,o.convertOffsetsToRange(t.start,t.start+t.length,this._tokenizerOutput.lines))}}t.Parser=m},function(e,t,n){"use strict";function i(e){return e>=48&&e<=57||(e>=97&&e<=122||e>=65&&e<=65)}function s(e){return e>=48&&e<=55}function r(e){return e>=48&&e<=57||(e>=97&&e<=102||e>=65&&e<=70)}function o(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-97+10:e>=65&&e<=70?e-65+10:0}Object.defineProperty(t,"__esModule",{value:!0}),t.getUnescapedString=void 0,t.getUnescapedString=function(e){const t=e.escapedValue,n=0!=(8&e.flags),a=0!=(32&e.flags),c=0!=(64&e.flags);let l=0,p={offset:0,length:0,value:"",isExpression:!1},u=0;const d={value:"",unescapeErrors:[],nonAsciiInBytes:!1,formatStringSegments:[]},h=()=>{n||d.unescapeErrors.push({offset:u-1,length:2,errorType:0})},f=(e=0)=>u+e>=t.length?3:t.charCodeAt(u+e),m=e=>{let t=!1,n=0,i="";for(let i=0;i<e;i++){const e=f(1+i);if(!r(e)){t=!0;break}n=16*n+o(e)}return t?(h(),i="\\"+String.fromCharCode(f()),u++):(i=String.fromCharCode(n),u+=1+e),i},g=e=>{const t=String.fromCharCode(e);d.value+=t,p.value+=t};for(;;){let e=f();if(3===e)return c&&(p.isExpression&&d.unescapeErrors.push({offset:p.offset,length:u-p.offset,errorType:3}),u!==p.offset&&(p.length=u-p.offset,d.formatStringSegments.push(p))),d;if(92===e){c&&p.isExpression&&d.unescapeErrors.push({offset:u,length:1,errorType:1}),u++,e=f();let t="";if(13===e||10===e)13===e&&10===f(1)&&(n&&(t+=String.fromCharCode(e)),u++,e=f()),n&&(t="\\"+t+String.fromCharCode(e)),u++;else if(n)t="\\"+String.fromCharCode(e),u++;else switch(e){case 92:case 39:case 34:t=String.fromCharCode(e),u++;break;case 97:t="",u++;break;case 98:t="\b",u++;break;case 102:t="\f",u++;break;case 110:t="\n",u++;break;case 114:t="\r",u++;break;case 116:t="\t",u++;break;case 118:t="\v",u++;break;case 120:t=m(2);break;case 78:{let n=!1,s=1;if(123!==f(s))n=!0;else for(s++;;){const e=f(s);if(125===e)break;if(!i(e)&&32!==e){n=!0;break}s++}n?(h(),t="\\"+String.fromCharCode(e),u++):(t="-",u+=1+s);break}case 117:t=m(4);break;case 85:t=m(8);break;default:if(s(e)){let n=e-48;u++,e=f(),s(e)&&(n=8*n+e-48,u++,e=f(),s(e)&&(n=8*n+e-48,u++)),t=String.fromCharCode(n)}else t="\\"+String.fromCharCode(e),h(),u++}d.value+=t,p.value+=t}else if(10===e||13===e)13===e&&10===f(1)&&(g(e),u++,e=f()),g(e),u++;else if(c&&123===e)p.isExpression||123!==f(1)?(0===l?(p.length=u-p.offset,p.length>0&&d.formatStringSegments.push(p),u++,p={offset:u,length:0,value:"",isExpression:!0}):(g(e),u++),l++):(g(e),u+=2);else if(c&&125===e)p.isExpression||125!==f(1)?0===l?(d.unescapeErrors.push({offset:u,length:1,errorType:2}),u++):(l--,0===l?(p.length=u-p.offset,d.formatStringSegments.push(p),u++,p={offset:u,length:0,value:"",isExpression:!1}):(g(e),u++)):(g(e),u+=2);else if(!p.isExpression||39!==e&&34!==e)a&&e>=128&&(d.nonAsciiInBytes=!0),g(e),u++;else{const t=e;g(e);const n=f(1)===t&&f(2)===t;for(n&&(u+=2,g(e),g(e),d.value+=String.fromCharCode(e),d.value+=String.fromCharCode(e));;){u++;let e=f();if(3===e)break;if(92!==e){if(10===e||13===e)break;if(e===t){if(!n){u++,g(e);break}if(f(1)===t&&f(2)===t){u+=3,g(e),g(e),g(e);break}}g(e)}else g(e),u++,e=f(),g(e)}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBinary=t.isOctal=t.isHex=t.isDecimal=t.isNumber=t.isLineBreak=t.isWhiteSpace=t.isIdentifierChar=t.isIdentifierStartChar=void 0;const i=n(142);var s;!function(e){e[e.NotIdentifierChar=0]="NotIdentifierChar",e[e.StartIdentifierChar=1]="StartIdentifierChar",e[e.IdentifierChar=2]="IdentifierChar"}(s||(s={}));const r=new Array(256),o={};let a=!1;function c(e){return e>=48&&e<=57||95===e}t.isIdentifierStartChar=function(e){return e<256?r[e]===s.StartIdentifierChar:(a||(d(!1),a=!0),o[e]===s.StartIdentifierChar)},t.isIdentifierChar=function(e){return e<256?r[e]===s.StartIdentifierChar||r[e]===s.IdentifierChar:o[e]===s.StartIdentifierChar||o[e]===s.IdentifierChar},t.isWhiteSpace=function(e){return 32===e||9===e||12===e},t.isLineBreak=function(e){return 13===e||10===e},t.isNumber=function(e){return e>=48&&e<=57||95===e},t.isDecimal=c,t.isHex=function(e){return c(e)||e>=97&&e<=102||e>=65&&e<=70||95===e},t.isOctal=function(e){return e>=48&&e<=55||95===e},t.isBinary=function(e){return 48===e||49===e||95===e};const l=[[95,6277,6278,8472,8494,12443,12444],i.unicodeLu,i.unicodeLl,i.unicodeLt,i.unicodeLo,i.unicodeLm,i.unicodeNl],p=[[183,903,4969,4970,4971,4972,4973,4974,4975,4976,4977,6618],i.unicodeMn,i.unicodeMc,i.unicodeNd,i.unicodePc];function u(e,t,n){for(let i=0;i<e.length;i++){const s=e[i];let a,c;Array.isArray(s)?(a=s[0],c=s[1]):a=c=s;for(let e=a;e<=c;e++)e<256?r[e]=t:o[e]=t;if(n&&a>=256)break}}function d(e){r.fill(s.NotIdentifierChar),p.forEach(t=>{u(t,s.IdentifierChar,e)}),l.forEach(t=>{u(t,s.StartIdentifierChar,e)})}d(!0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentifierToken=t.OperatorToken=t.NumberToken=t.StringToken=t.KeywordToken=t.NewLineToken=t.DedentToken=t.IndentToken=t.Token=t.Comment=void 0,function(e){e.create=function(e,t,n){return{start:e,length:t,value:n}}}(t.Comment||(t.Comment={})),function(e){e.create=function(e,t,n,i){return{start:t,length:n,type:e,comments:i}}}(t.Token||(t.Token={})),function(e){e.create=function(e,t,n,i,s){return{start:e,length:t,type:3,isIndentAmbiguous:i,comments:s,indentAmount:n}}}(t.IndentToken||(t.IndentToken={})),function(e){e.create=function(e,t,n,i,s){return{start:e,length:t,type:4,comments:s,indentAmount:n,matchesIndent:i}}}(t.DedentToken||(t.DedentToken={})),function(e){e.create=function(e,t,n,i){return{start:e,length:t,type:2,comments:i,newLineType:n}}}(t.NewLineToken||(t.NewLineToken={})),function(e){e.create=function(e,t,n,i){return{start:e,length:t,type:8,comments:i,keywordType:n}}}(t.KeywordToken||(t.KeywordToken={})),function(e){e.create=function(e,t,n,i,s,r){return{start:e,length:t,type:5,flags:n,escapedValue:i,prefixLength:s,quoteMarkLength:4&n?3:1,comments:r}}}(t.StringToken||(t.StringToken={})),function(e){e.create=function(e,t,n,i,s,r){return{start:e,length:t,type:6,isInteger:i,isImaginary:s,value:n,comments:r}}}(t.NumberToken||(t.NumberToken={})),function(e){e.create=function(e,t,n,i){return{start:e,length:t,type:9,operatorType:n,comments:i}}}(t.OperatorToken||(t.OperatorToken={})),function(e){e.create=function(e,t,n,i){return{start:e,length:t,type:7,value:n,comments:i}}}(t.IdentifierToken||(t.IdentifierToken={}))},function(e,t,n){"use strict";function i(e,t){if(56===e.nodeType){if(37===e.operator||36===e.operator){const n=s(e.expression,t);if(void 0!==n)return!n}}else if(7===e.nodeType){if(37===e.operator||36===e.operator){const n=i(e.leftExpression,t),s=i(e.rightExpression,t);if(void 0===n||void 0===s)return;return 37===e.operator?n||s:n&&s}if(a(e.leftExpression)&&53===e.rightExpression.nodeType){const n=function(e){let t;if(e.expressions.length>=2){if(41===e.expressions[0].nodeType&&!e.expressions[0].isImaginary&&41===e.expressions[1].nodeType&&!e.expressions[1].isImaginary){const n=e.expressions[0],i=e.expressions[1];t=256*n.value+i.value}}else if(1===e.expressions.length){const n=e.expressions[0];t=256*n.value}return t}(e.rightExpression);return r(e.operator,t.pythonVersion,n)}if(24===e.leftExpression.nodeType&&a(e.leftExpression.baseExpression)&&1===e.leftExpression.items.items.length&&41===e.leftExpression.items.items[0].nodeType&&!e.leftExpression.items.items[0].isImaginary&&0===e.leftExpression.items.items[0].value&&41===e.rightExpression.nodeType)return r(e.operator,Math.floor(t.pythonVersion/256),e.rightExpression.value);if(function(e){if(36===e.nodeType&&39===e.leftExpression.nodeType&&"sys"===e.leftExpression.value&&"platform"===e.memberName.value)return!0;return!1}(e.leftExpression)&&49===e.rightExpression.nodeType){const n=e.rightExpression.strings.map(e=>e.value).join(""),i=function(e){if("Darwin"===e.pythonPlatform)return"darwin";if("Windows"===e.pythonPlatform)return"win32";if("Linux"===e.pythonPlatform)return"linux";return}(t);return o(e.operator,i||"",n)}if(function(e){if(36===e.nodeType&&39===e.leftExpression.nodeType&&"os"===e.leftExpression.value&&"name"===e.memberName.value)return!0;return!1}(e.leftExpression)&&49===e.rightExpression.nodeType){const n=e.rightExpression.strings.map(e=>e.value).join(""),i=function(e){if("Darwin"===e.pythonPlatform)return"posix";if("Windows"===e.pythonPlatform)return"nt";if("Linux"===e.pythonPlatform)return"posix";return}(t);if(void 0!==i)return o(e.operator,i,n)}}else if(11===e.nodeType){if(31===e.constType)return!0;if(14===e.constType)return!1}else if(39===e.nodeType){if("TYPE_CHECKING"===e.value)return!0}else if(36===e.nodeType&&"TYPE_CHECKING"===e.memberName.value&&39===e.leftExpression.nodeType&&"typing"===e.leftExpression.value)return!0}function s(e,t){return(11!==e.nodeType||24!==e.constType)&&i(e,t)}function r(e,t,n){if(void 0!==t&&void 0!==n){if(20===e)return t<n;if(21===e)return t<=n;if(15===e)return t>n;if(16===e)return t>=n;if(12===e)return t===n;if(28===e)return t!==n}}function o(e,t,n){if(void 0!==t&&void 0!==n){if(12===e)return t===n;if(28===e)return t!==n}}function a(e){return 36===e.nodeType&&39===e.leftExpression.nodeType&&"sys"===e.leftExpression.value&&"version_info"===e.memberName.value}Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateStaticBoolLikeExpression=t.evaluateStaticBoolExpression=void 0,t.evaluateStaticBoolExpression=i,t.evaluateStaticBoolLikeExpression=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFromRealFileSystem=void 0;const i=n(153),s=n(12),r=n(33),o=n(16),a=n(39);t.createFromRealFileSystem=function(e,t){return new p(null!=t?t:new u(null!=e?e:new o.NullConsole))};const c="darwin"===process.platform,l="linux"===process.platform;class p{constructor(e){this._fileWatcherProvider=e}existsSync(e){return s.existsSync(e)}mkdirSync(e,t){s.mkdirSync(e,t)}chdir(e){process.chdir(e)}readdirSync(e){return s.readdirSync(e)}readdirEntriesSync(e){return s.readdirSync(e,{withFileTypes:!0})}readFileSync(e,t=null){return s.readFileSync(e,{encoding:t})}writeFileSync(e,t,n){s.writeFileSync(e,t,{encoding:n})}statSync(e){return s.statSync(e)}unlinkSync(e){s.unlinkSync(e)}realpathSync(e){return s.realpathSync(e)}getModulePath(){return global.__rootDirectory}createFileSystemWatcher(e,t){return this._fileWatcherProvider.createFileWatcher(e,t)}createReadStream(e){return s.createReadStream(e)}createWriteStream(e){return s.createWriteStream(e)}copyFileSync(e,t){s.copyFileSync(e,t)}readFile(e){const t=a.createDeferred();return s.readFile(e,(e,n)=>{e?t.reject(e):t.resolve(n)}),t.promise}readFileText(e,t){const n=a.createDeferred();return s.readFile(e,{encoding:t},(e,t)=>{e?n.reject(e):n.resolve(t)}),n.promise}tmpdir(){return r.tmpdir()}}class u{constructor(e){this._console=e}createFileWatcher(e,t){return this._createFileSystemWatcher(e).on("all",t)}createReadStream(e){return s.createReadStream(e)}createWriteStream(e){return s.createWriteStream(e)}_createFileSystemWatcher(e){const t={ignoreInitial:!0,ignorePermissionErrors:!0,followSymlinks:!0,interval:1e3,binaryInterval:1e3,disableGlobbing:!0};c&&(t.usePolling=!1);const n=[];(c||l)&&e.some(e=>""===e||"/"===e)&&(n.push("/dev/**"),l&&n.push("/proc/**","/sys/**")),t.ignored=n;const s=i.watch(e,t);return s.on("error",e=>{this._console.error("Error returned from file system watcher.")}),c&&!s.options.useFsEvents&&this._console.info("Watcher could not use native fsevents library. File system watcher disabled."),s}readFile(e){const t=a.createDeferred();return s.readFile(e,(e,n)=>{e?t.reject(e):t.resolve(n)}),t.promise}readFileText(e,t){const n=a.createDeferred();return s.readFile(e,{encoding:t},(e,t)=>{e?n.reject(e):n.resolve(t)}),n.promise}}},function(e,t){
/*!
 * normalize-path <https://github.com/jonschlinkert/normalize-path>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */
e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("expected path to be a string");if("\\"===e||"/"===e)return"/";var n=e.length;if(n<=1)return e;var i="";if(n>4&&"\\"===e[3]){var s=e[2];"?"!==s&&"."!==s||"\\\\"!==e.slice(0,2)||(e=e.slice(2),i="//")}var r=e.split(/[/\\]+/);return!1!==t&&""===r[r.length-1]&&r.pop(),i+r.join("/")}},function(e,t,n){
/*!
 * is-glob <https://github.com/jonschlinkert/is-glob>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var i=n(167),s={"{":"}","(":")","[":"]"},r=/\\(.)|(^!|\*|[\].+)]\?|\[[^\\\]]+\]|\{[^\\}]+\}|\(\?[:!=][^\\)]+\)|\([^|]+\|[^\\)]+\))/,o=/\\(.)|(^!|[*?{}()[\]]|\(\?)/;e.exports=function(e,t){if("string"!=typeof e||""===e)return!1;if(i(e))return!0;var n,a=r;for(t&&!1===t.strict&&(a=o);n=a.exec(e);){if(n[2])return!0;var c=n.index+n[0].length,l=n[1],p=l?s[l]:null;if(l&&p){var u=e.indexOf(p,c);-1!==u&&(c=u+1)}e=e.slice(c)}return!1}},function(e,t,n){"use strict";
/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const i=n(18),s=n(170),r=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),o=e=>"number"==typeof e||"string"==typeof e&&""!==e,a=e=>Number.isInteger(+e),c=e=>{let t=""+e,n=-1;if("-"===t[0]&&(t=t.slice(1)),"0"===t)return!1;for(;"0"===t[++n];);return n>0},l=(e,t,n)=>{if(t>0){let n="-"===e[0]?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0")}return!1===n?String(e):e},p=(e,t)=>{let n="-"===e[0]?"-":"";for(n&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return n?"-"+e:e},u=(e,t,n,i)=>{if(n)return s(e,t,{wrap:!1,...i});let r=String.fromCharCode(e);return e===t?r:`[${r}-${String.fromCharCode(t)}]`},d=(e,t,n)=>{if(Array.isArray(e)){let t=!0===n.wrap,i=n.capture?"":"?:";return t?`(${i}${e.join("|")})`:e.join("|")}return s(e,t,n)},h=(...e)=>new RangeError("Invalid range arguments: "+i.inspect(...e)),f=(e,t,n)=>{if(!0===n.strictRanges)throw h([e,t]);return[]},m=(e,t,n=1,i={})=>{let s=Number(e),r=Number(t);if(!Number.isInteger(s)||!Number.isInteger(r)){if(!0===i.strictRanges)throw h([e,t]);return[]}0===s&&(s=0),0===r&&(r=0);let o=s>r,a=String(e),f=String(t),m=String(n);n=Math.max(Math.abs(n),1);let g=c(a)||c(f)||c(m),y=g?Math.max(a.length,f.length,m.length):0,_=!1===g&&!1===((e,t,n)=>"string"==typeof e||"string"==typeof t||!0===n.stringify)(e,t,i),T=i.transform||(e=>t=>!0===e?Number(t):String(t))(_);if(i.toRegex&&1===n)return u(p(e,y),p(t,y),!0,i);let v={negatives:[],positives:[]},b=[],C=0;for(;o?s>=r:s<=r;)!0===i.toRegex&&n>1?v[(S=s)<0?"negatives":"positives"].push(Math.abs(S)):b.push(l(T(s,C),y,_)),s=o?s-n:s+n,C++;var S;return!0===i.toRegex?n>1?((e,t)=>{e.negatives.sort((e,t)=>e<t?-1:e>t?1:0),e.positives.sort((e,t)=>e<t?-1:e>t?1:0);let n,i=t.capture?"":"?:",s="",r="";return e.positives.length&&(s=e.positives.join("|")),e.negatives.length&&(r=`-(${i}${e.negatives.join("|")})`),n=s&&r?`${s}|${r}`:s||r,t.wrap?`(${i}${n})`:n})(v,i):d(b,null,{wrap:!1,...i}):b},g=(e,t,n,i={})=>{if(null==t&&o(e))return[e];if(!o(e)||!o(t))return f(e,t,i);if("function"==typeof n)return g(e,t,1,{transform:n});if(r(n))return g(e,t,0,n);let s={...i};return!0===s.capture&&(s.wrap=!0),n=n||s.step||1,a(n)?a(e)&&a(t)?m(e,t,n,s):((e,t,n=1,i={})=>{if(!a(e)&&e.length>1||!a(t)&&t.length>1)return f(e,t,i);let s=i.transform||(e=>String.fromCharCode(e)),r=(""+e).charCodeAt(0),o=(""+t).charCodeAt(0),c=r>o,l=Math.min(r,o),p=Math.max(r,o);if(i.toRegex&&1===n)return u(l,p,!1,i);let h=[],m=0;for(;c?r>=o:r<=o;)h.push(s(r,m)),r=c?r-n:r+n,m++;return!0===i.toRegex?d(h,null,{wrap:!1,options:i}):h})(e,t,Math.max(Math.abs(n),1),s):null==n||r(n)?g(e,t,1,n):((e,t)=>{if(!0===t.strictRanges)throw new TypeError(`Expected step "${e}" to be a number`);return[]})(n,s)};e.exports=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyzerService=t.configFileNames=void 0;const i=n(0),s=n(32),r=n(16),o=n(4),a=n(24),c=n(185),l=n(43),p=n(61);t.configFileNames=["pyrightconfig.json","mspythonconfig.json"];class u{constructor(e,t,n,i,o,a,l,p){this._typeStubTargetIsSingleFile=!1,this._requireTrackedFileUpdate=!0,this._lastUserInteractionTime=Date.now(),this._disposed=!1,this._instanceName=e,this._console=n||new r.StandardConsole,this._executionRootPath="",this._extension=a,this._importResolverFactory=i||u.createImportResolver,this._maxAnalysisTimeInForeground=p,o=null!=o?o:new s.ConfigOptions(process.cwd());const d=this._importResolverFactory(t,o);this._backgroundAnalysisProgram=new c.BackgroundAnalysisProgram(this._console,o,d,this._extension,l,this._maxAnalysisTimeInForeground)}clone(e,t){return new u(e,this._fs,this._console,this._importResolverFactory,this._backgroundAnalysisProgram.configOptions,this._extension,t,this._maxAnalysisTimeInForeground)}dispose(){this._disposed=!0,this._removeSourceFileWatchers(),this._removeConfigFileWatcher(),this._removeLibraryFileWatcher(),this._clearReloadConfigTimer(),this._clearReanalysisTimer(),this._clearLibraryReanalysisTimer()}static createImportResolver(e,t){return new l.ImportResolver(e,t)}setCompletionCallback(e){this._onCompletionCallback=e,this._backgroundAnalysisProgram.setCompletionCallback(e)}setOptions(e,t=!0){this._commandLineOptions=e;const n=this._getConfigOptions(e);n.pythonPath&&(n.ensureDefaultPythonVersion(n.pythonPath,this._console),n.ensureDefaultPythonPlatform(this._console)),this._backgroundAnalysisProgram.setConfigOptions(n),this._executionRootPath=o.normalizePath(o.combinePaths(e.executionRoot,n.projectRoot)),this._applyConfigOptions(t)}setFileOpened(e,t,n){this._backgroundAnalysisProgram.setFileOpened(e,t,n),this._scheduleReanalysis(!1)}updateOpenFileContents(e,t,n){this._backgroundAnalysisProgram.updateOpenFileContents(e,t,n),this._scheduleReanalysis(!1)}setFileClosed(e){this._backgroundAnalysisProgram.setFileClosed(e),this._scheduleReanalysis(!1)}getParseResult(e){var t;return null===(t=this._program.getBoundSourceFile(e))||void 0===t?void 0:t.getParseResults()}getAutoImports(e,t,n,i,s,r){return this._program.getAutoImports(e,t,n,i,s,r)}getDefinitionForPosition(e,t,n){return this._program.getDefinitionsForPosition(e,t,n)}getReferencesForPosition(e,t,n,i){return this._program.getReferencesForPosition(e,t,n,i)}addSymbolsForDocument(e,t,n){this._program.addSymbolsForDocument(e,t,n)}addSymbolsForWorkspace(e,t,n){this._program.addSymbolsForWorkspace(e,t,n)}getHoverForPosition(e,t,n){return this._program.getHoverForPosition(e,t,n)}getDocumentHighlight(e,t,n){return this._program.getDocumentHighlight(e,t,n)}getSignatureHelpForPosition(e,t,n){return this._program.getSignatureHelpForPosition(e,t,n)}getCompletionsForPosition(e,t,n,i){return this._program.getCompletionsForPosition(e,t,n,i)}resolveCompletionItem(e,t,n){this._program.resolveCompletionItem(e,t,n)}performQuickAction(e,t,n,i){return this._program.performQuickAction(e,t,n,i)}renameSymbolAtPosition(e,t,n,i){return this._program.renameSymbolAtPosition(e,t,n,i)}getCallForPosition(e,t,n){return this._program.getCallForPosition(e,t,n)}getIncomingCallsForPosition(e,t,n){return this._program.getIncomingCallsForPosition(e,t,n)}getOutgoingCallsForPosition(e,t,n){return this._program.getOutgoingCallsForPosition(e,t,n)}printStats(){this._console.info(""),this._console.info("Analysis stats");const e=this._program.getFileCount();this._console.info("Total files analyzed: "+e.toString())}printDependencies(e){this._program.printDependencies(this._executionRootPath,e)}getDiagnosticsForRange(e,t,n){return this._backgroundAnalysisProgram.getDiagnosticsForRange(e,t,n)}getConfigOptions(){return this._configOptions}getImportResolver(){return this._backgroundAnalysisProgram.importResolver}recordUserInteractionTime(){this._lastUserInteractionTime=Date.now(),this._analyzeTimer&&this._scheduleReanalysis(!1)}get test_program(){return this._program}test_getConfigOptions(e){return this._getConfigOptions(e)}test_getFileNamesFromFileSpecs(){return this._getFileNamesFromFileSpecs()}_getConfigOptions(e){var t;let n,i=e.executionRoot;e.fileSpecs&&e.fileSpecs.length>0?e.configFilePath&&this._console.info("Project cannot be mixed with source files on a command line."):e.configFilePath?(n=o.combinePaths(e.executionRoot,o.normalizePath(e.configFilePath)),this._fs.existsSync(n)?n.toLowerCase().endsWith(".json")?i=o.getDirectoryPath(n):(i=n,n=this._findConfigFile(n),n||this._console.info(`Configuration file not found at ${i}.`)):(this._console.info(`Configuration file not found at ${n}.`),n=e.executionRoot)):i&&(n=this._findConfigFileHereOrUp(i),n?i=o.getDirectoryPath(n):(this._console.info("No configuration file found."),n=void 0));const r=new s.ConfigOptions(i,this._typeCheckingMode),a=["**/node_modules","**/__pycache__",".git"];if(e.fileSpecs.length>0?e.fileSpecs.forEach(e=>{r.include.push(o.getFileSpec(i,e))}):n||e.executionRoot&&(r.include.push(o.getFileSpec(e.executionRoot,".")),a.forEach(t=>{r.exclude.push(o.getFileSpec(e.executionRoot,t))})),this._configFilePath=n,n){this._console.info("Loading configuration file at "+n);const t=this._parseConfigFile(n);if(t){r.initializeFromJson(t,this._typeCheckingMode,this._console,e.diagnosticSeverityOverrides,e.pythonPath);const i=o.getDirectoryPath(n);0===r.include.length&&(this._console.info("No include entries specified; assuming "+n),r.include.push(o.getFileSpec(i,"."))),0===r.exclude.length&&(a.forEach(e=>{this._console.info("Auto-excluding "+e),r.exclude.push(o.getFileSpec(i,e))}),void 0===r.autoExcludeVenv&&(r.autoExcludeVenv=!0)),0===r.executionEnvironments.length&&r.addExecEnvironmentForExtraPaths(this._fs,e.autoSearchPaths||!1,e.extraPaths||[])}this._updateConfigFileWatcher(),this._updateLibraryFileWatcher()}else r.addExecEnvironmentForExtraPaths(this._fs,e.autoSearchPaths||!1,e.extraPaths||[]),r.autoExcludeVenv=!0,r.applyDiagnosticOverrides(e.diagnosticSeverityOverrides);const c=t=>{const n=e.fromVsCodeExtension?"the VS Code settings":"a command-line option";this._console.info(`The ${t} has been specified in both the config file and ${n}. The value in the config file (${r.venvPath}) will take precedence`)};if(e.venvPath&&(r.venvPath?c("venvPath"):r.venvPath=e.venvPath),e.pythonPath&&(this._console.info(`Setting pythonPath for service "${this._instanceName}": "${e.pythonPath}"`),r.pythonPath=e.pythonPath),e.typeshedPath&&(r.typeshedPath?c("typeshedPath"):r.typeshedPath=e.typeshedPath),r.verboseOutput=!!e.verboseOutput,r.checkOnlyOpenFiles=!!e.checkOnlyOpenFiles,r.useLibraryCodeForTypes=!!e.useLibraryCodeForTypes,e.stubPath?r.stubPath?c("stubPath"):r.stubPath=e.stubPath:r.stubPath||(r.stubPath=o.normalizePath(o.combinePaths(r.projectRoot,"typings"))),r.venvPath){if(this._fs.existsSync(r.venvPath)&&o.isDirectory(this._fs,r.venvPath)||this._console.info(`venvPath ${r.venvPath} is not a valid directory.`),r.defaultVenv=null!==(t=r.defaultVenv)&&void 0!==t?t:this._configOptions.defaultVenv,r.defaultVenv){const e=o.combinePaths(r.venvPath,r.defaultVenv);if(this._fs.existsSync(e)&&o.isDirectory(this._fs,e)){const e=[];void 0===p.findPythonSearchPaths(this._fs,r,void 0,e)&&(this._console.info(`site-packages directory cannot be located for venvPath ${r.venvPath} and venv ${r.defaultVenv}.`),r.verboseOutput&&e.forEach(e=>{this._console.info("  "+e)}))}else this._console.info(`venv ${r.defaultVenv} subdirectory not found in venv path ${r.venvPath}.`)}}else{const e=[],t=p.getPythonPathFromPythonInterpreter(this._fs,r.pythonPath,e).paths;0===t.length?r.verboseOutput&&this._console.info("No search paths found for configured python interpreter."):r.verboseOutput&&(this._console.info("Search paths found for configured python interpreter:"),t.forEach(e=>{this._console.info("  "+e)})),r.verboseOutput&&e.length>0&&(this._console.info("When attempting to get search paths from python interpreter:"),e.forEach(e=>{this._console.info("  "+e)}))}return(r.defaultVenv||r.executionEnvironments.find(e=>!!e.venv))&&(r.venvPath||this._console.info("venvPath not specified, so venv settings will be ignored.")),r.typeshedPath&&(this._fs.existsSync(r.typeshedPath)&&o.isDirectory(this._fs,r.typeshedPath)||this._console.info(`typeshedPath ${r.typeshedPath} is not a valid directory.`)),r.stubPath&&(this._fs.existsSync(r.stubPath)&&o.isDirectory(this._fs,r.stubPath)||this._console.info(`stubPath ${r.stubPath} is not a valid directory.`)),r}writeTypeStub(e){const t=this._getTypeStubFolder();this._program.writeTypeStub(this._typeStubTargetPath,this._typeStubTargetIsSingleFile,t,e)}writeTypeStubInBackground(e){const t=this._getTypeStubFolder();return this._backgroundAnalysisProgram.writeTypeStub(this._typeStubTargetPath,this._typeStubTargetIsSingleFile,t,e)}invalidateAndForceReanalysis(){this._backgroundAnalysisProgram.invalidateAndForceReanalysis()}restart(){this._applyConfigOptions(),this._backgroundAnalysisProgram.restart()}get _fs(){return this._backgroundAnalysisProgram.importResolver.fileSystem}get _program(){return this._backgroundAnalysisProgram.program}get _configOptions(){return this._backgroundAnalysisProgram.configOptions}get _watchForSourceChanges(){var e;return!!(null===(e=this._commandLineOptions)||void 0===e?void 0:e.watchForSourceChanges)}get _watchForLibraryChanges(){var e;return!!(null===(e=this._commandLineOptions)||void 0===e?void 0:e.watchForLibraryChanges)}get _typeCheckingMode(){var e;return null===(e=this._commandLineOptions)||void 0===e?void 0:e.typeCheckingMode}get _verboseOutput(){var e;return!!(null===(e=this._commandLineOptions)||void 0===e?void 0:e.verboseOutput)}get _typeStubTargetImportName(){var e;return null===(e=this._commandLineOptions)||void 0===e?void 0:e.typeStubTargetImportName}_getTypeStubFolder(){const e=this._configOptions.stubPath;if(!this._typeStubTargetPath||!this._typeStubTargetImportName){const e=`Import '${this._typeStubTargetImportName}' could not be resolved`;throw this._console.error(e),new Error(e)}if(!e){const e="No typings path was specified";throw this._console.info(e),new Error(e)}const t=this._typeStubTargetImportName.split(".");if(0===t[0].length){const e=`Import '${this._typeStubTargetImportName}' could not be resolved`;throw this._console.error(e),new Error(e)}try{this._fs.existsSync(e)||this._fs.mkdirSync(e)}catch(t){const n=`Could not create typings directory '${e}'`;throw this._console.error(n),new Error(n)}const n=o.combinePaths(e,t[0]);try{this._fs.existsSync(n)||this._fs.mkdirSync(n)}catch(e){const t=`Could not create typings subdirectory '${n}'`;throw this._console.error(t),new Error(t)}return n}_findConfigFileHereOrUp(e){return o.forEachAncestorDirectory(e,e=>this._findConfigFile(e))}_findConfigFile(e){for(const n of t.configFileNames){const t=o.combinePaths(e,n);if(this._fs.existsSync(t))return t}}_parseConfigFile(e){let t="",n=0;for(;;){try{t=this._fs.readFileSync(e,"utf8")}catch(t){return this._console.info(`Config file "${e}" could not be read.`),void this._reportConfigParseError()}let i,s=!1;try{return i=JSON.parse(t),i}catch(e){s=!0}if(!s)break;if(n++>=5)return this._console.info(`Config file "${e}" could not be parsed. Verify that JSON is correct.`),void this._reportConfigParseError()}}_getFileNamesFromFileSpecs(){const e=new Map;return a.timingStats.findFilesTime.timeOperation(()=>{const t=this._matchFiles(this._configOptions.include,this._configOptions.exclude);for(const n of t)e.set(n,n)}),[...e.values()]}_updateTrackedFileList(e){if(this._typeStubTargetImportName){const e=this._configOptions.findExecEnvironment(this._executionRootPath),t={leadingDots:0,nameParts:this._typeStubTargetImportName.split("."),importedSymbols:[]},n=this._backgroundAnalysisProgram.importResolver.resolveImport("",e,t);if(n.isImportFound){const e=[],t=n.resolvedPaths[n.resolvedPaths.length-1];let i=o.getDirectoryPath(t);for(let e=n.resolvedPaths.length-2;e>=0;e--){const t=n.resolvedPaths[e];i=t?o.getDirectoryPath(t):o.getDirectoryPath(i)}o.isDirectory(this._fs,i)&&(this._typeStubTargetPath=i),t?(e.push(t),this._typeStubTargetIsSingleFile=1===n.resolvedPaths.length&&"__init__"!==o.stripFileExtension(o.getFileName(n.resolvedPaths[0]))):this._typeStubTargetIsSingleFile=!1,n.implicitImports.forEach(t=>{e.push(t.path)}),this._backgroundAnalysisProgram.setAllowedThirdPartyImports([this._typeStubTargetImportName]),this._backgroundAnalysisProgram.setTrackedFiles(e)}else this._console.info(`Import '${this._typeStubTargetImportName}' not found`)}else{let t=[];this._console.info("Searching for source files"),t=this._getFileNamesFromFileSpecs(),this._backgroundAnalysisProgram.setTrackedFiles(t),this._backgroundAnalysisProgram.markAllFilesDirty(e),0===t.length?this._console.info("No source files found."):this._console.info(`Found ${t.length} source `+(1===t.length?"file":"files"))}this._requireTrackedFileUpdate=!1}_isInExcludePath(e,t){return!!t.find(t=>t.regExp.test(e))}_matchFiles(e,t){const n=/\.pyi?$/,i=[["bin","activate"],["Scripts","activate"],["pyvenv.cfg"]],s=[],r=(e,a)=>{if(this._configOptions.autoExcludeVenv&&i.some(t=>this._fs.existsSync(o.combinePaths(e,...t))))return void this._console.info("Auto-excluding "+e);const{files:c,directories:l}=o.getFileSystemEntries(this._fs,e);for(const i of c){const r=o.combinePaths(e,i);a.test(r)&&!this._isInExcludePath(r,t)&&n.test(r)&&s.push(r)}for(const n of l){const i=o.combinePaths(e,n);a.test(i)&&(this._isInExcludePath(i,t)||r(i,a))}};return e.forEach(e=>{let i=!1;if(!this._isInExcludePath(e.wildcardRoot,t))try{const t=this._fs.statSync(e.wildcardRoot);t.isFile()?n.test(e.wildcardRoot)&&(s.push(e.wildcardRoot),i=!0):t.isDirectory()&&(r(e.wildcardRoot,e.regExp),i=!0)}catch(e){}i||this._console.info(`File or directory "${e.wildcardRoot}" does not exist.`)}),s}_removeSourceFileWatchers(){this._sourceFileWatcher&&(this._sourceFileWatcher.close(),this._sourceFileWatcher=void 0)}_updateSourceFileWatchers(){if(this._removeSourceFileWatchers(),this._backgroundAnalysisProgram.invalidateCache(),this._watchForSourceChanges&&this._configOptions.include.length>0){const e=this._configOptions.include.map(e=>o.combinePaths(this._executionRootPath,e.wildcardRoot));try{this._verboseOutput&&this._console.info("Adding fs watcher for directories:\n "+e.join("\n")),this._sourceFileWatcher=this._fs.createFileSystemWatcher(e,(e,t)=>{if(this._verboseOutput&&this._console.info(`Received fs event '${e}' for path '${t}'`),"change"===e&&this._fs.existsSync(t))this._backgroundAnalysisProgram.markFilesDirty([t],!1),this._scheduleReanalysis(!1);else{const e=o.getFileName(t).split(".");let n=!1;4===e.length&&e[3]===e[1]&&32===e[2].length&&(n=!0),n||(this.invalidateAndForceReanalysis(),this._scheduleReanalysis(!0))}})}catch(t){this._console.info("Exception caught when installing fs watcher for:\n "+e.join("\n"))}}}_removeLibraryFileWatcher(){this._libraryFileWatcher&&(this._libraryFileWatcher.close(),this._libraryFileWatcher=void 0)}_updateLibraryFileWatcher(){if(this._removeLibraryFileWatcher(),this._backgroundAnalysisProgram.invalidateCache(),!this._watchForLibraryChanges)return;const e=p.findPythonSearchPaths(this._fs,this._backgroundAnalysisProgram.configOptions,void 0,[],!0,this._executionRootPath);if(e&&e.length>0)try{this._verboseOutput&&this._console.info("Adding fs watcher for library directories:\n "+e.join("\n")),this._libraryFileWatcher=this._fs.createFileSystemWatcher(e,(e,t)=>{this._verboseOutput&&this._console.info(`Received fs event '${e}' for path '${t}'`),this._scheduleLibraryAnalysis()})}catch(t){this._console.info("Exception caught when installing fs watcher for:\n "+e.join("\n"))}}_clearLibraryReanalysisTimer(){this._libraryReanalysisTimer&&(clearTimeout(this._libraryReanalysisTimer),this._libraryReanalysisTimer=void 0)}_scheduleLibraryAnalysis(){this._disposed||(this._clearLibraryReanalysisTimer(),this._libraryReanalysisTimer=setTimeout(()=>{this._clearLibraryReanalysisTimer(),this.invalidateAndForceReanalysis(),this._scheduleReanalysis(!1)},100))}_removeConfigFileWatcher(){this._configFileWatcher&&(this._configFileWatcher.close(),this._configFileWatcher=void 0)}_updateConfigFileWatcher(){this._removeConfigFileWatcher(),this._configFilePath&&(this._configFileWatcher=this._fs.createFileSystemWatcher([this._configFilePath],e=>{this._verboseOutput&&this._console.info(`Received fs event '${e}' for config file`),this._scheduleReloadConfigFile()}))}_clearReloadConfigTimer(){this._reloadConfigTimer&&(clearTimeout(this._reloadConfigTimer),this._reloadConfigTimer=void 0)}_scheduleReloadConfigFile(){this._clearReloadConfigTimer(),this._reloadConfigTimer=setTimeout(()=>{this._clearReloadConfigTimer(),this._reloadConfigFile()},100)}_reloadConfigFile(){if(this._configFilePath){this._updateConfigFileWatcher(),this._console.info("Reloading configuration file at "+this._configFilePath);const e=this._getConfigOptions(this._commandLineOptions);this._backgroundAnalysisProgram.setConfigOptions(e),this._applyConfigOptions()}}_applyConfigOptions(e=!0){const t=this._importResolverFactory(this._fs,this._backgroundAnalysisProgram.configOptions);this._backgroundAnalysisProgram.setImportResolver(t),this._updateLibraryFileWatcher(),this._updateSourceFileWatchers(),this._updateTrackedFileList(!0),e&&this._scheduleReanalysis(!1)}_clearReanalysisTimer(){this._analyzeTimer&&(clearTimeout(this._analyzeTimer),this._analyzeTimer=void 0)}_scheduleReanalysis(e){var t;if(this._disposed)return;e&&(this._requireTrackedFileUpdate=!0),null===(t=this._backgroundAnalysisCancellationSource)||void 0===t||t.cancel(),this._clearReanalysisTimer();const n=Date.now()-this._lastUserInteractionTime,s=Math.max(250-n,20);this._analyzeTimer=setTimeout(()=>{this._analyzeTimer=void 0,this._requireTrackedFileUpdate&&this._updateTrackedFileList(!1),this._backgroundAnalysisCancellationSource=i.createAnalysisCancellationTokenSource(),this._backgroundAnalysisProgram.startAnalysis(this._backgroundAnalysisCancellationSource.token)&&this._scheduleReanalysis(!1)},s)}_reportConfigParseError(){this._onCompletionCallback&&this._onCompletionCallback({diagnostics:[],filesInProgram:0,filesRequiringAnalysis:0,checkingOnlyOpenFiles:!0,fatalErrorOccurred:!1,configParseErrorOccurred:!0,elapsedTime:0})}}t.AnalyzerService=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyzerServiceExecutor=void 0;const i=n(84),s=n(4);function r(e,t){return t.replace(/\$\{(.*?)\}/g,(t,n)=>"workspaceFolder"===n.trim()?e:t)}t.AnalyzerServiceExecutor=class{static runWithOptions(e,t,n,o,a=!0){const c=function(e,t,n,o,a){const c=new i.CommandLineOptions(t,!0);c.checkOnlyOpenFiles=n.openFilesOnly,c.useLibraryCodeForTypes=n.useLibraryCodeForTypes,c.typeCheckingMode=n.typeCheckingMode,o?(c.watchForSourceChanges=n.watchForSourceChanges,c.watchForLibraryChanges=n.watchForLibraryChanges):(c.watchForSourceChanges=!1,c.watchForLibraryChanges=!1);n.venvPath&&(c.venvPath=s.combinePaths(t||e,s.normalizePath(r(e,n.venvPath))));n.pythonPath&&"python"!==n.pythonPath.trim()&&(c.pythonPath=s.combinePaths(t||e,s.normalizePath(r(e,n.pythonPath))));n.typeshedPath&&(c.typeshedPath=s.normalizePath(r(e,n.typeshedPath)));n.stubPath&&(c.stubPath=s.normalizePath(r(e,n.stubPath)));a&&(c.typeStubTargetImportName=a);return c.autoSearchPaths=n.autoSearchPaths,c.extraPaths=n.extraPaths,c.diagnosticSeverityOverrides=n.diagnosticSeverityOverrides,c}(e,t.rootPath,n,a,o);t.serviceInstance.setOptions(c,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandLineOptions=t.getDiagnosticSeverityOverrides=void 0,t.getDiagnosticSeverityOverrides=function(){return["error","warning","information","none"]};t.CommandLineOptions=class{constructor(e,t){this.fileSpecs=[],this.executionRoot=e,this.fromVsCodeExtension=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertWorkspaceEdits=t.convertTextEdits=void 0;const i=n(4);t.convertTextEdits=function(e,t){if(!t)return{};const n=[];return t.forEach(e=>{n.push({range:e.range,newText:e.replacementText})}),{changes:{[e]:n}}},t.convertWorkspaceEdits=function(e){const t={changes:{}};return e.forEach(e=>{const n=i.convertPathToUri(e.filePath);t.changes[n]=t.changes[n]||[],t.changes[n].push({range:e.range,newText:e.replacementText})}),t}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n(18),r=n(27),o=n(87),a=n(183),c=n(0),l=n(16),p=n(23),u=n(4),d=n(188),h=n(193),f={openFilesTimeInMs:50,noOpenFilesTimeInMs:200};class m extends d.LanguageServerBase{constructor(){const e=n(194).version||"";super({productName:"Pyright",rootDirectory:u.getDirectoryPath(__dirname),version:e,maxAnalysisTimeInForeground:f,progressReporterFactory:g}),this._controller=new a.CommandController(this)}getSettings(e){return i(this,void 0,void 0,(function*(){const t={watchForSourceChanges:!0,openFilesOnly:!0,useLibraryCodeForTypes:!1,disableLanguageServices:!1,disableOrganizeImports:!1,typeCheckingMode:"basic",diagnosticSeverityOverrides:{},logLevel:l.LogLevel.Info};try{const n=yield this.getConfiguration(e,"python");n&&(t.pythonPath=u.normalizeSlashes(n.pythonPath),t.venvPath=u.normalizeSlashes(n.venvPath));const i=yield this.getConfiguration(e,"python.analysis");if(i){const e=i.typeshedPaths;e&&s.isArray(e)&&e.length>0&&(t.typeshedPath=u.normalizeSlashes(e[0]));const n=i.stubPath;n&&p.isString(n)&&(t.stubPath=u.normalizeSlashes(n));const r=i.diagnosticSeverityOverrides;if(r)for(const[e,n]of Object.entries(r)){const i=this.getDiagnosticRuleName(e),s=this.getSeverityOverrides(n);i&&s&&(t.diagnosticSeverityOverrides[i]=s)}void 0!==i.diagnosticMode?t.openFilesOnly=this.isOpenFilesOnly(i.diagnosticMode):void 0!==i.openFilesOnly&&(t.openFilesOnly=!!i.openFilesOnly),t.logLevel=this.convertLogLevel(i.logLevel),t.autoSearchPaths=!!i.autoSearchPaths;const o=i.extraPaths;o&&s.isArray(o)&&o.length>0&&(t.extraPaths=o.map(e=>u.normalizeSlashes(e))),void 0!==i.typeCheckingMode&&(t.typeCheckingMode=i.typeCheckingMode)}else t.autoSearchPaths=!0;const r=yield this.getConfiguration(e,"pyright");r&&(void 0!==r.openFilesOnly&&(t.openFilesOnly=!!r.openFilesOnly),t.useLibraryCodeForTypes=!!r.useLibraryCodeForTypes,t.disableLanguageServices=!!r.disableLanguageServices,t.disableOrganizeImports=!!r.disableOrganizeImports,void 0!==r.typeCheckingMode&&(t.typeCheckingMode=r.typeCheckingMode))}catch(e){this.console.error("Error reading settings: "+e)}return t}))}createBackgroundAnalysis(){if(!p.isDebugMode()&&c.getCancellationFolderName())return new o.BackgroundAnalysis(this.console)}executeCommand(e,t){return this._controller.execute(e,t)}isLongRunningCommand(e){return this._controller.isLongRunningCommand(e)}executeCodeAction(e,t){return i(this,void 0,void 0,(function*(){this.recordUserInteractionTime();const n=u.convertUriToPath(e.textDocument.uri),i=yield this.getWorkspaceForFile(n);return h.CodeActionProvider.getCodeActionsForPosition(i,n,e.range,t)}))}}function g(e){return{isEnabled:e=>!0,begin(){e.sendNotification("pyright/beginProgress")},report(t){e.sendNotification("pyright/reportProgress",t)},end(){e.sendNotification("pyright/endProgress")}}}r.isMainThread&&new m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundAnalysis=void 0;const i=n(27),s=n(88),r=n(0);class o extends s.BackgroundAnalysisBase{constructor(e){super();const t={rootDirectory:global.__rootDirectory,cancellationFolderName:r.getCancellationFolderName()},n=new i.Worker(__filename,{workerData:t});this.setup(n,e)}}t.BackgroundAnalysis=o;class a extends s.BackgroundAnalysisRunnerBase{constructor(){super()}}if(!i.isMainThread){(new a).start()}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundAnalysisRunnerBase=t.BackgroundAnalysisBase=void 0;const s=n(27),r=n(51),o=n(43),a=n(63),c=n(0),l=n(32),p=n(16),u=n(2),d=n(26),h=n(78);t.BackgroundAnalysisBase=class{constructor(){this._onAnalysisCompletion=r.nullCallback}setup(e,t){this._worker=e,this._console=t,e.on("message",e=>{switch(e.requestType){case"log":{const t=e.data;this.log(t.level,t.message);break}case"analysisResult":this._onAnalysisCompletion(g(e.data));break;default:u.fail(e.requestType+" is not expected")}}),e.on("error",e=>{this.log(p.LogLevel.Error,"Error occurred on background thread: "+JSON.stringify(e))})}setCompletionCallback(e){this._onAnalysisCompletion=null!=e?e:r.nullCallback}setConfigOptions(e){this._enqueueRequest({requestType:"setConfigOptions",data:e})}setTrackedFiles(e){this._enqueueRequest({requestType:"setTrackedFiles",data:e})}setAllowedThirdPartyImports(e){this._enqueueRequest({requestType:"setAllowedThirdPartyImports",data:e})}setFileOpened(e,t,n){this._enqueueRequest({requestType:"setFileOpened",data:{filePath:e,version:t,contents:n}})}setFileClosed(e){this._enqueueRequest({requestType:"setFileClosed",data:e})}markAllFilesDirty(e){this._enqueueRequest({requestType:"markAllFilesDirty",data:e})}markFilesDirty(e,t){this._enqueueRequest({requestType:"markFilesDirty",data:{filePaths:e,evenIfContentsAreSame:t}})}startAnalysis(e){const{port1:t,port2:n}=new s.MessageChannel;t.on("message",i=>{switch(i.requestType){case"analysisResult":this._onAnalysisCompletion(g(i.data));break;case"analysisDone":c.disposeCancellationToken(e),n.close(),t.close();break;default:u.fail(i.requestType+" is not expected")}});const i=c.getCancellationTokenId(e);this._enqueueRequest({requestType:"analyze",data:i,port:n})}getDiagnosticsForRange(e,t,n){return i(this,void 0,void 0,(function*(){c.throwIfCancellationRequested(n);const{port1:i,port2:r}=new s.MessageChannel,o=m(i),a=c.getCancellationTokenId(n);this._enqueueRequest({requestType:"getDiagnosticsForRange",data:{filePath:e,range:t,cancellationId:a},port:r});const l=yield o;return r.close(),i.close(),y(l)}))}writeTypeStub(e,t,n,r){return i(this,void 0,void 0,(function*(){c.throwIfCancellationRequested(r);const{port1:i,port2:o}=new s.MessageChannel,a=m(i),l=c.getCancellationTokenId(r);this._enqueueRequest({requestType:"writeTypeStub",data:{targetImportPath:e,targetIsSingleFile:t,stubPath:n,cancellationId:l},port:o}),yield a,o.close(),i.close()}))}invalidateAndForceReanalysis(){this._enqueueRequest({requestType:"invalidateAndForceReanalysis",data:null})}restart(){this._enqueueRequest({requestType:"restart",data:null})}_enqueueRequest(e){this._worker.postMessage(e,e.port?[e.port]:void 0)}log(e,t){p.log(this._console,e,t)}};function f(e,t){try{const n=e();t.postMessage({kind:"ok",data:n})}catch(e){if(c.OperationCanceledException.is(e))return void t.postMessage({kind:"cancelled",data:e.message});t.postMessage({kind:"failed",data:`Exception: ${e.message} in ${e.stack}`})}}function m(e){return new Promise((t,n)=>{e.on("message",e=>{switch(e.kind){case"ok":t(e.data);break;case"cancelled":n(new c.OperationCanceledException);break;case"failed":n(e.data);break;default:u.fail("unknown kind "+e.kind)}})})}function g(e){return e.diagnostics=e.diagnostics.map(e=>({filePath:e.filePath,diagnostics:y(e.diagnostics)})),e}function y(e){return e.map(e=>{const t=new d.Diagnostic(e.category,e.message,e.range);if(e._actions)for(const n of e._actions)t.addAction(n);if(e._rule&&t.setRule(e._rule),e._relatedInfo)for(const n of e._relatedInfo)t.addRelatedInfo(n.message,n.filePath,n.range);return t})}t.BackgroundAnalysisRunnerBase=class{constructor(e){this._extension=e;const t=s.workerData;c.setCancellationFolderName(t.cancellationFolderName),global.__rootDirectory=t.rootDirectory,this.log(p.LogLevel.Info,"Background analysis root directory: "+t.rootDirectory),this._fs=h.createFromRealFileSystem(this._getConsole()),this._configOptions=new l.ConfigOptions(t.rootDirectory),this._importResolver=this.createImportResolver(this._fs,this._configOptions),this._program=new a.Program(this._importResolver,this._configOptions,this._getConsole(),this._extension)}start(){this.log(p.LogLevel.Info,"Background analysis started"),null===s.parentPort||void 0===s.parentPort||s.parentPort.on("message",e=>{switch(e.requestType){case"analyze":{const t=e.port,n=c.getCancellationTokenFromId(e.data),i=this._program.getFilesToAnalyzeCount();this._onAnalysisCompletion(t,{diagnostics:[],filesInProgram:this._program.getFileCount(),filesRequiringAnalysis:i,checkingOnlyOpenFiles:this._program.isCheckingOnlyOpenFiles(),fatalErrorOccurred:!1,configParseErrorOccurred:!1,elapsedTime:0});const s={openFilesTimeInMs:50,noOpenFilesTimeInMs:200};let o=!0;for(;o;)o=r.analyzeProgram(this._program,s,this._configOptions,e=>this._onAnalysisCompletion(t,e),this._getConsole(),n);this._analysisDone(t,e.data);break}case"getDiagnosticsForRange":f(()=>{const{filePath:t,range:n,cancellationId:i}=e.data,s=c.getCancellationTokenFromId(i);return c.throwIfCancellationRequested(s),this._program.getDiagnosticsForRange(t,n)},e.port);break;case"writeTypeStub":f(()=>{const{targetImportPath:t,targetIsSingleFile:n,stubPath:i,cancellationId:s}=e.data,o=c.getCancellationTokenFromId(s);r.analyzeProgram(this._program,void 0,this._configOptions,r.nullCallback,this._getConsole(),o),this._program.writeTypeStub(t,n,i,o)},e.port);break;case"setConfigOptions":this._configOptions=function(e){const t=new l.ConfigOptions(e.projectRoot),n=e=>({wildcardRoot:e.wildcardRoot,regExp:new RegExp(e.regExp.source)});return t.pythonPath=e.pythonPath,t.typeshedPath=e.typeshedPath,t.stubPath=e.stubPath,t.autoExcludeVenv=e.autoExcludeVenv,t.verboseOutput=e.verboseOutput,t.checkOnlyOpenFiles=e.checkOnlyOpenFiles,t.useLibraryCodeForTypes=e.useLibraryCodeForTypes,t.internalTestMode=e.internalTestMode,t.venvPath=e.venvPath,t.defaultVenv=e.defaultVenv,t.defaultPythonVersion=e.defaultPythonVersion,t.defaultPythonPlatform=e.defaultPythonPlatform,t.diagnosticRuleSet=e.diagnosticRuleSet,t.executionEnvironments=e.executionEnvironments,t.include=e.include.map(e=>n(e)),t.exclude=e.exclude.map(e=>n(e)),t.ignore=e.ignore.map(e=>n(e)),t.strict=e.strict.map(e=>n(e)),t}(e.data),this._importResolver=this.createImportResolver(this._fs,this._configOptions),this._program.setConfigOptions(this._configOptions),this._program.setImportResolver(this._importResolver);break;case"setTrackedFiles":{const t=this._program.setTrackedFiles(e.data);this._reportDiagnostics(t,this._program.getFilesToAnalyzeCount(),0);break}case"setAllowedThirdPartyImports":this._program.setAllowedThirdPartyImports(e.data);break;case"setFileOpened":{const{filePath:t,version:n,contents:i}=e.data;this._program.setFileOpened(t,n,i);break}case"setFileClosed":{const t=this._program.setFileClosed(e.data);this._reportDiagnostics(t,this._program.getFilesToAnalyzeCount(),0);break}case"markAllFilesDirty":this._program.markAllFilesDirty(e.data);break;case"markFilesDirty":{const{filePaths:t,evenIfContentsAreSame:n}=e.data;this._program.markFilesDirty(t,n);break}case"invalidateAndForceReanalysis":this._importResolver.invalidateCache(),this._program.markAllFilesDirty(!0);break;case"restart":this._importResolver=this.createImportResolver(this._fs,this._configOptions),this._program.setImportResolver(this._importResolver);break;default:u.fail(e.requestType+" is not expected")}}),null===s.parentPort||void 0===s.parentPort||s.parentPort.on("error",e=>u.fail("failed "+e)),null===s.parentPort||void 0===s.parentPort||s.parentPort.on("exit",e=>{0!==e&&u.fail("worker stopped with exit code "+e)})}log(e,t){null===s.parentPort||void 0===s.parentPort||s.parentPort.postMessage({requestType:"log",data:{level:e,message:t}})}createImportResolver(e,t){return new o.ImportResolver(e,t)}_reportDiagnostics(e,t,n){s.parentPort&&this._onAnalysisCompletion(s.parentPort,{diagnostics:e,filesInProgram:this._program.getFileCount(),filesRequiringAnalysis:t,checkingOnlyOpenFiles:this._program.isCheckingOnlyOpenFiles(),fatalErrorOccurred:!1,configParseErrorOccurred:!1,elapsedTime:n})}_onAnalysisCompletion(e,t){e.postMessage({requestType:"analysisResult",data:t})}_analysisDone(e,t){e.postMessage({requestType:"analysisDone",data:t})}_getConsole(){return{log:e=>{this.log(p.LogLevel.Log,e)},info:e=>{this.log(p.LogLevel.Info,e)},warn:e=>{this.log(p.LogLevel.Warn,e)},error:e=>{this.log(p.LogLevel.Error,e)},level:p.LogLevel.Log}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(13),s=n(52),r=n(18),o=Buffer.from("\r","ascii")[0],a=Buffer.from("\n","ascii")[0];class c{constructor(e="utf-8"){this._encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(8192)}get encoding(){return this._encoding}append(e){let t;if(t="string"==typeof e?Buffer.from(e,this._encoding):e,this.buffer.length-this.index>=t.length)this.buffer.set(t,this.index);else{var n=8192*(Math.ceil((this.index+t.length)/8192)+1);0===this.index?(this.buffer=Buffer.allocUnsafe(n),this.buffer.set(t)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],n)}this.index+=t.length}tryReadHeaders(){let e=0;for(;e+3<this.index&&(this.buffer[e]!==o||this.buffer[e+1]!==a||this.buffer[e+2]!==o||this.buffer[e+3]!==a);)e++;if(e+3>=this.index)return;const t=new Map;this.buffer.toString("ascii",0,e).split("\r\n").forEach(e=>{let n=e.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let i=e.substr(0,n),s=e.substr(n+1).trim();t.set(i,s)});let n=e+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,t}tryReadBody(e){if(this.index<e)return;const t=Buffer.alloc(e);this.buffer.copy(t,0,0,e);const n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}class l{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),s.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),s.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),s.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),s.Disposable.create(()=>this.stream.off("data",e))}}class p{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),s.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),s.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),s.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((n,i)=>{const s=e=>{null==e?n():i(e)};"string"==typeof e?this.stream.write(e,t,s):this.stream.write(e,s)})}end(){this.stream.end()}}const u=Object.freeze({messageBuffer:Object.freeze({create:e=>new c(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new r.TextDecoder(t.charset).decode(e)))})}),stream:Object.freeze({asReadableStream:e=>new l(e),asWritableStream:e=>new p(e)}),console:console,timer:Object.freeze({setTimeout:(e,t,...n)=>setTimeout(e,t,...n),clearTimeout(e){clearTimeout(e)},setImmediate:(e,...t)=>setImmediate(e,...t),clearImmediate(e){clearImmediate(e)}})});function d(){return u}!function(e){e.install=function(){i.default.install(u)}}(d||(d={})),t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(13),s=n(28),r=n(29);var o;!function(e){e.is=function(e){let t=e;return t&&s.func(t.listen)&&s.func(t.dispose)&&s.func(t.onError)&&s.func(t.onClose)&&s.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));class a{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error("Reader received error. Reason: "+(s.string(e.message)?e.message:"unknown"))}}t.AbstractMessageReader=a,function(e){e.fromOptions=function(e){var t;let n,s;const r=new Map;let o;const a=new Map;if(void 0===e||"string"==typeof e)n=null!=e?e:"utf-8";else{if(n=null!==(t=e.charset)&&void 0!==t?t:"utf-8",void 0!==e.contentDecoder&&(s=e.contentDecoder,r.set(s.name,s)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)r.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(o=e.contentTypeDecoder,a.set(o.name,o)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)a.set(t.name,t)}return void 0===o&&(o=i.default().applicationJson.decoder,a.set(o.name,o)),{charset:n,contentDecoder:s,contentDecoders:r,contentTypeDecoder:o,contentTypeDecoders:a}}}(o||(o={}));t.ReadableStreamMessageReader=class extends a{constructor(e,t){super(),this.readable=e,this.options=o.fromOptions(t),this.buffer=i.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData(e=>{this.onData(e)});return this.readable.onError(e=>this.fireError(e)),this.readable.onClose(()=>this.fireClose()),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;const t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");const n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();let t;this.clearPartialMessageTimer(),this.nextMessageLength=-1,t=void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e),t.then(e=>{this.options.contentTypeDecoder.decode(e,this.options).then(e=>{this.callback(e)},e=>{this.fireError(e)})},e=>{this.fireError(e)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(i.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=i.default().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(13),s=n(28),r=n(92),o=n(29);var a;!function(e){e.is=function(e){let t=e;return t&&s.func(t.dispose)&&s.func(t.onClose)&&s.func(t.onError)&&s.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));class c{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error("Writer received error. Reason: "+(s.string(e.message)?e.message:"unknown"))}}t.AbstractMessageWriter=c,function(e){e.fromOptions=function(e){var t,n;return void 0===e||"string"==typeof e?{charset:null!=e?e:"utf-8",contentTypeEncoder:i.default().applicationJson.encoder}:{charset:null!==(t=e.charset)&&void 0!==t?t:"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:null!==(n=e.contentTypeEncoder)&&void 0!==n?n:i.default().applicationJson.encoder}}}(a||(a={}));t.WriteableStreamMessageWriter=class extends c{constructor(e,t){super(),this.writable=e,this.options=a.fromOptions(t),this.errorCount=0,this.writeSemaphore=new r.Semaphore(1),this.writable.onError(e=>this.fireError(e)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e).then(t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)},e=>{throw this.fireError(e),e}))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(13);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&i.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then(t=>{this._active--,e.resolve(t),this.runNext()},t=>{this._active--,e.reject(t),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(13),s=n(28),r=n(54),o=n(94),a=n(29),c=n(55);var l,p,u,d,h,f,m,g,y,_,T,v,b;!function(e){e.type=new r.NotificationType("$/cancelRequest")}(l||(l={})),function(e){e.type=new r.NotificationType("$/progress")}(p||(p={}));t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return s.func(e)}}(u||(u={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(d=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){if(!s.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(d=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new r.NotificationType("$/setTraceNotification")}(f=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new r.NotificationType("$/logTraceNotification")}(m=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(g=t.ConnectionErrors||(t.ConnectionErrors={}));class C extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,C.prototype)}}t.ConnectionError=C,function(e){e.is=function(e){const t=e;return t&&s.func(t.cancelUndispatched)}}(y=t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){const t=e;return t&&s.func(t.createCancellationTokenSource)}}(_=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({sendCancellation(e,t){e.sendNotification(l.type,{id:t})},cleanup(e){}}),e.is=function(e){const t=e;return t&&s.func(t.sendCancellation)&&s.func(t.cleanup)}}(T=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={})),function(e){e.Message=Object.freeze({receiver:_.Message,sender:T.Message}),e.is=function(e){const t=e;return t&&_.is(t.receiver)&&T.is(t.sender)}}(v=t.CancellationStrategy||(t.CancellationStrategy={})),function(e){e.is=function(e){const t=e;return t&&(v.is(t.cancellationStrategy)||y.is(t.connectionStrategy))}}(t.ConnectionOptions||(t.ConnectionOptions={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(b||(b={})),t.createMessageConnection=function(e,n,y,_){const T=void 0!==y?y:t.NullLogger;let S=0,x=0,k=0,E=void 0;const w=Object.create(null);let A=void 0;const D=Object.create(null),I=new Map;let P,F,R=new o.LinkedMap,N=Object.create(null),O=Object.create(null),L=d.Off,M=h.Text,U=b.New;const z=new a.Emitter,V=new a.Emitter,B=new a.Emitter,q=new a.Emitter,W=new a.Emitter,j=_&&_.cancellationStrategy?_.cancellationStrategy:v.Message;function H(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function $(e,t){var n;r.isRequestMessage(t)?e.set(H(t.id),t):r.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++k).toString():"res-"+n.toString(),t):e.set("not-"+(++x).toString(),t)}function G(e){}function K(){return U===b.Listening}function Y(){return U===b.Closed}function Q(){return U===b.Disposed}function X(){U!==b.New&&U!==b.Listening||(U=b.Closed,V.fire(void 0))}function J(){P||0===R.size||(P=i.default().timer.setImmediate(()=>{P=void 0,function(){if(0===R.size)return;const e=R.shift();try{r.isRequestMessage(e)?function(e){if(Q())return;function t(t,i,s){const o={jsonrpc:"2.0",id:e.id};t instanceof r.ResponseError?o.error=t.toJson():o.result=void 0===t?null:t,ee(o,i,s),n.write(o)}function i(t,i,s){const r={jsonrpc:"2.0",id:e.id,error:t.toJson()};ee(r,i,s),n.write(r)}!function(e){if(L===d.Off||!F)return;if(M===h.Text){let t=void 0;L===d.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),F.log(`Received request '${e.method} - (${e.id})'.`,t)}else te("receive-request",e)}(e);const o=w[e.method];let a,c;o&&(a=o.type,c=o.handler);const l=Date.now();if(c||E){const o=String(e.id),p=j.receiver.createCancellationTokenSource(o);O[o]=p;try{let u;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but recevied none.`),e.method,l);u=c(p.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===r.ParameterStructures.byName)return void i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);u=c(...e.params,p.token)}else{if(void 0!==a&&a.parameterStructures===r.ParameterStructures.byPosition)return void i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);u=c(e.params,p.token)}else E&&(u=E(e.method,e.params,p.token));const d=u;u?d.then?d.then(n=>{delete O[o],t(n,e.method,l)},t=>{delete O[o],t instanceof r.ResponseError?i(t,e.method,l):t&&s.string(t.message)?i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}):(delete O[o],t(u,e.method,l)):(delete O[o],function(t,i,s){void 0===t&&(t=null);const r={jsonrpc:"2.0",id:e.id,result:t};ee(r,i,s),n.write(r)}(u,e.method,l))}catch(n){delete O[o],n instanceof r.ResponseError?t(n,e.method,l):n&&s.string(n.message)?i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${n.message}`),e.method,l):i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else i(new r.ResponseError(r.ErrorCodes.MethodNotFound,"Unhandled method "+e.method),e.method,l)}(e):r.isNotificationMessage(e)?function(e){if(Q())return;let t,n=void 0;if(e.method===l.type.method)t=e=>{const t=e.id,n=O[String(t)];n&&n.cancel()};else{const i=D[e.method];i&&(t=i.handler,n=i.type)}if(t||A)try{!function(e){if(L===d.Off||!F||e.method===m.type.method)return;if(M===h.Text){let t=void 0;L===d.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),F.log(`Received notification '${e.method}'.`,t)}else te("receive-notification",e)}(e),t?void 0===e.params?(void 0!==n&&0!==n.numberOfParams&&n.parameterStructures!==r.ParameterStructures.byName&&T.error(`Notification ${e.method} defines ${n.numberOfParams} params but recevied none.`),t()):Array.isArray(e.params)?(void 0!==n&&(n.parameterStructures===r.ParameterStructures.byName&&T.error(`Notification ${e.method} defines parameters by name but received parameters by position`),n.numberOfParams!==e.params.length&&T.error(`Notification ${e.method} defines ${n.numberOfParams} params but received ${e.params.length} argumennts`)),t(...e.params)):(void 0!==n&&n.parameterStructures===r.ParameterStructures.byPosition&&T.error(`Notification ${e.method} defines parameters by position but received parameters by name`),t(e.params)):A&&A(e.method,e.params)}catch(t){t.message?T.error(`Notification handler '${e.method}' failed with message: ${t.message}`):T.error(`Notification handler '${e.method}' failed unexpectedly.`)}else B.fire(e)}(e):r.isResponseMessage(e)?function(e){if(Q())return;if(null===e.id)e.error?T.error("Received response message without id: Error is: \n"+JSON.stringify(e.error,void 0,4)):T.error("Received response message without id. No further error information provided.");else{const t=String(e.id),n=N[t];if(function(e,t){if(L===d.Off||!F)return;if(M===h.Text){let n=void 0;if(L===d.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const i=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";F.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${i}`,n)}else F.log(`Received response ${e.id} without active response promise.`,n)}else te("receive-response",e)}(e,n),n){delete N[t];try{if(e.error){const t=e.error;n.reject(new r.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?T.error(`Response handler '${n.method}' failed with message: ${e.message}`):T.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void T.error("Received empty message.");T.error("Received message which is neither a response nor a notification message:\n"+JSON.stringify(e,null,4));const t=e;if(s.string(t.id)||s.number(t.id)){const e=String(t.id),n=N[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{J()}}()}))}e.onClose(X),e.onError((function(e){z.fire([e,void 0,void 0])})),n.onClose(X),n.onError((function(e){z.fire(e)}));const Z=e=>{try{if(r.isNotificationMessage(e)&&e.method===l.type.method){const t=H(e.params.id),i=R.get(t);if(r.isRequestMessage(i)){const s=null==_?void 0:_.connectionStrategy,r=s&&s.cancelUndispatched?s.cancelUndispatched(i,G):void 0;if(r&&(void 0!==r.error||void 0!==r.result))return R.delete(t),r.id=i.id,ee(r,e.method,Date.now()),void n.write(r)}}$(R,e)}finally{J()}};function ee(e,t,n){if(L!==d.Off&&F)if(M===h.Text){let i=void 0;L===d.Verbose&&(e.error&&e.error.data?i=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?i=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(i="No result returned.\n\n")),F.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,i)}else te("send-response",e)}function te(e,t){if(!F||L===d.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};F.log(n)}function ne(){if(Y())throw new C(g.Closed,"Connection is closed.");if(Q())throw new C(g.Disposed,"Connection is disposed.")}function ie(e){return void 0===e?null:e}function se(e){return null===e?void 0:e}function re(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function oe(e,t){switch(e){case r.ParameterStructures.auto:return re(t)?se(t):[ie(t)];case r.ParameterStructures.byName:if(!re(t))throw new Error("Recevied parameters by name but param is not an object literal.");return se(t);case r.ParameterStructures.byPosition:return[ie(t)];default:throw new Error("Unknown parameter structure "+e.toString())}}function ae(e,t){let n;const i=e.numberOfParams;switch(i){case 0:n=void 0;break;case 1:n=oe(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<i;e++)n.push(ie(t[e]));if(t.length<i)for(let e=t.length;e<i;e++)n.push(null)}return n}const ce={sendNotification:(e,...t)=>{let i,o;if(ne(),s.string(e)){i=e;const n=t[0];let s=0,a=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(s=1,a=n);let c=t.length;const l=c-s;switch(l){case 0:o=void 0;break;case 1:o=oe(a,t[s]);break;default:if(a===r.ParameterStructures.byName)throw new Error(`Recevied ${l} parameters for 'by Name' notification parameter structure.`);o=t.slice(s,c).map(e=>ie(e))}}else{const n=t;i=e.method,o=ae(e,n)}const a={jsonrpc:"2.0",method:i,params:o};!function(e){if(L!==d.Off&&F)if(M===h.Text){let t=void 0;L===d.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),F.log(`Sending notification '${e.method}'.`,t)}else te("send-notification",e)}(a),n.write(a)},onNotification:(e,t)=>{ne(),s.func(e)?A=e:t&&(s.string(e)?D[e]={type:void 0,handler:t}:D[e.method]={type:e,handler:t})},onProgress:(e,t,n)=>{if(I.has(t))throw new Error(`Progress handler for token ${t} already registered`);return I.set(t,n),{dispose:()=>{I.delete(t)}}},sendProgress:(e,t,n)=>{ce.sendNotification(p.type,{token:t,value:n})},onUnhandledProgress:q.event,sendRequest:(e,...t)=>{let i,o;ne(),function(){if(!K())throw new Error("Call listen() first.")}();let a=void 0;if(s.string(e)){i=e;const n=t[0],s=t[t.length-1];let l=0,p=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(l=1,p=n);let u=t.length;c.CancellationToken.is(s)&&(u-=1,a=s);const d=u-l;switch(d){case 0:o=void 0;break;case 1:o=oe(p,t[l]);break;default:if(p===r.ParameterStructures.byName)throw new Error(`Recevied ${d} parameters for 'by Name' request parameter structure.`);o=t.slice(l,u).map(e=>ie(e))}}else{const n=t;i=e.method,o=ae(e,n);const s=e.numberOfParams;a=c.CancellationToken.is(n[s])?n[s]:void 0}const l=S++;let p;return a&&(p=a.onCancellationRequested(()=>{j.sender.sendCancellation(ce,l)})),new Promise((e,t)=>{const s={jsonrpc:"2.0",id:l,method:i,params:o};let a={method:i,timerStart:Date.now(),resolve:t=>{e(t),j.sender.cleanup(l),null==p||p.dispose()},reject:e=>{t(e),j.sender.cleanup(l),null==p||p.dispose()}};!function(e){if(L!==d.Off&&F)if(M===h.Text){let t=void 0;L===d.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),F.log(`Sending request '${e.method} - (${e.id})'.`,t)}else te("send-request",e)}(s);try{n.write(s)}catch(e){a.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),a=null}a&&(N[String(l)]=a)})},onRequest:(e,t)=>{ne(),u.is(e)?E=e:s.string(e)?void 0!==t&&(w[e]={handler:t,type:void 0}):void 0!==t&&(w[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let i=!1,r=h.Text;void 0!==n&&(s.boolean(n)?i=n:(i=n.sendNotification||!1,r=n.traceFormat||h.Text)),L=e,M=r,F=L===d.Off?void 0:t,!i||Y()||Q()||ce.sendNotification(f.type,{value:d.toString(e)})},onError:z.event,onClose:V.event,onUnhandledNotification:B.event,onDispose:W.event,dispose:()=>{if(Q())return;U=b.Disposed,W.fire(void 0);const t=new Error("Connection got disposed.");Object.keys(N).forEach(e=>{N[e].reject(t)}),N=Object.create(null),O=Object.create(null),R=new o.LinkedMap,s.func(n.dispose)&&n.dispose(),s.func(e.dispose)&&e.dispose()},listen:()=>{ne(),function(){if(K())throw new C(g.AlreadyListening,"Connection is already listening")}(),U=b.Listening,e.listen(Z)},inspect:()=>{i.default().console.log("inspect")}};return ce.onNotification(m.type,e=>{L!==d.Off&&F&&F.log(e.message,L===d.Verbose?e.verbose:void 0)}),ce.onNotification(p.type,e=>{const t=I.get(e.token);t?t(e.value):q.fire(e)}),ce}},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(i=t.Touch||(t.Touch={}));class s{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e,t=i.None){const n=this._map.get(e);if(n)return t!==i.None&&this.touch(n,t),n.value}set(e,t,n=i.None){let s=this._map.get(e);if(s)s.value=t,n!==i.None&&this.touch(s,n);else{switch(s={key:e,value:t,next:void 0,previous:void 0},n){case i.None:this.addItemLast(s);break;case i.First:this.addItemFirst(s);break;case i.Last:default:this.addItemLast(s)}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator]:()=>i,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.key,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return i}values(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator]:()=>i,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.value,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator]:()=>i,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:[n.key,n.value],done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===i.First||t===i.Last)if(t===i.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===i.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=s;t.LRUCache=class extends s{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=i.AsNew){return super.get(e,t)}peek(e){return super.get(e,i.None)}set(e,t){return super.set(e,t,i.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},function(e,t){e.exports=require("net")},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(8)),i(n(97)),i(n(9)),i(n(98));var s=n(110);t.createProtocolConnection=s.createProtocolConnection;const r=n(111);!function(e){let t,n,i;e.SemanticTokenTypes=r.SemanticTokenTypes,e.SemanticTokenModifiers=r.SemanticTokenModifiers,e.SemanticTokens=r.SemanticTokens,function(e){e.method=r.SemanticTokensRequest.method,e.type=r.SemanticTokensRequest.type}(t=e.SemanticTokensRequest||(e.SemanticTokensRequest={})),function(e){e.method=r.SemanticTokensEditsRequest.method,e.type=r.SemanticTokensEditsRequest.type}(n=e.SemanticTokensEditsRequest||(e.SemanticTokensEditsRequest={})),function(e){e.method=r.SemanticTokensRangeRequest.method,e.type=r.SemanticTokensRangeRequest.type}(i=e.SemanticTokensRangeRequest||(e.SemanticTokensRangeRequest={}))}(t.Proposed||(t.Proposed={}))},function(e,t,n){"use strict";var i,s,r,o,a,c,l,p,u,d,h,f,m,g,y,_,T,v,b,C,S;n.r(t),n.d(t,"Position",(function(){return i})),n.d(t,"Range",(function(){return s})),n.d(t,"Location",(function(){return r})),n.d(t,"LocationLink",(function(){return o})),n.d(t,"Color",(function(){return a})),n.d(t,"ColorInformation",(function(){return c})),n.d(t,"ColorPresentation",(function(){return l})),n.d(t,"FoldingRangeKind",(function(){return p})),n.d(t,"FoldingRange",(function(){return u})),n.d(t,"DiagnosticRelatedInformation",(function(){return d})),n.d(t,"DiagnosticSeverity",(function(){return h})),n.d(t,"DiagnosticTag",(function(){return f})),n.d(t,"DiagnosticCode",(function(){return m})),n.d(t,"Diagnostic",(function(){return g})),n.d(t,"Command",(function(){return y})),n.d(t,"TextEdit",(function(){return _})),n.d(t,"TextDocumentEdit",(function(){return T})),n.d(t,"CreateFile",(function(){return v})),n.d(t,"RenameFile",(function(){return b})),n.d(t,"DeleteFile",(function(){return C})),n.d(t,"WorkspaceEdit",(function(){return S})),n.d(t,"WorkspaceChange",(function(){return Z})),n.d(t,"TextDocumentIdentifier",(function(){return x})),n.d(t,"VersionedTextDocumentIdentifier",(function(){return k})),n.d(t,"TextDocumentItem",(function(){return E})),n.d(t,"MarkupKind",(function(){return w})),n.d(t,"MarkupContent",(function(){return A})),n.d(t,"CompletionItemKind",(function(){return D})),n.d(t,"InsertTextFormat",(function(){return I})),n.d(t,"CompletionItemTag",(function(){return P})),n.d(t,"InsertReplaceEdit",(function(){return F})),n.d(t,"CompletionItem",(function(){return R})),n.d(t,"CompletionList",(function(){return N})),n.d(t,"MarkedString",(function(){return O})),n.d(t,"Hover",(function(){return L})),n.d(t,"ParameterInformation",(function(){return M})),n.d(t,"SignatureInformation",(function(){return U})),n.d(t,"DocumentHighlightKind",(function(){return z})),n.d(t,"DocumentHighlight",(function(){return V})),n.d(t,"SymbolKind",(function(){return B})),n.d(t,"SymbolTag",(function(){return q})),n.d(t,"SymbolInformation",(function(){return W})),n.d(t,"DocumentSymbol",(function(){return j})),n.d(t,"CodeActionKind",(function(){return H})),n.d(t,"CodeActionContext",(function(){return $})),n.d(t,"CodeAction",(function(){return G})),n.d(t,"CodeLens",(function(){return K})),n.d(t,"FormattingOptions",(function(){return Y})),n.d(t,"DocumentLink",(function(){return Q})),n.d(t,"SelectionRange",(function(){return X})),n.d(t,"EOL",(function(){return te})),n.d(t,"TextDocument",(function(){return ee})),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return ne.objectLiteral(t)&&ne.number(t.line)&&ne.number(t.character)}}(i||(i={})),function(e){e.create=function(e,t,n,s){if(ne.number(e)&&ne.number(t)&&ne.number(n)&&ne.number(s))return{start:i.create(e,t),end:i.create(n,s)};if(i.is(e)&&i.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+s+"]")},e.is=function(e){var t=e;return ne.objectLiteral(t)&&i.is(t.start)&&i.is(t.end)}}(s||(s={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return ne.defined(t)&&s.is(t.range)&&(ne.string(t.uri)||ne.undefined(t.uri))}}(r||(r={})),function(e){e.create=function(e,t,n,i){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:i}},e.is=function(e){var t=e;return ne.defined(t)&&s.is(t.targetRange)&&ne.string(t.targetUri)&&(s.is(t.targetSelectionRange)||ne.undefined(t.targetSelectionRange))&&(s.is(t.originSelectionRange)||ne.undefined(t.originSelectionRange))}}(o||(o={})),function(e){e.create=function(e,t,n,i){return{red:e,green:t,blue:n,alpha:i}},e.is=function(e){var t=e;return ne.number(t.red)&&ne.number(t.green)&&ne.number(t.blue)&&ne.number(t.alpha)}}(a||(a={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return s.is(t.range)&&a.is(t.color)}}(c||(c={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return ne.string(t.label)&&(ne.undefined(t.textEdit)||_.is(t))&&(ne.undefined(t.additionalTextEdits)||ne.typedArray(t.additionalTextEdits,_.is))}}(l||(l={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(p||(p={})),function(e){e.create=function(e,t,n,i,s){var r={startLine:e,endLine:t};return ne.defined(n)&&(r.startCharacter=n),ne.defined(i)&&(r.endCharacter=i),ne.defined(s)&&(r.kind=s),r},e.is=function(e){var t=e;return ne.number(t.startLine)&&ne.number(t.startLine)&&(ne.undefined(t.startCharacter)||ne.number(t.startCharacter))&&(ne.undefined(t.endCharacter)||ne.number(t.endCharacter))&&(ne.undefined(t.kind)||ne.string(t.kind))}}(u||(u={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return ne.defined(t)&&r.is(t.location)&&ne.string(t.message)}}(d||(d={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(h||(h={})),function(e){e.Unnecessary=1,e.Deprecated=2}(f||(f={})),function(e){e.is=function(e){var t=e;return null!=t&&(ne.number(t.value)||ne.string(t.value))&&ne.string(t.target)}}(m||(m={})),function(e){e.create=function(e,t,n,i,s,r){var o={range:e,message:t};return ne.defined(n)&&(o.severity=n),ne.defined(i)&&(o.code=i),ne.defined(s)&&(o.source=s),ne.defined(r)&&(o.relatedInformation=r),o},e.is=function(e){var t=e;return ne.defined(t)&&s.is(t.range)&&ne.string(t.message)&&(ne.number(t.severity)||ne.undefined(t.severity))&&(ne.number(t.code)||ne.string(t.code)||ne.undefined(t.code))&&(ne.string(t.source)||ne.undefined(t.source))&&(ne.undefined(t.relatedInformation)||ne.typedArray(t.relatedInformation,d.is))}}(g||(g={})),function(e){e.create=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var s={title:e,command:t};return ne.defined(n)&&n.length>0&&(s.arguments=n),s},e.is=function(e){var t=e;return ne.defined(t)&&ne.string(t.title)&&ne.string(t.command)}}(y||(y={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return ne.objectLiteral(t)&&ne.string(t.newText)&&s.is(t.range)}}(_||(_={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return ne.defined(t)&&k.is(t.textDocument)&&Array.isArray(t.edits)}}(T||(T={})),function(e){e.create=function(e,t){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&ne.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||ne.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ne.boolean(t.options.ignoreIfExists)))}}(v||(v={})),function(e){e.create=function(e,t,n){var i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),i},e.is=function(e){var t=e;return t&&"rename"===t.kind&&ne.string(t.oldUri)&&ne.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||ne.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ne.boolean(t.options.ignoreIfExists)))}}(b||(b={})),function(e){e.create=function(e,t){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&ne.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||ne.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||ne.boolean(t.options.ignoreIfNotExists)))}}(C||(C={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return ne.string(e.kind)?v.is(e)||b.is(e)||C.is(e):T.is(e)})))}}(S||(S={}));var x,k,E,w,A,D,I,P,F,R,N,O,L,M,U,z,V,B,q,W,j,H,$,G,K,Y,Q,X,J=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(_.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(_.replace(e,t))},e.prototype.delete=function(e){this.edits.push(_.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),Z=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach((function(e){if(T.is(e)){var n=new J(e.edits);t._textEditChanges[e.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach((function(n){var i=new J(e.changes[n]);t._textEditChanges[n]=i})))}return Object.defineProperty(e.prototype,"edit",{get:function(){return void 0===this._workspaceEdit?{documentChanges:[]}:this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(k.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(i=this._textEditChanges[t.uri])){var n={textDocument:t,edits:s=[]};this._workspaceEdit.documentChanges.push(n),i=new J(s),this._textEditChanges[t.uri]=i}return i}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var i;if(!(i=this._textEditChanges[e])){var s=[];this._workspaceEdit.changes[e]=s,i=new J(s),this._textEditChanges[e]=i}return i},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(v.create(e,t))},e.prototype.renameFile=function(e,t,n){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(b.create(e,t,n))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(C.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return ne.defined(t)&&ne.string(t.uri)}}(x||(x={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return ne.defined(t)&&ne.string(t.uri)&&(null===t.version||ne.number(t.version))}}(k||(k={})),function(e){e.create=function(e,t,n,i){return{uri:e,languageId:t,version:n,text:i}},e.is=function(e){var t=e;return ne.defined(t)&&ne.string(t.uri)&&ne.string(t.languageId)&&ne.number(t.version)&&ne.string(t.text)}}(E||(E={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(w||(w={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(w||(w={})),function(e){e.is=function(e){var t=e;return ne.objectLiteral(e)&&w.is(t.kind)&&ne.string(t.value)}}(A||(A={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(D||(D={})),function(e){e.PlainText=1,e.Snippet=2}(I||(I={})),function(e){e.Deprecated=1}(P||(P={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){var t=e;return t&&ne.string(t.newText)&&s.is(t.insert)&&s.is(t.replace)}}(F||(F={})),function(e){e.create=function(e){return{label:e}}}(R||(R={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(N||(N={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return ne.string(t)||ne.objectLiteral(t)&&ne.string(t.language)&&ne.string(t.value)}}(O||(O={})),function(e){e.is=function(e){var t=e;return!!t&&ne.objectLiteral(t)&&(A.is(t.contents)||O.is(t.contents)||ne.typedArray(t.contents,O.is))&&(void 0===e.range||s.is(e.range))}}(L||(L={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(M||(M={})),function(e){e.create=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var s={label:e};return ne.defined(t)&&(s.documentation=t),ne.defined(n)?s.parameters=n:s.parameters=[],s}}(U||(U={})),function(e){e.Text=1,e.Read=2,e.Write=3}(z||(z={})),function(e){e.create=function(e,t){var n={range:e};return ne.number(t)&&(n.kind=t),n}}(V||(V={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(B||(B={})),function(e){e.Deprecated=1}(q||(q={})),function(e){e.create=function(e,t,n,i,s){var r={name:e,kind:t,location:{uri:i,range:n}};return s&&(r.containerName=s),r}}(W||(W={})),function(e){e.create=function(e,t,n,i,s,r){var o={name:e,detail:t,kind:n,range:i,selectionRange:s};return void 0!==r&&(o.children=r),o},e.is=function(e){var t=e;return t&&ne.string(t.name)&&ne.number(t.kind)&&s.is(t.range)&&s.is(t.selectionRange)&&(void 0===t.detail||ne.string(t.detail))&&(void 0===t.deprecated||ne.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(j||(j={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(H||(H={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return ne.defined(t)&&ne.typedArray(t.diagnostics,g.is)&&(void 0===t.only||ne.typedArray(t.only,ne.string))}}($||($={})),function(e){e.create=function(e,t,n){var i={title:e};return y.is(t)?i.command=t:i.edit=t,void 0!==n&&(i.kind=n),i},e.is=function(e){var t=e;return t&&ne.string(t.title)&&(void 0===t.diagnostics||ne.typedArray(t.diagnostics,g.is))&&(void 0===t.kind||ne.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||y.is(t.command))&&(void 0===t.isPreferred||ne.boolean(t.isPreferred))&&(void 0===t.edit||S.is(t.edit))}}(G||(G={})),function(e){e.create=function(e,t){var n={range:e};return ne.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return ne.defined(t)&&s.is(t.range)&&(ne.undefined(t.command)||y.is(t.command))}}(K||(K={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return ne.defined(t)&&ne.number(t.tabSize)&&ne.boolean(t.insertSpaces)}}(Y||(Y={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return ne.defined(t)&&s.is(t.range)&&(ne.undefined(t.target)||ne.string(t.target))}}(Q||(Q={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return void 0!==n&&s.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(X||(X={}));var ee,te=["\n","\r\n","\r"];!function(e){e.create=function(e,t,n,i){return new ie(e,t,n,i)},e.is=function(e){var t=e;return!!(ne.defined(t)&&ne.string(t.uri)&&(ne.undefined(t.languageId)||ne.string(t.languageId))&&ne.number(t.lineCount)&&ne.func(t.getText)&&ne.func(t.positionAt)&&ne.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),i=function e(t,n){if(t.length<=1)return t;var i=t.length/2|0,s=t.slice(0,i),r=t.slice(i);e(s,n),e(r,n);var o=0,a=0,c=0;for(;o<s.length&&a<r.length;){var l=n(s[o],r[a]);t[c++]=l<=0?s[o++]:r[a++]}for(;o<s.length;)t[c++]=s[o++];for(;a<r.length;)t[c++]=r[a++];return t}(t,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),s=n.length,r=i.length-1;r>=0;r--){var o=i[r],a=e.offsetAt(o.range.start),c=e.offsetAt(o.range.end);if(!(c<=s))throw new Error("Overlapping edit");n=n.substring(0,a)+o.newText+n.substring(c,n.length),s=a}return n}}(ee||(ee={}));var ne,ie=function(){function e(e,t,n,i){this._uri=e,this._languageId=t,this._version=n,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,i=0;i<t.length;i++){n&&(e.push(i),n=!1);var s=t.charAt(i);n="\r"===s||"\n"===s,"\r"===s&&i+1<t.length&&"\n"===t.charAt(i+1)&&i++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,s=t.length;if(0===s)return i.create(0,e);for(;n<s;){var r=Math.floor((n+s)/2);t[r]>e?s=r:n=r+1}var o=n-1;return i.create(o,e-t[o])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],i=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(ne||(ne={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(99),s=n(8),r=n(9),o=n(100);t.ImplementationRequest=o.ImplementationRequest;const a=n(101);t.TypeDefinitionRequest=a.TypeDefinitionRequest;const c=n(102);t.WorkspaceFoldersRequest=c.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=c.DidChangeWorkspaceFoldersNotification;const l=n(103);t.ConfigurationRequest=l.ConfigurationRequest;const p=n(104);t.DocumentColorRequest=p.DocumentColorRequest,t.ColorPresentationRequest=p.ColorPresentationRequest;const u=n(105);t.FoldingRangeRequest=u.FoldingRangeRequest;const d=n(106);t.DeclarationRequest=d.DeclarationRequest;const h=n(107);t.SelectionRangeRequest=h.SelectionRangeRequest;const f=n(108);t.WorkDoneProgress=f.WorkDoneProgress,t.WorkDoneProgressCreateRequest=f.WorkDoneProgressCreateRequest,t.WorkDoneProgressCancelNotification=f.WorkDoneProgressCancelNotification;const m=n(109);var g,y;t.CallHierarchyIncomingCallsRequest=m.CallHierarchyIncomingCallsRequest,t.CallHierarchyOutgoingCallsRequest=m.CallHierarchyOutgoingCallsRequest,t.CallHierarchyPrepareRequest=m.CallHierarchyPrepareRequest,function(e){e.is=function(e){const t=e;return i.string(t.language)||i.string(t.scheme)||i.string(t.pattern)}}(g=t.DocumentFilter||(t.DocumentFilter={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!i.string(t)&&!g.is(t))return!1;return!0}}(y=t.DocumentSelector||(t.DocumentSelector={})),function(e){e.type=new r.ProtocolRequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(e){e.type=new r.ProtocolRequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(e){e.Create="create",e.Rename="rename",e.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(e){e.hasId=function(e){const t=e;return t&&i.string(t.id)&&t.id.length>0}}(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})),function(e){e.is=function(e){const t=e;return t&&(null===t.documentSelector||y.is(t.documentSelector))}}(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})),function(e){e.is=function(e){const t=e;return i.objectLiteral(t)&&(void 0===t.workDoneProgress||i.boolean(t.workDoneProgress))},e.hasWorkDoneProgress=function(e){const t=e;return t&&i.boolean(t.workDoneProgress)}}(t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})),function(e){e.type=new r.ProtocolRequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(e){e.unknownProtocolVersion=1}(t.InitializeError||(t.InitializeError={})),function(e){e.type=new r.ProtocolNotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(e){e.type=new r.ProtocolRequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(e){e.type=new r.ProtocolNotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(e){e.type=new r.ProtocolNotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4}(t.MessageType||(t.MessageType={})),function(e){e.type=new r.ProtocolNotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(e){e.type=new r.ProtocolRequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(e){e.type=new r.ProtocolNotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(e){e.type=new r.ProtocolNotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(e){e.method="textDocument/didOpen",e.type=new r.ProtocolNotificationType(e.method)}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(e){e.method="textDocument/didChange",e.type=new r.ProtocolNotificationType(e.method)}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(e){e.method="textDocument/didClose",e.type=new r.ProtocolNotificationType(e.method)}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(e){e.method="textDocument/didSave",e.type=new r.ProtocolNotificationType(e.method)}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})),function(e){e.method="textDocument/willSave",e.type=new r.ProtocolNotificationType(e.method)}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(e){e.method="textDocument/willSaveWaitUntil",e.type=new r.ProtocolRequestType(e.method)}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(e){e.type=new r.ProtocolNotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(t.WatchKind||(t.WatchKind={})),function(e){e.type=new r.ProtocolNotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(e){e.method="textDocument/completion",e.type=new r.ProtocolRequestType(e.method),e.resultType=new s.ProgressType}(t.CompletionRequest||(t.CompletionRequest={})),function(e){e.method="completionItem/resolve",e.type=new r.ProtocolRequestType(e.method)}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(e){e.method="textDocument/hover",e.type=new r.ProtocolRequestType(e.method)}(t.HoverRequest||(t.HoverRequest={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3}(t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})),function(e){e.method="textDocument/signatureHelp",e.type=new r.ProtocolRequestType(e.method)}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(e){e.method="textDocument/definition",e.type=new r.ProtocolRequestType(e.method),e.resultType=new s.ProgressType}(t.DefinitionRequest||(t.DefinitionRequest={})),function(e){e.method="textDocument/references",e.type=new r.ProtocolRequestType(e.method),e.resultType=new s.ProgressType}(t.ReferencesRequest||(t.ReferencesRequest={})),function(e){e.method="textDocument/documentHighlight",e.type=new r.ProtocolRequestType(e.method),e.resultType=new s.ProgressType}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(e){e.method="textDocument/documentSymbol",e.type=new r.ProtocolRequestType(e.method),e.resultType=new s.ProgressType}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(e){e.method="textDocument/codeAction",e.type=new r.ProtocolRequestType(e.method),e.resultType=new s.ProgressType}(t.CodeActionRequest||(t.CodeActionRequest={})),function(e){e.method="workspace/symbol",e.type=new r.ProtocolRequestType(e.method),e.resultType=new s.ProgressType}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(e){e.type=new r.ProtocolRequestType("textDocument/codeLens"),e.resultType=new s.ProgressType}(t.CodeLensRequest||(t.CodeLensRequest={})),function(e){e.type=new r.ProtocolRequestType("codeLens/resolve")}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(e){e.method="textDocument/documentLink",e.type=new r.ProtocolRequestType(e.method),e.resultType=new s.ProgressType}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(e){e.type=new r.ProtocolRequestType("documentLink/resolve")}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(e){e.method="textDocument/formatting",e.type=new r.ProtocolRequestType(e.method)}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(e){e.method="textDocument/rangeFormatting",e.type=new r.ProtocolRequestType(e.method)}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(e){e.method="textDocument/onTypeFormatting",e.type=new r.ProtocolRequestType(e.method)}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(e){e.method="textDocument/rename",e.type=new r.ProtocolRequestType(e.method)}(t.RenameRequest||(t.RenameRequest={})),function(e){e.method="textDocument/prepareRename",e.type=new r.ProtocolRequestType(e.method)}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(e){e.type=new r.ProtocolRequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(e){e.type=new r.ProtocolRequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},function(e,t,n){"use strict";function i(e){return"string"==typeof e||e instanceof String}function s(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=s,t.stringArray=function(e){return s(e)&&e.every(e=>i(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8),s=n(9);!function(e){e.method="textDocument/implementation",e.type=new s.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.ImplementationRequest||(t.ImplementationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8),s=n(9);!function(e){e.method="textDocument/typeDefinition",e.type=new s.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9);!function(e){e.type=new i.ProtocolRequestType0("workspace/workspaceFolders")}(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(e){e.type=new i.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9);!function(e){e.type=new i.ProtocolRequestType("workspace/configuration")}(t.ConfigurationRequest||(t.ConfigurationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8),s=n(9);!function(e){e.method="textDocument/documentColor",e.type=new s.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(e){e.type=new s.ProtocolRequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8),s=n(9);!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.method="textDocument/foldingRange",e.type=new s.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8),s=n(9);!function(e){e.method="textDocument/declaration",e.type=new s.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.DeclarationRequest||(t.DeclarationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8),s=n(9);!function(e){e.method="textDocument/selectionRange",e.type=new s.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.SelectionRangeRequest||(t.SelectionRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8),s=n(9);!function(e){e.type=new i.ProgressType}(t.WorkDoneProgress||(t.WorkDoneProgress={})),function(e){e.type=new s.ProtocolRequestType("window/workDoneProgress/create")}(t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})),function(e){e.type=new s.ProtocolNotificationType("window/workDoneProgress/cancel")}(t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9);!function(e){e.method="textDocument/prepareCallHierarchy",e.type=new i.ProtocolRequestType(e.method)}(t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})),function(e){e.method="callHierarchy/incomingCalls",e.type=new i.ProtocolRequestType(e.method)}(t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})),function(e){e.method="callHierarchy/outgoingCalls",e.type=new i.ProtocolRequestType(e.method)}(t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8);t.createProtocolConnection=function(e,t,n,s){return i.ConnectionStrategy.is(s)&&(s={connectionStrategy:s}),i.createMessageConnection(e,t,n,s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9);!function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.member="member",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator"}(t.SemanticTokenTypes||(t.SemanticTokenTypes={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(t.SemanticTokenModifiers||(t.SemanticTokenModifiers={})),function(e){e.is=function(e){const t=e;return void 0!==t&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(t.SemanticTokens||(t.SemanticTokens={})),function(e){e.method="textDocument/semanticTokens",e.type=new i.ProtocolRequestType(e.method)}(t.SemanticTokensRequest||(t.SemanticTokensRequest={})),function(e){e.method="textDocument/semanticTokens/edits",e.type=new i.ProtocolRequestType(e.method)}(t.SemanticTokensEditsRequest||(t.SemanticTokensEditsRequest={})),function(e){e.method="textDocument/semanticTokens/range",e.type=new i.ProtocolRequestType(e.method)}(t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),s=n(59);class r{constructor(e,t){this._connection=e,this._token=t,r.Instances.set(this._token,this)}begin(e,t,n,s){let r={kind:"begin",title:e,percentage:t,message:n,cancellable:s};this._connection.sendProgress(i.WorkDoneProgress.type,this._token,r)}report(e,t){let n={kind:"report"};"number"==typeof e?(n.percentage=e,void 0!==t&&(n.message=t)):n.message=e,this._connection.sendProgress(i.WorkDoneProgress.type,this._token,n)}done(){r.Instances.delete(this._token),this._connection.sendProgress(i.WorkDoneProgress.type,this._token,{kind:"end"})}}r.Instances=new Map;class o extends r{constructor(e,t){super(e,t),this._source=new i.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class a{constructor(){}begin(){}report(){}done(){}}class c extends a{constructor(){super(),this._source=new i.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}var l;t.attachWorkDone=function(e,t){if(void 0===t||void 0===t.workDoneToken)return new a;const n=t.workDoneToken;return delete t.workDoneToken,new r(e,n)},t.ProgressFeature=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(e){var t;!0===(null===(t=null==e?void 0:e.window)||void 0===t?void 0:t.workDoneProgress)&&(this._progressSupported=!0,this.connection.onNotification(i.WorkDoneProgressCancelNotification.type,e=>{let t=r.Instances.get(e.token);(t instanceof o||t instanceof c)&&t.cancel()}))}attachWorkDoneProgress(e){return void 0===e?new a:new r(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){const e=s.generateUuid();return this.connection.sendRequest(i.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new o(this.connection,e))}return Promise.resolve(new c)}},function(e){e.type=new i.ProgressType}(l||(l={}));class p{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(l.type,this._token,e)}}t.attachPartialResult=function(e,t){if(void 0===t||void 0===t.partialResultToken)return;const n=t.partialResultToken;return delete t.partialResultToken,new p(e,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),s=n(40);t.ConfigurationFeature=e=>class extends e{getConfiguration(e){return e?s.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(i.ConfigurationRequest.type,t).then(t=>Array.isArray(e)?t:t[0])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14);t.WorkspaceFoldersFeature=e=>class extends e{initialize(e){let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new i.Emitter,this.connection.onNotification(i.DidChangeWorkspaceFoldersNotification.type,e=>{this._onDidChangeWorkspaceFolders.fire(e.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(i.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(i.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14);t.CallHierarchyFeature=e=>class extends e{get callHierarchy(){return{onPrepare:e=>{this.connection.onRequest(i.CallHierarchyPrepareRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0))},onIncomingCalls:e=>{const t=i.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(t,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n)))},onOutgoingCalls:e=>{const t=i.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(t,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n)))}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(117),s=n(3),r=n(12),o=n(41);function a(){return"win32"===process.platform}function c(e,t,n,i){const a=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((c,l)=>{let p=process.env,u=Object.create(null);Object.keys(p).forEach(e=>u[e]=p[e]),t&&r.existsSync(t)&&(u.NODE_PATH?u.NODE_PATH=t+s.delimiter+u.NODE_PATH:u.NODE_PATH=t,i&&i("NODE_PATH value is: "+u.NODE_PATH)),u.ELECTRON_RUN_AS_NODE="1";try{let t=o.fork("",[],{cwd:n,env:u,execArgv:["-e",a]});if(void 0===t.pid)return void l(new Error(`Starting process to resolve node module  ${e} failed`));t.on("error",e=>{l(e)}),t.on("message",n=>{"r"===n.c&&(t.send({c:"e"}),n.s?c(n.r):l(new Error("Failed to resolve module: "+e)))});let i={c:"rs",a:e};t.send(i)}catch(e){l(e)}})}function l(e){let t="npm";const n=Object.create(null);Object.keys(process.env).forEach(e=>n[e]=process.env[e]),n.NO_UPDATE_NOTIFIER="true";const i={encoding:"utf8",env:n};a()&&(t="npm.cmd",i.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let n=o.spawnSync(t,["config","get","prefix"],i).stdout;if(!n)return void(e&&e("'npm config get prefix' didn't return a value."));let c=n.trim();return e&&e("'npm config get prefix' value is: "+c),c.length>0?a()?s.join(c,"node_modules"):s.join(c,"lib","node_modules"):void 0}catch(e){return}finally{process.removeListener("SIGPIPE",r)}}var p;t.uriToFilePath=function(e){let t=i.parse(e);if("file:"!==t.protocol||!t.path)return;let n=t.path.split("/");for(var r=0,o=n.length;r<o;r++)n[r]=decodeURIComponent(n[r]);if("win32"===process.platform&&n.length>1){let e=n[0],t=n[1];0===e.length&&t.length>1&&":"===t[1]&&n.shift()}return s.normalize(n.join("/"))},t.resolve=c,t.resolveGlobalNodePath=l,t.resolveGlobalYarnPath=function(e){let t="yarn",n={encoding:"utf8"};a()&&(t="yarn.cmd",n.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let r=o.spawnSync(t,["global","dir","--json"],n),a=r.stdout;if(!a)return void(e&&(e("'yarn global dir' didn't return a value."),r.stderr&&e(r.stderr)));let c=a.trim().split(/\r?\n/);for(let e of c)try{let t=JSON.parse(e);if("log"===t.type)return s.join(t.data,"node_modules")}catch(e){}return}catch(e){return}finally{process.removeListener("SIGPIPE",i)}},function(e){let t=void 0;function n(){return void 0!==t||(t="win32"!==process.platform&&(!r.existsSync(__filename.toUpperCase())||!r.existsSync(__filename.toLowerCase()))),t}e.isCaseSensitive=n,e.isParent=function(e,t){return n()?0===s.normalize(t).indexOf(s.normalize(e)):0===s.normalize(t).toLowerCase().indexOf(s.normalize(e).toLowerCase())}}(p=t.FileSystem||(t.FileSystem={})),t.resolveModulePath=function(e,t,n,i){return n?(s.isAbsolute(n)||(n=s.join(e,n)),c(t,n,n,i).then(e=>p.isParent(n,e)?e:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,n=>c(t,l(i),e,i))):c(t,l(i),e,i)}},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";e.exports=n(14)},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const s=n(120);i(n(14)),i(n(57)),function(e){e.all={__brand:"features",languages:s.SemanticTokensFeature},e.SemanticTokensBuilder=s.SemanticTokensBuilder}(t.ProposedFeatures||(t.ProposedFeatures={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14);t.SemanticTokensFeature=e=>class extends e{get semanticTokens(){return{on:e=>{const t=i.Proposed.SemanticTokensRequest.type;this.connection.onRequest(t,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n)))},onEdits:e=>{const t=i.Proposed.SemanticTokensEditsRequest.type;this.connection.onRequest(t,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n)))},onRange:e=>{const t=i.Proposed.SemanticTokensRangeRequest.type;this.connection.onRequest(t,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n)))}}}};t.SemanticTokensBuilder=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,n,i,s){let r=e,o=t;this._dataLen>0&&(r-=this._prevLine,0===r&&(o-=this._prevChar)),this._data[this._dataLen++]=r,this._data[this._dataLen++]=o,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){if(void 0!==this._prevData){const e=this._prevData.length,t=this._data.length;let n=0;for(;n<t&&n<e&&this._prevData[n]===this._data[n];)n++;if(n<t&&n<e){let i=0;for(;i<t&&i<e&&this._prevData[e-1-i]===this._data[t-1-i];)i++;const s=this._data.slice(n,t-i);return{resultId:this.id,edits:[{start:n,deleteCount:e-i-n,data:s}]}}return n<t?{resultId:this.id,edits:[{start:n,deleteCount:0,data:this._data.slice(n)}]}:n<e?{resultId:this.id,edits:[{start:n,deleteCount:e-n}]}:{resultId:this.id,edits:[]}}return this.build()}}},function(e,t,n){"use strict";const i=[],s=[],r=(e,t)=>{if(e===t)return 0;const n=e;e.length>t.length&&(e=t,t=n);let r=e.length,o=t.length;for(;r>0&&e.charCodeAt(~-r)===t.charCodeAt(~-o);)r--,o--;let a,c,l,p,u=0;for(;u<r&&e.charCodeAt(u)===t.charCodeAt(u);)u++;if(r-=u,o-=u,0===r)return o;let d=0,h=0;for(;d<r;)s[d]=e.charCodeAt(u+d),i[d]=++d;for(;h<o;)for(a=t.charCodeAt(u+h),l=h++,c=h,d=0;d<r;d++)p=a===s[d]?l:l+1,l=i[d],c=i[d]=l>c?p>c?c+1:p:p>l?l+1:p;return c};e.exports=r,e.exports.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyProvider=void 0;const i=n(10),s=n(20),r=n(6),o=n(11),a=n(21),c=n(17),l=n(17),p=n(0),u=n(4),d=n(5),h=n(1);t.CallHierarchyProvider=class{static getCallForDeclaration(e,t,n,i){if(p.throwIfCancellationRequested(i),3===t.type||4===t.type){return{name:e,kind:g(t,n),uri:t.path,range:t.range,selectionRange:t.range}}}static getIncomingCallsForDeclaration(e,t,n,i,s,r){p.throwIfCancellationRequested(r);const o=new m(e,t,n,i,s,r).findCalls();return o.length>0?o:void 0}static getOutgoingCallsForDeclaration(e,t,n,i){let s;if(p.throwIfCancellationRequested(i),3===e.type)s=e.node;else if(4===e.type){const t=n.getTypeForDeclaration(e);if(7===(null==t?void 0:t.category)){const e=l.lookUpClassMember(t,"__init__",14);if(e){const t=n.getTypeOfMember(e);if(t&&5===t.category){const t=e.symbol.getDeclarations();if(t&&t.length>0){const e=t[0];3===e.type&&(s=e.node)}}}}}if(!s)return;const r=new f(s,t,n,i).findCalls();return r.length>0?r:void 0}static getTargetDeclaration(e,t){let n=e[0];for(const i of e)if((s.hasTypeForDeclaration(i)||!s.hasTypeForDeclaration(n))&&(3===i.type||4===i.type)&&(n=i,i.node===t))break;return n}};class f extends o.ParseTreeWalker{constructor(e,t,n,i){super(),this._parseRoot=e,this._parseResults=t,this._evaluator=n,this._cancellationToken=i,this._outgoingCalls=[]}findCalls(){return this.walk(this._parseRoot),this._outgoingCalls}visitCall(e){let t;if(p.throwIfCancellationRequested(this._cancellationToken),39===e.leftExpression.nodeType?t=e.leftExpression:36===e.leftExpression.nodeType&&(t=e.leftExpression.memberName),t){const e=this._evaluator.getDeclarationsForNameNode(t);e&&e.forEach(e=>{this._addOutgoingCallForDeclaration(t,e)})}return!0}visitMemberAccess(e){p.throwIfCancellationRequested(this._cancellationToken);const t=this._evaluator.getType(e.leftExpression);return t&&l.doForSubtypes(t,t=>{let n=t;if(11===n.category&&(n=c.specializeType(n,void 0,!0)),8!==n.category)return;const i=l.lookUpObjectMember(n,e.memberName.value);if(!i)return;const s=this._evaluator.getTypeOfMember(i),r=i.symbol.getDeclarations();s&&8===s.category&&a.ClassType.isPropertyClass(s.classType)&&r.forEach(t=>{this._addOutgoingCallForDeclaration(e.memberName,t)})}),!0}_addOutgoingCallForDeclaration(e,t){const n=this._evaluator.resolveAliasDeclaration(t,!0);if(!n)return;if(3!==n.type&&4!==n.type)return;const i={name:e.value,kind:g(n,this._evaluator),uri:n.path,range:n.range,selectionRange:n.range};let s=this._outgoingCalls.find(e=>e.to.uri===i.uri&&h.rangesAreEqual(e.to.range,i.range));s||(s={to:i,fromRanges:[]},this._outgoingCalls.push(s));const r=d.convertOffsetsToRange(e.start,e.start+e.length,this._parseResults.tokenizerOutput.lines);s.fromRanges.push(r)}}class m extends o.ParseTreeWalker{constructor(e,t,n,i,s,r){super(),this._filePath=e,this._symbolName=t,this._declaration=n,this._parseResults=i,this._evaluator=s,this._cancellationToken=r,this._incomingCalls=[]}findCalls(){return this.walk(this._parseResults.parseTree),this._incomingCalls}visitCall(e){let t;if(p.throwIfCancellationRequested(this._cancellationToken),39===e.leftExpression.nodeType?t=e.leftExpression:36===e.leftExpression.nodeType&&(t=e.leftExpression.memberName),t&&t.value===this._symbolName){const e=this._evaluator.getDeclarationsForNameNode(t);if(e){e.map(e=>this._evaluator.resolveAliasDeclaration(e,!0)).filter(e=>void 0!==e).some(e=>s.areDeclarationsSame(e,this._declaration))&&this._addIncomingCallForDeclaration(t)}}return!0}visitMemberAccess(e){if(p.throwIfCancellationRequested(this._cancellationToken),e.memberName.value===this._symbolName){const t=this._evaluator.getType(e.leftExpression);t&&l.doForSubtypes(t,t=>{let n=t;if(11===n.category&&(n=c.specializeType(n,void 0,!0)),8!==n.category)return;const i=l.lookUpObjectMember(n,e.memberName.value);if(!i)return;const r=this._evaluator.getTypeOfMember(i),o=i.symbol.getDeclarations();r&&o.some(e=>s.areDeclarationsSame(e,this._declaration))&&this._addIncomingCallForDeclaration(e.memberName)})}return!0}_addIncomingCallForDeclaration(e){const t=r.getExecutionScopeNode(e);if(!t)return;let n;if(37===t.nodeType){const e=d.convertOffsetsToRange(0,0,this._parseResults.tokenizerOutput.lines),t=u.getFileName(this._filePath);n={name:"(module) "+t,kind:i.SymbolKind.Module,uri:this._filePath,range:e,selectionRange:e}}else if(31===t.nodeType){const e=d.convertOffsetsToRange(t.start,t.start+t.length,this._parseResults.tokenizerOutput.lines);n={name:"(lambda)",kind:i.SymbolKind.Function,uri:this._filePath,range:e,selectionRange:e}}else{const e=d.convertOffsetsToRange(t.name.start,t.name.start+t.name.length,this._parseResults.tokenizerOutput.lines);n={name:t.name.value,kind:i.SymbolKind.Function,uri:this._filePath,range:e,selectionRange:e}}let s=this._incomingCalls.find(e=>e.from.uri===n.uri&&h.rangesAreEqual(e.from.range,n.range));s||(s={from:n,fromRanges:[]},this._incomingCalls.push(s));const o=d.convertOffsetsToRange(e.start,e.start+e.length,this._parseResults.tokenizerOutput.lines);s.fromRanges.push(o)}}function g(e,t){let n;switch(e.type){case 4:case 5:n=i.SymbolKind.Class;break;case 3:if(e.isMethod){const s=t.getTypeForDeclaration(e);n=s&&l.isProperty(s)?i.SymbolKind.Property:i.SymbolKind.Method}else n=i.SymbolKind.Function;break;default:n=i.SymbolKind.Function}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircularDependency=void 0;t.CircularDependency=class{constructor(){this._paths=[]}appendPath(e){this._paths.push(e)}getPaths(){return this._paths}normalizeOrder(){let e=0;this._paths.forEach((t,n)=>{t<this._paths[e]&&(e=n)}),0!==e&&(this._paths=this._paths.slice(e).concat(this._paths.slice(0,e)))}isEqual(e){if(e._paths.length!==this._paths.length)return!1;for(let t=0;t<this._paths.length;t++)if(this._paths[t]!==e._paths[t])return!1;return!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceFile=void 0;const i=n(27),s=n(0),r=n(32),o=n(16),a=n(2),c=n(26),l=n(68),p=n(64),u=n(4),d=n(19),h=n(1),f=n(69),m=n(24),g=n(125),y=n(126),_=n(127),T=n(128),v=n(72),b=n(129),C=n(131),S=n(132),x=n(22),k=n(25),E=n(73),w=n(7),A=n(144),D=n(146),I=n(147),P=n(148),F=n(149);t.SourceFile=class{constructor(e,t,n,s,a){this._isFileDeleted=!1,this._diagnosticVersion=0,this._fileContentsVersion=0,this._lastFileContentLength=void 0,this._lastFileContentHash=void 0,this._clientVersion=null,this._analyzedFileContentsVersion=-1,this._parseTreeNeedsCleaning=!1,this._isBindingInProgress=!1,this._parseDiagnostics=[],this._bindDiagnostics=[],this._checkerDiagnostics=[],this._diagnosticRuleSet=r.getBasicDiagnosticRuleSet(),this._circularDependencies=[],this._isBindingNeeded=!0,this._isCheckingNeeded=!0,this.fileSystem=e,this._console=s||new o.StandardConsole,this._filePath=t,this._isStubFile=t.endsWith(".pyi"),this._isThirdPartyImport=n;const c=u.getFileName(t);this._isTypingStubFile=this._isStubFile&&("typing.pyi"===c||"typing_extensions.pyi"===c),this._isTypingExtensionsStubFile=this._isStubFile&&"typing_extensions.pyi"===c,this._isBuiltInStubFile=!1,this._isStubFile&&(this._filePath.endsWith(u.normalizeSlashes("/collections/__init__.pyi"))||"builtins.pyi"===c||"_importlib_modulespec.pyi"===c||"dataclasses.pyi"===c||"abc.pyi"===c||"enum.pyi"===c||"types.pyi"===c)&&(this._isBuiltInStubFile=!0),this._logTracker=null!=a?a:new p.LogTracker(s,i.isMainThread?"FG":"BG")}getFilePath(){return this._filePath}getDiagnosticVersion(){return this._diagnosticVersion}isStubFile(){return this._isStubFile}getDiagnostics(e,t){if(this._diagnosticVersion===t)return;let n=!0;this._isThirdPartyImport&&(n=!1);let i=[];if(i=i.concat(this._parseDiagnostics,this._bindDiagnostics,this._checkerDiagnostics),e.diagnosticRuleSet.enableTypeIgnoreComments){const e=this._parseResults?this._parseResults.tokenizerOutput.typeIgnoreLines:{};Object.keys(e).length>0&&(i=i.filter(t=>{for(let n=t.range.start.line;n<=t.range.end.line;n++)if(e[n])return!1;return!0}))}if("none"!==e.diagnosticRuleSet.reportImportCycles&&this._circularDependencies.length>0){const t=c.convertLevelToCategory(e.diagnosticRuleSet.reportImportCycles);this._circularDependencies.forEach(e=>{i.push(new c.Diagnostic(t,x.Localizer.Diagnostic.importCycleDetected()+"\n"+e.getPaths().map(e=>"  "+e).join("\n"),h.getEmptyRange()))})}return void 0!==this._hitMaxImportDepth&&i.push(new c.Diagnostic(0,x.Localizer.Diagnostic.importDepthExceeded().format({depth:this._hitMaxImportDepth}),h.getEmptyRange())),e.ignore.find(e=>e.regExp.test(this._filePath))&&(i=[]),e.diagnosticRuleSet.enableTypeIgnoreComments&&this._parseResults&&this._parseResults.tokenizerOutput.typeIgnoreAll&&(i=[]),n||(i=i.filter(e=>3===e.category)),i}getImports(){return this._imports||[]}getBuiltinsImport(){return this._builtinsImport}getModuleSymbolTable(){return this._moduleSymbolTable}getModuleDocString(){return this._binderResults?this._binderResults.moduleDocString:void 0}didContentsChangeOnDisk(){if(null!==this._clientVersion)return!1;if(void 0===this._lastFileContentLength)return!1;try{const e=this.fileSystem.readFileSync(this._filePath,"utf8");if(e.length!==this._lastFileContentLength)return!0;if(d.hashString(e)!==this._lastFileContentHash)return!0}catch(e){return!0}return!1}markDirty(){this._fileContentsVersion++,this._isCheckingNeeded=!0,this._moduleSymbolTable=void 0,this._binderResults=void 0}markReanalysisRequired(){this._isCheckingNeeded=!0,this._parseResults&&this._parseResults.containsWildcardImport&&(this._parseTreeNeedsCleaning=!0,this._isBindingNeeded=!0,this._moduleSymbolTable=void 0,this._binderResults=void 0)}getClientVersion(){return this._clientVersion}getFileContents(){return this._fileContents}setClientVersion(e,t){this._clientVersion=e,null===e?this._fileContents=void 0:(void 0!==this._fileContents&&this._fileContents!==t&&this.markDirty(),this._fileContents=t)}prepareForClose(){}isFileDeleted(){return this._isFileDeleted}isParseRequired(){return this._analyzedFileContentsVersion!==this._fileContentsVersion}isBindingRequired(){return!this._isBindingInProgress&&(!!this.isParseRequired()||this._isBindingNeeded)}isCheckingRequired(){return!!this.isBindingRequired()||this._isCheckingNeeded}getParseResults(){if(!this.isParseRequired())return this._parseResults}addCircularDependency(e){let t=!1;this._circularDependencies.length<4&&(this._circularDependencies.some(t=>t.isEqual(e))||(this._circularDependencies.push(e),t=!0)),t&&this._diagnosticVersion++}setHitMaxImportDepth(e){this._hitMaxImportDepth=e}parse(e,t){return this._logTracker.log("parsing: "+this._filePath,n=>{if(!this.isParseRequired())return n.add("cache hit"),!1;const i=new l.DiagnosticSink;let s=this._fileContents;if(null===this._clientVersion)try{m.timingStats.readFileTime.timeOperation(()=>{s=this.fileSystem.readFileSync(this._filePath,"utf8"),this._lastFileContentLength=s.length,this._lastFileContentHash=d.hashString(s)})}catch(e){i.addError("Source file could not be read",h.getEmptyRange()),s="",this.fileSystem.existsSync(this._filePath)||(this._isFileDeleted=!0)}const r=e.findExecEnvironment(this._filePath),o=new E.ParseOptions;this._filePath.endsWith("pyi")&&(o.isStubFile=!0),o.pythonVersion=r.pythonVersion;try{const n=(new E.Parser).parseSourceFile(s,o,i);a.assert(void 0!==n&&void 0!==n.tokenizerOutput),this._parseResults=n,m.timingStats.resolveImportsTime.timeOperation(()=>{[this._imports,this._builtinsImport,this._typingModulePath,this._collectionsModulePath]=this._resolveImports(t,n.importedModules,r),this._parseDiagnostics=i.fetchAndClear()});const c=void 0!==e.strict.find(e=>e.regExp.test(this._filePath));this._diagnosticRuleSet=I.getFileLevelDirectives(this._parseResults.tokenizerOutput.tokens,e.diagnosticRuleSet,c)}catch(e){const t=(e.stack?e.stack.toString():void 0)||("string"==typeof e.message?e.message:void 0)||JSON.stringify(e);this._console.error(`An internal error occurred while parsing ${this.getFilePath()}: `+t),this._parseResults={text:"",parseTree:k.ModuleNode.create({start:0,length:0}),importedModules:[],futureImports:new Map,tokenizerOutput:{tokens:new f.TextRangeCollection([]),lines:new f.TextRangeCollection([]),typeIgnoreAll:!1,typeIgnoreLines:{},predominantEndOfLineSequence:"\n",predominantTabSequence:"    ",predominantSingleQuoteCharacter:"'"},containsWildcardImport:!1},this._imports=void 0,this._builtinsImport=void 0;const n=new l.DiagnosticSink;n.addError("An internal error occurred while parsing file",h.getEmptyRange()),this._parseDiagnostics=n.fetchAndClear()}return this._analyzedFileContentsVersion=this._fileContentsVersion,this._isBindingNeeded=!0,this._isCheckingNeeded=!0,this._parseTreeNeedsCleaning=!1,this._hitMaxImportDepth=void 0,this._diagnosticVersion++,!0})}getDefinitionsForPosition(e,t,n,i){if(this._parseResults)return y.DefinitionProvider.getDefinitionsForPosition(e,this._parseResults,t,n,i)}getDeclarationForPosition(e,t,n,i){if(this._parseResults)return C.ReferencesProvider.getDeclarationForPosition(e,this._parseResults,this._filePath,t,n,i)}addReferences(e,t,n,i){this._parseResults&&C.ReferencesProvider.addReferences(this._parseResults,this._filePath,e,t,n,i)}addHierarchicalSymbolsForDocument(e,t,n){this._parseResults&&T.DocumentSymbolProvider.addHierarchicalSymbolsForDocument(e,this._parseResults,t,n)}addSymbolsForDocument(e,t,n,i){this._parseResults&&T.DocumentSymbolProvider.addSymbolsForDocument(e,n,this._filePath,this._parseResults,t,i)}getHoverForPosition(e,t,n,i){if(!this._isBindingNeeded&&this._parseResults)return v.HoverProvider.getHoverForPosition(e,this._parseResults,t,n,i)}getDocumentHighlight(e,t,n,i){if(!this._isBindingNeeded&&this._parseResults)return _.DocumentHighlightProvider.getDocumentHighlight(this._parseResults,t,n,i)}getSignatureHelpForPosition(e,t,n,i){if(this._parseResults)return S.SignatureHelpProvider.getSignatureHelpForPosition(this._parseResults,e,n,i)}getCompletionsForPosition(e,t,n,i,s,r,o,a,c){if(!this._parseResults)return;if(void 0===this._fileContents)return;return new g.CompletionProvider(t,this._parseResults,this._fileContents,i,e,this._filePath,n,s,r,o,a,c).getCompletionsForPosition()}resolveCompletionItem(e,t,n,i,s,r,o,a){if(!this._parseResults||void 0===this._fileContents)return;const c=o.data;new g.CompletionProvider(c.workspacePath,this._parseResults,this._fileContents,t,c.position,this._filePath,e,n,i,s,r,a).resolveCompletionItem(o)}performQuickAction(e,t,n){if(this._parseResults&&void 0!==this._fileContents)return b.performQuickAction(e,t,this._parseResults,n)}bind(e,t,n){return a.assert(!this.isParseRequired()),a.assert(this.isBindingRequired()),a.assert(!this._isBindingInProgress),a.assert(void 0!==this._parseResults),this._logTracker.log("binding: "+this._filePath,()=>{try{m.timingStats.bindTime.timeOperation(()=>{this._cleanParseTreeIfRequired();const i=this._buildFileInfo(e,this._parseResults.text,t,n);w.setFileInfo(this._parseResults.parseTree,i);const s=new A.Binder(i);if(this._isBindingInProgress=!0,this._binderResults=s.bindModule(this._parseResults.parseTree),e.internalTestMode){(new F.TestWalker).walk(this._parseResults.parseTree)}this._bindDiagnostics=i.diagnosticSink.fetchAndClear();const r=w.getScope(this._parseResults.parseTree);a.assert(void 0!==r),this._moduleSymbolTable=r.symbolTable})}catch(e){const t=(e.stack?e.stack.toString():void 0)||("string"==typeof e.message?e.message:void 0)||JSON.stringify(e);this._console.error(`An internal error occurred while performing name binding for ${this.getFilePath()}: `+t);const n=new l.DiagnosticSink;n.addError("An internal error occurred while performing name binding",h.getEmptyRange()),this._bindDiagnostics=n.fetchAndClear()}finally{this._isBindingInProgress=!1}this._diagnosticVersion++,this._isCheckingNeeded=!0,this._isBindingNeeded=!1})}check(e){return a.assert(!this.isParseRequired()),a.assert(!this.isBindingRequired()),a.assert(!this._isBindingInProgress),a.assert(this.isCheckingRequired()),a.assert(void 0!==this._parseResults),this._logTracker.log("checking: "+this._filePath,()=>{try{m.timingStats.typeCheckerTime.timeOperation(()=>{new D.Checker(this._parseResults.parseTree,e).check(),this._isCheckingNeeded=!1;const t=w.getFileInfo(this._parseResults.parseTree);this._checkerDiagnostics=t.diagnosticSink.fetchAndClear()})}catch(e){if(!s.OperationCanceledException.is(e)){const t=(e.stack?e.stack.toString():void 0)||("string"==typeof e.message?e.message:void 0)||JSON.stringify(e);this._console.error(`An internal error occurred while while performing type checking for ${this.getFilePath()}: `+t);const n=new l.DiagnosticSink;n.addError("An internal error occurred while performing type checking",h.getEmptyRange()),this._checkerDiagnostics=n.fetchAndClear(),this._isCheckingNeeded=!1}throw e}finally{this._circularDependencies=[],this._diagnosticVersion++}})}_buildFileInfo(e,t,n,i){a.assert(void 0!==this._parseResults);const s=new l.TextRangeDiagnosticSink(this._parseResults.tokenizerOutput.lines);return{importLookup:n,futureImports:this._parseResults.futureImports,builtinsScope:i,typingModulePath:this._typingModulePath,collectionsModulePath:this._collectionsModulePath,diagnosticSink:s,executionEnvironment:e.findExecEnvironment(this._filePath),diagnosticRuleSet:this._diagnosticRuleSet,fileContents:t,lines:this._parseResults.tokenizerOutput.lines,filePath:this._filePath,isStubFile:this._isStubFile,isTypingStubFile:this._isTypingStubFile,isTypingExtensionsStubFile:this._isTypingExtensionsStubFile,isBuiltInStubFile:this._isBuiltInStubFile,accessedSymbolMap:new Map}}_cleanParseTreeIfRequired(){if(this._parseResults&&this._parseTreeNeedsCleaning){new P.ParseTreeCleanerWalker(this._parseResults.parseTree).clean(),this._parseTreeNeedsCleaning=!1}}_resolveImports(e,t,n){const i=[];let s=e.resolveImport(this._filePath,n,{leadingDots:0,nameParts:["builtins"],importedSymbols:void 0});0===s.resolvedPaths.length||s.resolvedPaths[0]!==this.getFilePath()?i.push(s):s=void 0;const r=e.resolveImport(this._filePath,n,{leadingDots:0,nameParts:["typing"],importedSymbols:void 0});let o,a;0!==r.resolvedPaths.length&&r.resolvedPaths[0]===this.getFilePath()||(i.push(r),o=r.resolvedPaths[0]);for(const s of t){const t=e.resolveImport(this._filePath,n,{leadingDots:s.leadingDots,nameParts:s.nameParts,importedSymbols:s.importedSymbols});t.isImportFound&&t.isTypeshedFile&&s.nameParts.length>=1&&"collections"===s.nameParts[0]&&(a=t.resolvedPaths[t.resolvedPaths.length-1]),i.push(t),w.setImportInfo(s.nameNode,t)}return[i,s,o,a]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionProvider=void 0;const i=n(10),s=n(7),r=n(70),o=n(6),a=n(15),c=n(31),l=n(71),p=n(21),u=n(17),d=n(0),h=n(5),f=n(19),m=n(1),g=n(1),y=n(25),_=n(65),T=["True","False","None","and","or","await","not","is","lambda","yield","assert","async","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","nonlocal","pass","raise","return","try","while","yield"];var v;!function(e){e[e.LikelyKeyword=0]="LikelyKeyword",e[e.RecentImportModuleName=1]="RecentImportModuleName",e[e.ImportModuleName=2]="ImportModuleName",e[e.LiteralValue=3]="LiteralValue",e[e.NamedParameter=4]="NamedParameter",e[e.RecentKeywordOrSymbol=5]="RecentKeywordOrSymbol",e[e.RecentAutoImport=6]="RecentAutoImport",e[e.Keyword=7]="Keyword",e[e.NormalSymbol=8]="NormalSymbol",e[e.PrivateSymbol=9]="PrivateSymbol",e[e.DunderSymbol=10]="DunderSymbol",e[e.AutoImport=11]="AutoImport"}(v||(v={}));class b{constructor(e,t,n,i,s,r,o,a,c,l,p,u){this._workspacePath=e,this._parseResults=t,this._fileContents=n,this._importResolver=i,this._position=s,this._filePath=r,this._configOptions=o,this._importLookup=a,this._evaluator=c,this._sourceMapper=l,this._moduleSymbolsCallback=p,this._cancellationToken=u}getCompletionsForPosition(){const e=h.convertPositionToOffset(this._position,this._parseResults.tokenizerOutput.lines);if(void 0===e)return;let t=o.findNodeByOffset(this._parseResults.parseTree,e);const n=t,i=t?o.getNodeDepth(t):0;if(!n||39!==n.nodeType){let s=e;for(;s>=0;){s--;const e=this._fileContents.substr(s,1);if("("===e||"\n"===e)break;const r=o.findNodeByOffset(this._parseResults.parseTree,s);if(r&&r!==n){o.getNodeDepth(r)>i&&(t=r);break}}}if(void 0===t)return;const s=this._parseResults.tokenizerOutput.lines.getItemAt(this._position.line),r=this._fileContents.substr(s.start,s.length),a=r.substr(0,this._position.character),c=r.substr(this._position.character),l=a.search(/\w+$/),p=l>=0?a.substr(l):"";if(this._isWithinComment(e,a))return;let u=t;for(;u&&0!==u.nodeType;)u=u.parent;let f=u||t;for(;;){if(d.throwIfCancellationRequested(this._cancellationToken),50===f.nodeType)return this._getStringLiteralCompletions(f,p,a,c);if(49===f.nodeType)return;if(38===f.nodeType)return this._getImportModuleCompletions(f);if(0===f.nodeType)return this._getExpressionErrorCompletions(f,p,a,c);if(36===f.nodeType)return this._getMemberAccessCompletions(f.leftExpression,p);if(39===f.nodeType){if(f.parent&&38===f.parent.nodeType)return this._getImportModuleCompletions(f.parent);if(f.parent&&23===f.parent.nodeType){const e=f.parent.parent;if(e&&22===e.nodeType)return f.parent.name===f?this._getImportFromCompletions(e,p):this._getImportFromCompletions(e,"")}else if(f.parent&&36===f.parent.nodeType)return this._getMemberAccessCompletions(f.parent.leftExpression,p)}if(22===f.nodeType)return this._getImportFromCompletions(f,p);if(y.isExpressionNode(f))return this._getExpressionCompletions(f,p,a,c);if(51===f.nodeType||37===f.nodeType)return this._getStatementCompletions(f,p,a,c);if(!f.parent)break;f=f.parent}}resolveCompletionItem(e){d.throwIfCancellationRequested(this._cancellationToken);const t=e.data,n=e.label;let i="";t.autoImportText&&(i=t.autoImportText);const s=b._mostRecentCompletions.findIndex(e=>e.label===n&&e.autoImportText===i);s>0&&(b._mostRecentCompletions=b._mostRecentCompletions.splice(s,1)),0!==s&&b._mostRecentCompletions.unshift({label:n,autoImportText:i}),b._mostRecentCompletions.length>128&&b._mostRecentCompletions.pop(),t.symbolId&&(this._itemToResolve=e,this.getCompletionsForPosition())}_isWithinComment(e,t){const n=this._parseResults.tokenizerOutput.tokens.getItemAtPosition(e);if(n<0)return!1;const i=this._parseResults.tokenizerOutput.tokens.getItemAt(n);return!(e>i.start&&e<g.TextRange.getEnd(i))&&!!t.match(/#/)}_getExpressionErrorCompletions(e,t,n,i){switch(e.category){case 0:return this._createSingleKeywordCompletionList("in");case 1:return this._createSingleKeywordCompletionList("else");case 2:case 3:case 4:return this._getExpressionCompletions(e,t,n,i);case 7:if(e.child&&y.isExpressionNode(e.child))return this._getMemberAccessCompletions(e.child,t);break;case 10:if(e.child&&39===e.child.nodeType)return this._getMethodOverrideCompletions(e.child)}}_createSingleKeywordCompletionList(e){const t=i.CompletionItem.create(e);return t.kind=i.CompletionItemKind.Keyword,t.sortText=this._makeSortText(v.LikelyKeyword,e),i.CompletionList.create([t])}_getMethodOverrideCompletions(e){const t=o.getEnclosingClass(e,!0);if(!t)return;const n=this._evaluator.getTypeOfClass(t);if(!n)return;const s=new Map;for(let e=n.classType.details.mro.length-1;e>0;e--){const t=n.classType.details.mro[e];7===t.category&&u.getMembersForClass(t,s,!1)}const r=i.CompletionList.create();return s.forEach((t,n)=>{const s=c.getLastTypedDeclaredForSymbol(t);if(s&&3===s.type){if(f.computeCompletionSimilarity(e.value,n)>.25){const o={start:{line:this._position.line,character:this._position.character-e.length},end:{line:this._position.line,character:this._position.character}},a=this._printMethodSignature(s.node)+":",c=i.TextEdit.replace(o,a);this._addSymbol(n,t,e.value,r,void 0,c)}}}),r}_printMethodSignature(e){const t=e.parameters.map(e=>{let t="";return 1===e.category?t+="*":2===e.category&&(t+="**"),e.name&&(t+=e.name.value),e.typeAnnotation&&(t+=": "+o.printExpression(e.typeAnnotation)),t}).join(", ");let n=e.name.value+"("+t+")";return e.returnTypeAnnotation&&(n+=" -> "+o.printExpression(e.returnTypeAnnotation)),n}_getMemberAccessCompletions(e,t){const n=this._evaluator.getType(e),s=new Map;n&&u.doForSubtypes(n,e=>{let t=e;11===e.category&&(t=u.specializeType(e,void 0,!0)),8===t.category?u.getMembersForClass(t.classType,s,!0):7===t.category?u.getMembersForClass(t,s,!1):9===t.category&&u.getMembersForModule(t,s)});const r=i.CompletionList.create();return this._addSymbolsForSymbolTable(s,e=>!0,t,r),r}_getStatementCompletions(e,t,n,i){return this._getExpressionCompletions(e,t,n,i)}_getExpressionCompletions(e,t,n,s){if(41===e.nodeType)return;const r=i.CompletionList.create();if(this._addCallArgumentCompletions(e,t,n,s,r),this._addSymbols(e,t,r),this._findMatchingKeywords(T,t).map(e=>{const t=i.CompletionItem.create(e);t.kind=i.CompletionItemKind.Keyword,r.items.push(t),t.sortText=this._makeSortText(v.Keyword,e)}),t.startsWith("_")||this._itemToResolve||this._getAutoImportCompletions(t,r),0===e.nodeType)if(3===e.category)this._getIndexStringLiteral(e,r);else if(2===e.category&&e.parent&&3===e.parent.nodeType){const t=this._evaluator.getDeclaredTypeForExpression(e.parent.leftExpression);t&&this._addLiteralValuesForTargetType(t,n,s,r)}return r}_addCallArgumentCompletions(e,t,n,i,s){const r=h.convertPositionToOffset(this._position,this._parseResults.tokenizerOutput.lines),o=this._evaluator.getCallSignatureInfo(e,r,this._parseResults.tokenizerOutput.tokens);if(o){const e=h.convertOffsetToPosition(o.callNode.leftExpression.start+o.callNode.leftExpression.length,this._parseResults.tokenizerOutput.lines);m.comparePositions(this._position,e)>0&&(this._addNamedParameters(o,t,s),this._addLiteralValuesForArgument(o,n,i,s))}}_addLiteralValuesForArgument(e,t,n,i){e.signatures.forEach(e=>{if(!e.activeParam)return;const s=e.type,r=s.details.parameters.indexOf(e.activeParam);if(r<0)return;const o=s.details.parameters[r].type;this._addLiteralValuesForTargetType(o,t,n,i)})}_addLiteralValuesForTargetType(e,t,n,i){const s=this._getQuoteValueFromPriorText(t);u.doForSubtypes(e,e=>{8===e.category&&p.ClassType.isBuiltIn(e.classType,"str")&&void 0!==e.classType.literalValue&&this._addStringLiteralToCompletionList(e.classType.literalValue,s.stringValue,n,s.quoteCharacter,i)})}_getStringLiteralCompletions(e,t,n,s){let r=e.parent;if(!r||49!==r.nodeType||r.strings.length>1)return;if(r=r.parent,!r)return;const o=i.CompletionList.create();if(25===r.nodeType){if(r=r.parent,!r||24!==r.nodeType)return;const e=this._evaluator.getType(r.baseExpression);if(!e||8!==e.category)return;const t=e.classType;if(!p.ClassType.isTypedDictClass(t))return;const i=this._evaluator.getTypedDictMembersForClass(t),a=this._getQuoteValueFromPriorText(n);i.forEach((e,t)=>{this._addStringLiteralToCompletionList(t,a.stringValue,s,a.quoteCharacter,o)})}else if(3===r.nodeType){const e=this._evaluator.getDeclaredTypeForExpression(r.leftExpression);e&&this._addLiteralValuesForTargetType(e,n,s,o)}else this._addCallArgumentCompletions(e,t,n,s,o);return o}_getQuoteValueFromPriorText(e){const t=e.lastIndexOf("'"),n=e.lastIndexOf('"');let i=this._parseResults.tokenizerOutput.predominantSingleQuoteCharacter,s=void 0;return t>n?(i="'",s=e.substr(t+1)):n>t&&(i='"',s=e.substr(n+1)),{stringValue:s,quoteCharacter:i}}_getIndexStringLiteral(e,t){if(!e.parent||25!==e.parent.nodeType)return;const n=e.parent;if(!n.parent||24!==n.parent.nodeType)return;const i=this._evaluator.getType(n.parent.baseExpression);if(!i||8!==i.category)return;const s=i.classType;p.ClassType.isTypedDictClass(s)&&this._evaluator.getTypedDictMembersForClass(s).forEach((e,n)=>{this._addStringLiteralToCompletionList(n,void 0,void 0,this._parseResults.tokenizerOutput.predominantSingleQuoteCharacter,t)})}_addStringLiteralToCompletionList(e,t,n,s,r){if(f.computeCompletionSimilarity(t||"",e)>.25){const o=`${s}${e}${s}`,a=i.CompletionItem.create(o);a.kind=i.CompletionItemKind.Text,a.sortText=this._makeSortText(v.LiteralValue,o);let c=this._position.character;void 0!==t&&(c-=t.length+1);let l=this._position.character;void 0!==n&&n.startsWith(s)&&l++;const p={start:{line:this._position.line,character:c},end:{line:this._position.line,character:l}};a.textEdit=i.TextEdit.replace(p,o),r.items.push(a)}}_getAutoImportCompletions(e,t){const n=this._moduleSymbolsCallback(),s=new _.AutoImporter(this._configOptions,this._filePath,this._importResolver,this._parseResults,n);for(const n of s.getAutoImportCandidates(e,.25,t.items.filter(e=>{var t;return!(null===(t=e.data)||void 0===t?void 0:t.autoImport)}).map(e=>e.label),void 0,this._cancellationToken))n.symbol?this._addSymbol(n.name,n.symbol,e,t,n.source,void 0,n.edits):this._addNameToCompletionList(n.name,i.CompletionItemKind.Module,e,t,n.name,"",n.isImportFrom?"Auto-import from "+n.source:"Auto-import "+n.source,void 0,n.edits)}_getImportFromCompletions(e,t){if(e.isWildcardImport)return;const n=s.getImportInfo(e.module);if(!n)return;const r=i.CompletionList.create(),o=n.resolvedPaths.length>0?n.resolvedPaths[n.resolvedPaths.length-1]:"",a=this._importLookup(o);return a&&this._addSymbolsForSymbolTable(a.symbolTable,t=>!e.imports.find(e=>e.name.value===t),t,r),n.implicitImports.forEach(n=>{e.imports.find(e=>e.name.value===n.name)||this._addNameToCompletionList(n.name,i.CompletionItemKind.Module,t,r)}),r}_findMatchingKeywords(e,t){return e.filter(e=>!t||f.computeCompletionSimilarity(t,e)>.25)}_addNamedParameters(e,t,n){const s=new Map;e.signatures.forEach(e=>{this._addNamedParametersToMap(e.type,s)}),e.callNode.arguments.forEach(e=>{e.name&&s.delete(e.name.value)}),s.forEach(e=>{if(f.computeCompletionSimilarity(t,e)>.25){const t=i.CompletionItem.create(e);t.kind=i.CompletionItemKind.Variable;const s={workspacePath:this._workspacePath,filePath:this._filePath,position:this._position};t.data=s,t.sortText=this._makeSortText(v.NamedParameter,e),n.items.push(t)}})}_addNamedParametersToMap(e,t){e.details.parameters.forEach(e=>{e.name&&!e.isNameSynthesized&&(a.isPrivateOrProtectedName(e.name)||t.set(e.name,e.name))})}_addSymbols(e,t,n){let i=e;for(;i;){let e=s.getScope(i);if(e){for(;e;)this._addSymbolsForSymbolTable(e.symbolTable,()=>!0,t,n),e=e.parent;break}i=i.parent}}_addSymbolsForSymbolTable(e,t,n,i){e.forEach((e,s)=>{!e.isExternallyHidden()&&t(s)&&this._addSymbol(s,e,n,i)})}_addSymbol(e,t,n,s,o,a,p){let u=c.getLastTypedDeclaredForSymbol(t);if(!u){const e=t.getDeclarations();e.length>0&&(u=e[e.length-1])}if(u){let c,d=i.CompletionItemKind.Variable;if(u=this._evaluator.resolveAliasDeclaration(u,!0),u&&(d=this._convertDeclarationTypeToItemKind(u),this._itemToResolve)){if(this._itemToResolve.data.symbolId===t.id){const n=this._evaluator.getEffectiveTypeOfSymbol(t);if(n){let t,s;switch(u.type){case 0:case 1:case 2:t=e+": "+this._evaluator.printType(n,!1);break;case 3:t=6===n.category?n.overloads.map(t=>e+this._evaluator.printType(t,!1)).join("\n"):e+": "+this._evaluator.printType(n,!1);break;case 4:case 5:t="class "+e+"()";break;case 6:if(t=e,u.path){const e=this._importLookup(u.path);e&&(s=e.docString)}break;default:t=e}9===n.category?s=l.getModuleDocString(n,u,this._sourceMapper):7===n.category?s=l.getClassDocString(n,u,this._sourceMapper):5===n.category?s=l.getFunctionDocStringFromType(n,this._sourceMapper):6===n.category?s=l.getOverloadedFunctionDocStrings(n,u,this._sourceMapper).find(e=>e):3===u.type&&(s=l.getFunctionDocStringFromDeclaration(u,this._sourceMapper));let o="```python\n"+t+"\n```\n";s&&(o+="---\n",o+=r.convertDocStringToMarkdown(s)),o&&(this._itemToResolve.documentation={kind:i.MarkupKind.Markdown,value:o})}}}o&&(c="Auto-import from "+o),this._addNameToCompletionList(e,d,n,s,void 0,void 0,c,a,p,t.id)}else{if(t.getSynthesizedType()){const r=i.CompletionItemKind.Variable;this._addNameToCompletionList(e,r,n,s,void 0,void 0,void 0,a,p,t.id)}}}_addNameToCompletionList(e,t,n,s,o,c,l,p,u,d){if(f.computeCompletionSimilarity(n,e)>.25){const h=i.CompletionItem.create(e);h.kind=t;const f={workspacePath:this._workspacePath,filePath:this._filePath,position:this._position};h.data=f,l?(h.sortText=this._makeSortText(v.AutoImport,e,l),f.autoImportText=l):a.isDunderName(e)?h.sortText=this._makeSortText(v.DunderSymbol,e):""===n&&a.isPrivateOrProtectedName(e)?h.sortText=this._makeSortText(v.PrivateSymbol,e):h.sortText=this._makeSortText(v.NormalSymbol,e),void 0!==d&&(f.symbolId=d);let m="";l&&(m+=l,m+="\n\n",h.data.autoImport=l),o&&(m+="```python\n"+o+"\n```\n"),c&&(m+="---\n",m+=r.convertDocStringToMarkdown(c)),m&&(h.documentation={kind:i.MarkupKind.Markdown,value:m}),p&&(h.textEdit=p),u&&(h.additionalTextEdits=u.map(e=>({range:{start:{line:e.range.start.line,character:e.range.start.character},end:{line:e.range.end.line,character:e.range.end.character}},newText:e.replacementText}))),s.items.push(h)}}_getRecentListIndex(e,t){return b._mostRecentCompletions.findIndex(n=>n.label===e&&n.autoImportText===t)}_makeSortText(e,t,n=""){const i=this._getRecentListIndex(t,n);return i>=0&&(e===v.AutoImport?e=v.RecentAutoImport:e===v.ImportModuleName?e=v.RecentImportModuleName:e!==v.Keyword&&e!==v.NormalSymbol&&e!==v.PrivateSymbol&&e!==v.DunderSymbol||(e=v.RecentKeywordOrSymbol)),this._formatInteger(e,2)+"."+this._formatInteger(i,4)+"."+t}_formatInteger(e,t){const n="0".charCodeAt(0);let i="";for(let s=0;s<t;s++){let t=Math.floor(e%10);t<0&&(t=9),i=String.fromCharCode(t+n)+i,e=Math.floor(e/10)}return i}_convertDeclarationTypeToItemKind(e){const t=this._evaluator.resolveAliasDeclaration(e,!0);if(!t)return i.CompletionItemKind.Variable;switch(t.type){case 0:return i.CompletionItemKind.Class;case 2:return i.CompletionItemKind.Variable;case 1:return t.isConstant||t.isFinal?i.CompletionItemKind.Constant:i.CompletionItemKind.Variable;case 3:return t.isMethod?i.CompletionItemKind.Method:i.CompletionItemKind.Function;case 4:case 5:return i.CompletionItemKind.Class;case 6:return i.CompletionItemKind.Module}}_getImportModuleCompletions(e){const t=this._configOptions.findExecEnvironment(this._filePath),n={leadingDots:e.leadingDots,hasTrailingDot:e.hasTrailingDot,nameParts:e.nameParts.map(e=>e.value),importedSymbols:[]},s=this._importResolver.getCompletionSuggestions(this._filePath,t,n,.25),r=i.CompletionList.create();if(!e.hasTrailingDot&&e.parent&&22===e.parent.nodeType&&e.parent.missingImportKeyword){const e="import",t=i.CompletionItem.create(e);t.kind=i.CompletionItemKind.Keyword,r.items.push(t),t.sortText=this._makeSortText(v.Keyword,e)}return s.forEach(e=>{const t=i.CompletionItem.create(e);t.kind=i.CompletionItemKind.Module,r.items.push(t),t.sortText=this._makeSortText(v.ImportModuleName,e)}),r}}t.CompletionProvider=b,b._mostRecentCompletions=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefinitionProvider=void 0;const i=n(6),s=n(36),r=n(0),o=n(5),a=n(1);t.DefinitionProvider=class{static getDefinitionsForPosition(e,t,n,a,c){r.throwIfCancellationRequested(c);const l=o.convertPositionToOffset(n,t.tokenizerOutput.lines);if(void 0===l)return;const p=i.findNodeByOffset(t.parseTree,l);if(void 0===p)return;const u=[];if(39===p.nodeType){const t=a.getDeclarationsForNameNode(p);t&&t.forEach(t=>{const n=a.resolveAliasDeclaration(t,!0);if(n&&n.path&&(this._addIfUnique(u,{path:n.path,range:n.range}),s.isStubFile(n.path))){const t=e.findDeclarations(n);for(const e of t)e&&e.path&&this._addIfUnique(u,{path:e.path,range:e.range})}})}return u.length>0?u:void 0}static _addIfUnique(e,t){for(const n of e)if(n.path===t.path&&a.rangesAreEqual(n.range,t.range))return;e.push(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentHighlightProvider=void 0;const i=n(10),s=n(7),r=n(20),o=n(6),a=n(11),c=n(0),l=n(5),p=n(1);class u extends a.ParseTreeWalker{constructor(e,t,n,i,s,r){super(),this._symbolName=e,this._declarations=t,this._parseResults=n,this._highlightResults=i,this._evaluator=s,this._cancellationToken=r}findHighlights(){this.walk(this._parseResults.parseTree)}walk(e){s.isCodeUnreachable(e)||super.walk(e)}visitModuleName(e){return!1}visitName(e){if(c.throwIfCancellationRequested(this._cancellationToken),e.value!==this._symbolName)return!1;if(this._declarations.length>0){const t=this._evaluator.getDeclarationsForNameNode(e);t&&t.length>0&&t.some(e=>this._resultsContainsDeclaration(e))&&this._addResult(e)}else this._addResult(e);return!0}_addResult(e){this._highlightResults.push({kind:this._isWriteAccess(e)?i.DocumentHighlightKind.Write:i.DocumentHighlightKind.Read,range:{start:l.convertOffsetToPosition(e.start,this._parseResults.tokenizerOutput.lines),end:l.convertOffsetToPosition(p.TextRange.getEnd(e),this._parseResults.tokenizerOutput.lines)}})}_isWriteAccess(e){let t=e,n=t.parent;for(;n;){switch(n.nodeType){case 3:case 5:return t===n.leftExpression;case 4:return t===n.name;case 14:return!0;case 27:return t===n.targetExpression;case 21:return t===n.alias||n.module.nameParts.length>0&&t===n.module.nameParts[0];case 23:return t===n.alias||!n.alias&&t===n.name;case 36:if(t!==n.memberName)return!1;break;case 26:return t===n.name;case 59:return n.withItems.some(e=>e===t);case 34:return t===n.targetExpression;case 55:if(t===n.typeAnnotation)return!1;break;case 29:case 10:case 37:return!1}t=n,n=n.parent}return!1}_resultsContainsDeclaration(e){const t=this._evaluator.resolveAliasDeclaration(e,!1);if(!t)return!1;if(this._declarations.some(e=>r.areDeclarationsSame(e,t)))return!0;const n=this._evaluator.resolveAliasDeclaration(t,!0);return!(!n||n===t)&&this._declarations.some(e=>r.areDeclarationsSame(e,n))}}class d extends a.ParseTreeWalker{constructor(e,t,n,i){super(),this._stringValue=e,this._parseResults=t,this._highlightResults=n,this._cancellationToken=i}findHighlights(){this.walk(this._parseResults.parseTree)}walk(e){s.isCodeUnreachable(e)||super.walk(e)}visitString(e){return c.throwIfCancellationRequested(this._cancellationToken),e.value===this._stringValue&&(this._highlightResults.push({kind:i.DocumentHighlightKind.Text,range:{start:l.convertOffsetToPosition(e.start,this._parseResults.tokenizerOutput.lines),end:l.convertOffsetToPosition(p.TextRange.getEnd(e),this._parseResults.tokenizerOutput.lines)}}),!0)}}t.DocumentHighlightProvider=class{static getDocumentHighlight(e,t,n,i){c.throwIfCancellationRequested(i);const s=l.convertPositionToOffset(t,e.tokenizerOutput.lines);if(void 0===s)return;const r=o.findNodeByOffset(e.parseTree,s);if(void 0===r)return;const a=[];if(39===r.nodeType){const t=n.getDeclarationsForNameNode(r)||[],s=[];t.forEach(e=>{const t=n.resolveAliasDeclaration(e,!0);t&&s.push(t)}),new u(r.value,s,e,a,n,i).findHighlights()}else if(50===r.nodeType){new d(r.value,e,a,i).findHighlights()}return a.length>0?a:void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentSymbolProvider=void 0;const i=n(10),s=n(60),r=n(7),o=n(6),a=n(11),c=n(31),l=n(17),p=n(0),u=n(5),d=n(19);class h extends a.ParseTreeWalker{constructor(e,t,n,i,s,r){super(),this._filePath=e,this._parseResults=t,this._symbolResults=n,this._query=i,this._evaluator=s,this._cancellationToken=r}findSymbols(){this.walk(this._parseResults.parseTree)}visitModule(e){return this._addSymbolInformationForScope(e,""),!0}visitClass(e){const t=e.name.value;return this._addSymbolInformationForScope(e,t),!0}visitFunction(e){const t=e.name.value;let n=t;const i=o.getEnclosingClass(e,!0);return i&&(n=i.name.value+"."+t),this._addSymbolInformationForScope(e,n),!0}visitListComprehension(e){return this._addSymbolInformationForScope(e),!0}_addSymbolInformationForScope(e,t){p.throwIfCancellationRequested(this._cancellationToken);const n=r.getScope(e);n&&n.symbolTable.forEach((e,n)=>{if(!e.isIgnoredForProtocolMatch()){let i=c.getLastTypedDeclaredForSymbol(e);!i&&e.hasDeclarations()&&(i=e.getDeclarations()[0]),i&&this._addSymbolInformationFromDeclaration(n,i,t)}})}_addSymbolInformationFromDeclaration(e,t,n){if(t.path!==this._filePath)return;if(void 0!==this._query){if(d.computeCompletionSimilarity(this._query,e)<.5)return}if(!this._evaluator.resolveAliasDeclaration(t,!0))return;const i={uri:s.URI.file(this._filePath).toString(),range:t.range},r=f(e,t,this._evaluator);if(void 0===r)return;const o={name:e,kind:r,location:i};n&&(o.containerName=n),this._symbolResults.push(o)}}function f(e,t,n){let s;switch(t.type){case 4:case 5:s=i.SymbolKind.Class;break;case 3:if(t.isMethod){const e=n.getTypeForDeclaration(t);s=e&&l.isProperty(e)?i.SymbolKind.Property:i.SymbolKind.Method}else s=i.SymbolKind.Function;break;case 6:s=i.SymbolKind.Module;break;case 2:if("self"===e||"cls"===e||"_"===e)return;s=i.SymbolKind.Variable;break;case 1:if("_"===e)return;s=t.isConstant||t.isFinal?i.SymbolKind.Constant:i.SymbolKind.Variable;break;default:s=i.SymbolKind.Variable}return s}function m(e,t,n,i,s){p.throwIfCancellationRequested(s);const o=r.getScope(e);o&&o.symbolTable.forEach((e,r)=>{if(!e.isIgnoredForProtocolMatch()){let o=c.getLastTypedDeclaredForSymbol(e);!o&&e.hasDeclarations()&&(o=e.getDeclarations()[0]),o&&function(e,t,n,i,s,r){if(6===t.type)return;const o=f(e,t,n);if(void 0===o)return;const a=t.range;let c=a;const l=[];if(4===t.type||3===t.type){m(t.node,l,i,n,r);const e=u.convertOffsetsToRange(t.node.start,t.node.name.start+t.node.length,i.tokenizerOutput.lines);c=e}const p={name:e,kind:o,range:c,selectionRange:a,children:l};s.push(p)}(r,o,i,n,t,s)}})}t.DocumentSymbolProvider=class{static addSymbolsForDocument(e,t,n,i,s,r){new h(n,i,e,t,s,r).findSymbols()}static addHierarchicalSymbolsForDocument(e,t,n,i){m(t.parseTree,e,t,n,i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performQuickAction=void 0;const i=n(34),s=n(6),r=n(0),o=n(5),a=n(1),c=n(130);t.performQuickAction=function(e,t,n,l){if("pyright.organizeimports"===e){return new c.ImportSorter(n,l).sort()}if("pyright.addoptionalforparam"===e&&t.length>=1){return function(e,t,n){r.throwIfCancellationRequested(n);let c=s.findNodeByOffset(e.parseTree,t);for(;c&&42!==c.nodeType;)c=c.parent;if(!c||!c.typeAnnotation)return[];const l=[],p=o.convertOffsetToPosition(c.typeAnnotation.start,e.tokenizerOutput.lines),u=o.convertOffsetToPosition(a.TextRange.getEnd(c.typeAnnotation),e.tokenizerOutput.lines);l.push({range:{start:p,end:p},replacementText:"Optional["}),l.push({range:{start:u,end:u},replacementText:"]"});const d=i.getTopLevelImports(e.parseTree),h=d.orderedImports.find(e=>"typing"===e.moduleName);if(h&&22===h.node.nodeType){const t=i.getTextEditsForAutoImportSymbolAddition("Optional",h,e);l.push(...t)}else{const t=i.getTextEditsForAutoImportInsertion("Optional",d,"typing",0,e);l.push(...t)}return l}(n,parseInt(t[0],10),l)}return[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportSorter=void 0;const i=n(34),s=n(0),r=n(5),o=n(1);t.ImportSorter=class{constructor(e,t){this._parseResults=e,this._cancellationToken=t}sort(){s.throwIfCancellationRequested(this._cancellationToken);const e=[],t=i.getTopLevelImports(this._parseResults.parseTree),n=t.orderedImports.map(e=>e).sort((e,t)=>i.compareImportStatements(e,t));if(0===n.length)return[];const r=this._getPrimaryReplacementRange(t.orderedImports);return e.push({range:r,replacementText:this._generateSortedImportText(n)}),this._addSecondaryReplacementRanges(t.orderedImports,e),e}_getPrimaryReplacementRange(e){let t=e.findIndex(e=>e.followsNonImportStatement);t<0&&(t=e.length);const n=e[t-1].node;return{start:r.convertOffsetToPosition(e[0].node.start,this._parseResults.tokenizerOutput.lines),end:r.convertOffsetToPosition(o.TextRange.getEnd(n),this._parseResults.tokenizerOutput.lines)}}_addSecondaryReplacementRanges(e,t){let n=e.findIndex(e=>e.followsNonImportStatement);if(!(n<0))for(;;){let i=e.findIndex((e,t)=>t>n&&e.followsNonImportStatement);if(i<0&&(i=e.length),t.push({range:{start:r.convertOffsetToPosition(e[n].node.start,this._parseResults.tokenizerOutput.lines),end:r.convertOffsetToPosition(o.TextRange.getEnd(e[i-1].node),this._parseResults.tokenizerOutput.lines)},replacementText:""}),n=i,n>=e.length)break}}_generateSortedImportText(e){let t="",n=i.getImportGroup(e[0]);for(const s of e){const r=i.getImportGroup(s);let o;n!==r&&(t+=this._parseResults.tokenizerOutput.predominantEndOfLineSequence,n=r),o=20===s.node.nodeType?this._formatImportNode(s.subnode,s.moduleName):this._formatImportFromNode(s.node,s.moduleName),s!==e[e.length-1]&&(o+=this._parseResults.tokenizerOutput.predominantEndOfLineSequence),t+=o}return t}_formatImportNode(e,t){let n="import "+t;return e.alias&&(n+=" as "+e.alias.value),n}_formatImportFromNode(e,t){const n=e.imports.sort((e,t)=>this._compareSymbols(e,t)).map(e=>{let t=e.name.value;return e.alias&&(t+=" as "+e.alias.value),t});let i=`from ${t} import `;if(e.isWildcardImport)return i+"*";const s=n.join(", ");if(i.length+s.length<=88)return i+s;i+="("+this._parseResults.tokenizerOutput.predominantEndOfLineSequence;for(const e of n)i+=this._parseResults.tokenizerOutput.predominantTabSequence+e+","+this._parseResults.tokenizerOutput.predominantEndOfLineSequence;return i+=")",i}_compareSymbols(e,t){return e.name.value<t.name.value?-1:1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReferencesProvider=void 0;const i=n(7),s=n(20),r=n(6),o=n(11),a=n(36),c=n(0),l=n(5),p=n(1);class u extends o.ParseTreeWalker{constructor(e,t,n,i,s,r){super(),this._parseResults=e,this._filePath=t,this._referencesResult=n,this._includeDeclaration=i,this._evaluator=s,this._cancellationToken=r}findReferences(){this.walk(this._parseResults.parseTree)}walk(e){i.isCodeUnreachable(e)||super.walk(e)}visitModuleName(e){return!1}visitName(e){if(c.throwIfCancellationRequested(this._cancellationToken),e.value!==this._referencesResult.symbolName)return!1;const t=this._evaluator.getDeclarationsForNameNode(e);return t&&t.length>0&&t.some(e=>this._resultsContainsDeclaration(e))&&(this._includeDeclaration||e!==this._referencesResult.nodeAtOffset)&&this._referencesResult.locations.push({path:this._filePath,range:{start:l.convertOffsetToPosition(e.start,this._parseResults.tokenizerOutput.lines),end:l.convertOffsetToPosition(p.TextRange.getEnd(e),this._parseResults.tokenizerOutput.lines)}}),!0}_resultsContainsDeclaration(e){const t=this._evaluator.resolveAliasDeclaration(e,!1);if(!t)return!1;if(this._referencesResult.declarations.some(e=>s.areDeclarationsSame(e,t)))return!0;const n=this._evaluator.resolveAliasDeclaration(t,!0);return!(!n||n===t)&&this._referencesResult.declarations.some(e=>s.areDeclarationsSame(e,n))}}t.ReferencesProvider=class{static getDeclarationForPosition(e,t,n,i,s,o){var p;c.throwIfCancellationRequested(o);const u=l.convertPositionToOffset(i,t.tokenizerOutput.lines);if(void 0===u)return;const d=r.findNodeByOffset(t.parseTree,u);if(void 0===d)return;if(39!==d.nodeType)return;if(38===(null===(p=d.parent)||void 0===p?void 0:p.nodeType))return;const h=s.getDeclarationsForNameNode(d);if(!h)return;const f=[];return h.forEach(t=>{const n=s.resolveAliasDeclaration(t,!1);if(n&&(f.push(n),a.isStubFile(n.path))){const t=e.findDeclarations(n);for(const e of t)e&&e.path&&this._addIfUnique(f,e)}}),0!==f.length?{requiresGlobalSearch:f.some(e=>{var t,i;if(e.path!==n)return!0;const s=r.getEvaluationScopeNode(e.node);return 37===s.nodeType||10===s.nodeType||36===(null===(i=null===(t=e.node)||void 0===t?void 0:t.parent)||void 0===i?void 0:i.nodeType)&&e.node===e.node.parent.memberName}),nodeAtOffset:d,symbolName:d.value,declarations:f,locations:[]}:void 0}static _addIfUnique(e,t){for(const n of e)if(s.areDeclarationsSame(n,t))return;e.push(t)}static addReferences(e,t,n,i,s,r){new u(e,t,n,i,s,r).findReferences()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignatureHelpProvider=void 0;const i=n(66),s=n(6),r=n(0),o=n(5);t.SignatureHelpProvider=class{static getSignatureHelpForPosition(e,t,n,i){r.throwIfCancellationRequested(i);const a=o.convertPositionToOffset(t,e.tokenizerOutput.lines);if(void 0===a)return;let c=s.findNodeByOffset(e.parseTree,a);const l=c,p=c?s.getNodeDepth(c):0;let u=a;for(;u>=0;){u--;const t=s.findNodeByOffset(e.parseTree,u);if(t&&t!==l){s.getNodeDepth(t)>p&&(c=t);break}}if(void 0===c)return;const d=n.getCallSignatureInfo(c,a,e.tokenizerOutput.tokens);if(!d)return;const h=[];let f,m;return d.signatures.forEach((e,t)=>{if(h.push(this._makeSignature(e.type,n)),void 0===f&&e.activeParam){const n=e.type.details.parameters.indexOf(e.activeParam);-1!==n&&(f=t,m=n)}}),{signatures:h,activeSignature:f,activeParameter:m}}static _makeSignature(e,t){const n=t.printFunctionParts(e),s=[],r=e.details.docString;let o="(";return n[0].forEach((t,a)=>{const c=e.details.parameters[a].name||"";s.push({startOffset:o.length,endOffset:o.length+t.length,documentation:i.extractParameterDocumentation(r||"",c)}),o+=t,a<n[0].length-1&&(o+=", ")}),o+=") -> "+n[1],{label:o,parameters:s,documentation:r}}}},function(e){e.exports=JSON.parse('{"Diagnostic":{"annotatedTypeArgMissing":"Expected at least one type argument after \\"Annotated\\"","annotationFormatString":"Type annotations cannot use format string literals (f-strings)","annotationNotSupported":"Type annotation not supported for this type of expression","annotationSpansStrings":"Type annotations cannot span multiple string literals","annotationStringEscape":"Type annotations cannot contain escape characters","annotationTripleQuote":"Type annotations cannot use triple quotes","argAssignment":"Argument of type \\"{argType}\\" cannot be assigned to parameter of type \\"{paramType}\\"","argAssignmentFunction":"Argument of type \\"{argType}\\" cannot be assigned to parameter of type \\"{paramType}\\" in function \\"{functionName}\\"","argAssignmentParam":"Argument of type \\"{argType}\\" cannot be assigned to parameter \\"{paramName}\\" of type \\"{paramType}\\"","argAssignmentParamFunction":"Argument of type \\"{argType}\\" cannot be assigned to parameter \\"{paramName}\\" of type \\"{paramType}\\" in function \\"{functionName}\\"","argMissingForParam":"Argument missing for parameter {name}","argMissingForParams":"Arguments missing for parameters {names}","argPositional":"Expected positional argument","argPositionalExpectedCount":"Expected {expected} positional arguments","argPositionalExpectedOne":"Expected 1 positional argument","argTypePartiallyUnknown":"Argument type is partially unknown","argTypeUnknown":"Argument type is unknown","assertAlwaysTrue":"Assert expression always evaluates to true","assignmentExprContext":"Assignment expression must be within module, function or lambda","assignmentExprComprehension":"Assignment expression target \\"{name}\\" cannot use same name as comprehension for target","assignmentInProtocol":"Assignment to instance or class variables not allowed within a Protocol class","assignmentTargetExpr":"Expression cannot be assignment target","awaitIllegal":"Use of \\"await\\" requires Python 3.5 or newer","awaitNotInAsync":"\\"await\\" allowed only within async function","backticksIllegal":"Expressions surrounded by backticks are not supported in Python 3.x; use repr instead","baseClassCircular":"Class cannot derive from itself","baseClassDoubleGeneric":"Class cannot derive from \\"Generic\\" more than once","baseClassFinal":"Base class \\"{type}\\" is marked final and cannot be subclassed","baseClassInvalid":"Argument to class must be a base class","baseClassUnknown":"Base class type is unknown, obscuring type of derived class","breakOutsideLoop":"\\"break\\" can be used only within a loop","callableExtraArgs":"Expected only two type arguments to \\"Callable\\"","callableFirstArg":"Expected parameter type list or \\"...\\"","classDecoratorTypeUnknown":"Untyped class decorator obscures type of class; ignoring decorator","classMethodClsParam":"Class methods should take a \\"cls\\" parameter","classVarFirstArgMissing":"Expected a type argument after \\"ClassVar\\"","classVarTooManyArgs":"Expected only one type argument after \\"ClassVar\\"","comprehensionInDict":"Comprehension cannot be used with other dictionary entries","comprehensionInSet":"Comprehension cannot be used with other set entries","constantRedefinition":"\\"{name}\\" is constant and cannot be redefined","continueInFinally":"\\"continue\\" cannot be used within a finally clause","continueOutsideLoop":"\\"continue\\" can be used only within a loop","constructorNoArgs":"Expected no arguments to \\"{type}\\" constructor","dataClassFieldWithDefault":"Data class fields without default value cannot appear after data fields with default values","declaredReturnTypePartiallyUnknown":"Declared return type, \\"{returnType}\\", is partially unknown","declaredReturnTypeUnknown":"Declared return type is unknown","defaultValueContainsCall":"Function calls within default value initializer are not permitted","defaultValueNotAllowed":"Parameter with \\"*\\" or \\"**\\" cannot have default value","delTargetExpr":"Expression cannot be deleted","dictInAnnotation":"Dictionary expression not allowed in type annotation","dictKeyValuePairs":"Dictionary entries must contain key/value pairs","duplicateArgsParam":"Only one \\"*\\" parameter is allowed","duplicateCatchAll":"Only one catch-all except clause is allowed","duplicateImport":"\\"{importName}\\" is imported more than once","duplicateKwargsParam":"Only one \\"**\\" parameter is allowed","duplicateNameOnly":"Only one \\"*\\" separator is allowed","duplicateParam":"Duplicate parameter \\"{name}\\"","duplicatePositionOnly":"Only one \\"/\\" parameter is allowed","duplicateUnpack":"Only one unpack operation allowed in list","ellipsisContext":"\\"...\\" not allowed in this context","ellipsisSecondArg":"\\"...\\" allowed only as the second of two arguments","enumFirstArg":"Expected enum class name as first argument","enumSecondArg":"Expected enum item string as second parameter","exceptionTypeIncorrect":"\\"{type}\\" does not derive from BaseException","exceptionTypeNotClass":"\\"{type}\\" is not valid exception class","expectedAfterDecorator":"Expected function or class declaration after decorator","expectedAsAfterException":"Expected \\"as\\" after exception type","expectedAssignRightHandExpr":"Expected expression to the right of \\"=\\"","expectedBinaryRightHandExpr":"Expected expression to the right of operator","expectedBoolLiteral":"Expected True or False","expectedClassName":"Expected class name","expectedCloseBrace":"Expected \\"}\\"","expectedCloseBracket":"Expected \\"]\\"","expectedCloseParen":"Expected \\")\\"","expectedColon":"Expected \\":\\"","expectedDecoratorName":"Expected decorator name","expectedDecoratorNewline":"Expected new line at end of decorator","expectedDelExpr":"Expected expression after \\"del\\"","expectedElse":"Expected \\"else\\"","expectedExceptionClass":"Expected exception class or object","expectedExceptionObj":"Expected exception object or None","expectedExpr":"Expected expression","expectedIdentifier":"Expected identifier","expectedImport":"Expected \\"import\\"","expectedImportAlias":"Expected symbol after \\"as\\"","expectedImportSymbols":"Expected one or more symbol names after import","expectedIndentedBlock":"Expected indented block","expectedInExpr":"Expected expression after \\"in\\"","expectedIn":"Expected \\"in\\"","expectedFunctionAfterAsync":"Expected function definition after \\"async\\"","expectedFunctionName":"Expected function name after \\"def\\"","expectedMemberName":"Expected member name after \\".\\"","expectedModuleName":"Expected module name","expectedNameAfterAs":"Expected symbol name after \\"as\\"","expectedNamedArgument":"Named argument must follow \\"*\\"","expectedNewlineOrSemicolon":"Statements must be separated by newlines or semicolons","expectedOpenParen":"Expected \\"(\\"","expectedParamName":"Expected parameter name","expectedReturnExpr":"Expected expression after \\"return\\"","expectedSliceIndex":"Expected index or slice expression","expectedTypeNotString":"Expected type but received a string literal","expectedYieldExpr":"Expected expression in yield statement","finalContext":"\\"Final\\" is not allowed in this context","finalMethodOverride":"Method \\"{name}\\" cannot override final method defined in class \\"{className}\\"","finalReassigned":"\\"{name}\\" is declared as Final and cannot be reassigned","finalRedeclaration":"\\"{name}\\" was previously declared as Final","finalRedeclarationBySubclass":"\\"{name}\\" cannot be redeclared because parent class \\"{className}\\" declares it as Final","finalTooManyArgs":"Expected a single type argument after \\"Final\\"","finalUnassigned":"\\"{name}\\" is declared Final, but value is not assigned","formatStringBrace":"Single close brace not allowed within f-string literal; use double close brace","formatStringBytes":"Format string literals (f-strings) cannot be binary","formatStringEscape":"Escape sequence (backslash) not allowed in expression portion of f-string","formatStringUnicode":"Format string literals (f-strings) cannot be unicode","formatStringIllegal":"Format string literals (f-strings) require Python 3.6 or newer","formatStringUnterminated":"Unterminated expression in f-string; missing close brace","functionDecoratorTypeUnknown":"Untyped function decorator obscures type of function; ignoring decorator","genericClassAssigned":"Generic class type cannot be assigned","genericClassDeleted":"Generic class type cannot be deleted","genericTypeArgMissing":"\\"Generic\\" requires at least one type argument","genericTypeArgTypeVar":"Type argument for \\"Generic\\" must be a type variable","genericTypeArgUnique":"Type arguments for \\"Generic\\" must be unique","globalReassignment":"\\"{name}\\" is assigned before global declaration","globalRedefinition":"\\"{name}\\" was already declared global","implicitStringConcat":"Implicit string concatenation not allowed","importCycleDetected":"Cycle detected in import chain","importDepthExceeded":"Import chain depth exceeded {depth}","importResolveFailure":"Import \\"{importName}\\" could not be resolved","importSourceResolveFailure":"Import \\"{importName}\\" could not be resolved from source","importSymbolUnknown":"\\"{name}\\" is unknown import symbol","incompatibleMethodOverride":"Method \\"{name}\\" overrides class \\"{className}\\" in an incompatible manner","inconsistentIndent":"Unindent amount does not match previous indent","inconsistentTabs":"Inconsistent use of tabs and spaces in indentation","initSubclassClsParam":"__init_subclass__ override should take a \\"cls\\" parameter","instanceMethodSelfParam":"Instance methods should take a \\"self\\" parameter","invalidIdentifierChar":"Invalid character in identifier","invalidTokenChars":"Invalid character in token \\"{text}\\"","keyRequiredDeleted":"\\"{name}\\" is a required key and cannot be deleted","keyValueInSet":"Key/value pairs are not allowed within a set","lambdaReturnTypeUnknown":"Return type of lambda is unknown","lambdaReturnTypePartiallyUnknown":"Return type of lambda, \\"{returnType}\\", is partially unknown","listInAnnotation":"List expression not allowed in type annotation","literalUnsupportedType":"Type arguments for \\"Literal\\" must be None, a literal value (int, bool, str, or bytes), or an enum value","literalEmptyArgs":"Expected one or more type arguments after \\"Literal\\"","memberAccess":"Cannot access member \\"{name}\\" for type \\"{type}\\"","memberDelete":"Cannot delete member \\"{name}\\" for type \\"{type}\\"","memberSet":"Cannot assign member \\"{name}\\" for type \\"{type}\\"","metaclassDuplicate":"Only one metaclass can be provided","methodNotDefined":"\\"{name}\\" method not defined","methodNotDefinedOnType":"\\"{name}\\" method not defined on type \\"{type}\\"","methodOrdering":"Cannot create consistent method ordering","methodReturnsNonObject":"\\"{name}\\" method does not return an object","moduleContext":"Module not allowed in this context","moduleUnknownMember":"\\"{name}\\" is not a known member of module","namedExceptAfterCatchAll":"A named except clause cannot appear after catch-all except clause","namedTupleEmptyName":"Names within a named tuple cannot be empty","namedTupleFirstArg":"Expected named tuple class name as first argument","namedTupleNameString":"Expected string literal for tuple entry name","namedTupleNameType":"Expected two-entry tuple specifying entry name and type","namedTupleNameUnique":"Names within a named tuple must be unique","namedTupleNoTypes":"\\"namedtuple\\" provides no types for tuple entries; use \\"NamedTuple\\" instead","namedTupleSecondArg":"Expected named tuple entry list as second argument","newClsParam":"__new__ override should take a \\"cls\\" parameter","nonDefaultAfterDefault":"Non-default argument follows default argument","noneNotCallable":"Object of type \\"None\\" cannot be called","noneNotIterable":"Object of type \\"None\\" cannot be used as iterable value","noneOperator":"Operator \\"{operator}\\" not supported for \\"None\\"","noneNotSubscriptable":"Object of type \\"None\\" cannot be subscripted","noneNotUsableWith":"Object of type \\"None\\" cannot be used with \\"with\\"","noneUnknownMember":"\\"{name}\\" is not a known member of \\"None\\"","nonLocalNoBinding":"No binding for nonlocal \\"{name}\\" found","nonLocalReassignment":"\\"{name}\\" is assigned before nonlocal declaration","nonLocalRedefinition":"\\"{name}\\" was already declared nonlocal","nonLocalInModule":"Nonlocal declaration not allowed at module level","noOverload":"No overloads for \\"{expression}\\" match parameters","noReturnContainsReturn":"Function with declared return type \\"NoReturn\\" cannot include a return statement","noReturnContainsYield":"Function with declared return type \\"NoReturn\\" cannot include a yield statement","noReturnReturnsNone":"Function with declared type of \\"NoReturn\\" cannot return \\"None\\"","objectNotCallable":"object of \\"{type}\\" is not callable","obscuredClassDeclaration":"Class declaration \\"{name}\\" is obscured by a declaration of the same name","obscuredFunctionDeclaration":"Function declaration \\"{name}\\" is obscured by a declaration of the same name","obscuredParameterDeclaration":"Parameter declaration \\"{name}\\" is obscured by a declaration of the same name","obscuredVariableDeclaration":"Declaration \\"{name}\\" is obscured by a declaration of the same name","operatorLessOrGreaterDeprecated":"Operator \\"<>\\" is not supported in Python 3; use \\"!=\\" instead","optionalExtraArgs":"Expected one type argument after \\"Optional\\"","paramAfterKwargsParam":"Parameter cannot follow \\"**\\" parameter","paramAlreadyAssigned":"Parameter \\"{name}\\" is already assigned","paramNameMissing":"No parameter named \\"{name}\\"","paramSpecAssignedName":"ParameterSpecification must be assigned to a variable named \\"{name}\\"","paramSpecContext":"ParameterSpecification not allowed in this context","paramSpecIllegal":"ParameterSpecification requires Python 3.9 or newer","paramSpecFirstArg":"Expected name of ParameterSpecification as first argument","paramSpecUnknownArg":"ParameterSpecification does not support more than one argument","paramSpecUnknownMember":"\\"{name}\\" is not a known member of ParameterSpecification","paramSpecUnknownParam":"\\"{name}\\" is unknown parameter to ParameterSpecification","paramAssignmentMismatch":"Expression of type \\"{sourceType}\\" cannot be assigned to parameter of type \\"{paramType}\\"","paramTypeUnknown":"Type of parameter \\"{paramName}\\" is unknown","paramTypePartiallyUnknown":"Type of parameter \\"{paramName}\\" is partially unknown","positionArgAfterNamedArg":"Positional argument cannot appear after named arguments","positionOnlyAfterNameOnly":"\\"/\\" parameter must appear before \\"*\\" parameter","positionOnlyIncompatible":"Position-only argument separator requires Python 3.8 or greater","privateUsedOutsideOfClass":"\\"{name}\\" is private and used outside of the class in which it is declared","privateUsedOutsideOfModule":"\\"{name}\\" is private and used outside of the module in which it is declared","protectedUsedOutsideOfClass":"\\"{name}\\" is protected and used outside of the class in which it is declared","protocolUsedInCall":"Protocol class cannot be used in \\"{name}\\" call","protocolIllegal":"Use of \\"Protocol\\" requires Python 3.7 or newer","raiseParams":"\\"raise\\" requires one or more parameters when used outside of except clause","returnOutsideFunction":"\\"return\\" can be used only within a function","returnMissing":"Function with declared type of \\"{returnType}\\" must return value","returnTypeMismatch":"Expression of type \\"{exprType}\\" cannot be assigned to return type \\"{returnType}\\"","returnTypeUnknown":"Return type is unknown","returnTypePartiallyUnknown":"Return type, \\"{returnType}\\", is partially unknown","staticClsSelfParam":"Static methods should not take a \\"self\\" or \\"cls\\" parameter","stringNonAsciiBytes":"Non-ASCII character not allowed in bytes string literal","stringUnsupportedEscape":"Unsupported escape sequence in string literal","stringUnterminated":"String literal is unterminated","stubFileMissing":"Stub file not found for \\"{importName}\\"","sublistParamsIncompatible":"Sublist parameters are not supported in Python 3.x","superCallArgCount":"Expected no more than two arguments to \\"super\\" call","superCallFirstArg":"Expected class type as first argument to \\"super\\" call but received \\"{type}\\"","superCallSecondArg":"Second argument to \\"super\\" call must be object or class that derives from \\"{type}\\"","superCallZeroArgForm":"Zero-argument form of \\"super\\" call is valid only within a class","symbolIsUnbound":"\\"{name}\\" is unbound","symbolIsUndefined":"\\"{name}\\" is not defined","symbolIsPossiblyUnbound":"\\"{name}\\" is possibly unbound","tupleInAnnotation":"Tuple expression not allowed in type annotation","tupleSizeMismatch":"Tuple size mismatch: expected {expected} but received {received}","typeAbstract":"Cannot instantiate abstract class \\"{type}\\"","typeAliasNotInModule":"A TypeAlias can be defined only within a module scope","typeAliasRedeclared":"\\"{name}\\" is declared as a TypeAlias and can be assigned only once","typeArgsExpectingNone":"Expected no type arguments","typeArgsMismatchOne":"Expected one type argument but received {received}","typeArgsTooMany":"Too many type arguments provided; expected {expected} but received {received}","typeAssignmentMismatch":"Expression of type \\"{sourceType}\\" cannot be assigned to declared type \\"{destType}\\"","typeCallNotAllowed":"type() call should not be used in type annotation","typeClassFirstArg":"Expected name of type as first argument","typeClassSecondArg":"Expected tuple of base class types as second argument","typedDictAccess":"Could not access item in TypedDict","typedDictBadVar":"TypedDict classes can contain only type annotations","typedDictBaseClass":"All base classes for \\"TypedDict\\" classes must also be \\"TypedDict\\" classes","typedDictDelete":"Could not delete item in TypedDict","typedDictEmptyName":"Names within a TypedDict cannot be empty","typedDictEntryName":"Expected string literal for dictionary entry name","typedDictEntryUnique":"Names within a dictionary must be unique","typedDictExtraArgs":"Extra TypedDict arguments not supported","typedDictFirstArg":"Expected TypedDict class name as first argument","typedDictSecondArgDict":"Expected dict or named parameter as second parameter","typedDictSecondArgDictEntry":"Expected simple dictionary entry","typedDictSet":"Could not assign item in TypedDict","typedDictTotalParam":"Expected \\"total\\" parameter to have a value of True or False","typeExpectedClass":"Expected class type but received \\"{type}\\"","typeNotAwaitable":"\\"{type}\\" is not awaitable","typeNotCallable":"\\"{expression}\\" has type \\"{type}\\" and is not callable","typeNotIntantiable":"\\"{type}\\" cannot be instantiated","typeNotIterable":"\\"{type}\\" is not iterable","typeNotSpecializable":"Could not specialize type \\"{type}\\"","typeNotSubscriptable":"Object of type \\"{type}\\" cannot be subscripted","typeNotUsableWith":"Object of type \\"{type}\\" cannot be used with \\"with\\" because it does not implement {method}","typeNotSupportBinaryOperator":"Operator \\"{operator}\\" not supported for types \\"{leftType}\\" and \\"{rightType}\\"","typeNotSupportUnaryOperator":"Operator \\"{operator}\\" not supported for type \\"{type}\\"","typePartiallyUnknown":"Type of \\"{name}\\" is partially unknown","typeUnknown":"Type of \\"{name}\\" is unknown","typeVarAssignedName":"TypeVar must be assigned to a variable named \\"{name}\\"","typeVarAssignmentMismatch":"Type \\"{type}\\" cannot be assigned to TypeVar \\"{name}\\"","typeVarBoundAndConstrained":"TypeVar cannot be both bound and constrained","typeVarFirstArg":"Expected name of TypeVar as first argument","typeVarGeneric":"TypeVar bound type cannot be generic","typeVarUnknownParam":"\\"{name}\\" is unknown parameter to TypeVar","typeVarVariance":"TypeVar cannot be both covariant and contravariant","unaccessedClass":"Class \\"{name}\\" is not accessed","unaccessedFunction":"Function \\"{name}\\" is not accessed","unaccessedImport":"Import \\"{name}\\" is not accessed","unaccessedSymbol":"\\"{name}\\" is not accessed","unaccessedVariable":"Variable \\"{name}\\" is not accessed","unexpectedAsyncToken":"Expected \\"def\\", \\"with\\" or \\"for\\" to follow \\"async\\"","unexpectedExprToken":"Unexpected token at end of expression","unexpectedIndent":"Unexpected indentation","unexpectedUnindent":"Unindent not expected","unionSyntaxIllegal":"Alternative syntax for unions requires Python 3.9 or newer","unnecessaryCast":"Unnecessary \\"cast\\" call; type is already \\"{type}\\"","unnecessaryIsInstanceAlways":"Unnecessary isinstance call; \\"{testType}\\" is always an instance of \\"{classType}\\"","unnecessaryIsInstanceNever":"Unnecessary isinstance call; \\"{testType}\\" is never an instance of \\"{classType}\\"","unnecessaryIsSubclassAlways":"Unnecessary issubclass call; \\"{testType}\\" is always a subclass of \\"{classType}\\"","unnecessaryIsSubclassNever":"Unnecessary issubclass call; \\"{testType}\\" is never a subclass of \\"{classType}\\"","unpackInDict":"Unpack operation not allowed in dictionaries","unpackInSet":"Unpack operator not allowed within a set","unpackTuplesIllegal":"Unpack operation not allowed in tuples prior to Python 3.8","unreachableCode":"Code is unreachable","varAnnotationIllegal":"Type annotations for variables requires Python 3.6 or newer; use type comment for compatibility with previous versions","walrusIllegal":"Operator \\":=\\" requires Python 3.8 or newer","walrusNotAllowed":"Operator \\":=\\" not allowed in this context","wildcardInFunction":"Wildcard import is not allowed within a class or function","yieldFromIllegal":"Use of \\"yield from\\" requires Python 3.3 or newer","yieldFromOutsideAsync":"\\"yield from\\" not allowed in an async function","yieldOutsideFunction":"\\"yield\\" not allowed outside of a function","yieldTypeMismatch":"Expression of type \\"{exprType}\\" cannot be assigned to yield type \\"{yieldType}\\""},"DiagnosticAddendum":{"argParam":"Argument corresponds to parameter \\"{paramName}\\"","argParamFunction":"Argument corresponds to parameter \\"{paramName}\\" in function \\"{functionName}\\"","argumentType":"Argument type is \\"{type}\\"","argumentTypes":"Argument types: ({types})","assignToNone":"Cannot assign to \\"None\\"","asyncHelp":"Did you mean \\"async with\\"?","finalMethod":"Final method","keyUndefined":"\\"{name}\\" is not a defined key in \\"{type}\\"","functionReturnTypeMismatch":"Function return type \\"{sourceType}\\" is not compatible with type \\"{destType}\\"","functionTooFewParams":"Function accepts too few parameters; expected {expected} but received {received}","functionTooManyParams":"Function accepts too many parameters; expected {expected} but received {received}","literalAssignmentMismatch":"\\"{sourceType}\\" cannot be assigned to type \\"{destType}\\"","memberSetClassVar":"Member \\"{name}\\" cannot be assigned through a class instance because it is a ClassVar","memberAssignment":"Expression of type \\"{type}\\" cannot be assigned to member \\"{name}\\" of class \\"{classType}\\"","memberIsAbstract":"\\"{type}.{name}\\" is abstract","memberIsAbstractMore":"and {count} more...","memberTypeMismatch":"\\"{name}\\" is an incompatible type","memberUnknown":"Member \\"{name}\\" is unknown","namedParamMissingInDest":"Named parameter \\"{name}\\" is missing in destination","namedParamMissingInSource":"Named parameter \\"{name}\\" is missing in source","namedParamTypeMismatch":"Named parameter \\"{name}\\" of type \\"{sourceType}\\" cannot be assigned to type \\"{destType}\\"","noOverloadAssignable":"No overloaded function matches type \\"{type}\\"","overloadCallName":"Calling function \\"{name}\\"","overriddenMethod":"Overridden method","overrideParamCount":"Parameter count mismatch; base method has {baseCount}, but override has {overrideCount}","overrideParamName":"Parameter {index} name mismatch: base parameter is named \\"{baseName}\\", override parameter is named \\"{overrideName}\\"","overrideParamType":"Parameter {index} type mismatch: base parameter is type \\"{baseType}\\", override parameter is type \\"{overrideType}\\"","overrideReturnType":"Return type mismatch: base method returns type \\"{baseType}\\", override returns type \\"{overrideType}\\"","overrideType":"Base class defines type as \\"{type}\\"","paramAssignment":"Parameter {index} of type \\"{sourceType}\\" cannot be assigned to type \\"{destType}\\"","paramType":"Parameter type is \\"{paramType}\\"","propertyMissingDeleter":"Property \\"{name}\\" has no defined deleter","propertyMissingSetter":"Property \\"{name}\\" has no defined setter","protocolMemberMissing":"\\"{name}\\" is not present","protocolMemberClassVar":"\\"{name}\\" is not a class variable","seeDeclaration":"See declaration","seeClassDeclaration":"See class declaration","seeFunctionDeclaration":"See function declaration","seeMethodDeclaration":"See method declaration","seeParameterDeclaration":"See parameter declaration","seeVariableDeclaration":"See variable declaration","tupleEntryTypeMismatch":"Tuple entry {entry} is incorrect type","tupleSizeMismatch":"Tuple size mismatch; expected {expected} but received {received}","typeAssignmentMismatch":"Type \\"{sourceType}\\" cannot be assigned to type \\"{destType}\\"","typeBound":"Type \\"{sourceType}\\" is not compatible with bound type \\"{destType}\\" for TypeVar \\"{name}\\"","typeConstrainedTypeVar":"Type \\"{type}\\" is not compatible with constrained TypeVar \\"{name}\\"","typeConstraint":"Type \\"{type}\\" is not compatible with constrained type \\"{name}\\"","typedDictFieldMissing":"\\"{name}\\" is missing from \\"{type}\\"","typedDictFieldNotRequired":"\\"{name}\\" is not required in \\"{type}\\"","typedDictFieldRequired":"\\"{name}\\" is required in \\"{type}\\"","typedDictFieldTypeMismatch":"Type \\"{type}\\" is not assignable to field \\"{name}\\"","typedDictFieldUndefined":"\\"{name}\\" is an undefined field in type \\"{type}\\"","typeIncompatible":"\\"{sourceType}\\" is incompatible with \\"{destType}\\"","typeNotClass":"\\"{type}\\" is not a class","typeParamSpec":"Type \\"{type}\\" is not compatible with ParameterSpecification \\"{name}\\"","typeNotStringLiteral":"\\"{type}\\" is not a string literal","typeOfSymbol":"Type of \\"{name}\\" is \\"{type}\\"","typeUnsupported":"Type \\"{type}\\" is unsupported","typeVarIsContravariant":"TypeVar \\"{name}\\" is contravariant","typeVarIsCovariant":"TypeVar \\"{name}\\" is covariant","typeVarIsInvariant":"TypeVar \\"{name}\\" is invariant","useDictInstead":"Use Dict[T1, T2] instead","useListInstead":"Use List[T] instead","useTupleInstead":"Use Tuple[T1, ..., Tn] instead","useTypeInstead":"Use Type[T] instead"},"CodeAction":{"addOptionalToAnnotation":"Add \\"Optional\\" to Type Annotation","createTypeStub":"Create Type Stub","createTypeStubFor":"Create Type Stub For \\"{moduleName}\\"","executingCommand":"Executing command","filesToAnalyzeOne":"1 file to analyze","filesToAnalyzeCount":"{count} files to analyze","findingReferences":"Finding references","organizeImports":"Organize Imports"}}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tokenizer=void 0;const i=n(69),s=n(75),r=n(143),o=n(76),a={and:0,as:1,assert:2,async:3,await:4,break:5,class:6,continue:7,__debug__:8,def:9,del:10,elif:11,else:12,except:13,finally:15,for:16,from:17,global:18,if:19,import:20,in:21,is:22,lambda:23,nonlocal:25,not:26,or:27,pass:28,raise:29,return:30,try:32,while:33,with:34,yield:35,False:14,None:24,True:31},c={0:3,1:4,2:4,3:2,4:4,5:1,6:2,7:4,8:2,9:4,10:2,11:4,12:10,13:2,14:4,15:10,16:10,17:2,18:4,19:26,20:10,21:10,22:2,23:4,24:2,25:4,26:2,27:4,28:10,29:2,30:4,31:2,32:4,33:2,34:4,36:2,37:2,38:1,39:2,40:2,41:2,42:2};t.Tokenizer=class{constructor(){this._cs=new r.CharacterStream(""),this._tokens=[],this._prevLineStart=0,this._parenDepth=0,this._lineRanges=[],this._indentAmounts=[],this._typeIgnoreAll=!1,this._typeIgnoreLines={},this._crCount=0,this._crLfCount=0,this._lfCount=0,this._indentCount=0,this._indentTabCount=0,this._indentSpacesTotal=0,this._singleQuoteCount=0,this._doubleQuoteCount=0}tokenize(e,t,n){if(void 0===t)t=0;else if(t<0||t>e.length)throw new Error("Invalid range start");if(void 0===n)n=e.length;else{if(n<0||t+n>e.length)throw new Error("Invalid range length");t+n<e.length&&(e=e.substr(0,t+n))}this._cs=new r.CharacterStream(e),this._cs.position=t,this._tokens=[],this._prevLineStart=0,this._parenDepth=0,this._lineRanges=[],this._indentAmounts=[];const s=t+n;for(;!(this._cs.isEndOfStream()||(this._addNextToken(),this._cs.position>=s)););0!==this._tokens.length&&2===this._tokens[this._tokens.length-1].type||this._tokens.push(o.NewLineToken.create(this._cs.position,0,3,this._getComments())),this._setIndent(0,0,!0,!1),this._tokens.push(o.Token.create(1,this._cs.position,0,this._getComments())),this._addLineRange();let a="\n";this._crCount>this._crLfCount&&this._crCount>this._lfCount?a="\r":this._crLfCount>this._crCount&&this._crLfCount>this._lfCount&&(a="\r\n");let c="    ";if(this._indentTabCount>this._indentCount/2)c="\t";else if(this._indentCount>0){let e=Math.round(this._indentSpacesTotal/this._indentCount);e<1?e=1:e>8&&(e=8),c="";for(let t=0;t<e;t++)c+=" "}return{tokens:new i.TextRangeCollection(this._tokens),lines:new i.TextRangeCollection(this._lineRanges),typeIgnoreLines:this._typeIgnoreLines,typeIgnoreAll:this._typeIgnoreAll,predominantEndOfLineSequence:a,predominantTabSequence:c,predominantSingleQuoteCharacter:this._singleQuoteCount>=this._doubleQuoteCount?"'":'"'}}static getOperatorInfo(e){return c[e]}static isOperatorAssignment(e){return void 0!==e&&void 0!==c[e]&&0!=(4&c[e])}static isOperatorComparison(e){return void 0!==e&&void 0!==c[e]&&0!=(8&c[e])}_addNextToken(){this._cs.skipWhitespace(),this._cs.isEndOfStream()||this._handleCharacter()||this._cs.moveNext()}_handleCharacter(){const e=this._getStringPrefixLength();if(e>=0){let t="";e>0&&(t=this._cs.getText().substr(this._cs.position,e),this._cs.advance(e));const n=this._getQuoteTypeFlags(t);if(0!==n)return this._handleString(n,e),!0}if(35===this._cs.currentChar)return this._handleComment(),!0;switch(this._cs.currentChar){case 65279:if(0===this._cs.position)return!1;this._handleInvalid();break;case 13:{const e=10===this._cs.nextChar?2:1,t=2===e?2:0;return this._handleNewLine(e,t),!0}case 10:return this._handleNewLine(1,1),!0;case 92:return 13===this._cs.nextChar?(10===this._cs.lookAhead(2)?this._cs.advance(3):this._cs.advance(2),this._addLineRange(),!0):10===this._cs.nextChar?(this._cs.advance(2),this._addLineRange(),!0):(this._handleInvalid(),!1);case 40:this._parenDepth++,this._tokens.push(o.Token.create(13,this._cs.position,1,this._getComments()));break;case 41:this._parenDepth>0&&this._parenDepth--,this._tokens.push(o.Token.create(14,this._cs.position,1,this._getComments()));break;case 91:this._parenDepth++,this._tokens.push(o.Token.create(15,this._cs.position,1,this._getComments()));break;case 93:this._parenDepth>0&&this._parenDepth--,this._tokens.push(o.Token.create(16,this._cs.position,1,this._getComments()));break;case 123:this._parenDepth++,this._tokens.push(o.Token.create(17,this._cs.position,1,this._getComments()));break;case 125:this._parenDepth>0&&this._parenDepth--,this._tokens.push(o.Token.create(18,this._cs.position,1,this._getComments()));break;case 44:this._tokens.push(o.Token.create(12,this._cs.position,1,this._getComments()));break;case 96:this._tokens.push(o.Token.create(22,this._cs.position,1,this._getComments()));break;case 59:this._tokens.push(o.Token.create(11,this._cs.position,1,this._getComments()));break;case 58:if(61===this._cs.nextChar){this._tokens.push(o.OperatorToken.create(this._cs.position,2,35,this._getComments())),this._cs.advance(1);break}this._tokens.push(o.Token.create(10,this._cs.position,1,this._getComments()));break;default:if(this._isPossibleNumber()&&this._tryNumber())return!0;if(46===this._cs.currentChar){if(46===this._cs.nextChar&&46===this._cs.lookAhead(2))return this._tokens.push(o.Token.create(19,this._cs.position,3,this._getComments())),this._cs.advance(3),!0;this._tokens.push(o.Token.create(20,this._cs.position,1,this._getComments()));break}return!(!this._tryIdentifier()&&!this._tryOperator())||(this._handleInvalid(),!1)}return!1}_addLineRange(){const e=this._cs.position-this._prevLineStart;e>0&&this._lineRanges.push({start:this._prevLineStart,length:e}),this._prevLineStart=this._cs.position}_handleNewLine(e,t){0===this._parenDepth&&3!==t&&(0!==this._tokens.length&&2===this._tokens[this._tokens.length-1].type||this._tokens.push(o.NewLineToken.create(this._cs.position,e,t,this._getComments()))),0===t?this._crCount++:2===t?this._crLfCount++:this._lfCount++,this._cs.advance(e),this._addLineRange(),this._readIndentationAfterNewLine()}_readIndentationAfterNewLine(){let e=0,t=0,n=!1,i=!1;for(;!this._cs.isEndOfStream();)switch(this._cs.currentChar){case 32:e++,t++,i=!0,this._cs.moveNext();break;case 9:e++,t+=8-t%8,n=!0,this._cs.moveNext();break;case 12:e=0,t=0,n=!1,i=!1,this._cs.moveNext();break;default:return void this._setIndent(e,t,i,n);case 35:case 10:case 13:return}}_setIndent(e,t,n,i){if(!(this._parenDepth>0))if(0===this._indentAmounts.length)t>0&&(this._indentCount++,i&&this._indentTabCount++,this._indentSpacesTotal+=t,this._indentAmounts.push({tab1Spaces:e,tab8Spaces:t,isSpacePresent:n,isTabPresent:i}),this._tokens.push(o.IndentToken.create(this._cs.position,0,t,!1,this._getComments())));else{const s=this._indentAmounts[this._indentAmounts.length-1];if(s.tab8Spaces<t){const r=(s.isSpacePresent&&i||s.isTabPresent&&n)&&s.tab1Spaces>=e;this._indentCount++,i&&this._indentTabCount++,this._indentSpacesTotal+=t-this._indentAmounts[this._indentAmounts.length-1].tab8Spaces,this._indentAmounts.push({tab1Spaces:e,tab8Spaces:t,isSpacePresent:n,isTabPresent:i}),this._tokens.push(o.IndentToken.create(this._cs.position,0,t,r,this._getComments()))}else{const e=[];for(;this._indentAmounts.length>0&&this._indentAmounts[this._indentAmounts.length-1].tab8Spaces>t;)e.push(this._indentAmounts.length>1?this._indentAmounts[this._indentAmounts.length-2].tab8Spaces:0),this._indentAmounts.pop();e.forEach((n,i)=>{const s=i<e.length-1||n===t,r=i<e.length-1?n:t;this._tokens.push(o.DedentToken.create(this._cs.position,0,r,s,this._getComments()))})}}}_tryIdentifier(){const e=this._cs.position;if(s.isIdentifierStartChar(this._cs.currentChar))for(this._cs.moveNext();s.isIdentifierChar(this._cs.currentChar);)this._cs.moveNext();if(this._cs.position>e){const t=this._cs.getText().substr(e,this._cs.position-e);return void 0!==a[t]?this._tokens.push(o.KeywordToken.create(e,this._cs.position-e,a[t],this._getComments())):this._tokens.push(o.IdentifierToken.create(e,this._cs.position-e,t,this._getComments())),!0}return!1}_isPossibleNumber(){return!!s.isDecimal(this._cs.currentChar)||!(46!==this._cs.currentChar||!s.isDecimal(this._cs.nextChar))}_tryNumber(){const e=this._cs.position;if(48===this._cs.currentChar){let t=0,n=0;if((120===this._cs.nextChar||88===this._cs.nextChar)&&s.isHex(this._cs.lookAhead(2))){for(this._cs.advance(2),n=2;s.isHex(this._cs.currentChar);)this._cs.moveNext();t=16}if((98===this._cs.nextChar||66===this._cs.nextChar)&&s.isBinary(this._cs.lookAhead(2))){for(this._cs.advance(2),n=2;s.isBinary(this._cs.currentChar);)this._cs.moveNext();t=2}if((111===this._cs.nextChar||79===this._cs.nextChar)&&s.isOctal(this._cs.lookAhead(2))){for(this._cs.advance(2),n=2;s.isOctal(this._cs.currentChar);)this._cs.moveNext();t=8}if(t>0){const i=this._cs.getText().substr(e,this._cs.position-e),s=parseInt(i.substr(n).replace(/_/g,""),t);if(!isNaN(s))return this._tokens.push(o.NumberToken.create(e,i.length,s,!0,!1,this._getComments())),!0}}let t=!1,n=!1;if(this._cs.currentChar>=49&&this._cs.currentChar<=57){for(;s.isDecimal(this._cs.currentChar);)n=!0,this._cs.moveNext();t=46!==this._cs.currentChar&&101!==this._cs.currentChar&&69!==this._cs.currentChar}if(48===this._cs.currentChar){for(n=!0;48===this._cs.currentChar||95===this._cs.currentChar;)this._cs.moveNext();t=46!==this._cs.currentChar&&101!==this._cs.currentChar&&69!==this._cs.currentChar}if(t){let t=this._cs.getText().substr(e,this._cs.position-e);const n=parseInt(t.replace(/_/g,""),10);if(!isNaN(n)){let i=!1;return 106!==this._cs.currentChar&&74!==this._cs.currentChar||(i=!0,t+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext()),this._tokens.push(o.NumberToken.create(e,t.length,n,!0,i,this._getComments())),!0}}if(this._cs.position=e,(n||46===this._cs.currentChar&&this._cs.nextChar>=48&&this._cs.nextChar<=57)&&this._skipFloatingPointCandidate()){let t=this._cs.getText().substr(e,this._cs.position-e);const n=parseFloat(t);if(!isNaN(n)){let i=!1;return 106!==this._cs.currentChar&&74!==this._cs.currentChar||(i=!0,t+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext()),this._tokens.push(o.NumberToken.create(e,this._cs.position-e,n,!1,i,this._getComments())),!0}}return this._cs.position=e,!1}_tryOperator(){let e=0;const t=this._cs.nextChar;let n;switch(this._cs.currentChar){case 43:e=61===t?2:1,n=2===e?1:0;break;case 38:e=61===t?2:1,n=2===e?4:3;break;case 124:e=61===t?2:1,n=2===e?7:6;break;case 94:e=61===t?2:1,n=2===e?9:8;break;case 61:e=61===t?2:1,n=2===e?12:2;break;case 33:if(61!==t)return!1;e=2,n=28;break;case 37:e=61===t?2:1,n=2===e?25:24;break;case 126:e=1,n=5;break;case 45:if(62===t)return this._tokens.push(o.Token.create(21,this._cs.position,2,this._getComments())),this._cs.advance(2),!0;e=61===t?2:1,n=2===e?34:33;break;case 42:42===t?(e=61===this._cs.lookAhead(2)?3:2,n=3===e?30:29):(e=61===t?2:1,n=2===e?27:26);break;case 47:47===t?(e=61===this._cs.lookAhead(2)?3:2,n=3===e?14:13):(e=61===t?2:1,n=2===e?11:10);break;case 60:60===t?(e=61===this._cs.lookAhead(2)?3:2,n=3===e?18:17):62===t?(e=2,n=19):(e=61===t?2:1,n=2===e?21:20);break;case 62:62===t?(e=61===this._cs.lookAhead(2)?3:2,n=3===e?32:31):(e=61===t?2:1,n=2===e?16:15);break;case 64:e=61===t?2:1,n=2===e?23:22;break;default:return!1}return this._tokens.push(o.OperatorToken.create(this._cs.position,e,n,this._getComments())),this._cs.advance(e),e>0}_handleInvalid(){const e=this._cs.position;this._cs.skipToWhitespace();const t=this._cs.position-e;return t>0&&(this._tokens.push(o.Token.create(0,e,t,this._getComments())),!0)}_getComments(){const e=this._comments;return this._comments=void 0,e}_handleComment(){const e=this._cs.position+1;this._cs.skipToEol();const t=this._cs.position-e,n=this._cs.getText().substr(e,t),i=o.Comment.create(e,t,n);n.match(/^\s*type:\s*ignore(\s|$)/)&&(this._tokens.findIndex(e=>2!==e.type&&e&&3!==e.type)<0?this._typeIgnoreAll=!0:this._typeIgnoreLines[this._lineRanges.length]=!0),this._comments?this._comments.push(i):this._comments=[i]}_getStringPrefixLength(){if(39===this._cs.currentChar||34===this._cs.currentChar)return 0;if(39===this._cs.nextChar||34===this._cs.nextChar)switch(this._cs.currentChar){case 102:case 70:case 114:case 82:case 98:case 66:case 117:case 85:return 1}if(39===this._cs.lookAhead(2)||34===this._cs.lookAhead(2)){switch(this._cs.getText().substr(this._cs.position,2).toLowerCase()){case"rf":case"fr":case"ur":case"ru":case"br":case"rb":return 2}}return-1}_getQuoteTypeFlags(e){let t=0;e=e.toLowerCase();for(let n=0;n<e.length;n++)switch(e[n]){case"u":t|=16;break;case"b":t|=32;break;case"r":t|=8;break;case"f":t|=64}return 39===this._cs.currentChar?(t|=1,39===this._cs.nextChar&&39===this._cs.lookAhead(2)&&(t|=4)):34===this._cs.currentChar&&(t|=2,34===this._cs.nextChar&&34===this._cs.lookAhead(2)&&(t|=4)),t}_handleString(e,t){const n=this._cs.position-t;4&e?this._cs.advance(3):(this._cs.moveNext(),1&e?this._singleQuoteCount++:this._doubleQuoteCount++);const i=this._skipToEndOfStringLiteral(e),s=this._cs.position;this._tokens.push(o.StringToken.create(n,s-n,i.flags,i.escapedValue,t,this._getComments()))}_skipToEndOfStringLiteral(e){const t=1&e?39:34,n=0!=(4&e);let i="";for(;;){if(this._cs.isEndOfStream())return{escapedValue:i,flags:e|=65536};if(92===this._cs.currentChar)i+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext(),13===this._cs.getCurrentChar()||10===this._cs.getCurrentChar()?(13===this._cs.getCurrentChar()&&10===this._cs.nextChar&&(i+=String.fromCharCode(this._cs.getCurrentChar()),this._cs.moveNext()),i+=String.fromCharCode(this._cs.getCurrentChar()),this._cs.moveNext(),this._addLineRange()):(i+=String.fromCharCode(this._cs.getCurrentChar()),this._cs.moveNext());else if(10===this._cs.currentChar||13===this._cs.currentChar){if(!n)return{escapedValue:i,flags:e|=65536};13===this._cs.currentChar&&10===this._cs.nextChar&&(i+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext()),i+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext(),this._addLineRange()}else{if(!n&&this._cs.currentChar===t){this._cs.moveNext();break}if(n&&this._cs.currentChar===t&&this._cs.nextChar===t&&this._cs.lookAhead(2)===t){this._cs.advance(3);break}i+=String.fromCharCode(this._cs.currentChar),this._cs.moveNext()}}return{escapedValue:i,flags:e}}_skipFloatingPointCandidate(){const e=this._cs.position;return this._skipFractionalNumber(),this._cs.position>e&&(101!==this._cs.currentChar&&69!==this._cs.currentChar||(this._cs.moveNext(),this._skipDecimalNumber(!0))),this._cs.position>e}_skipFractionalNumber(){this._skipDecimalNumber(!1),46===this._cs.currentChar&&this._cs.moveNext(),this._skipDecimalNumber(!1)}_skipDecimalNumber(e){for(!e||45!==this._cs.currentChar&&43!==this._cs.currentChar||this._cs.moveNext();s.isDecimal(this._cs.currentChar);)this._cs.moveNext()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unicodePc=t.unicodeNd=t.unicodeMc=t.unicodeMn=t.unicodeNl=t.unicodeLm=t.unicodeLo=t.unicodeLt=t.unicodeLl=t.unicodeLu=void 0,t.unicodeLu=[[65,90],[192,214],[216,222],256,258,260,262,264,266,268,270,272,274,276,278,280,282,284,286,288,290,292,294,296,298,300,302,304,306,308,310,313,315,317,319,321,323,325,327,330,332,334,336,338,340,342,344,346,348,350,352,354,356,358,360,362,364,366,368,370,372,374,[376,377],379,381,[385,386],388,[390,391],[393,395],[398,401],[403,404],[406,408],[412,413],[415,416],418,420,[422,423],425,428,[430,431],[433,435],437,[439,440],444,452,455,458,461,463,465,467,469,471,473,475,478,480,482,484,486,488,490,492,494,497,500,[502,504],506,508,510,512,514,516,518,520,522,524,526,528,530,532,534,536,538,540,542,544,546,548,550,552,554,556,558,560,562,[570,571],[573,574],577,[579,582],584,586,588,590,880,882,886,895,902,[904,906],908,[910,911],[913,929],[931,939],975,[978,980],984,986,988,990,992,994,996,998,1e3,1002,1004,1006,1012,1015,[1017,1018],[1021,1071],1120,1122,1124,1126,1128,1130,1132,1134,1136,1138,1140,1142,1144,1146,1148,1150,1152,1162,1164,1166,1168,1170,1172,1174,1176,1178,1180,1182,1184,1186,1188,1190,1192,1194,1196,1198,1200,1202,1204,1206,1208,1210,1212,1214,[1216,1217],1219,1221,1223,1225,1227,1229,1232,1234,1236,1238,1240,1242,1244,1246,1248,1250,1252,1254,1256,1258,1260,1262,1264,1266,1268,1270,1272,1274,1276,1278,1280,1282,1284,1286,1288,1290,1292,1294,1296,1298,1300,1302,1304,1306,1308,1310,1312,1314,1316,1318,1320,1322,1324,1326,[1329,1366],[4256,4293],4295,4301,[5024,5109],7680,7682,7684,7686,7688,7690,7692,7694,7696,7698,7700,7702,7704,7706,7708,7710,7712,7714,7716,7718,7720,7722,7724,7726,7728,7730,7732,7734,7736,7738,7740,7742,7744,7746,7748,7750,7752,7754,7756,7758,7760,7762,7764,7766,7768,7770,7772,7774,7776,7778,7780,7782,7784,7786,7788,7790,7792,7794,7796,7798,7800,7802,7804,7806,7808,7810,7812,7814,7816,7818,7820,7822,7824,7826,7828,7838,7840,7842,7844,7846,7848,7850,7852,7854,7856,7858,7860,7862,7864,7866,7868,7870,7872,7874,7876,7878,7880,7882,7884,7886,7888,7890,7892,7894,7896,7898,7900,7902,7904,7906,7908,7910,7912,7914,7916,7918,7920,7922,7924,7926,7928,7930,7932,7934,[7944,7951],[7960,7965],[7976,7983],[7992,7999],[8008,8013],8025,8027,8029,8031,[8040,8047],[8120,8123],[8136,8139],[8152,8155],[8168,8172],[8184,8187],8450,8455,[8459,8461],[8464,8466],8469,[8473,8477],8484,8486,8488,[8490,8493],[8496,8499],[8510,8511],8517,8579,[11264,11310],11360,[11362,11364],11367,11369,11371,[11373,11376],11378,11381,[11390,11392],11394,11396,11398,11400,11402,11404,11406,11408,11410,11412,11414,11416,11418,11420,11422,11424,11426,11428,11430,11432,11434,11436,11438,11440,11442,11444,11446,11448,11450,11452,11454,11456,11458,11460,11462,11464,11466,11468,11470,11472,11474,11476,11478,11480,11482,11484,11486,11488,11490,11499,11501,11506,42560,42562,42564,42566,42568,42570,42572,42574,42576,42578,42580,42582,42584,42586,42588,42590,42592,42594,42596,42598,42600,42602,42604,42624,42626,42628,42630,42632,42634,42636,42638,42640,42642,42644,42646,42648,42650,42786,42788,42790,42792,42794,42796,42798,42802,42804,42806,42808,42810,42812,42814,42816,42818,42820,42822,42824,42826,42828,42830,42832,42834,42836,42838,42840,42842,42844,42846,42848,42850,42852,42854,42856,42858,42860,42862,42873,42875,[42877,42878],42880,42882,42884,42886,42891,42893,42896,42898,42902,42904,42906,42908,42910,42912,42914,42916,42918,42920,[42922,42926],[42928,42932],42934,[65313,65338],[66560,66599],[66736,66771],[68736,68786],[71840,71871],[119808,119833],[119860,119885],[119912,119937],119964,[119966,119967],119970,[119973,119974],[119977,119980],[119982,119989],[120016,120041],[120068,120069],[120071,120074],[120077,120084],[120086,120092],[120120,120121],[120123,120126],[120128,120132],120134,[120138,120144],[120172,120197],[120224,120249],[120276,120301],[120328,120353],[120380,120405],[120432,120457],[120488,120512],[120546,120570],[120604,120628],[120662,120686],[120720,120744],120778,[125184,125217]],t.unicodeLl=[[97,122],181,[223,246],[248,255],257,259,261,263,265,267,269,271,273,275,277,279,281,283,285,287,289,291,293,295,297,299,301,303,305,307,309,[311,312],314,316,318,320,322,324,326,[328,329],331,333,335,337,339,341,343,345,347,349,351,353,355,357,359,361,363,365,367,369,371,373,375,378,380,[382,384],387,389,392,[396,397],402,405,[409,411],414,417,419,421,424,[426,427],429,432,436,438,[441,442],[445,447],454,457,460,462,464,466,468,470,472,474,[476,477],479,481,483,485,487,489,491,493,[495,496],499,501,505,507,509,511,513,515,517,519,521,523,525,527,529,531,533,535,537,539,541,543,545,547,549,551,553,555,557,559,561,[563,569],572,[575,576],578,583,585,587,589,[591,659],[661,687],881,883,887,[891,893],912,[940,974],[976,977],[981,983],985,987,989,991,993,995,997,999,1001,1003,1005,[1007,1011],1013,1016,[1019,1020],[1072,1119],1121,1123,1125,1127,1129,1131,1133,1135,1137,1139,1141,1143,1145,1147,1149,1151,1153,1163,1165,1167,1169,1171,1173,1175,1177,1179,1181,1183,1185,1187,1189,1191,1193,1195,1197,1199,1201,1203,1205,1207,1209,1211,1213,1215,1218,1220,1222,1224,1226,1228,[1230,1231],1233,1235,1237,1239,1241,1243,1245,1247,1249,1251,1253,1255,1257,1259,1261,1263,1265,1267,1269,1271,1273,1275,1277,1279,1281,1283,1285,1287,1289,1291,1293,1295,1297,1299,1301,1303,1305,1307,1309,1311,1313,1315,1317,1319,1321,1323,1325,1327,[1377,1415],[5112,5117],[7296,7304],[7424,7467],[7531,7543],[7545,7578],7681,7683,7685,7687,7689,7691,7693,7695,7697,7699,7701,7703,7705,7707,7709,7711,7713,7715,7717,7719,7721,7723,7725,7727,7729,7731,7733,7735,7737,7739,7741,7743,7745,7747,7749,7751,7753,7755,7757,7759,7761,7763,7765,7767,7769,7771,7773,7775,7777,7779,7781,7783,7785,7787,7789,7791,7793,7795,7797,7799,7801,7803,7805,7807,7809,7811,7813,7815,7817,7819,7821,7823,7825,7827,[7829,7837],7839,7841,7843,7845,7847,7849,7851,7853,7855,7857,7859,7861,7863,7865,7867,7869,7871,7873,7875,7877,7879,7881,7883,7885,7887,7889,7891,7893,7895,7897,7899,7901,7903,7905,7907,7909,7911,7913,7915,7917,7919,7921,7923,7925,7927,7929,7931,7933,[7935,7943],[7952,7957],[7968,7975],[7984,7991],[8e3,8005],[8016,8023],[8032,8039],[8048,8061],[8064,8071],[8080,8087],[8096,8103],[8112,8116],[8118,8119],8126,[8130,8132],[8134,8135],[8144,8147],[8150,8151],[8160,8167],[8178,8180],[8182,8183],8458,[8462,8463],8467,8495,8500,8505,[8508,8509],[8518,8521],8526,8580,[11312,11358],11361,[11365,11366],11368,11370,11372,11377,[11379,11380],[11382,11387],11393,11395,11397,11399,11401,11403,11405,11407,11409,11411,11413,11415,11417,11419,11421,11423,11425,11427,11429,11431,11433,11435,11437,11439,11441,11443,11445,11447,11449,11451,11453,11455,11457,11459,11461,11463,11465,11467,11469,11471,11473,11475,11477,11479,11481,11483,11485,11487,11489,[11491,11492],11500,11502,11507,[11520,11557],11559,11565,42561,42563,42565,42567,42569,42571,42573,42575,42577,42579,2581,42583,42585,42587,42589,42591,42593,42595,42597,42599,42601,42603,42605,42625,42627,42629,42631,42633,42635,42637,42639,42641,42643,42645,42647,42649,42651,42787,42789,42791,42793,42795,42797,[42799,42801],42803,42805,42807,42809,42811,42813,42815,42817,42819,42821,42823,42825,42827,42829,42831,42833,42835,42837,42839,42841,42843,42845,42847,42849,42851,42853,42855,42857,42859,42861,42863,[42865,42872],42874,42876,42879,42881,42883,42885,42887,42892,42894,42897,[42899,42901],42903,42905,42907,42909,42911,42913,42915,42917,42919,42921,42933,42935,43002,[43824,43866],[43872,43877],[43888,43967],[64256,64262],[64275,64279],[65345,65370],[66600,66639],[66776,66811],[68800,68850],[71872,71903],[119834,119859],[119886,119892],[119894,119911],[119938,119963],[119990,119993],119995,[119997,120003],[120005,120015],[120042,120067],[120094,120119],[120146,120171],[120198,120223],[120250,120275],[120302,120327],[120354,120379],[120406,120431],[120458,120485],[120514,120538],[120540,120545],[120572,120596],[120598,120603],[120630,120654],[120656,120661],[120688,120712],[120714,120719],[120746,120770],[120772,120777],120779,[125218,125251]],t.unicodeLt=[453,456,459,498,[8072,8079],[8088,8095],[8104,8111],8124,8140,8188],t.unicodeLo=[170,186,443,[448,451],660,[1488,1514],[1520,1522],[1568,1599],[1601,1610],[1646,1647],[1649,1747],1749,[1774,1775],[1786,1788],1791,1808,[1810,1839],[1869,1957],1969,[1994,2026],[2048,2069],[2112,2136],[2144,2154],[2208,2228],[2230,2237],[2308,2361],2365,2384,[2392,2401],[2418,2432],[2437,2444],[2447,2448],[2451,2472],[2474,2480],2482,[2486,2489],2493,2510,[2524,2525],[2527,2529],[2544,2545],2556,[2565,2570],[2575,2576],[2579,2600],[2602,2608],[2610,2611],[2613,2614],[2616,2617],[2649,2652],2654,[2674,2676],[2693,2701],[2703,2705],[2707,2728],[2730,2736],[2738,2739],[2741,2745],2749,2768,[2784,2785],2809,[2821,2828],[2831,2832],[2835,2856],[2858,2864],[2866,2867],[2869,2873],2877,[2908,2909],[2911,2913],2929,2947,[2949,2954],[2958,2960],[2962,2965],[2969,2970],2972,[2974,2975],[2979,2980],[2984,2986],[2990,3001],3024,[3077,3084],[3086,3088],[3090,3112],[3114,3129],3133,[3160,3162],[3168,3169],3200,[3205,3212],[3214,3216],[3218,3240],[3242,3251],[3253,3257],3261,3294,[3296,3297],[3313,3314],[3333,3340],[3342,3344],[3346,3386],3389,3406,[3412,3414],[3423,3425],[3450,3455],[3461,3478],[3482,3505],[3507,3515],3517,[3520,3526],[3585,3632],[3634,3635],[3648,3653],[3713,3714],3716,[3719,3720],3722,3725,[3732,3735],[3737,3743],[3745,3747],3749,3751,[3754,3755],[3757,3760],[3762,3763],3773,[3776,3780],[3804,3807],3840,[3904,3911],[3913,3948],[3976,3980],[4096,4138],4159,[4176,4181],[4186,4189],4193,[4197,4198],[4206,4208],[4213,4225],4238,[4304,4346],[4349,4680],[4682,4685],[4688,4694],4696,[4698,4701],[4704,4744],[4746,4749],[4752,4784],[4786,4789],[4792,4798],4800,[4802,4805],[4808,4822],[4824,4880],[4882,4885],[4888,4954],[4992,5007],[5121,5740],[5743,5759],[5761,5786],[5792,5866],[5873,5880],[5888,5900],[5902,5905],[5920,5937],[5952,5969],[5984,5996],[5998,6e3],[6016,6067],6108,[6176,6210],[6212,6263],[6272,6276],[6279,6312],6314,[6320,6389],[6400,6430],[6480,6509],[6512,6516],[6528,6571],[6576,6601],[6656,6678],[6688,6740],[6917,6963],[6981,6987],[7043,7072],[7086,7087],[7098,7141],[7168,7203],[7245,7247],[7258,7287],[7401,7404],[7406,7409],[7413,7414],[8501,8504],[11568,11623],[11648,11670],[11680,11686],[11688,11694],[11696,11702],[11704,11710],[11712,11718],[11720,11726],[11728,11734],[11736,11742],12294,12348,[12353,12438],12447,[12449,12538],12543,[12549,12590],[12593,12686],[12704,12730],[12784,12799],[13312,19893],[19968,40938],[40960,40980],[40982,42124],[42192,42231],[42240,42507],[42512,42527],[42538,42539],42606,[42656,42725],42895,42999,[43003,43009],[43011,43013],[43015,43018],[43020,43042],[43072,43123],[43138,43187],[43250,43255],43259,43261,[43274,43301],[43312,43334],[43360,43388],[43396,43442],[43488,43492],[43495,43503],[43514,43518],[43520,43560],[43584,43586],[43588,43595],[43616,43631],[43633,43638],43642,[43646,43695],43697,[43701,43702],[43705,43709],43712,43714,[43739,43740],[43744,43754],43762,[43777,43782],[43785,43790],[43793,43798],[43808,43814],[43816,43822],[43968,44002],[44032,55203],[55216,55238],[55243,55291],[63744,64109],[64112,64217],64285,[64287,64296],[64298,64310],[64312,64316],64318,[64320,64321],[64323,64324],[64326,64433],[64467,64829],[64848,64911],[64914,64967],[65008,65019],[65136,65140],[65142,65276],[65382,65391],[65393,65437],[65440,65470],[65474,65479],[65482,65487],[65490,65495],[65498,65500],[65536,65547],[65549,65574],[65576,65594],[65596,65597],[65599,65613],[65616,65629],[65664,65786],[66176,66204],[66208,66256],[66304,66335],[66349,66368],[66370,66377],[66384,66421],[66432,66461],[66464,66499],[66504,66511],[66640,66717],[66816,66855],[66864,66915],[67072,67382],[67392,67413],[67424,67431],[67584,67589],67592,[67594,67637],[67639,67640],67644,[67647,67669],[67680,67702],[67712,67742],[67808,67826],[67828,67829],[67840,67861],[67872,67897],[67968,68023],[68030,68031],68096,[68112,68115],[68117,68119],[68121,68147],[68192,68220],[68224,68252],[68288,68295],[68297,68324],[68352,68405],[68416,68437],[68448,68466],[68480,68497],[68608,68680],[69635,69687],[69763,69807],[69840,69864],[69891,69926],[69968,70002],70006,[70019,70066],[70081,70084],70106,70108,[70144,70161],[70163,70187],[70272,70278],70280,[70282,70285],[70287,70301],[70303,70312],[70320,70366],[70405,70412],[70415,70416],[70419,70440],[70442,70448],[70450,70451],[70453,70457],70461,70480,[70493,70497],[70656,70708],[70727,70730],[70784,70831],[70852,70853],70855,[71040,71086],[71128,71131],[71168,71215],71236,[71296,71338],[71424,71449],71935,72192,[72203,72242],72250,72272,[72284,72323],[72326,72329],[72384,72440],[72704,72712],[72714,72750],72768,[72818,72847],[72960,72966],[72968,72969],[72971,73008],73030,[73728,74649],[74880,75075],[77824,78894],[82944,83526],[92160,92728],[92736,92766],[92880,92909],[92928,92975],[93027,93047],[93053,93071],[93952,94020],94032,[94208,100332],[100352,101106],[110592,110878],[110960,111355],[113664,113770],[113776,113788],[113792,113800],[113808,113817],[124928,125124],[126464,126467],[126469,126495],[126497,126498],126500,126503,[126505,126514],[126516,126519],126521,126523,126530,126535,126537,126539,[126541,126543],[126545,126546],126548,126551,126553,126555,126557,126559,[126561,126562],126564,[126567,126570],[126572,126578],[126580,126583],[126585,126588],126590,[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[131072,173782],[173824,177972],[177984,178205],[178208,183969],[183984,191456],[194560,195101]],t.unicodeLm=[[688,705],[710,721],[736,740],748,750,884,890,1369,1600,[1765,1766],[2036,2037],2042,2074,2084,2088,2417,3654,3782,4348,6103,6211,6823,[7288,7293],[7468,7530],7544,[7579,7615],8305,8319,[8336,8348],[11388,11389],11631,11823,12293,[12337,12341],12347,[12445,12446],[12540,12542],40981,[42232,42237],42508,42623,[42652,42653],[42775,42783],42864,42888,[43e3,43001],43471,43494,43632,43741,[43763,43764],[43868,43871],65392,[65438,65439],[92992,92995],[94099,94111],[94176,94177]],t.unicodeNl=[[5870,5872],[8544,8578],[8581,8584],12295,[12321,12329],[12344,12346],[42726,42735],[65856,65908],66369,66378,[66513,66517],[74752,74862]],t.unicodeMn=[[768,879],[1155,1159],[1425,1469],1471,[1473,1474],[1476,1477],1479,[1552,1562],[1611,1631],1648,[1750,1756],[1759,1764],[1767,1768],[1770,1773],1809,[1840,1866],[1958,1968],[2027,2035],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2260,2273],[2275,2306],2362,2364,[2369,2376],2381,[2385,2391],[2402,2403],2433,2492,[2497,2500],2509,[2530,2531],[2561,2562],2620,[2625,2626],[2631,2632],[2635,2637],2641,[2672,2673],2677,[2689,2690],2748,[2753,2757],[2759,2760],2765,[2786,2787],[2810,2815],2817,2876,2879,[2881,2884],2893,2902,[2914,2915],2946,3008,3021,3072,[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],3201,3260,3263,3270,[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],3405,[3426,3427],3530,[3538,3540],3542,3633,[3636,3642],[3655,3662],3761,[3764,3769],[3771,3772],[3784,3789],[3864,3865],3893,3895,3897,[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],4038,[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],4226,[4229,4230],4237,4253,[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],6086,[6089,6099],6109,[6155,6157],[6277,6278],6313,[6432,6434],[6439,6440],6450,[6457,6459],[6679,6680],6683,6742,[6744,6750],6752,6754,[6757,6764],[6771,6780],6783,[6832,6845],[6912,6915],6964,[6966,6970],6972,6978,[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],7142,[7144,7145],7149,[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],7405,7412,[7416,7417],[7616,7673],[7675,7679],[8400,8412],8417,[8421,8432],[11503,11505],11647,[11744,11775],[12330,12333],[12441,12442],42607,[42612,42621],[42654,42655],[42736,42737],43010,43014,43019,[43045,43046],[43204,43205],[43232,43249],[43302,43309],[43335,43345],[43392,43394],43443,[43446,43449],43452,43493,[43561,43566],[43569,43570],[43573,43574],43587,43596,43644,43696,[43698,43700],[43703,43704],[43710,43711],43713,[43756,43757],43766,44005,44008,44013,64286,[65024,65039],[65056,65071],66045,66272,[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],68159,[68325,68326],69633,[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69888,69890],[69927,69931],[69933,69940],70003,[70016,70017],[70070,70078],[70090,70092],[70191,70193],70196,[70198,70199],70206,70367,[70371,70378],[70400,70401],70460,70464,[70502,70508],[70512,70516],[70712,70719],[70722,70724],70726,[70835,70840],70842,[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],71229,[71231,71232],71339,71341,[71344,71349],71351,[71453,71455],[71458,71461],[71463,71467],[72193,72198],[72201,72202],[72243,72248],[72251,72254],72263,[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],72767,[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],73018,[73020,73021],[73023,73029],73031,[92912,92916],[92976,92982],[94095,94098],[113821,113822],[119143,119145],[119163,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],121461,121476,[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[125136,125142],[125252,125258],[917760,917999]],t.unicodeMc=[2307,2363,[2366,2368],[2377,2380],[2382,2383],[2434,2435],[2494,2496],[2503,2504],[2507,2508],2519,2563,[2622,2624],2691,[2750,2752],2761,[2763,2764],[2818,2819],2878,2880,[2887,2888],[2891,2892],2903,[3006,3007],[3009,3010],[3014,3016],[3018,3020],3031,[3073,3075],[3137,3140],[3202,3203],3262,[3264,3268],[3271,3272],[3274,3275],[3285,3286],[3330,3331],[3390,3392],[3398,3400],[3402,3404],3415,[3458,3459],[3535,3537],[3544,3551],[3570,3571],[3902,3903],3967,[4139,4140],4145,4152,[4155,4156],[4182,4183],[4194,4196],[4199,4205],[4227,4228],[4231,4236],4239,[4250,4252],6070,[6078,6085],[6087,6088],[6435,6438],[6441,6443],[6448,6449],[6451,6456],[6681,6682],6741,6743,6753,[6755,6756],[6765,6770],6916,6965,6971,[6973,6977],[6979,6980],7042,7073,[7078,7079],7082,7143,[7146,7148],7150,[7154,7155],[7204,7211],[7220,7221],7393,[7410,7411],7415,[12334,12335],[43043,43044],43047,[43136,43137],[43188,43203],[43346,43347],43395,[43444,43445],[43450,43451],[43453,43456],[43567,43568],[43571,43572],43597,43643,43645,43755,[43758,43759],43765,[44003,44004],[44006,44007],[44009,44010],44012,69632,69634,69762,[69808,69810],[69815,69816],69932,70018,[70067,70069],[70079,70080],[70188,70190],[70194,70195],70197,[70368,70370],[70402,70403],[70462,70463],[70465,70468],[70471,70472],[70475,70477],70487,[70498,70499],[70709,70711],[70720,70721],70725,[70832,70834],70841,[70843,70846],70849,[71087,71089],[71096,71099],71102,[71216,71218],[71227,71228],71230,71340,[71342,71343],71350,[71456,71457],71462,[72199,72200],72249,[72279,72280],72343,72751,72766,72873,72881,72884,[94033,94078],[119141,119142],[119149,119154]],t.unicodeNd=[[48,57],[1632,1641],[1776,1785],[1984,1993],[2406,2415],[2534,2543],[2662,2671],[2790,2799],[2918,2927],[3046,3055],[3174,3183],[3302,3311],[3430,3439],[3558,3567],[3664,3673],[3792,3801],[3872,3881],[4160,4169],[4240,4249],[6112,6121],[6160,6169],[6470,6479],[6608,6617],[6784,6793],[6800,6809],[6992,7001],[7088,7097],[7232,7241],[7248,7257],[42528,42537],[43216,43225],[43264,43273],[43472,43481],[43504,43513],[43600,43609],[44016,44025],[65296,65305],[66720,66729],[69734,69743],[69872,69881],[69942,69951],[70096,70105],[70384,70393],[70736,70745],[70864,70873],[71248,71257],[71360,71369],[71472,71481],[71904,71913],[72784,72793],[73040,73049],[92768,92777],[93008,93017],[120782,120831],[125264,125273]],t.unicodePc=[95,[8255,8256],8276,[65075,65076],[65101,65103],65343]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterStream=void 0;const i=n(75);t.CharacterStream=class{constructor(e){this._text=e,this._position=0,this._currentChar=e.length>0?e.charCodeAt(0):0,this._isEndOfStream=0===e.length}getText(){return this._text}get position(){return this._position}set position(e){this._position=e,this._checkBounds()}get currentChar(){return this._currentChar}getCurrentChar(){return this._currentChar}get nextChar(){return this.position+1<this._text.length?this._text.charCodeAt(this.position+1):0}get prevChar(){return this.position-1>=0?this._text.charCodeAt(this.position-1):0}isEndOfStream(){return this._isEndOfStream}lookAhead(e){const t=this._position+e;return t<0||t>=this._text.length?0:this._text.charCodeAt(t)}advance(e){this.position+=e}moveNext(){return this._position<this._text.length-1?(this._position+=1,this._currentChar=this._text.charCodeAt(this._position),!0):(this.advance(1),!this.isEndOfStream())}isAtWhiteSpace(){return i.isWhiteSpace(this.currentChar)}isAtLineBreak(){return i.isLineBreak(this.currentChar)}skipLineBreak(){13===this._currentChar?(this.moveNext(),10===this.currentChar&&this.moveNext()):10===this._currentChar&&this.moveNext()}skipWhitespace(){for(;!this.isEndOfStream()&&this.isAtWhiteSpace();)this.moveNext()}skipToEol(){for(;!this.isEndOfStream()&&!this.isAtLineBreak();)this.moveNext()}skipToWhitespace(){for(;!this.isEndOfStream()&&!this.isAtWhiteSpace();)this.moveNext()}charCodeAt(e){return this._text.charCodeAt(e)}get length(){return this._text.length}_checkBounds(){this._position<0&&(this._position=0),this._isEndOfStream=this._position>=this._text.length,this._isEndOfStream&&(this._position=this._text.length),this._currentChar=this._isEndOfStream?0:this._text.charCodeAt(this._position)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.YieldFinder=t.Binder=void 0;const i=n(2),s=n(4),r=n(5),o=n(30),a=n(1),c=n(1),l=n(22),p=n(74),u=n(7),d=n(44),h=n(6),f=n(11),m=n(145),g=n(77),y=n(35),_=n(15);class T extends f.ParseTreeWalker{constructor(e){super(),this._deferredBindingTasks=[],this._notLocalBindings=new Map,this._nestedExceptDepth=0,this._finallyTargets=[],this._fileInfo=e}bindModule(e){const t=void 0===this._fileInfo.builtinsScope;return this._createNewScope(t?4:3,this._fileInfo.builtinsScope,()=>{u.setScope(e,this._currentScope),u.setFlowNode(e,this._currentFlowNode),this._addBuiltInSymbolToCurrentScope("__doc__",e,"str"),this._addBuiltInSymbolToCurrentScope("__name__",e,"str"),this._addBuiltInSymbolToCurrentScope("__loader__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__package__",e,"str"),this._addBuiltInSymbolToCurrentScope("__spec__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__path__",e,"Iterable[str]"),this._addBuiltInSymbolToCurrentScope("__file__",e,"str"),this._addBuiltInSymbolToCurrentScope("__cached__",e,"str"),this._addBuiltInSymbolToCurrentScope("__dict__",e,"Dict[str, Any]"),this._currentFlowNode=this._createStartFlowNode(),this._walkStatementsAndReportUnreachable(e.statements),u.setCodeFlowExpressions(e,this._currentExecutionScopeReferenceMap),u.setAfterFlowNode(e,this._currentFlowNode)}),this._bindDeferred(),{moduleDocString:h.getDocString(e.statements)}}visitModule(e){return i.fail("We should never get here"),!1}visitSuite(e){return this._walkStatementsAndReportUnreachable(e.statements),!1}visitModuleName(e){const t=u.getImportInfo(e);if(i.assert(void 0!==t),t)if(t.isImportFound){if(!t.isStubFile&&1===t.importType){const n=this._addDiagnostic(this._fileInfo.diagnosticRuleSet.reportMissingTypeStubs,"reportMissingTypeStubs",l.Localizer.Diagnostic.stubFileMissing().format({importName:t.importName}),e);if(n){const e={action:"pyright.createtypestub",moduleName:t.importName};n.addAction(e)}}t.isStubFile&&0!==t.importType&&t.nonStubImportResult&&!t.nonStubImportResult.isImportFound&&this._addDiagnostic(this._fileInfo.diagnosticRuleSet.reportMissingModuleSource,"reportMissingModuleSource",l.Localizer.Diagnostic.importSourceResolveFailure().format({importName:t.importName}),e)}else this._addDiagnostic(this._fileInfo.diagnosticRuleSet.reportMissingImports,"reportMissingImports",l.Localizer.Diagnostic.importResolveFailure().format({importName:t.importName}),e);return!0}visitClass(e){this.walkMultiple(e.decorators);const t={type:4,node:e,path:this._fileInfo.filePath,range:r.convertOffsetsToRange(e.name.start,c.TextRange.getEnd(e.name),this._fileInfo.lines)},n=this._bindNameToScope(this._currentScope,e.name.value);return n&&n.addDeclaration(t),u.setDeclaration(e,t),this.walkMultiple(e.arguments),this._createNewScope(2,this._currentScope,()=>{u.setScope(e,this._currentScope),this._addBuiltInSymbolToCurrentScope("__base__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__bases__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__basicsize__",e,"int"),this._addBuiltInSymbolToCurrentScope("__dict__",e,"Dict[str, Any]"),this._addBuiltInSymbolToCurrentScope("__dictoffset__",e,"int"),this._addBuiltInSymbolToCurrentScope("__flags__",e,"int"),this._addBuiltInSymbolToCurrentScope("__itemsize__",e,"int"),this._addBuiltInSymbolToCurrentScope("__module__",e,"str"),this._addBuiltInSymbolToCurrentScope("__mro__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__name__",e,"str"),this._fileInfo.executionEnvironment.pythonVersion>=o.PythonVersion.V30&&(this._addBuiltInSymbolToCurrentScope("__qualname__",e,"str"),this._addBuiltInSymbolToCurrentScope("__text_signature__",e,"str")),this._addBuiltInSymbolToCurrentScope("__subclasses__",e,"Any"),this.walk(e.suite)}),this._addSymbolToCurrentScope(e.name.value,!0),this._createAssignmentTargetFlowNodes(e.name,!1,!1),!1}visitFunction(e){const t=this._bindNameToScope(this._currentScope,e.name.value),n=h.getEnclosingClass(e,!0),s={type:3,node:e,isMethod:!!n,isGenerator:!1,path:this._fileInfo.filePath,range:r.convertOffsetsToRange(e.name.start,c.TextRange.getEnd(e.name),this._fileInfo.lines)};t&&t.addDeclaration(s),u.setDeclaration(e,s),this.walkMultiple(e.decorators),e.parameters.forEach(e=>{e.defaultValue&&this.walk(e.defaultValue),e.typeAnnotation&&this.walk(e.typeAnnotation)}),e.returnTypeAnnotation&&this.walk(e.returnTypeAnnotation);let a=e.parent;for(;a&&37!==a.nodeType&&29!==a.nodeType;)a=a.parent;i.assert(void 0!==a);const l=u.getScope(a);return i.assert(void 0!==l),this._createNewScope(1,l,()=>{u.setScope(e,this._currentScope),this._addBuiltInSymbolToCurrentScope("__doc__",e,"str"),this._addBuiltInSymbolToCurrentScope("__name__",e,"str"),this._fileInfo.executionEnvironment.pythonVersion>=o.PythonVersion.V33&&this._addBuiltInSymbolToCurrentScope("__qualname__",e,"str"),this._addBuiltInSymbolToCurrentScope("__module__",e,"str"),this._addBuiltInSymbolToCurrentScope("__defaults__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__code__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__globals__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__dict__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__closure__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__annotations__",e,"Any"),this._addBuiltInSymbolToCurrentScope("__kwdefaults__",e,"Any"),h.getEnclosingClass(e)&&this._addBuiltInSymbolToCurrentScope("__class__",e,"class"),this._deferBinding(()=>{this._currentFlowNode=this._createStartFlowNode(),e.parameters.forEach(e=>{if(e.name){const t=this._bindNameToScope(this._currentScope,e.name.value);if(t){const n={type:2,node:e,path:this._fileInfo.filePath,range:r.convertOffsetsToRange(e.start,c.TextRange.getEnd(e),this._fileInfo.lines)};t.addDeclaration(n),u.setDeclaration(e.name,n)}this._createFlowAssignment(e.name)}}),this._targetFunctionDeclaration=s,this._currentReturnTarget=this._createBranchLabel(),this.walk(e.suite),u.setAfterFlowNode(e.suite,this._currentFlowNode),this._addAntecedent(this._currentReturnTarget,this._currentFlowNode);const t=this._finishFlowLabel(this._currentReturnTarget);u.setAfterFlowNode(e,t)}),u.setCodeFlowExpressions(e,this._currentExecutionScopeReferenceMap)}),this._createAssignmentTargetFlowNodes(e.name,!1,!1),!1}visitLambda(e){return e.parameters.forEach(e=>{e.defaultValue&&this.walk(e.defaultValue)}),this._createNewScope(1,this._currentScope,()=>{u.setScope(e,this._currentScope),this._deferBinding(()=>{this._currentFlowNode=this._createStartFlowNode(),e.parameters.forEach(e=>{if(e.name){const t=this._bindNameToScope(this._currentScope,e.name.value);if(t){const n={type:2,node:e,path:this._fileInfo.filePath,range:r.convertOffsetsToRange(e.start,c.TextRange.getEnd(e),this._fileInfo.lines)};t.addDeclaration(n),u.setDeclaration(e.name,n)}this._createFlowAssignment(e.name),this.walk(e.name)}}),this.walk(e.expression),u.setCodeFlowExpressions(e,this._currentExecutionScopeReferenceMap)})}),!1}visitCall(e){return this.walk(e.leftExpression),this.walkMultiple(e.arguments),this._createCallFlowNode(e),!1}visitAssignment(e){return this._handleTypingStubAssignmentOrAnnotation(e)||(this._bindPossibleTupleNamedTarget(e.leftExpression),e.typeAnnotationComment&&(this.walk(e.typeAnnotationComment),this._addTypeDeclarationForVariable(e.leftExpression,e.typeAnnotationComment)),this.walk(e.rightExpression),this._addInferredTypeAssignmentForVariable(e.leftExpression,e.rightExpression),this._createAssignmentTargetFlowNodes(e.leftExpression,!0,!1)),!1}visitAssignmentExpression(e){this.walk(e.rightExpression);const t=h.getEvaluationNodeForAssignmentExpression(e);if(t){const n=u.getScope(t);let i=this._currentScope;for(;i&&i!==n;){if(i.lookUpSymbol(e.name.value)){this._addError(l.Localizer.Diagnostic.assignmentExprComprehension().format({name:e.name.value}),e.name);break}i=i.parent}this._bindNameToScope(n,e.name.value),this._addInferredTypeAssignmentForVariable(e.name,e.rightExpression)}else this._addError(l.Localizer.Diagnostic.assignmentExprContext(),e);return this._createAssignmentTargetFlowNodes(e.name,!0,!1),!1}visitAugmentedAssignment(e){return this.walk(e.leftExpression),this.walk(e.rightExpression),this._addInferredTypeAssignmentForVariable(e.destExpression,e.rightExpression),this._bindPossibleTupleNamedTarget(e.destExpression),this._createAssignmentTargetFlowNodes(e.destExpression,!1,!1),!1}visitDel(e){return e.expressions.forEach(e=>{this._bindPossibleTupleNamedTarget(e),this.walk(e),this._createAssignmentTargetFlowNodes(e,!1,!0)}),!1}visitTypeAnnotation(e){if(this._handleTypingStubAssignmentOrAnnotation(e))return!1;this._bindPossibleTupleNamedTarget(e.valueExpression),this._addTypeDeclarationForVariable(e.valueExpression,e.typeAnnotation);const t=[];return this._isNarrowingExpression(e.valueExpression,t)&&t.forEach(e=>{const t=d.createKeyForReference(e);this._currentExecutionScopeReferenceMap.set(t,t)}),!0}visitFor(e){this._bindPossibleTupleNamedTarget(e.targetExpression),this._addInferredTypeAssignmentForVariable(e.targetExpression,e),this.walk(e.iterableExpression);const t=this._createLoopLabel(),n=this._createBranchLabel(),i=this._createBranchLabel();return this._addAntecedent(t,this._currentFlowNode),this._currentFlowNode=t,this._addAntecedent(n,this._currentFlowNode),this._createAssignmentTargetFlowNodes(e.targetExpression,!0,!1),this._bindLoopStatement(t,i,()=>{this.walk(e.forSuite),this._addAntecedent(t,this._currentFlowNode)}),this._currentFlowNode=this._finishFlowLabel(n),e.elseSuite&&this.walk(e.elseSuite),this._addAntecedent(i,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(i),!1}visitContinue(e){return this._currentContinueTarget&&this._addAntecedent(this._currentContinueTarget,this._currentFlowNode),this._currentFlowNode=T._unreachableFlowNode,!1}visitBreak(e){return this._currentBreakTarget&&this._addAntecedent(this._currentBreakTarget,this._currentFlowNode),this._currentFlowNode=T._unreachableFlowNode,!1}visitReturn(e){return this._targetFunctionDeclaration&&(this._targetFunctionDeclaration.returnExpressions||(this._targetFunctionDeclaration.returnExpressions=[]),this._targetFunctionDeclaration.returnExpressions.push(e)),e.returnExpression&&this.walk(e.returnExpression),u.setFlowNode(e,this._currentFlowNode),this._currentReturnTarget&&this._addAntecedent(this._currentReturnTarget,this._currentFlowNode),this._finallyTargets.forEach(e=>{this._addAntecedent(e,this._currentFlowNode)}),this._currentFlowNode=T._unreachableFlowNode,!1}visitYield(e){return this._bindYield(e),!1}visitYieldFrom(e){return this._bindYield(e),!1}visitMemberAccess(e){return u.setFlowNode(e,this._currentFlowNode),!0}visitName(e){return u.setFlowNode(e,this._currentFlowNode),!1}visitIf(e){const t=this._createBranchLabel(),n=this._createBranchLabel(),i=this._createBranchLabel(),s=g.evaluateStaticBoolLikeExpression(e.testExpression,this._fileInfo.executionEnvironment);return this._bindConditional(e.testExpression,t,n),this._currentFlowNode=!1===s?T._unreachableFlowNode:this._finishFlowLabel(t),this.walk(e.ifSuite),this._addAntecedent(i,this._currentFlowNode),this._currentFlowNode=!0===s?T._unreachableFlowNode:this._finishFlowLabel(n),e.elseSuite&&this.walk(e.elseSuite),this._addAntecedent(i,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(i),!1}visitWhile(e){const t=this._createBranchLabel(),n=this._createBranchLabel(),i=this._createBranchLabel(),s=g.evaluateStaticBoolLikeExpression(e.testExpression,this._fileInfo.executionEnvironment),r=this._createLoopLabel();return this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=r,this._bindConditional(e.testExpression,t,n),this._currentFlowNode=!1===s?T._unreachableFlowNode:this._finishFlowLabel(t),this._bindLoopStatement(r,i,()=>{this.walk(e.whileSuite)}),this._addAntecedent(r,this._currentFlowNode),this._currentFlowNode=!0===s?T._unreachableFlowNode:this._finishFlowLabel(n),e.elseSuite&&this.walk(e.elseSuite),this._addAntecedent(i,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(i),!1}visitAssert(e){const t=this._createBranchLabel(),n=this._createBranchLabel();return this._bindConditional(e.testExpression,t,n),e.exceptionExpression&&(this._currentFlowNode=this._finishFlowLabel(n),this.walk(e.exceptionExpression)),this._currentFlowNode=this._finishFlowLabel(t),!1}visitExcept(e){if(e.typeExpression&&this.walk(e.typeExpression),e.name){this.walk(e.name);const t=this._bindNameToScope(this._currentScope,e.name.value);if(this._createAssignmentTargetFlowNodes(e.name,!0,!1),t){const n={type:1,node:e.name,isConstant:_.isConstantName(e.name.value),inferredTypeSource:e,path:this._fileInfo.filePath,range:r.convertOffsetsToRange(e.name.start,c.TextRange.getEnd(e.name),this._fileInfo.lines)};t.addDeclaration(n)}}return this.walk(e.exceptSuite),e.name&&this._createFlowAssignment(e.name,!0),!1}visitRaise(e){return e.typeExpression||0!==this._nestedExceptDepth||this._addError(l.Localizer.Diagnostic.raiseParams(),e),e.typeExpression&&this.walk(e.typeExpression),e.valueExpression&&this.walk(e.valueExpression),e.tracebackExpression&&this.walk(e.tracebackExpression),this._finallyTargets.forEach(e=>{this._addAntecedent(e,this._currentFlowNode)}),this._currentFlowNode=T._unreachableFlowNode,!1}visitTry(e){const t=e.exceptClauses.map(()=>this._createBranchLabel()),n=this._createBranchLabel(),i=this._createBranchLabel();let s=!1;const r={flags:d.FlowFlags.PreFinallyGate,id:d.getUniqueFlowNodeId(),antecedent:i,isGateClosed:!1};e.finallySuite&&this._addAntecedent(n,r),t.forEach(e=>{this._addAntecedent(e,this._currentFlowNode)}),e.finallySuite&&this._finallyTargets.push(i);const o=this._currentExceptTargets;if(this._currentExceptTargets=t,this.walk(e.trySuite),this._currentExceptTargets=o,e.elseSuite&&this.walk(e.elseSuite),this._addAntecedent(n,this._currentFlowNode),this._isCodeUnreachable()||(s=!0),this._nestedExceptDepth++,e.exceptClauses.forEach((e,i)=>{this._currentFlowNode=this._finishFlowLabel(t[i]),this.walk(e),this._addAntecedent(n,this._currentFlowNode),this._isCodeUnreachable()||(s=!0)}),this._nestedExceptDepth--,e.finallySuite&&this._finallyTargets.pop(),this._currentFlowNode=this._finishFlowLabel(n),e.finallySuite){this.walk(e.finallySuite);const t={flags:d.FlowFlags.PostFinally,id:d.getUniqueFlowNodeId(),antecedent:this._currentFlowNode,preFinallyGate:r};this._currentFlowNode=s?t:T._unreachableFlowNode}return!1}visitAwait(e){const t=h.getEnclosingFunction(e);return void 0!==t&&t.isAsync||this._addError(l.Localizer.Diagnostic.awaitNotInAsync(),e),!0}visitStringList(e){for(const t of e.strings)if(t.hasUnescapeErrors){p.getUnescapedString(t.token).unescapeErrors.forEach(e=>{const n={start:t.token.start+t.token.prefixLength+t.token.quoteMarkLength+e.offset,length:e.length};0===e.errorType?this._addDiagnostic(this._fileInfo.diagnosticRuleSet.reportInvalidStringEscapeSequence,"reportInvalidStringEscapeSequence",l.Localizer.Diagnostic.stringUnsupportedEscape(),n):1===e.errorType?this._addError(l.Localizer.Diagnostic.formatStringEscape(),n):2===e.errorType?this._addError(l.Localizer.Diagnostic.formatStringBrace(),n):3===e.errorType&&this._addError(l.Localizer.Diagnostic.formatStringUnterminated(),n)})}return!0}visitGlobal(e){const t=this._currentScope.getGlobalScope();return e.nameList.forEach(e=>{const n=e.value;0===this._notLocalBindings.get(n)&&this._addError(l.Localizer.Diagnostic.nonLocalRedefinition().format({name:n}),e);const i=this._currentScope.lookUpSymbolRecursive(n);i&&i.scope===this._currentScope&&this._addError(l.Localizer.Diagnostic.globalReassignment().format({name:n}),e),this._bindNameToScope(t,n),this._currentScope!==t&&this._notLocalBindings.set(n,1)}),!0}visitNonlocal(e){const t=this._currentScope.getGlobalScope();return this._currentScope===t?this._addError(l.Localizer.Diagnostic.nonLocalInModule(),e):e.nameList.forEach(e=>{const n=e.value;1===this._notLocalBindings.get(n)&&this._addError(l.Localizer.Diagnostic.globalRedefinition().format({name:n}),e);const i=this._currentScope.lookUpSymbolRecursive(n);i&&i.scope===this._currentScope?this._addError(l.Localizer.Diagnostic.nonLocalReassignment().format({name:n}),e):i&&i.scope!==t||this._addError(l.Localizer.Diagnostic.nonLocalNoBinding().format({name:n}),e),this._notLocalBindings.set(n,0)}),!0}visitImportAs(e){if(e.module.nameParts.length>0){const t=e.module.nameParts[0].value;let n;n=e.alias?e.alias.value:t;const s=this._bindNameToScope(this._currentScope,n);s&&this._fileInfo.isStubFile&&!e.alias&&s.setIsExternallyHidden();const r=u.getImportInfo(e.module);i.assert(void 0!==r),s&&this._createAliasDeclarationForMultipartImportName(e,e.alias,r,s),this._createFlowAssignment(e.alias?e.alias:e.module.nameParts[0])}return!0}visitImportFrom(e){const t=u.getImportInfo(e.module);let n="";if(t&&t.isImportFound&&(n=t.resolvedPaths[t.resolvedPaths.length-1]),e.isWildcardImport){if((h.getEnclosingClass(e)||h.getEnclosingFunction(e))&&this._addError(l.Localizer.Diagnostic.wildcardInFunction(),e),t){const i=[],s=this._fileInfo.importLookup(n);if(s){this._getWildcardImportNames(s).forEach(t=>{if(!s.symbolTable.get(t).isIgnoredForProtocolMatch()){const s=this._bindNameToScope(this._currentScope,t);if(s){const r={type:6,node:e,path:n,range:a.getEmptyRange(),usesLocalName:!1,symbolName:t};s.addDeclaration(r),i.push(t)}}})}t.implicitImports.forEach(t=>{if(!i.some(e=>e===t.name)){const s=this._bindNameToScope(this._currentScope,t.name);if(s){const r={type:6,node:e,path:t.path,range:a.getEmptyRange(),usesLocalName:!1},o={type:6,node:e,path:n,usesLocalName:!1,symbolName:t.name,submoduleFallback:r,range:a.getEmptyRange()};s.addDeclaration(o),i.push(t.name)}}}),this._createFlowWildcardImport(e,i)}}else{if(e.imports.forEach(i=>{const s=i.name.value,r=i.alias||i.name,o=this._bindNameToScope(this._currentScope,r.value);if(o){let r,c;this._fileInfo.isStubFile&&!i.alias&&o.setIsExternallyHidden(),t&&t.implicitImports&&(r=t.implicitImports.find(e=>e.name===s)),r&&(c={type:6,node:i,path:r.path,range:a.getEmptyRange(),usesLocalName:!1},0===e.module.nameParts.length&&(n=""));const l={type:6,node:i,path:n,usesLocalName:!!i.alias,symbolName:s,submoduleFallback:c,range:a.getEmptyRange()};o.addDeclaration(l),this._createFlowAssignment(i.alias||i.name)}}),"__init__"===s.stripFileExtension(s.getFileName(this._fileInfo.filePath))&&1===e.module.leadingDots&&e.module.nameParts.length>0){const n=e.module.nameParts[0].value,i=this._bindNameToScope(this._currentScope,n);i&&this._createAliasDeclarationForMultipartImportName(e,void 0,t,i),this._createFlowAssignment(e.module.nameParts[0])}}return!0}visitWith(e){return e.withItems.forEach(e=>{this.walk(e.expression),e.target&&(this._bindPossibleTupleNamedTarget(e.target),this._addInferredTypeAssignmentForVariable(e.target,e),this._createAssignmentTargetFlowNodes(e.target,!0,!1))}),this.walk(e.suite),!1}visitTernary(e){const t=this._createBranchLabel(),n=this._createBranchLabel(),i=this._createBranchLabel();return this._bindConditional(e.testExpression,t,n),this._currentFlowNode=this._finishFlowLabel(t),this.walk(e.ifExpression),this._addAntecedent(i,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(n),this.walk(e.elseExpression),this._addAntecedent(i,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(i),!1}visitUnaryOperation(e){if(38===e.operator&&this._currentFalseTarget&&this._currentTrueTarget)this._bindConditional(e.expression,this._currentFalseTarget,this._currentTrueTarget);else{const t=this._currentTrueTarget,n=this._currentFalseTarget;this._currentTrueTarget=void 0,this._currentFalseTarget=void 0,this.walk(e.expression),this._currentFalseTarget=n,this._currentTrueTarget=t}return!1}visitBinaryOperation(e){if(36===e.operator||37===e.operator){let t,n=this._currentTrueTarget,i=this._currentFalseTarget;n&&i||(t=this._createBranchLabel(),n=i=t);const s=this._createBranchLabel();36===e.operator?this._bindConditional(e.leftExpression,s,i):this._bindConditional(e.leftExpression,n,s),this._currentFlowNode=this._finishFlowLabel(s),this._bindConditional(e.rightExpression,n,i),t&&(this._currentFlowNode=this._finishFlowLabel(t))}else{const t=this._currentTrueTarget,n=this._currentFalseTarget;this._currentTrueTarget=void 0,this._currentFalseTarget=void 0,this.walk(e.leftExpression),this.walk(e.rightExpression),this._currentFalseTarget=n,this._currentTrueTarget=t}return!1}visitListComprehension(e){return this._createNewScope(0,this._currentScope,()=>{u.setScope(e,this._currentScope);const t=this._createBranchLabel(),n=[];for(let t=0;t<e.comprehensions.length;t++){const i=e.comprehensions[t],s=new Map;34===i.nodeType&&(this._bindPossibleTupleNamedTarget(i.targetExpression,s),this._addInferredTypeAssignmentForVariable(i.targetExpression,i)),n.push(s)}for(let i=0;i<e.comprehensions.length;i++){const s=e.comprehensions[i];if(34===s.nodeType){const e=n[i];for(const t of e){const e=this._currentScope.parent.lookUpSymbol(t[0]);e&&this._createAssignmentAliasFlowNode(t[1].id,e.id)}this.walk(s.iterableExpression),this._createAssignmentTargetFlowNodes(s.targetExpression,!0,!1)}else{const e=this._createBranchLabel();this._bindConditional(s.testExpression,e,t),this._currentFlowNode=this._finishFlowLabel(e)}}this.walk(e.expression),this._addAntecedent(t,this._currentFlowNode),this._currentFlowNode=this._finishFlowLabel(t)}),!1}_createAliasDeclarationForMultipartImportName(e,t,n,i){const s=e.module.nameParts[0].value;if(n&&n.isImportFound&&!n.isNativeLib&&n.resolvedPaths.length>0){const r=i.getDeclarations().find(e=>6===e.type&&e.firstNamePart===s),o=r||{type:6,node:e,path:"",range:a.getEmptyRange(),firstNamePart:s,usesLocalName:!!t};if(t||1===e.module.nameParts.length)o.path=n.resolvedPaths[n.resolvedPaths.length-1],this._addImplicitImportsToLoaderActions(n,o);else{let t=o;for(let i=1;i<e.module.nameParts.length&&!(i>=n.resolvedPaths.length);i++){const s=e.module.nameParts[i].value;let r=t.implicitImports?t.implicitImports.get(s):void 0;r||(r={path:"",implicitImports:new Map},t.implicitImports||(t.implicitImports=new Map),t.implicitImports.set(s,r)),i===e.module.nameParts.length-1&&(r.path=n.resolvedPaths[i],this._addImplicitImportsToLoaderActions(n,r)),t=r}}r||i.addDeclaration(o)}else{const n={type:6,node:e,path:"*** unresolved ***",range:a.getEmptyRange(),usesLocalName:!!t};i.addDeclaration(n)}}_getWildcardImportNames(e){const t=[],n=e.symbolTable.get("__all__");if(n){const i=n.getDeclarations();if(1===i.length&&1===i[0].type){const n=i[0];if(n.node.parent&&3===n.node.parent.nodeType){const i=n.node.parent.rightExpression;if(32===i.nodeType)return i.entries.forEach(n=>{if(49===n.nodeType&&1===n.strings.length&&50===n.strings[0].nodeType){const i=n.strings[0].value;e.symbolTable.get(i)&&t.push(i)}}),t}}}return e.symbolTable.forEach((e,n)=>{n.startsWith("_")||t.push(n)}),t}_walkStatementsAndReportUnreachable(e){let t=!1;for(const n of e)if(u.setFlowNode(n,this._currentFlowNode),t||(t=this._isCodeUnreachable()),t){if(this._targetFunctionDeclaration&&!this._targetFunctionDeclaration.isGenerator){(new v).checkContainsYield(n)&&(this._targetFunctionDeclaration.isGenerator=!0)}}else this.walk(n);return!1}_createStartFlowNode(){return{flags:d.FlowFlags.Start,id:d.getUniqueFlowNodeId()}}_createBranchLabel(){return{flags:d.FlowFlags.BranchLabel,id:d.getUniqueFlowNodeId(),antecedents:[]}}_createLoopLabel(){return{flags:d.FlowFlags.LoopLabel,id:d.getUniqueFlowNodeId(),antecedents:[]}}_finishFlowLabel(e){return 0===e.antecedents.length?T._unreachableFlowNode:1===e.antecedents.length?e.antecedents[0]:e}_bindConditional(e,t,n){const i=this._currentTrueTarget,s=this._currentFalseTarget;this._currentTrueTarget=t,this._currentFalseTarget=n,this.walk(e),this._currentTrueTarget=i,this._currentFalseTarget=s,this._isLogicalExpression(e)||(this._addAntecedent(t,this._createFlowConditional(d.FlowFlags.TrueCondition,this._currentFlowNode,e)),this._addAntecedent(n,this._createFlowConditional(d.FlowFlags.FalseCondition,this._currentFlowNode,e)))}_createFlowConditional(e,t,n){if(t.flags&d.FlowFlags.Unreachable)return t;const i=g.evaluateStaticBoolLikeExpression(n,this._fileInfo.executionEnvironment);if(!0===i&&e&d.FlowFlags.FalseCondition||!1===i&&e&d.FlowFlags.TrueCondition)return T._unreachableFlowNode;const s=[];if(!this._isNarrowingExpression(n,s))return t;s.forEach(e=>{const t=d.createKeyForReference(e);this._currentExecutionScopeReferenceMap.set(t,t)});const r={flags:e,id:d.getUniqueFlowNodeId(),expression:n,antecedent:t};return this._addExceptTargets(r),r}_isLogicalExpression(e){switch(e.nodeType){case 56:return 38===e.operator;case 7:return 36===e.operator||37===e.operator}return!1}_isNarrowingExpression(e,t){switch(e.nodeType){case 39:case 36:return!!d.isCodeFlowSupportedForReference(e)&&(t.push(e),!0);case 4:return t.push(e.name),!0;case 7:{const n=39===e.operator||40===e.operator,i=12===e.operator||28===e.operator;if(n||i){if(11===e.rightExpression.nodeType&&24===e.rightExpression.constType)return this._isNarrowingExpression(e.leftExpression,t);if(n&&9===e.leftExpression.nodeType&&39===e.leftExpression.leftExpression.nodeType&&"type"===e.leftExpression.leftExpression.value&&1===e.leftExpression.arguments.length&&0===e.leftExpression.arguments[0].argumentCategory)return this._isNarrowingExpression(e.leftExpression.arguments[0].valueExpression,t);const s=this._isNarrowingExpression(e.leftExpression,t);if(n)return s;if(i){const n=this._isNarrowingExpression(e.rightExpression,t);return s||n}}return 41===e.operator&&this._isNarrowingExpression(e.leftExpression,t)}case 56:return 38===e.operator&&this._isNarrowingExpression(e.expression,t);case 5:return this._isNarrowingExpression(e.rightExpression,t);case 9:if(39===e.leftExpression.nodeType&&("isinstance"===e.leftExpression.value||"issubclass"===e.leftExpression.value)&&2===e.arguments.length)return this._isNarrowingExpression(e.arguments[0].valueExpression,t);if(39===e.leftExpression.nodeType&&"callable"===e.leftExpression.value&&1===e.arguments.length)return this._isNarrowingExpression(e.arguments[0].valueExpression,t)}return!1}_createAssignmentTargetFlowNodes(e,t,n){switch(e.nodeType){case 39:case 36:this._createFlowAssignment(e,n),t&&this.walk(e);break;case 53:e.expressions.forEach(e=>{this._createAssignmentTargetFlowNodes(e,t,n)});break;case 55:this._createAssignmentTargetFlowNodes(e.valueExpression,!1,n),t&&this.walk(e);break;case 57:this._createAssignmentTargetFlowNodes(e.expression,!1,n),t&&this.walk(e);break;case 32:e.entries.forEach(e=>{this._createAssignmentTargetFlowNodes(e,t,n)});break;default:t&&this.walk(e)}}_createCallFlowNode(e){if(!this._isCodeUnreachable()){const t={flags:d.FlowFlags.Call,id:d.getUniqueFlowNodeId(),node:e,antecedent:this._currentFlowNode};this._currentFlowNode=t}u.setFlowNode(e,this._currentFlowNode)}_createAssignmentAliasFlowNode(e,t){if(!this._isCodeUnreachable()){const n={flags:d.FlowFlags.AssignmentAlias,id:d.getUniqueFlowNodeId(),antecedent:this._currentFlowNode,targetSymbolId:e,aliasSymbolId:t};this._currentFlowNode=n}}_createFlowAssignment(e,t=!1){let n=y.indeterminateSymbolId;if(39===e.nodeType){const t=this._currentScope.lookUpSymbolRecursive(e.value);i.assert(void 0!==t),n=t.symbol.id}const s=this._currentFlowNode;if(!this._isCodeUnreachable()&&d.isCodeFlowSupportedForReference(e)){const i={flags:d.FlowFlags.Assignment,id:d.getUniqueFlowNodeId(),node:e,antecedent:this._currentFlowNode,targetSymbolId:n},s=d.createKeyForReference(e);this._currentExecutionScopeReferenceMap.set(s,s),t&&(i.flags|=d.FlowFlags.Unbind),this._addExceptTargets(i),this._currentFlowNode=i}t&&void 0!==u.getFlowNode(e)||u.setFlowNode(e,t?s:this._currentFlowNode)}_createFlowWildcardImport(e,t){if(!this._isCodeUnreachable()){const n={flags:d.FlowFlags.WildcardImport,id:d.getUniqueFlowNodeId(),node:e,names:t,antecedent:this._currentFlowNode};this._addExceptTargets(n),this._currentFlowNode=n}u.setFlowNode(e,this._currentFlowNode)}_isCodeUnreachable(){return!!(this._currentFlowNode.flags&d.FlowFlags.Unreachable)}_addExceptTargets(e){this._currentExceptTargets&&this._currentExceptTargets.forEach(t=>{this._addAntecedent(t,e)})}_bindLoopStatement(e,t,n){const i=this._currentContinueTarget,s=this._currentBreakTarget;this._currentContinueTarget=e,this._currentBreakTarget=t,n(),this._currentContinueTarget=i,this._currentBreakTarget=s}_addAntecedent(e,t){this._currentFlowNode.flags&d.FlowFlags.Unreachable||e.antecedents.some(e=>e.id===t.id)||e.antecedents.push(t)}_bindNameToScope(e,t,n){if(void 0===this._notLocalBindings.get(t)){let i=e.lookUpSymbol(t);if(!i){if(i=e.addSymbol(t,5),2===e.type){const n=e.parent.lookUpSymbol(t);n&&this._createAssignmentAliasFlowNode(i.id,n.id)}this._fileInfo.isStubFile&&_.isPrivateOrProtectedName(t)&&i.setIsExternallyHidden(),n&&n.set(t,i)}return i}}_bindPossibleTupleNamedTarget(e,t){switch(e.nodeType){case 39:this._bindNameToScope(this._currentScope,e.value,t);break;case 53:e.expressions.forEach(e=>{this._bindPossibleTupleNamedTarget(e,t)});break;case 32:e.entries.forEach(e=>{this._bindPossibleTupleNamedTarget(e,t)});break;case 55:this._bindPossibleTupleNamedTarget(e.valueExpression,t);break;case 57:this._bindPossibleTupleNamedTarget(e.expression,t)}}_addBuiltInSymbolToCurrentScope(e,t,n){const i=this._addSymbolToCurrentScope(e,!1);i&&(i.addDeclaration({type:0,node:t,intrinsicType:n,path:this._fileInfo.filePath,range:a.getEmptyRange()}),i.setIsIgnoredForProtocolMatch())}_addSymbolToCurrentScope(e,t){let n=this._currentScope.lookUpSymbol(e);if(!n){let i=0;t&&(i|=1),2===this._currentScope.type&&(i|=4),this._fileInfo.isStubFile&&_.isPrivateOrProtectedName(e)&&(i|=2),n=this._currentScope.addSymbol(e,i)}return n}_createNewScope(e,t,n){const i=this._currentScope;this._currentScope=new m.Scope(e,t);const s=4===e||3===e||1===e,r=this._currentExecutionScopeReferenceMap;s&&(this._currentExecutionScopeReferenceMap=new Map);const o=this._notLocalBindings;this._notLocalBindings=new Map,n(),this._currentExecutionScopeReferenceMap=r,this._currentScope=i,this._notLocalBindings=o}_addInferredTypeAssignmentForVariable(e,t){switch(e.nodeType){case 39:{const n=e,i=this._currentScope.lookUpSymbolRecursive(n.value);if(i&&i.symbol){const s={type:1,node:e,isConstant:_.isConstantName(e.value),inferredTypeSource:t,path:this._fileInfo.filePath,range:r.convertOffsetsToRange(n.start,c.TextRange.getEnd(n),this._fileInfo.lines)};i.symbol.addDeclaration(s)}break}case 36:{const n=this._getMemberAccessInfo(e);if(n){const i=e.memberName;let s=n.classScope.lookUpSymbol(i.value);if(!s){s=n.classScope.addSymbol(i.value,1);const e="none"!==this._fileInfo.diagnosticRuleSet.reportPrivateUsage;_.isPrivateOrProtectedName(i.value)&&e&&s.setIsPrivateMember()}n.isInstanceMember?s.isClassMember()&&s.getDeclarations().some(e=>3===e.type&&e.isMethod)||s.setIsInstanceMember():s.setIsClassMember();const o={type:1,node:e.memberName,isConstant:_.isConstantName(i.value),inferredTypeSource:t,path:this._fileInfo.filePath,range:r.convertOffsetsToRange(e.memberName.start,e.memberName.start+e.memberName.length,this._fileInfo.lines)};s.addDeclaration(o)}break}case 53:e.expressions.forEach(e=>{this._addInferredTypeAssignmentForVariable(e,t)});break;case 55:this._addInferredTypeAssignmentForVariable(e.valueExpression,t);break;case 57:this._addInferredTypeAssignmentForVariable(e.expression,t);break;case 32:e.entries.forEach(e=>{this._addInferredTypeAssignmentForVariable(e,t)})}}_addTypeDeclarationForVariable(e,t){let n=!1;switch(e.nodeType){case 39:{const i=e,s=this._currentScope.lookUpSymbolRecursive(i.value);if(s&&s.symbol){const n=this._isAnnotationFinal(t),o=this._isAnnotationTypeAlias(t);let a=t;o?(a=void 0,3!==this._currentScope.type&&this._addError(l.Localizer.Diagnostic.typeAliasNotInModule(),t)):n.isFinal&&(a=n.finalTypeNode);const p={type:1,node:e,isConstant:_.isConstantName(i.value),isFinal:n.isFinal,isTypeAlias:o,path:this._fileInfo.filePath,typeAnnotationNode:a,range:r.convertOffsetsToRange(i.start,c.TextRange.getEnd(i),this._fileInfo.lines)};s.symbol.addDeclaration(p),24===t.nodeType&&39===t.baseExpression.nodeType&&"ClassVar"===t.baseExpression.value?s.symbol.setIsClassVar():s.symbol.setIsInstanceMember()}n=!0;break}case 36:{const i=this._getMemberAccessInfo(e);if(i){const s=e.memberName;let o=i.classScope.lookUpSymbol(s.value);if(!o){o=i.classScope.addSymbol(s.value,1);const e="none"!==this._fileInfo.diagnosticRuleSet.reportPrivateUsage;_.isPrivateOrProtectedName(s.value)&&e&&o.setIsPrivateMember()}i.isInstanceMember?o.setIsInstanceMember():o.setIsClassMember();const a=this._isAnnotationFinal(t),c={type:1,node:e.memberName,isConstant:_.isConstantName(s.value),isFinal:a.isFinal,path:this._fileInfo.filePath,typeAnnotationNode:a.isFinal?a.finalTypeNode:t,range:r.convertOffsetsToRange(e.memberName.start,e.memberName.start+e.memberName.length,this._fileInfo.lines)};o.addDeclaration(c),n=!0}break}}n||this._addError(l.Localizer.Diagnostic.annotationNotSupported(),t)}_isTypingAnnotation(e,t){if(39===e.nodeType){if(e.value===t)return!0}else if(36===e.nodeType&&39===e.leftExpression.nodeType&&("typing"===e.leftExpression.value||"t"===e.leftExpression.value)&&e.memberName.value===t)return!0;return!1}_isAnnotationFinal(e){let t,n=!1;if(e)if(this._isTypingAnnotation(e,"Final"))n=!0;else if(24===e.nodeType&&1===e.items.items.length){this._isAnnotationFinal(e.baseExpression).isFinal&&(n=!0,t=e.items.items[0])}return{isFinal:n,finalTypeNode:t}}_isAnnotationTypeAlias(e){return!!e&&(!(this._fileInfo.executionEnvironment.pythonVersion<o.PythonVersion.V39&&!this._fileInfo.isStubFile)&&this._isTypingAnnotation(e,"TypeAlias"))}_getMemberAccessInfo(e){if(39!==e.leftExpression.nodeType)return;const t=e.leftExpression.value,n=h.getEnclosingFunction(e);if(!n)return;const s=h.getEnclosingClass(n);if(!s)return;let r=!1;if(n.parameters.length<1||!n.parameters[0].name)return;const o=s.name.value,a=n.parameters[0].name.value;if(t===o)r=!1;else{if(t!==a)return;if("__new__"===n.name.value)r=!1;else{r=!0;for(const e of n.decorators)if(39===e.leftExpression.nodeType){const t=e.leftExpression.value;if("staticmethod"===t)return;if("classmethod"===t){r=!1;break}}}}const c=u.getScope(s);return i.assert(void 0!==c),{classNode:s,methodNode:n,classScope:c,isInstanceMember:r}}_addImplicitImportsToLoaderActions(e,t){e.implicitImports.forEach(e=>{const n=t.implicitImports?t.implicitImports.get(e.name):void 0;n?n.path=e.path:(t.implicitImports||(t.implicitImports=new Map),t.implicitImports.set(e.name,{path:e.path,implicitImports:new Map}))})}_handleTypingStubAssignmentOrAnnotation(e){if(!this._fileInfo.isTypingStubFile)return!1;let t;if(55===e.nodeType)t=e;else{if(55!==e.leftExpression.nodeType)return!1;t=e.leftExpression}if(39!==t.valueExpression.nodeType)return!1;const n=t.valueExpression.value;if(!{Tuple:!0,Generic:!0,Protocol:!0,Callable:!0,Type:!0,ClassVar:!0,Final:!0,Literal:!0,TypedDict:!0,Union:!0,Optional:!0,Annotated:!0,TypeAlias:!0}[n])return!1;const i=this._bindNameToScope(this._currentScope,n);return i&&i.addDeclaration({type:5,node:t,path:this._fileInfo.filePath,range:r.convertOffsetsToRange(t.start,c.TextRange.getEnd(t),this._fileInfo.lines)}),!0}_deferBinding(e){this._deferredBindingTasks.push({scope:this._currentScope,nonLocalBindingsMap:this._notLocalBindings,codeFlowExpressionMap:this._currentExecutionScopeReferenceMap,callback:e})}_bindDeferred(){for(;this._deferredBindingTasks.length>0;){const e=this._deferredBindingTasks.shift();this._currentScope=e.scope,this._notLocalBindings=e.nonLocalBindingsMap,this._nestedExceptDepth=0,this._currentExecutionScopeReferenceMap=e.codeFlowExpressionMap,e.callback()}}_bindYield(e){const t=h.getEnclosingFunction(e);t?t.isAsync&&62===e.nodeType&&this._addError(l.Localizer.Diagnostic.yieldFromOutsideAsync(),e):this._addError(l.Localizer.Diagnostic.yieldOutsideFunction(),e),this._targetFunctionDeclaration&&(this._targetFunctionDeclaration.yieldExpressions||(this._targetFunctionDeclaration.yieldExpressions=[]),this._targetFunctionDeclaration.yieldExpressions.push(e),this._targetFunctionDeclaration.isGenerator=!0),e.expression&&this.walk(e.expression),u.setFlowNode(e,this._currentFlowNode)}_addDiagnostic(e,t,n,s){let r;switch(e){case"error":r=this._addError(n,s);break;case"warning":r=this._addWarning(n,s);break;case"information":r=this._addInformation(n,s);break;case"none":break;default:return i.assertNever(e,e+" is not expected")}return r&&r.setRule(t),r}_addError(e,t){return this._fileInfo.diagnosticSink.addDiagnosticWithTextRange("error",e,t)}_addWarning(e,t){return this._fileInfo.diagnosticSink.addDiagnosticWithTextRange("warning",e,t)}_addInformation(e,t){return this._fileInfo.diagnosticSink.addDiagnosticWithTextRange("information",e,t)}}t.Binder=T,T._unreachableFlowNode={flags:d.FlowFlags.Unreachable,id:d.getUniqueFlowNodeId()};class v extends f.ParseTreeWalker{constructor(){super(...arguments),this._containsYield=!1}checkContainsYield(e){return this.walk(e),this._containsYield}visitYield(e){return this._containsYield=!0,!1}visitYieldFrom(e){return this._containsYield=!0,!1}}t.YieldFinder=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scope=void 0;const i=n(2),s=n(35);t.Scope=class{constructor(e,t){this.symbolTable=new Map,this.type=e,this.parent=t}getGlobalScope(){let e=this;for(;e;){if(3===e.type||4===e.type)return e;e=e.parent}return i.fail("failed to find scope"),this}isIndependentlyExecutable(){return 3===this.type||1===this.type}lookUpSymbol(e){return this.symbolTable.get(e)}lookUpSymbolRecursive(e){return this._lookUpSymbolRecursiveInternal(e,!1,!1)}addSymbol(e,t){const n=new s.Symbol(t);return this.symbolTable.set(e,n),n}_lookUpSymbolRecursiveInternal(e,t,n){const i=this.symbolTable.get(e);if(i){if(t&&i.isExternallyHidden())return;return{symbol:i,isOutsideCallerModule:t,isBeyondExecutionScope:n,scope:this}}if(this.parent)return this.parent._lookUpSymbolRecursiveInternal(e,t||3===this.type,n||this.isIndependentlyExecutable())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checker=void 0;const i=n(2),s=n(26),r=n(1),o=n(22),a=n(25),c=n(7),l=n(20),p=n(34),u=n(6),d=n(11),h=n(15),f=n(31),m=n(21),g=n(17);class y extends d.ParseTreeWalker{constructor(e,t){super(),this._scopedNodes=[],this._moduleNode=e,this._fileInfo=c.getFileInfo(e),this._evaluator=t}check(){this._scopedNodes.push(this._moduleNode),this.walkMultiple(this._moduleNode.statements),this._validateSymbolTables(),this._reportDuplicateImports()}walk(e){c.isCodeUnreachable(e)||super.walk(e)}visitModule(e){return this._walkStatementsAndReportUnreachable(e.statements),!1}visitSuite(e){return this._walkStatementsAndReportUnreachable(e.statements),!1}visitStatementList(e){return e.statements.forEach(e=>{a.isExpressionNode(e)&&!c.isCodeUnreachable(e)&&this._evaluator.getType(e)}),!0}visitClass(e){const t=this._evaluator.getTypeOfClass(e);return this.walk(e.suite),this.walkMultiple(e.decorators),this.walkMultiple(e.arguments),t&&(this._validateClassMethods(t.classType),this._validateFinalMemberOverrides(t.classType),m.ClassType.isTypedDictClass(t.classType)&&this._validateTypedDictClassSuite(e.suite)),this._scopedNodes.push(e),!1}visitFunction(e){const t=this._evaluator.getTypeOfFunction(e),n=u.getEnclosingClass(e,!0);return t&&(e.parameters.forEach((e,n)=>{if(e.name&&"_"!==e.name.value){const i=t.functionType.details.parameters[n].type;if(1===i.category||11===i.category&&i.isSynthesized&&!i.boundType)this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownParameterType,"reportUnknownParameterType",o.Localizer.Diagnostic.paramTypeUnknown().format({paramName:e.name.value}),e.name);else if(g.containsUnknown(i)){const t=new s.DiagnosticAddendum;t.addMessage(o.Localizer.DiagnosticAddendum.paramType().format({paramType:this._evaluator.printType(i,!1)})),this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownParameterType,"reportUnknownParameterType",o.Localizer.Diagnostic.paramTypePartiallyUnknown().format({paramName:e.name.value})+t.getString(),e.name)}}}),n&&this._validateMethod(e,t.functionType,n)),e.parameters.forEach(e=>{e.defaultValue&&this.walk(e.defaultValue),e.typeAnnotation&&this.walk(e.typeAnnotation)}),e.returnTypeAnnotation&&this.walk(e.returnTypeAnnotation),this.walkMultiple(e.decorators),e.parameters.forEach(e=>{e.name&&this.walk(e.name)}),this.walk(e.suite),t&&this._validateFunctionReturn(e,t.functionType),this._scopedNodes.push(e),!1}visitLambda(e){this._evaluator.getType(e),this.walkMultiple([...e.parameters,e.expression]),e.parameters.forEach(e=>{if(e.name){const t=this._evaluator.getType(e.name);t&&(1===t.category?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownLambdaType,"reportUnknownLambdaType",o.Localizer.Diagnostic.paramTypeUnknown().format({paramName:e.name.value}),e.name):g.containsUnknown(t)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownLambdaType,"reportUnknownLambdaType",o.Localizer.Diagnostic.paramTypePartiallyUnknown().format({paramName:e.name.value}),e.name))}});const t=this._evaluator.getType(e.expression);return t&&(1===t.category?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownLambdaType,"reportUnknownLambdaType",o.Localizer.Diagnostic.lambdaReturnTypeUnknown(),e.expression):g.containsUnknown(t)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownLambdaType,"reportUnknownLambdaType",o.Localizer.Diagnostic.lambdaReturnTypePartiallyUnknown().format({returnType:this._evaluator.printType(t,!1)}),e.expression)),this._scopedNodes.push(e),!1}visitCall(e){return this._validateIsInstanceCallNecessary(e),u.isWithinDefaultParamInitializer(e)&&!this._fileInfo.isStubFile&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportCallInDefaultInitializer,"reportCallInDefaultInitializer",o.Localizer.Diagnostic.defaultValueContainsCall(),e),!0}visitFor(e){return this._evaluator.evaluateTypesForStatement(e),!0}visitListComprehension(e){return this._scopedNodes.push(e),!0}visitIf(e){return this._evaluator.getType(e.testExpression),!0}visitWhile(e){return this._evaluator.getType(e.testExpression),!0}visitWith(e){return e.withItems.forEach(e=>{this._evaluator.evaluateTypesForStatement(e)}),!0}visitReturn(e){let t;const n=u.getEnclosingFunction(e),i=n?this._evaluator.getFunctionDeclaredReturnType(n):void 0;if(t=e.returnExpression?this._evaluator.getType(e.returnExpression)||m.UnknownType.create():m.NoneType.create(),this._evaluator.isNodeReachable(e)&&n){if(i)if(g.isNoReturnType(i))this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",o.Localizer.Diagnostic.noReturnContainsReturn(),e);else{const n=new s.DiagnosticAddendum,r=g.specializeType(i,void 0);this._evaluator.canAssignType(r,t,n)||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",o.Localizer.Diagnostic.returnTypeMismatch().format({exprType:this._evaluator.printType(t,!1),returnType:this._evaluator.printType(r,!1)})+n.getString(),e.returnExpression?e.returnExpression:e)}1===t.category?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownVariableType,"reportUnknownVariableType",o.Localizer.Diagnostic.returnTypeUnknown(),e.returnExpression):g.containsUnknown(t)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownVariableType,"reportUnknownVariableType",o.Localizer.Diagnostic.returnTypePartiallyUnknown().format({returnType:this._evaluator.printType(t,!1)}),e.returnExpression)}return!0}visitYield(e){const t=e.expression?this._evaluator.getType(e.expression):m.NoneType.create();let n=t;const i=this._evaluator.getBuiltInType(e,"Iterator");return n=t&&7===i.category?m.ObjectType.create(m.ClassType.cloneForSpecialization(i,[t])):m.UnknownType.create(),this._validateYieldType(e,n),!0}visitYieldFrom(e){const t=this._evaluator.getType(e.expression);return t&&this._validateYieldType(e,t),!0}visitRaise(e){const t=this._evaluator.getBuiltInType(e,"BaseException");if(e.typeExpression){const n=this._evaluator.getType(e.typeExpression);if(n&&t&&7===t.category){const i=new s.DiagnosticAddendum;g.doForSubtypes(n,e=>(m.isAnyOrUnknown(e)||(7===e.category?g.derivesFromClassRecursive(e,t,!1)||i.addMessage(o.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:this._evaluator.printType(e,!1)})):8===e.category&&g.derivesFromClassRecursive(e.classType,t,!1)||i.addMessage(o.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:this._evaluator.printType(e,!1)}))),e)),i.isEmpty()||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",o.Localizer.Diagnostic.expectedExceptionClass()+i.getString(),e.typeExpression)}}if(e.valueExpression){const n=this._evaluator.getType(e.valueExpression);if(n&&t&&7===t.category){const i=new s.DiagnosticAddendum;g.doForSubtypes(n,e=>(m.isAnyOrUnknown(e)||m.isNoneOrNever(e)||8===e.category&&g.derivesFromClassRecursive(e.classType,t,!1)||i.addMessage(o.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:this._evaluator.printType(e,!1)})),e)),i.isEmpty()||this._evaluator.addError(o.Localizer.Diagnostic.expectedExceptionObj()+i.getString(),e.valueExpression)}}return!0}visitExcept(e){if(e.typeExpression){this._evaluator.evaluateTypesForStatement(e);const t=this._evaluator.getType(e.typeExpression);t&&this._validateExceptionType(t,e.typeExpression)}return!0}visitAssert(e){e.exceptionExpression&&this._evaluator.getType(e.exceptionExpression);const t=this._evaluator.getType(e.testExpression);if(t&&8===t.category&&m.ClassType.isBuiltIn(t.classType,"Tuple")&&t.classType.typeArguments&&t.classType.typeArguments.length>0){const n=t.classType.typeArguments[t.classType.typeArguments.length-1];g.isEllipsisType(n)||this._evaluator.addDiagnosticForTextRange(this._fileInfo,this._fileInfo.diagnosticRuleSet.reportAssertAlwaysTrue,"reportAssertAlwaysTrue",o.Localizer.Diagnostic.assertAlwaysTrue(),e.testExpression)}return!0}visitAssignment(e){return this._evaluator.evaluateTypesForStatement(e),e.typeAnnotationComment&&this._evaluator.getType(e.typeAnnotationComment),!0}visitAssignmentExpression(e){return this._evaluator.getType(e),!0}visitAugmentedAssignment(e){return this._evaluator.evaluateTypesForStatement(e),!0}visitIndex(e){return this._evaluator.getType(e),!0}visitBinaryOperation(e){return this._evaluator.getType(e),!0}visitSlice(e){return this._evaluator.getType(e),!0}visitUnpack(e){return this._evaluator.getType(e),!0}visitTuple(e){return this._evaluator.getType(e),!0}visitUnaryOperation(e){return this._evaluator.getType(e),!0}visitTernary(e){return this._evaluator.getType(e),!0}visitStringList(e){return e.typeAnnotation&&this._evaluator.getType(e),e.strings.length>1&&this._evaluator.addDiagnosticForTextRange(this._fileInfo,this._fileInfo.diagnosticRuleSet.reportImplicitStringConcatenation,"reportImplicitStringConcatenation",o.Localizer.Diagnostic.implicitStringConcat(),e),!0}visitFormatString(e){return e.expressions.forEach(e=>{this._evaluator.getType(e)}),!0}visitName(e){return this._conditionallyReportPrivateUsage(e),!0}visitDel(e){return e.expressions.forEach(e=>{this._evaluator.verifyDeleteExpression(e)}),!0}visitMemberAccess(e){return this._evaluator.getType(e),this._conditionallyReportPrivateUsage(e.memberName),this.walk(e.leftExpression),!1}visitImportAs(e){return this._evaluator.evaluateTypesForStatement(e),!1}visitImportFrom(e){return e.isWildcardImport||e.imports.forEach(e=>{this._evaluator.evaluateTypesForStatement(e)}),!1}visitTypeAnnotation(e){return this._evaluator.getType(e.typeAnnotation),!0}visitError(e){return e.child&&this._evaluator.getType(e.child),!1}_walkStatementsAndReportUnreachable(e){let t=!1;for(const n of e){if(!t&&!this._evaluator.isNodeReachable(n)){const i=n.start,s=e[e.length-1],o=r.TextRange.getEnd(s);this._evaluator.addUnusedCode(n,{start:i,length:o-i}),t=!0}this.walk(n)}}_validateExceptionType(e,t){const n=this._evaluator.getBuiltInType(t,"BaseException"),i=e=>!n||7!==n.category||g.derivesFromClassRecursive(e,n,!1),r=new s.DiagnosticAddendum;let a;if(m.isAnyOrUnknown(e))a=e;else if(7===e.category)i(e)||r.addMessage(o.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:this._evaluator.printType(e,!1)})),a=m.ObjectType.create(e);else if(8===e.category){const n=this._evaluator.getTypeFromIterable(e,!1,t,!1);a=g.doForSubtypes(n,t=>{if(m.isAnyOrUnknown(t))return t;const n=g.transformTypeObjectToClass(t);return 7===n.category?(i(n)||r.addMessage(o.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:this._evaluator.printType(e,!1)})),m.ObjectType.create(n)):(r.addMessage(o.Localizer.Diagnostic.exceptionTypeIncorrect().format({type:this._evaluator.printType(e,!1)})),m.UnknownType.create())})}return r.isEmpty()||this._evaluator.addError(o.Localizer.Diagnostic.exceptionTypeNotClass().format({type:this._evaluator.printType(e,!1)}),t),a||m.UnknownType.create()}_validateSymbolTables(){if(!this._fileInfo.isStubFile)for(const e of this._scopedNodes){const t=c.getScope(e);t.symbolTable.forEach((e,n)=>{this._conditionallyReportUnusedSymbol(n,e,t.type),this._reportIncompatibleDeclarations(n,e),this._reportMultipleFinalDeclarations(n,e),this._reportMultipleTypeAliasDeclarations(n,e)})}}_reportMultipleFinalDeclarations(e,t){if(!f.isFinalVariable(t))return;const n=t.getDeclarations();let i=!1,s=!1;if(n.forEach(t=>{l.isFinalVariableDeclaration(t)&&(i&&this._evaluator.addError(o.Localizer.Diagnostic.finalRedeclaration().format({name:e}),t.node),i=!0),1===t.type&&t.inferredTypeSource&&(s&&this._evaluator.addError(o.Localizer.Diagnostic.finalReassigned().format({name:e}),t.node),s=!0)}),!s&&!this._fileInfo.isStubFile){const t=n.find(e=>1===e.type&&e.isFinal);t&&this._evaluator.addError(o.Localizer.Diagnostic.finalUnassigned().format({name:e}),t.node)}}_reportMultipleTypeAliasDeclarations(e,t){const n=t.getDeclarations(),i=n.find(e=>l.isTypeAliasDeclaration(e));i&&n.length>1&&n.forEach(t=>{t!==i&&this._evaluator.addError(o.Localizer.Diagnostic.typeAliasRedeclared().format({name:e}),t.node)})}_reportIncompatibleDeclarations(e,t){const n=f.getLastTypedDeclaredForSymbol(t);if(!n)return;let i,s=t.getDeclarations().filter(e=>e!==n);if(3===n.type&&(s=s.filter(e=>3!==e.type)),0===s.length)return;i=3===n.type?n.isMethod?o.Localizer.DiagnosticAddendum.seeMethodDeclaration():o.Localizer.DiagnosticAddendum.seeFunctionDeclaration():4===n.type?o.Localizer.DiagnosticAddendum.seeClassDeclaration():2===n.type?o.Localizer.DiagnosticAddendum.seeParameterDeclaration():1===n.type?o.Localizer.DiagnosticAddendum.seeVariableDeclaration():o.Localizer.DiagnosticAddendum.seeDeclaration();const r=e=>{if(e){let t;3===n.type||4===n.type?t=n.node.name:1===n.type?39===n.node.nodeType&&(t=n.node):2===n.type&&n.node.name&&(t=n.node.name),t&&e.addRelatedInfo(i,n.path,n.range)}};for(const t of s)if(4===t.type){r(this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",o.Localizer.Diagnostic.obscuredClassDeclaration().format({name:e}),t.node.name))}else if(3===t.type){r(this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",o.Localizer.Diagnostic.obscuredFunctionDeclaration().format({name:e}),t.node.name))}else if(2===t.type){if(t.node.name){r(this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",o.Localizer.Diagnostic.obscuredParameterDeclaration().format({name:e}),t.node.name))}}else if(1===t.type){const i=this._evaluator.getTypeForDeclaration(n);if(t.typeAnnotationNode){if(39===t.node.nodeType){let s=!1;if(1===n.type){const e=this._evaluator.getTypeForDeclaration(t);i&&e&&m.isTypeSame(i,e)&&(s=!0)}if(!s){r(this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",o.Localizer.Diagnostic.obscuredVariableDeclaration().format({name:e}),t.node))}}}else if(i&&!g.isProperty(i)&&(3===n.type||4===n.type)){r(this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",o.Localizer.Diagnostic.obscuredVariableDeclaration().format({name:e}),t.node))}}}_conditionallyReportUnusedSymbol(e,t,n){const i=this._fileInfo.accessedSymbolMap;t.isIgnoredForProtocolMatch()||i.has(t.id)||"_"!==e&&(h.isDunderName(e)||t.getDeclarations().forEach(t=>{this._conditionallyReportUnusedDeclaration(t,this._isSymbolPrivate(e,n))}))}_conditionallyReportUnusedDeclaration(e,t){let n,i,s,a;switch(e.type){case 6:if(n=this._fileInfo.diagnosticRuleSet.reportUnusedImport,a="reportUnusedImport",21===e.node.nodeType)if(e.node.alias)i=e.node.alias;else{const t=e.node.module.nameParts;if(t.length>0){const e=t.map(e=>e.value).join("."),n={start:t[0].start,length:t[0].length};return r.TextRange.extend(n,t[t.length-1]),this._fileInfo.diagnosticSink.addUnusedCodeWithTextRange(o.Localizer.Diagnostic.unaccessedSymbol().format({name:e}),n,{action:"pyright.unusedImport"}),void this._evaluator.addDiagnosticForTextRange(this._fileInfo,this._fileInfo.diagnosticRuleSet.reportUnusedImport,"reportUnusedImport",o.Localizer.Diagnostic.unaccessedImport().format({name:e}),n)}}else if(23===e.node.nodeType){const t=e.node.parent;(0===t.module.nameParts.length||"__future__"!==t.module.nameParts[0].value&&!this._fileInfo.filePath.endsWith("_pb2.py"))&&(i=e.node.alias||e.node.name)}i&&(s=o.Localizer.Diagnostic.unaccessedImport().format({name:i.value}));break;case 1:case 2:if(!t)return;n=this._fileInfo.diagnosticRuleSet.reportUnusedVariable,39===e.node.nodeType?i=e.node:42===e.node.nodeType&&(i=e.node.name,n="none"),i&&(a="reportUnusedVariable",s=o.Localizer.Diagnostic.unaccessedVariable().format({name:i.value}));break;case 4:if(!t)return;n=this._fileInfo.diagnosticRuleSet.reportUnusedClass,i=e.node.name,a="reportUnusedClass",s=o.Localizer.Diagnostic.unaccessedClass().format({name:i.value});break;case 3:if(!t)return;n=this._fileInfo.diagnosticRuleSet.reportUnusedFunction,i=e.node.name,a="reportUnusedFunction",s=o.Localizer.Diagnostic.unaccessedFunction().format({name:i.value});break;default:return}if(i&&void 0!==a&&s){const e="reportUnusedImport"===a?{action:"pyright.unusedImport"}:void 0;this._fileInfo.diagnosticSink.addUnusedCodeWithTextRange(o.Localizer.Diagnostic.unaccessedSymbol().format({name:i.value}),i,e),this._evaluator.addDiagnostic(n,a,s,i)}}_validateIsInstanceCallNecessary(e){if(39!==e.leftExpression.nodeType||"isinstance"!==e.leftExpression.value&&"issubclass"!==e.leftExpression.value||2!==e.arguments.length)return;let t=e;for(;t;){if(2===t.nodeType)return;t=t.parent}const n=e.leftExpression.value,i="isinstance"===n;let s=this._evaluator.getType(e.arguments[0].valueExpression);if(!s)return;if(s=g.doForSubtypes(s,e=>g.transformTypeObjectToClass(e)),g.derivesFromAnyOrUnknown(s))return;const r=this._evaluator.getType(e.arguments[1].valueExpression);if(!r)return;const a=["FunctionType","LambdaType","BuiltinFunctionType","BuiltinMethodType"],c=[];if(7===r.category){if(c.push(r),m.ClassType.isBuiltIn(r)&&a.some(e=>e===r.details.name))return}else{if(8!==r.category)return;{const e=r.classType;if(m.ClassType.isBuiltIn(e,"Tuple")&&e.typeArguments&&e.typeArguments.forEach(e=>{7===e.category&&c.push(e)}),m.ClassType.isBuiltIn(e)&&a.some(t=>t===e.details.name))return}}c.some(e=>m.ClassType.isProtocolClass(e)&&!m.ClassType.isRuntimeCheckable(e))&&this._evaluator.addError(o.Localizer.Diagnostic.protocolUsedInCall().format({name:n}),e.arguments[1].valueExpression);const l=e=>m.combineTypes(e),p=e=>{const t=[];for(const n of c){const i=m.ClassType.isDerivedFrom(e,n),s=m.ClassType.isDerivedFrom(n,e);s&&s&&!m.ClassType.isSameGenericClass(e,n)?t.push(m.UnknownType.create()):i?t.push(e):s&&t.push(n)}return i?t.map(e=>7===e.category?m.ObjectType.create(e):e):t};let u;if(i&&8===s.category){u=l(p(s.classType))}else if(i||7!==s.category){if(10!==s.category)return;{let e=[],t=!1;if(s.subtypes.forEach(n=>{m.isAnyOrUnknown(n)&&(t=!0),i&&8===n.category?e=e.concat(p(n.classType)):i||7!==n.category||(e=e.concat(p(n)))}),u=l(e),t)return}}else{u=l(p(s))}const d=()=>{const e=c.map(e=>m.ObjectType.create(e));return m.combineTypes(e)};m.isNever(u)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnnecessaryIsInstance,"reportUnnecessaryIsInstance",i?o.Localizer.Diagnostic.unnecessaryIsInstanceNever().format({testType:this._evaluator.printType(s,!1),classType:this._evaluator.printType(d(),!1)}):o.Localizer.Diagnostic.unnecessaryIsSubclassNever().format({testType:this._evaluator.printType(s,!1),classType:this._evaluator.printType(d(),!1)}),e):m.isTypeSame(u,s)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnnecessaryIsInstance,"reportUnnecessaryIsInstance",i?o.Localizer.Diagnostic.unnecessaryIsInstanceAlways().format({testType:this._evaluator.printType(s,!1),classType:this._evaluator.printType(d(),!1)}):o.Localizer.Diagnostic.unnecessaryIsSubclassAlways().format({testType:this._evaluator.printType(s,!1),classType:this._evaluator.printType(d(),!1)}),e)}_isSymbolPrivate(e,t){if(1===t||0===t)return!0;if(h.isPrivateName(e))return!0;if(h.isProtectedName(e)){return!(2===t)}return!1}_conditionallyReportPrivateUsage(e){if("none"===this._fileInfo.diagnosticRuleSet.reportPrivateUsage)return;if(this._fileInfo.isStubFile)return;const t=e.value,n=h.isPrivateName(t),i=h.isProtectedName(t);if(!n&&!i)return;const s=this._evaluator.getDeclarationsForNameNode(e);let r,a=s&&s.length>0?s[s.length-1]:void 0;if(!a||a.node===e)return;if(a=this._evaluator.resolveAliasDeclaration(a,!0),!a||a.node===e)return;a.node&&(r=u.getEnclosingClassOrModule(a.node)),a.node&&a.node.parent&&a.node.parent===r&&10===r.nodeType&&(r=u.getEnclosingClassOrModule(r));let c=!1;if(r&&10===r.nodeType&&i){const t=this._evaluator.getTypeOfClass(r);if(t&&7===t.decoratedType.category){c=!0;const n=u.getEnclosingClass(e);if(n){c=!0;const e=this._evaluator.getTypeOfClass(n);if(e&&7===e.decoratedType.category&&g.derivesFromClassRecursive(e.decoratedType,t.decoratedType,!0))return}}}r&&!u.isNodeContainedWithin(e,r)&&(c?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportPrivateUsage,"reportPrivateUsage",o.Localizer.Diagnostic.protectedUsedOutsideOfClass().format({name:t}),e):this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportPrivateUsage,"reportPrivateUsage",10===r.nodeType?o.Localizer.Diagnostic.privateUsedOutsideOfClass().format({name:t}):o.Localizer.Diagnostic.privateUsedOutsideOfModule().format({name:t}),e))}_validateTypedDictClassSuite(e){const t=e=>{this._evaluator.addError(o.Localizer.Diagnostic.typedDictBadVar(),e)};e.statements.forEach(e=>{if(!c.isCodeUnreachable(e))if(48===e.nodeType)for(const n of e.statements)55!==n.nodeType&&18!==n.nodeType&&49!==n.nodeType&&43!==n.nodeType&&t(n);else t(e)})}_validateFunctionReturn(e,t){if(!this._fileInfo.isStubFile)if(e.returnTypeAnnotation){const n=!this._evaluator.isAfterNodeReachable(e),i=this._evaluator.isAfterNodeReachable(e.suite);let r=t.details.declaredReturnType;if(r&&(1===r.category?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownVariableType,"reportUnknownVariableType",o.Localizer.Diagnostic.declaredReturnTypeUnknown(),e.returnTypeAnnotation):g.containsUnknown(r)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownVariableType,"reportUnknownVariableType",o.Localizer.Diagnostic.declaredReturnTypePartiallyUnknown().format({returnType:this._evaluator.printType(r,!1)}),e.returnTypeAnnotation)),m.FunctionType.isGenerator(t)&&(r=g.getDeclaredGeneratorReturnType(t)),r&&!n&&i)if(g.isNoReturnType(r))u.isSuiteEmpty(e.suite)||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",o.Localizer.Diagnostic.noReturnReturnsNone(),e.returnTypeAnnotation);else if(!m.FunctionType.isAbstractMethod(t)){const t=new s.DiagnosticAddendum;this._evaluator.canAssignType(r,m.NoneType.create(),t)||u.isSuiteEmpty(e.suite)||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",o.Localizer.Diagnostic.returnMissing().format({returnType:this._evaluator.printType(r,!1)})+t.getString(),e.returnTypeAnnotation)}}else{const n=this._evaluator.getFunctionInferredReturnType(t);1===n.category?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownParameterType,"reportUnknownParameterType",o.Localizer.Diagnostic.returnTypeUnknown(),e.name):g.containsUnknown(n)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportUnknownParameterType,"reportUnknownParameterType",o.Localizer.Diagnostic.returnTypePartiallyUnknown().format({returnType:this._evaluator.printType(n,!1)}),e.name)}}_validateFinalMemberOverrides(e){e.details.fields.forEach((t,n)=>{const i=g.lookUpClassMember(e,n,1);if(i&&7===i.classType.category&&f.isFinalVariable(i.symbol)){const e=t.getDeclarations()[0];this._evaluator.addError(o.Localizer.Diagnostic.finalRedeclarationBySubclass().format({name:n,className:i.classType.details.name}),e.node)}})}_validateClassMethods(e){this._fileInfo.isStubFile||this._validateOveriddenMethods(e)}_validateOveriddenMethods(e){e.details.fields.forEach((t,n)=>{if(t.isClassMember()&&!h.isDunderName(n)){const i=this._evaluator.getEffectiveTypeOfSymbol(t);if(5===i.category){const r=g.lookUpClassMember(e,n,1);if(r&&7===r.classType.category){const e=this._evaluator.getEffectiveTypeOfSymbol(r.symbol),a=new s.DiagnosticAddendum;if(!this._evaluator.canOverrideMethod(e,i,a)){const e=f.getLastTypedDeclaredForSymbol(t);if(e&&3===e.type){const t=this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportIncompatibleMethodOverride,"reportIncompatibleMethodOverride",o.Localizer.Diagnostic.incompatibleMethodOverride().format({name:n,className:r.classType.details.name})+a.getString(),e.node.name),i=f.getLastTypedDeclaredForSymbol(r.symbol);t&&i&&t.addRelatedInfo(o.Localizer.DiagnosticAddendum.overriddenMethod(),i.path,i.range)}}if(5===e.category&&m.FunctionType.isFinal(e)){const e=f.getLastTypedDeclaredForSymbol(t);if(e&&3===e.type){const t=this._evaluator.addError(o.Localizer.Diagnostic.finalMethodOverride().format({name:n,className:r.classType.details.name}),e.node.name),i=f.getLastTypedDeclaredForSymbol(r.symbol);t&&i&&t.addRelatedInfo(o.Localizer.DiagnosticAddendum.finalMethod(),i.path,i.range)}}}}}})}_validateMethod(e,t,n){if(e.name&&"__new__"===e.name.value)(0===e.parameters.length||!e.parameters[0].name||"cls"!==e.parameters[0].name.value&&"mcs"!==e.parameters[0].name.value)&&this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportSelfClsParameterName,"reportSelfClsParameterName",o.Localizer.Diagnostic.newClsParam(),e.parameters.length>0?e.parameters[0]:e.name);else if(e.name&&"__init_subclass__"===e.name.value)0!==e.parameters.length&&e.parameters[0].name&&"cls"===e.parameters[0].name.value||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportSelfClsParameterName,"reportSelfClsParameterName",o.Localizer.Diagnostic.initSubclassClsParam(),e.parameters.length>0?e.parameters[0]:e.name);else if(m.FunctionType.isStaticMethod(t)){if(e.parameters.length>0&&e.parameters[0].name){const t=e.parameters[0].name.value;"self"!==t&&"cls"!==t||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportSelfClsParameterName,"reportSelfClsParameterName",o.Localizer.Diagnostic.staticClsSelfParam(),e.parameters[0].name)}}else if(m.FunctionType.isClassMethod(t)){let t="";e.parameters.length>0&&e.parameters[0].name&&(t=e.parameters[0].name.value),"cls"!==t&&(this._fileInfo.isStubFile&&(t.startsWith("_")||"metacls"===t)||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportSelfClsParameterName,"reportSelfClsParameterName",o.Localizer.Diagnostic.classMethodClsParam(),e.parameters.length>0?e.parameters[0]:e.name))}else if(0===e.decorators.length){let t="",i=!0;if(e.parameters.length>0&&(e.parameters[0].name&&(t=e.parameters[0].name.value),0!==e.parameters[0].category&&(i=!1)),i&&"self"!==t){let i=!1;if("cls"===t){const e=this._evaluator.getTypeOfClass(n),t=this._evaluator.getBuiltInType(n,"type");t&&7===t.category&&e&&7===e.classType.category&&g.derivesFromClassRecursive(e.classType,t,!0)&&(i=!0)}i||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportSelfClsParameterName,"reportSelfClsParameterName",o.Localizer.Diagnostic.instanceMethodSelfParam(),e.parameters.length>0?e.parameters[0]:e.name)}}}_validateYieldType(e,t){let n;const r=u.getEnclosingFunction(e);if(r){const t=this._evaluator.getTypeOfFunction(r);if(t){i.assert(5===t.functionType.category);const s=this._evaluator.getBuiltInType(e,"Iterator");n=g.getDeclaredGeneratorYieldType(t.functionType,s)}}if(this._evaluator.isNodeReachable(e)&&n)if(g.isNoReturnType(n))this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",o.Localizer.Diagnostic.noReturnContainsYield(),e);else{const i=new s.DiagnosticAddendum;this._evaluator.canAssignType(n,t,i)||this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",o.Localizer.Diagnostic.yieldTypeMismatch().format({exprType:this._evaluator.printType(t,!1),yieldType:this._evaluator.printType(n,!1)})+i.getString(),e.expression||e)}}_reportDuplicateImports(){const e=p.getTopLevelImports(this._moduleNode),t=new Map;e.orderedImports.forEach(e=>{if(22===e.node.nodeType){const t=new Map;e.node.imports.forEach(e=>{if(!e.alias){t.get(e.name.value)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportDuplicateImport,"reportDuplicateImport",o.Localizer.Diagnostic.duplicateImport().format({importName:e.name.value}),e.name):t.set(e.name.value,e)}})}else if(e.subnode&&!e.subnode.alias){t.get(e.moduleName)?this._evaluator.addDiagnostic(this._fileInfo.diagnosticRuleSet.reportDuplicateImport,"reportDuplicateImport",o.Localizer.Diagnostic.duplicateImport().format({importName:e.moduleName}),e.subnode):t.set(e.moduleName,e.subnode)}})}}t.Checker=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileLevelDirectives=void 0;const i=n(32);function s(e){const t=i.getStrictDiagnosticRuleSet(),n=i.getBooleanDiagnosticRules(),s=i.getDiagLevelDiagnosticRules(),r=i.getStrictModeNotOverriddenRules();for(const i of n)r.find(e=>e===i)||t[i]&&(e[i]=!0);for(const n of s){if(r.find(e=>e===n))continue;const i=t[n],s=e[n];("error"===i||"warning"===i&&"error"!==s||"information"===i&&"error"!==s&&"warning"!==s)&&(e[n]=i)}}function r(e,t){const n=["pyright:","mspython:"].find(t=>e.startsWith(t));if(n){const i=e.substr(n.length).trim().split(",").map(e=>e.trim());i.some(e=>"strict"===e)&&s(t);for(const e of i)t=o(e,t)}return t}function o(e,t){const n=e.split("=").map(e=>e.trim());if(2!==n.length)return t;const s=n[0],r=i.getBooleanDiagnosticRules();if(i.getDiagLevelDiagnosticRules().find(e=>e===s)){const e=function(e){switch(e){case"false":case"none":return"none";case"true":case"error":return"error";case"warning":return"warning";case"information":return"information";default:return}}(n[1]);void 0!==e&&(t[s]=e)}else if(r.find(e=>e===s)){const e=function(e){if("false"===e)return!1;if("true"===e)return!0;return}(n[1]);void 0!==e&&(t[s]=e)}return t}t.getFileLevelDirectives=function(e,t,n){let o=i.cloneDiagnosticRuleSet(t);n&&s(o);for(let t=0;t<e.count;t++){const n=e.getItemAt(t);if(n.comments)for(const e of n.comments){o=r(e.value.trim(),o)}}return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseTreeCleanerWalker=void 0;const i=n(7),s=n(11);class r extends s.ParseTreeWalker{constructor(e){super(),this._parseTree=e}clean(){this.walk(this._parseTree)}visitNode(e){return i.cleanNodeAnalysisInfo(e),super.visitNode(e)}}t.ParseTreeCleanerWalker=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestWalker=void 0;const i=n(11),s=n(2),r=n(1);class o extends i.ParseTreeWalker{constructor(){super()}visitNode(e){const t=super.visitNode(e);return this._verifyParentChildLinks(e,t),this._verifyChildRanges(e,t),t}_verifyParentChildLinks(e,t){t.forEach(t=>{t&&t.parent!==e&&s.fail(`Child node ${t.nodeType} does not contain a reference to its parent `+e.nodeType)})}_verifyChildRanges(e,t){let n;t.forEach(t=>{if(t){let i=!1;3===e.nodeType&&t===e.typeAnnotationComment&&(i=!0),49===e.nodeType&&t===e.typeAnnotation&&(i=!0),i||((t.start<e.start||r.TextRange.getEnd(t)>r.TextRange.getEnd(e))&&s.fail(`Child node ${t.nodeType} is not contained within its parent `+e.nodeType),n&&t.start<r.TextRange.getEnd(n)&&s.fail("Child node is not after previous child node"),n=t)}})}}t.TestWalker=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTypeEvaluator=void 0;const i=n(0),s=n(2),r=n(26),o=n(5),a=n(30),c=n(1),l=n(22),p=n(25),u=n(73),d=n(7),h=n(44),f=n(20),m=n(6),g=n(45),y=n(77),_=n(35),T=n(15),v=n(31),b=n(151),C=n(21),S=n(17),x=n(67),k={0:["__add__","__radd__"],33:["__sub__","__rsub__"],26:["__mul__","__rmul__"],13:["__floordiv__","__rfloordiv__"],10:["__truediv__","__rtruediv__"],24:["__mod__","__rmod__"],29:["__pow__","__rpow__"],22:["__matmul__","__rmatmul__"]},E={3:["__and__","__rand__"],6:["__or__","__ror__"],8:["__xor__","__rxor__"],17:["__lshift__","__rlshift__"],31:["__rshift__","__rrshift__"]},w={12:["__eq__","__ne__"],28:["__ne__","__eq__"],20:["__lt__","__gt__"],21:["__le__","__ge__"],15:["__gt__","__lt__"],16:["__ge__","__le__"]},A={36:!0,37:!0,39:!0,40:!0,41:!0,42:!0};t.createTypeEvaluator=function(e,t){const n=[],D=new Map,I=new Map,P=new Map,F=new Map,R=new Map,N=new b.SpeculativeTypeTracker,O=new b.IncompleteTypeTracker;let L,M=!1,U=1;const z=[];let V;function B(){L&&i.throwIfCancellationRequested(L)}function q(e){let t;if(t=V&&j(e)?V.get(e.id):R.get(e.id),void 0!==t)return s.assert(!b.isIncompleteType(t)),t}function W(e,t){const n=V&&j(e)?V:R;n.set(e.id,t);const i=N.getSpeculativeRootNode();i&&m.isNodeContainedWithin(e,i)&&N.trackEntry(n,e.id),O.trackEntry(n,e.id)}function j(e){const t=z.length;if(0===t)return!1;const n=z[t-1];let i=e;for(;i;){if(i===n.functionNode)return!0;i=i.parent}return!1}function H(e,t){return n.findIndex(n=>n.symbolId===e.id&&n.declaration===t)}function $(e,t){const i=H(e,t);if(i>=0){for(let e=i+1;e<n.length;e++)n[e].isResultValid=!1;return!1}return n.push({symbolId:e.id,declaration:t,isResultValid:!0}),!0}function G(e){const t=n.pop();return s.assert(t.symbolId===e.id),t.isResultValid}function K(e,t,i){const s=H(e,t);s>=0&&(n[s].partialType=i)}function Y(e,t){const i=H(e,t);if(i>=0)return n[i].partialType}function Q(e){if(!d.isCodeUnreachable(e))return dt(e),q(e)}function X(e,t,n=0){var i;const o=q(e);if(o)return{type:o,node:e};let c;switch(B(),e.nodeType){case 39:c=function(e,t){const n=It(e),i=e.value;let s,r=!1;const o=Et(e,i);if(o){let a=0==(4&t);if(4===o.scope.type&&(a=!1),n.isStubFile){const e=v.getLastTypedDeclaredForSymbol(o.symbol);e&&4===e.type&&(a=!1)}const c=o.symbol,p=Lt(c,a?e:void 0),u=p.type;p.isResolutionCyclical&&(r=!0);const d=!!u&&7===u.category&&C.ClassType.isSpecialBuiltIn(u);if(s=u,a&&!d){const t=o.isBeyondExecutionScope||!c.isInitiallyUnbound()?u:C.UnboundType.create(),n=yt(e,c.id,t);n&&(s=n)}if(!(2&t))if(7===s.category)s.typeArguments||(s=Ct(s,void 0,t,e));else if(8===s.category){const e=Se(s);e&&(s=e)}r||(C.isUnbound(s)?fe(n.diagnosticRuleSet.reportUnboundVariable,"reportUnboundVariable",l.Localizer.Diagnostic.symbolIsUnbound().format({name:i}),e):C.isPossiblyUnbound(s)&&fe(n.diagnosticRuleSet.reportUnboundVariable,"reportUnboundVariable",l.Localizer.Diagnostic.symbolIsPossiblyUnbound().format({name:i}),e)),Te(n,c,e)}else"reveal_type"!==i&&fe(n.diagnosticRuleSet.reportUndefinedVariable,"reportUndefinedVariable",l.Localizer.Diagnostic.symbolIsUndefined().format({name:i}),e),s=C.UnknownType.create();11===s.category&&s.isParameterSpec&&128&t&&de(l.Localizer.Diagnostic.paramSpecContext(),e);return{type:s,node:e,isResolutionCyclical:r}}(e,n);break;case 36:c=function(e,t){const n=X(e.leftExpression,void 0,2),i=Ce(e,n,{method:"get"},t);if(h.isCodeFlowSupportedForReference(e)){W(e,i.type),W(e.memberName,i.type);let t=i.type;if(0===t.category){const i=S.makeTypeVarsConcrete(n.type);let s;7===i.category?s=S.lookUpClassMember(i,e.memberName.value,1):8===i.category&&(s=S.lookUpObjectMember(i,e.memberName.value,1)),s&&(t=Bt(s))}const s=yt(e,_.indeterminateSymbolId,t);s&&(i.type=s)}return W(e.memberName,i.type),i}(e,n);break;case 24:c=function(e,t=0){const n=X(e.baseExpression,void 0,2|t);return ke(e,n.type,{method:"get"},t)}(e,n);break;case 9:c=function(e,t,n){const i=X(e.leftExpression,void 0,2);if(39===e.leftExpression.nodeType&&"super"===e.leftExpression.value)return{type:we(e),node:e};if(C.isAnyOrUnknown(i.type)&&39===e.leftExpression.nodeType&&"reveal_type"===e.leftExpression.value&&1===e.arguments.length&&0===e.arguments[0].argumentCategory&&void 0===e.arguments[0].name){const t=X(e.arguments[0].valueExpression).type;return ue(`Type of "${m.printExpression(e.arguments[0].valueExpression)}" is "${tn(t)}"`,e.arguments[0]),{type:C.AnyType.create(),node:e}}const s=e.arguments.map(e=>({valueExpression:e.valueExpression,argumentCategory:e.argumentCategory,name:e.name}));return Ae(e,s,i,t,-3&n)}(e,t,n);break;case 53:c=function(e,t){const n=[];if(t&&8===t.category){const i=t.classType;if(C.ClassType.isBuiltIn(i,"Tuple")&&i.typeArguments)if(2===i.typeArguments.length&&S.isEllipsisType(i.typeArguments[1]))for(let t=0;t<e.expressions.length;t++)n.push(i.typeArguments[0]);else i.typeArguments.forEach(e=>{n.push(e)})}const i=e.expressions.map((e,t)=>X(e,t<n.length?n[t]:void 0));let s=C.UnknownType.create();const r=xt(e,"Tuple");if(7===r.category){let e=[];for(const t of i)if(t.unpackedType){if(8!==t.unpackedType.category||!C.ClassType.isBuiltIn(t.unpackedType.classType,"Tuple")){e=[C.AnyType.create(!1),C.AnyType.create(!0)];break}{const n=t.unpackedType.classType.typeArguments;if(!n||n.some(e=>2===e.category&&e.isEllipsis)){e=[C.AnyType.create(!1),C.AnyType.create(!0)];break}for(const t of n)e.push(t)}}else e.push(t.type);s=S.convertToInstance(C.ClassType.cloneForSpecialization(r,e))}return{type:s,node:e}}(e,t);break;case 11:c=function(e){let t;24===e.constType?t=C.NoneType.create():31!==e.constType&&14!==e.constType&&8!==e.constType||(t=kt(e,"bool"),t&&8===t.category&&(31===e.constType?t=C.ObjectType.create(C.ClassType.cloneWithLiteral(t.classType,!0)):14===e.constType&&(t=C.ObjectType.create(C.ClassType.cloneWithLiteral(t.classType,!1)))));if(!t)return;return{type:t,node:e}}(e);break;case 49:if(0!=(32&n)&&!function(e){if(e.parent&&25===e.parent.nodeType){const t=e.parent;if(t.parent&&24===t.parent.nodeType){const e=X(t.parent.baseExpression).type;if(e&&7===e.category&&C.ClassType.isSpecialBuiltIn(e,"Literal"))return!0}}return!1}(e)){if(e.typeAnnotation)c=X(e.typeAnnotation,void 0,260|n);else if(!e.typeAnnotation&&1===e.strings.length){const t=function(e){const t=It(e),n=new u.Parser,i=e.strings[0].value,s=e.strings[0].start+e.strings[0].token.prefixLength+e.strings[0].token.quoteMarkLength,r=new u.ParseOptions;r.isStubFile=t.isStubFile,r.pythonVersion=t.executionEnvironment.pythonVersion;const o=n.parseTextExpression(t.fileContents,s,i.length,r,!0);if(o.parseTree)return o.diagnostics.forEach(t=>{de(t.message,e)}),o.parseTree.parent=e,o.parseTree;return}(e);t&&(c=X(t,void 0,260|n))}if(!c){fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.expectedTypeNotString(),e),c={node:e,type:C.UnknownType.create()}}}else{e.strings.forEach(e=>{28===e.nodeType&&e.expressions.forEach(e=>{X(e)})});const t=0!=(32&e.strings[0].token.flags);c=e.strings.some(e=>28===e.nodeType)?{node:e,type:kt(e,t?"bytes":"str")}:{node:e,type:We(e,t?"bytes":"str",e.strings.map(e=>e.value).join(""))}}break;case 41:{let t="float";e.isImaginary?t="complex":e.isInteger&&(t="int"),c={node:e,type:We(e,t,e.value)};break}case 18:if(0!=(1&n))c={type:C.AnyType.create(!0),node:e};else{c={type:xt(e,"ellipsis")||C.AnyType.create(),node:e}}break;case 56:c=function(e,t){let n=S.makeTypeVarsConcrete(X(e.expression).type);const i={0:"__pos__",33:"__neg__",5:"__invert__"};let s;38!==e.operator&&S.isOptionalType(n)&&(fe(It(e).diagnosticRuleSet.reportOptionalOperand,"reportOptionalOperand",l.Localizer.Diagnostic.noneOperator().format({operator:m.printOperator(e.operator)}),e.expression),n=C.removeNoneFromUnion(n));if(38===e.operator)s=kt(e,"bool"),s||(s=C.UnknownType.create());else{if(C.isAnyOrUnknown(n))s=n;else{const r=i[e.operator];s=Ve(n,[],r,e,t)}if(!s){fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeNotSupportUnaryOperator().format({operator:m.printOperator(e.operator),type:tn(n)}),e),s=C.UnknownType.create()}}return{type:s,node:e}}(e,t);break;case 7:c=function e(t,n,i){let s=t.leftExpression;w[t.operator]&&7===t.leftExpression.nodeType&&w[t.leftExpression.operator]&&(e(t.leftExpression,n,i),s=t.leftExpression.rightExpression);let r=S.makeTypeVarsConcrete(X(s).type),o=S.makeTypeVarsConcrete(X(t.rightExpression).type);if(6===t.operator&&C.isUnionableType([r,o])){const e=It(t);return e.isStubFile||e.executionEnvironment.pythonVersion>=a.PythonVersion.V39||de(l.Localizer.Diagnostic.unionSyntaxIllegal(),t,t.operatorToken),{type:C.combineTypes([r,o]),node:t}}void 0===A[t.operator]&&(S.isOptionalType(r)&&(12!==t.operator&&28!==t.operator&&fe(It(t).diagnosticRuleSet.reportOptionalOperand,"reportOptionalOperand",l.Localizer.Diagnostic.noneOperator().format({operator:m.printOperator(t.operator)}),t.leftExpression),r=C.removeNoneFromUnion(r)),12!==t.operator&&28!==t.operator||(o=C.removeNoneFromUnion(o)));return{type:ze(t.operator,r,o,t,n),node:t}}(e,t,n);break;case 5:{const n=Ue(e,t);_e(e.destExpression,n,e.rightExpression),c={type:n,node:e};break}case 32:c=function(e,t){const n=e=>S.doForSubtypes(e,e=>{if(8!==e.category)return;const t=e.classType.details.aliasClass||e.classType;return C.ClassType.isBuiltIn(t,"list")&&e.classType.typeArguments?e.classType.typeArguments[0]:void 0}),i=t?n(t):void 0;let s=e.entries.map(e=>33===e.nodeType?qe(e):X(e,i).type);if(t&&s.length>0){const i=S.doForSubtypes(t,e=>{const t=n(e);if(t){const n=new x.TypeVarMap;for(const e of s)if(!$t(t,e,new r.DiagnosticAddendum,n))return;return S.specializeType(e,n)}});if(!C.isNever(i))return{type:i,node:e}}s=s.map(e=>S.stripLiteralValue(e));let o=C.AnyType.create();s.length>0&&(o=t||It(e).diagnosticRuleSet.strictListInference?C.combineTypes(s):S.areTypesSame(s)?s[0]:C.UnknownType.create());t||(o=S.stripLiteralValue(o));return{type:kt(e,"list",[o]),node:e}}(e,t);break;case 47:c=function(e){e.startValue&&X(e.startValue);e.endValue&&X(e.endValue);e.stepValue&&X(e.stepValue);return{type:kt(e,"slice"),node:e}}(e);break;case 6:c=X(e.expression,void 0,n),c={type:se(c.type,e.expression),node:e};break;case 52:c=function(e,t){X(e.testExpression);const n=X(e.ifExpression,void 0,t),i=X(e.elseExpression,void 0,t);return{type:C.combineTypes([n.type,i.type]),node:e}}(e,n);break;case 33:c=function(e){const t=qe(e),n=e.comprehensions.some(e=>34===e.nodeType&&e.isAsync);let i=C.UnknownType.create();const s=ce(e,n?"AsyncGenerator":"Generator");s&&7===s.category&&(i=C.ObjectType.create(C.ClassType.cloneForSpecialization(s,[t])));return{type:i,node:e}}(e);break;case 15:c=function(e,t){let n,i,o,a=C.AnyType.create(),c=C.AnyType.create(),p=[],u=[];const d=new r.DiagnosticAddendum;if(t&&8===t.category){const e=t.classType;C.ClassType.isBuiltIn(e,"Dict")||C.ClassType.isBuiltIn(e,"dict")?e.typeArguments&&2===e.typeArguments.length&&(n=S.specializeType(e.typeArguments[0],void 0),i=S.specializeType(e.typeArguments[1],void 0)):C.ClassType.isTypedDictClass(e)&&(o=Qt(e))}if(e.entries.forEach(e=>{let t=!0;if(17===e.nodeType){const s=X(e.keyExpression,n).type;let r;r=o&&8===s.category&&C.ClassType.isBuiltIn(s.classType,"str")&&s.classType.literalValue&&o.has(s.classType.literalValue)?X(e.valueExpression,o.get(s.classType.literalValue).valueType).type:X(e.valueExpression,i).type,p.push(s),u.push(r),t=!1}else if(16===e.nodeType){const n=X(e.expandExpression).type;if(C.isAnyOrUnknown(n))t=!1;else if(8===n.category){const e=n.classType,i=e.details.aliasClass||e;if(C.ClassType.isBuiltIn(i,"dict")){const n=e.typeArguments;n&&n.length>=2&&(p.push(n[0]),u.push(n[1]),t=!1)}}}else if(33===e.nodeType){const n=qe(e);if(8===n.category){const e=n.classType;if(C.ClassType.isBuiltIn(e,"Tuple")){const n=e.typeArguments;n&&2===n.length&&(p.push(n[0]),u.push(n[1]),t=!1)}}}t&&(p.push(C.UnknownType.create()),u.push(C.UnknownType.create()))}),t){const n=S.doForSubtypes(t,e=>{if(8!==e.category)return;if(C.ClassType.isTypedDictClass(e.classType)&&function(e,t,n,i){s.assert(C.ClassType.isTypedDictClass(e)),s.assert(t.length===n.length);let o=!0;const a=Qt(e);if(t.forEach((t,s)=>{if(8===t.category&&C.ClassType.isBuiltIn(t.classType,"str")&&void 0!==t.classType.literalValue){const c=t.classType.literalValue,p=a.get(c);if(p){const e=new r.DiagnosticAddendum;$t(p.valueType,n[s],e)||(i.addMessage(l.Localizer.DiagnosticAddendum.typedDictFieldTypeMismatch().format({name:t.classType.literalValue,type:tn(n[s])})),o=!1),p.isProvided=!0}else o=!1,i.addMessage(l.Localizer.DiagnosticAddendum.typedDictFieldUndefined().format({name:t.classType.literalValue,type:tn(C.ObjectType.create(e))}))}else o=!1}),!o)return!1;return a.forEach((t,n)=>{t.isRequired&&!t.isProvided&&(i.addMessage(l.Localizer.DiagnosticAddendum.typedDictFieldRequired().format({name:n,type:tn(C.ObjectType.create(e))})),o=!1)}),o}(e.classType,p,u,d))return e;const t=e.classType.details.aliasClass||e.classType;if(C.ClassType.isBuiltIn(t,"dict")&&e.classType.typeArguments){const t=e.classType.typeArguments[0],n=e.classType.typeArguments[1],i=new x.TypeVarMap;for(const e of p)if(!$t(t,e,new r.DiagnosticAddendum,i))return;for(const e of u)if(!$t(n,e,new r.DiagnosticAddendum,i))return;return S.specializeType(e,i)}});if(!C.isNever(n))return{type:n,node:e}}p=p.map(e=>S.stripLiteralValue(e)),u=u.map(e=>S.stripLiteralValue(e)),a=p.length>0?C.combineTypes(p):C.AnyType.create(),c=u.length>0?It(e).diagnosticRuleSet.strictDictionaryInference?C.combineTypes(u):S.areTypesSame(u)?u[0]:C.UnknownType.create():C.AnyType.create();t||(a=S.stripLiteralValue(a),c=S.stripLiteralValue(c));return{type:kt(e,"dict",[a,c]),node:e,expectedTypeDiagAddendum:d.isEmpty()?void 0:d}}(e,t);break;case 31:c=function(e,t){const n=C.FunctionType.createInstance("",0);let i;W(e,n),t&&(5===t.category?i=t:10===t.category&&(i=t.subtypes.find(e=>5===e.category)));e.parameters.forEach((e,t)=>{let s=C.UnknownType.create();i&&t<i.details.parameters.length&&(s=C.FunctionType.getEffectiveParameterType(i,t),s=S.specializeType(s,void 0,!0)),e.name&&W(e.name,s);const r={category:e.category,name:e.name?e.name.value:void 0,hasDefault:!!e.defaultValue,type:s};C.FunctionType.addParameter(n,r)});const s=i?Ut(i):void 0;return n.inferredReturnType=X(e.expression,s).type,{type:n,node:e}}(e,t);break;case 46:c=function(e,t){const n=e.entries.map(e=>33===e.nodeType?qe(e):X(e).type);if(t&&n.length>0){const i=S.doForSubtypes(t,e=>{if(8===e.category){const t=e.classType.details.aliasClass||e.classType;if(C.ClassType.isBuiltIn(t,"set")&&e.classType.typeArguments){const t=e.classType.typeArguments[0],i=new x.TypeVarMap;for(const e of n)if(!$t(t,e,new r.DiagnosticAddendum,i))return;return S.specializeType(e,i)}}});if(!C.isNever(i))return{type:i,node:e}}let i=n.length>0?C.combineTypes(n.map(e=>S.stripLiteralValue(e))):C.AnyType.create();t||(i=S.stripLiteralValue(i));return{type:kt(e,"set",[i]),node:e}}(e,t);break;case 3:c=X(e.rightExpression),_e(e.leftExpression,c.type,e.rightExpression);break;case 4:c=X(e.rightExpression),_e(e.name,c.type,e.rightExpression);break;case 61:c=function(e){let t;const n=m.getEnclosingFunction(e);if(n){const e=Je(n);e&&(t=S.getDeclaredGeneratorSendType(e.functionType))}t||(t=C.UnknownType.create());e.expression&&X(e.expression,t);return{type:t,node:e}}(e);break;case 62:c=function(e){let t;const n=m.getEnclosingFunction(e);if(n){const e=Je(n);e&&(t=S.getDeclaredGeneratorSendType(e.functionType))}t||(t=C.UnknownType.create());e.expression&&X(e.expression,t);return{type:t,node:e}}(e);break;case 57:{const n=X(e.expression,t).type;c={type:re(n,!1,e,!1),unpackedType:n,node:e};break}case 55:c=X(e.typeAnnotation,void 0,416);break;case 0:wt(()=>{e.child&&X(e.child)}),c={type:C.UnknownType.create(),node:e}}if(c||s.fail(`Unhandled expression type '${m.printExpression(e)}'`),256&n&&!C.TypeBase.isInstantiable(c.type)){const t=8===c.type.category&&C.ClassType.isBuiltIn(c.type.classType,"Tuple")&&0===(null===(i=c.type.classType.typeArguments)||void 0===i?void 0:i.length);0!=(512&n)&&t||me(c.type,e)}return c.isResolutionCyclical||W(e,c.type),c}function J(e,t=!1){var n;const i=It(e);if(i.isTypingStubFile||i.isTypingExtensionsStubFile){const t=function(e){if(!e.parent||55!==e.parent.nodeType)return;if(39!==e.parent.valueExpression.nodeType)return;const t=e.parent.valueExpression.value,n={Tuple:{alias:"tuple",module:"builtins"},Generic:{alias:"",module:"builtins"},Protocol:{alias:"",module:"builtins"},Callable:{alias:"",module:"builtins"},Type:{alias:"type",module:"builtins"},ClassVar:{alias:"",module:"builtins"},Final:{alias:"",module:"builtins"},Literal:{alias:"",module:"builtins"},TypedDict:{alias:"_TypedDict",module:"self"},Union:{alias:"",module:"builtins"},Optional:{alias:"",module:"builtins"},Annotated:{alias:"",module:"builtins"},TypeAlias:{alias:"",module:"builtins"}}[t];if(n)return Ge(e,t,n);return}(e);if(t)return W(e,t),t}let s=417;(void 0!==i.futureImports.get("annotations")||i.isStubFile)&&(s|=4),3===(null===(n=null==e?void 0:e.parent)||void 0===n?void 0:n.nodeType)&&e.parent.typeAnnotationComment===e&&(s|=4),t||(s|=64);const r=X(e,void 0,s).type;return S.convertToInstance(r)}function Z(e,t){let n=X(e.leftExpression,void 0,2);if(e.arguments){const t=e.arguments.map(e=>({valueExpression:e.valueExpression,argumentCategory:e.argumentCategory,name:e.name}));n=Ae(e,t,n,void 0,16)}return Ae(e,[{argumentCategory:0,type:t}],n,void 0,16).type}function ee(e,t,n,i,s,r=0,o){const a=xe(e,t.classType,n,i,s,16|r);let c=a?a.type:void 0;return c&&(5!==c.category&&6!==c.category||a.isClassMember&&(c=Xt(o||t,c,!!o))),c}function te(e,t,n,i,s,o=0){let a=xe(e,t,n,i,s,1|o);if(!a){const s=S.getMetaclass(t);s&&7===s.category&&(a=xe(e,s,n,i,new r.DiagnosticAddendum,1|o,t))}let c=a?a.type:void 0;return c&&(5!==c.category&&6!==c.category||a.isClassMember&&(c=Xt(t,c))),c}function ne(e,t,n){const i=e.details.aliasClass;i&&(e=i);const s=S.lookUpClassMember(e,t,12);if(s){const t=Bt(s);if(5===t.category||6===t.category){const i=Xt(C.ObjectType.create(e),t,n);if(5===i.category||6===i.category)return i}}}function ie(e){let t,n;switch(e.nodeType){case 39:{const n=Et(e,e.value);n&&(t=n.symbol);break}case 55:return ie(e.valueExpression);case 36:{const i=S.makeTypeVarsConcrete(X(e.leftExpression).type);let s;8===i.category?(s=S.lookUpObjectMember(i,e.memberName.value,16),n=i):7===i.category&&(s=S.lookUpClassMember(i,e.memberName.value,24),n=i),s&&(t=s.symbol);break}case 24:{const t=ie(e.baseExpression);if(t&&8===t.category){const e=S.lookUpClassMember(t.classType,"__setitem__");if(e){const n=Bt(e);if(5===n.category){const e=Xt(t,n);if(5===e.category&&2===e.details.parameters.length){const t=C.FunctionType.getEffectiveParameterType(e,1);if(!C.isAnyOrUnknown(t))return t}}}}break}}if(t){let e=Mt(t);if(e){if(S.isProperty(e)){const t=S.lookUpClassMember(e.classType,"fset"),n=t?Bt(t):void 0;if(!n||5!==n.category||n.details.parameters.length<2)return;e=n.details.parameters[1].type}return n&&(e=Xt(n,e)),e}}}function se(e,t){return S.doForSubtypes(e,e=>{if(C.isAnyOrUnknown(e))return e;const n=ve(e);if(n)return n;if(8===e.category){const t=be(e,"__await__");if(t){if(C.isAnyOrUnknown(t))return t;if(8===t.category){if(be(t,"__iter__")){const e=ve(t);if(e)return e}}}}if(t){fe(It(t).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeNotAwaitable().format({type:tn(e)}),t)}return C.UnknownType.create()})}function re(e,t,n,i){const s=t?"__aiter__":"__iter__",o=t?"__anext__":"__next__",a=i?"__getitem__":"";10===(e=S.makeTypeVarsConcrete(e)).category&&e.subtypes.some(e=>C.isNoneOrNever(e))&&(n&&fe(It(n).diagnosticRuleSet.reportOptionalIterable,"reportOptionalIterable",l.Localizer.Diagnostic.noneNotIterable(),n),e=C.removeNoneFromUnion(e));const c=(e,i,r)=>{const c=i?function(e,t,n){const i=S.lookUpObjectMember(C.ObjectType.create(e),n,8);if(!i)return;const s=Bt(i);if(C.isAnyOrUnknown(s))return s;if(5===s.category){return Ut(Xt(t,s,!0))}return}(i,e.classType,s):be(e,s);if(c){if(C.isAnyOrUnknown(c))return c;if(8===c.category){const e=be(c,o);if(e)return t?se(e,n):e;r.addMessage(l.Localizer.Diagnostic.methodNotDefinedOnType().format({name:o,type:tn(c)}))}else r.addMessage(l.Localizer.Diagnostic.methodReturnsNonObject().format({name:s}))}else{if(a){const t=be(e,a);if(t)return t}r.addMessage(l.Localizer.Diagnostic.methodNotDefined().format({name:s}))}};return S.doForSubtypes(e,e=>{if(C.isAnyOrUnknown(e))return e;const t=new r.DiagnosticAddendum;if(C.isAnyOrUnknown(e))return e;if(8===e.category){const n=c(e,void 0,t);if(n)return n}else if(7===e.category){const n=S.getMetaclass(e);if(n&&7===n.category){const i=c(C.ObjectType.create(e),n,t);if(i)return i}}return n&&fe(It(n).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeNotIterable().format({type:tn(e)})+t.getString(),n),C.UnknownType.create()})}function oe(e,t,n){s.assert(C.ClassType.isDataClass(t));const i=C.FunctionType.createInstance("__new__",65),r=C.FunctionType.createInstance("__init__",64);C.FunctionType.addParameter(i,{category:0,name:"cls",type:t}),C.FunctionType.addDefaultParameters(i),i.details.declaredReturnType=C.ObjectType.create(t),C.FunctionType.addParameter(r,{category:0,name:"self",type:C.ObjectType.create(t)}),r.details.declaredReturnType=C.NoneType.create();const o=[],a=[];!function(e,t){for(let n=e.details.mro.length-1;n>=0;n--){const i=e.details.mro[n];if(7===i.category){C.ClassType.getDataClassEntries(i).forEach(e=>{const n=t.findIndex(t=>t.name===e.name);n>=0?t[n]=e:t.push(e)})}}}(t,a);const c=[];e.suite.statements.forEach(e=>{48===e.nodeType&&e.statements.forEach(e=>{let n,i,s=!1,r=!0;if(3===e.nodeType){if(55===e.leftExpression.nodeType&&39===e.leftExpression.valueExpression.nodeType&&(n=e.leftExpression.valueExpression,i=()=>J(e.leftExpression.typeAnnotation,!0)),s=!0,9===e.rightExpression.nodeType){const t=X(e.rightExpression.leftExpression).type;if(6===t.category&&"field"===t.overloads[0].details.builtInName){const t=e.rightExpression.arguments.find(e=>{var t;return"init"===(null===(t=e.name)||void 0===t?void 0:t.value)});if(t&&t.valueExpression){!1===y.evaluateStaticBoolExpression(t.valueExpression,It(t).executionEnvironment)&&(r=!1)}s=e.rightExpression.arguments.some(e=>{var t,n;return"default"===(null===(t=e.name)||void 0===t?void 0:t.value)||"default_factory"===(null===(n=e.name)||void 0===n?void 0:n.value)})}}}else 55===e.nodeType&&39===e.valueExpression.nodeType&&(n=e.valueExpression,i=()=>J(e.typeAnnotation,!0));if(n&&i){const e=n.value,p=t.details.fields.get(e);if(!(null==p?void 0:p.isClassVar())){const t={name:e,hasDefault:s,includeInInit:r,type:C.UnknownType.create()};c.push({entry:t,evaluator:i});let p=o.findIndex(t=>t.name===e);p>=0?o[p]=t:o.push(t),p=a.findIndex(t=>t.name===e),p>=0?a[p]=t:(a.push(t),p=a.length-1);const u=a.findIndex(e=>e.hasDefault&&e.includeInInit);!s&&u>=0&&u<p&&de(l.Localizer.Diagnostic.dataClassFieldWithDefault(),n)}}})}),t.details.dataClassEntries=o,c.forEach(e=>{e.entry.type=e.evaluator()});const p=t.details.fields;n||(a.forEach(e=>{if(e.includeInInit){const t={category:0,name:e.name,hasDefault:e.hasDefault,hasDeclaredType:!0,type:e.type};C.FunctionType.addParameter(r,t)}}),p.set("__init__",_.Symbol.createWithType(4,r)),p.set("__new__",_.Symbol.createWithType(4,i)));let u=xt(e,"Dict");7===u.category&&(u=C.ObjectType.create(C.ClassType.cloneForSpecialization(u,[kt(e,"str"),C.AnyType.create()]))),p.set("__dataclass_fields__",_.Symbol.createWithType(4,u))}function ae(e,t){s.assert(C.ClassType.isTypedDictClass(t));const n=C.FunctionType.createInstance("__new__",65);C.FunctionType.addParameter(n,{category:0,name:"cls",type:t}),C.FunctionType.addDefaultParameters(n),n.details.declaredReturnType=C.ObjectType.create(t);const i=C.FunctionType.createInstance("__init__",64);C.FunctionType.addParameter(i,{category:0,name:"self",type:C.ObjectType.create(t)}),i.details.declaredReturnType=C.NoneType.create(),C.FunctionType.addParameter(i,{category:1,type:C.AnyType.create()});const r=Qt(t);r.forEach((e,t)=>{C.FunctionType.addParameter(i,{category:0,name:t,hasDefault:!e.isRequired,type:e.valueType})});const o=t.details.fields;o.set("__init__",_.Symbol.createWithType(4,i)),o.set("__new__",_.Symbol.createWithType(4,n));const a=xt(e,"str");if(7===a.category){const e=(e,n)=>{const i=C.FunctionType.createInstance("get",320);return C.FunctionType.addParameter(i,{category:0,name:"self",type:C.ObjectType.create(t)}),C.FunctionType.addParameter(i,{category:0,name:"k",hasDeclaredType:!0,type:e}),C.FunctionType.addParameter(i,{category:0,name:"default",hasDeclaredType:!0,type:n,hasDefault:!0}),i.details.declaredReturnType=n,i},n=[];r.forEach((t,i)=>{const s=e(C.ObjectType.create(C.ClassType.cloneWithLiteral(a,i)),t.valueType);n.push(s)});const i=e(C.ObjectType.create(a),C.UnknownType.create());n.push(i);const s=C.OverloadedFunctionType.create(n);o.set("get",_.Symbol.createWithType(4,s))}}function ce(t,n){const i=It(t).typingModulePath;if(!i)return;const s=e(i);if(!s)return;const r=s.symbolTable.get(n);return r?Ot(r):void 0}function le(e){const t=d.getFlowNode(e);return!t||Tt(t)}function pe(e){const t=d.getAfterFlowNode(e);return!!t&&Tt(t)}function ue(e,t,n){return he("warning",e,t,n)}function de(e,t,n){return he("error",e,t,n)}function he(e,t,n,i){if(!M&&!Dt(n)&&!O.isIncompleteTypeMode()){return It(n).diagnosticSink.addDiagnosticWithTextRange(e,t,i||n)}}function fe(e,t,n,i){if("none"===e)return;const s=he(e,n,i);return s&&s.setRule(t),s}function me(e,t){const n=It(t),i=new r.DiagnosticAddendum;10===e.category&&e.subtypes.forEach(e=>{C.TypeBase.isInstantiable(e)||i.addMessage(l.Localizer.DiagnosticAddendum.typeNotClass().format({type:tn(e)}))}),fe(n.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeExpectedClass().format({type:tn(e)})+i.getString(),t)}function ge(e,t,n,i){const o=e.value,a=Et(e,o);if(!a)return void s.fail(`Missing symbol '${o}'`);const c=a.symbol.getDeclarations(),p=Mt(a.symbol),u=It(e);let d=t;if(p&&n){let s=new r.DiagnosticAddendum;$t(p,t,s)?d=Kt(p,t):(i&&(s=i),fe(u.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeAssignmentMismatch().format({sourceType:tn(t),destType:tn(p)})+s.getString(),n||e),"none"!==u.diagnosticRuleSet.reportGeneralTypeIssues&&(d=p))}else{if(2===g.getScopeForNode(e).type){const t=T.isConstantName(o),n=T.isPrivateOrProtectedName(o);t||n&&"none"!==It(e).diagnosticRuleSet.reportPrivateUsage||(d=S.stripLiteralValue(d))}}const h=c.find(e=>1===e.type);h&&1===h.type&&n&&h.isConstant&&e!==c[0].node&&fe(u.diagnosticRuleSet.reportConstantRedefinition,"reportConstantRedefinition",l.Localizer.Diagnostic.constantRedefinition().format({name:o}),e),W(e,d)}function ye(e,t,n,i){const r=e.memberName.value,o=It(e),a=m.getEnclosingClass(e);if(!a)return;const c=Qe(a);if(c&&7===c.classType.category){let a=S.lookUpClassMember(c.classType,r,n?0:8);const p=c.classType.details.fields;if(a){if(7===a.classType.category&&C.ClassType.isSameGenericClass(c.classType,a.classType)&&a.isInstanceMember===n){const t=p.get(r);s.assert(void 0!==t);const n=t.getDeclarations();let a=v.isFinalVariable(t);if(n.length>0&&1===n[0].type&&i&&e.memberName!==n[0].node){n[0].isConstant&&fe(o.diagnosticRuleSet.reportConstantRedefinition,"reportConstantRedefinition",l.Localizer.Diagnostic.constantRedefinition().format({name:e.memberName.value}),e.memberName);const t=m.getEnclosingFunction(e);t&&"__init__"===t.name.value&&(a=!1),a&&de(l.Localizer.Diagnostic.finalReassigned().format({name:e.memberName.value}),e.memberName)}}else{const i=Mt(a.symbol);if(i&&!S.isProperty(i)&&!a.isInstanceMember&&n){Te(o,a.symbol,e.memberName);const n=Bt(a);t=C.combineTypes([t,n])}}}a=S.lookUpClassMember(c.classType,r,16),!a&&i&&Be(o.diagnosticRuleSet.reportUnknownMemberType,"reportUnknownMemberType",e.memberName,t,e)}}function _e(e,t,n,i){if(11===t.category&&n&&9===n.nodeType){const i=X(n.leftExpression).type;7===i.category&&(C.ClassType.isBuiltIn(i,"TypeVar")||C.ClassType.isBuiltIn(i,"ParameterSpecification"))&&(39===e.nodeType&&e.value===t.name||de(t.isParameterSpec?l.Localizer.Diagnostic.paramSpecAssignedName().format({name:t.name}):l.Localizer.Diagnostic.typeVarAssignedName().format({name:t.name}),e))}switch(t=C.removeUnboundFromUnion(t),e.nodeType){case 39:if("__all__"===e.value&&n){const t=g.getScopeForNode(e);if(3===t.type&&32===n.nodeType){const i=It(e);n.entries.forEach(n=>{if(49===n.nodeType||50===n.nodeType){const s=50===n.nodeType?n.value:n.strings.map(e=>e.value).join(""),r=t.lookUpSymbolRecursive(s);r&&Te(i,r.symbol,e)}})}}Be(It(e).diagnosticRuleSet.reportUnknownVariableType,"reportUnknownVariableType",e,t,e),ge(e,t,n,i);break;case 36:!function(e,t,n,i){const s=X(e.leftExpression),r=S.makeTypeVarsConcrete(s.type);if(39===e.leftExpression.nodeType){const i=m.getEnclosingClass(e);if(i){const s=Qe(i);s&&7===s.classType.category&&(8===r.category?C.ClassType.isSameGenericClass(r.classType,s.classType)&&ye(e,t,!0,n):7===r.category&&C.ClassType.isSameGenericClass(r,s.classType)&&ye(e,t,!1,n),C.ClassType.isProtocolClass(s.classType)&&de(l.Localizer.Diagnostic.assignmentInProtocol(),e.memberName))}}Ce(e,s,{method:"set",setType:t,setErrorNode:n,setExpectedTypeDiag:i},0),W(e.memberName,t),W(e,t)}(e,t,n,i);break;case 24:{const s=X(e.baseExpression,void 0,2),r=ke(e,s.type,{method:"set",setType:t,setErrorNode:n,setExpectedTypeDiag:i},0);W(e,r.type);break}case 53:!function(e,t,n){const i=new Array(e.expressions.length);for(let t=0;t<e.expressions.length;t++)i[t]=[];const s=e.expressions.findIndex(e=>57===e.nodeType);S.doForSubtypes(t,t=>{const r=S.getSpecializedTupleType(t);if(r&&r.typeArguments){const t=r.typeArguments,n=t.length;if(2===n&&S.isEllipsisType(t[1]))for(let n=0;n<e.expressions.length;n++)i[n].push(t[0]);else{let r=0,o=0;for(o=0;o<e.expressions.length;o++)if(o===s){const s=e.expressions.length-o-1,a=n-r;let c=Math.max(a-s,0);for(;c>0;)i[o].push(t[r]),r++,c--}else{if(r>=n)break;i[o].push(t[r]),r++}if(o<e.expressions.length||r<n){const t=It(e),i=s>=0?e.expressions.length-1:e.expressions.length;fe(t.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.tupleSizeMismatch().format({expected:i,received:n}),e)}}}else{const s=re(t,!1,n,!1);for(let t=0;t<e.expressions.length;t++)i[t].push(s)}}),e.expressions.forEach((e,t)=>{const r=i[t];let o=0===r.length?C.UnknownType.create():C.combineTypes(r);if(t===s){const t=xt(e,"List");7===t.category&&(o=C.ObjectType.create(C.ClassType.cloneForSpecialization(t,[o])))}_e(e,o,n)}),W(e,t)}(e,t,n);break;case 55:{const s=J(e.typeAnnotation,m.isFinalAllowedForAssignmentTarget(e.valueExpression));$t(s,t,new r.DiagnosticAddendum)&&(t=Kt(s,t)),_e(e.valueExpression,t,n,i);break}case 57:39===e.expression.nodeType&&ge(e.expression,t,n);break;case 32:{const i=re(t,!1,n,!1);e.entries.forEach(e=>{_e(e,i,n)});break}case 0:wt(()=>{e.child&&X(e.child)});break;default:fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.assignmentTargetExpr(),e);break}}function Te(e,t,n){Dt(n)||O.isIncompleteTypeMode()||e.accessedSymbolMap.set(t.id,!0)}function ve(e){if(C.isAnyOrUnknown(e))return e;if(8===e.category){const t=e.classType;if(C.ClassType.isBuiltIn(t,"Generator")){const e=t.typeArguments;if(e&&e.length>=3)return e[2]}}}function be(e,t){const n=S.lookUpObjectMember(e,t,8);if(!n)return;const i=Bt(n);if(C.isAnyOrUnknown(i))return i;if(5===i.category){return Ut(Xt(e,i))}}function Ce(e,t,n,i){const s=t.type,o=e.memberName.value;let a=new r.DiagnosticAddendum;const c=It(e);let p;switch(s.category){case 2:case 1:p=s;break;case 7:p=te(e.memberName,s,o,n,a);break;case 11:return s.isParameterSpec?"args"===o||"kwargs"===o?{type:C.AnyType.create(),node:e}:(fe(c.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.paramSpecUnknownMember().format({name:o}),e.memberName),{type:C.UnknownType.create(),node:e}):Ce(e,{type:S.specializeType(s,void 0,!0),node:e},n,0);case 8:{const r=Se(s);if(r)return Ce(e,{type:r,node:t.node},n,i);p=ee(e.memberName,s,o,n,a);break}case 9:{const t=C.ModuleType.getField(s,o);if(t)"get"===n.method&&Te(It(e),t,e.memberName),p=Ot(t),0===p.category&&(p=C.UnknownType.create());else{if("get"===n.method){const e=C.ModuleType.getField(s,"__getattr__");if(e){if(e.getDeclarations().some(e=>e.path.toLowerCase().endsWith(".pyi"))){const t=Ot(e);5===t.category&&(p=Ut(t))}}}p||(fe(c.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.moduleUnknownMember().format({name:o}),e.memberName),p=C.UnknownType.create())}break}case 10:p=S.doForSubtypes(s,t=>{if(C.isNoneOrNever(t))fe(It(e).diagnosticRuleSet.reportOptionalMemberAccess,"reportOptionalMemberAccess",l.Localizer.Diagnostic.noneUnknownMember().format({name:o}),e.memberName);else if(0!==t.category){return Ce(e,{type:t,node:e},n,0).type}});break;case 5:case 6:p=C.AnyType.create();break;default:a.addMessage(l.Localizer.DiagnosticAddendum.typeUnsupported().format({type:tn(s)}))}if(!p){let t=l.Localizer.Diagnostic.memberAccess();"set"===n.method?t=l.Localizer.Diagnostic.memberSet():"del"===n.method&&(t=l.Localizer.Diagnostic.memberDelete()),n.setExpectedTypeDiag&&(a=n.setExpectedTypeDiag),fe(c.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",t.format({name:o,type:tn(s)})+a.getString(),e.memberName),p=C.UnknownType.create()}return 0==(2&i)&&(7!==p.category||p.typeArguments||(p=Ct(p,void 0,i,e))),"get"===n.method&&Be(c.diagnosticRuleSet.reportUnknownMemberType,"reportUnknownMemberType",e.memberName,p,e),{type:p,node:e}}function Se(e){const t=e.classType;if(C.ClassType.isBuiltIn(t,"Type")){const e=t.typeArguments;if(e&&e.length>0){let t=e[0];if(11===t.category&&(t=S.getConcreteTypeFromTypeVar(t)),8===t.category)return t.classType}return C.AnyType.create()}}function xe(e,t,n,i,o,a,c){t.details.aliasClass&&(t=t.details.aliasClass);let p=0;1&a&&(p|=8),2&a&&(p|=2),4&a&&(p|=4);let u=S.lookUpClassMember(t,n,16|p);if(u||(u=S.lookUpClassMember(t,n,p)),u){let s;if(s="get"===i.method?Bt(u):Mt(u.symbol)||C.UnknownType.create(),"set"===i.method&&u.symbol.isClassVar()&&16&a)return void o.addMessage(l.Localizer.DiagnosticAddendum.memberSetClassVar().format({name:n}));if(C.ClassType.isTypedDictClass(t)){const e=u.symbol.getTypedDeclarations();if(e.length>0&&1===e[0].type)return void o.addMessage(l.Localizer.DiagnosticAddendum.memberUnknown().format({name:n}))}if("get"===i.method&&7===u.classType.category&&C.ClassType.isSameGenericClass(u.classType,t)&&Te(It(e),u.symbol,e),8===s.category){let r;r="get"===i.method?"__get__":"set"===i.method?"__set__":"__delete__";const p=s.classType,d=S.lookUpClassMember(p,r,8);if(C.ClassType.isPropertyClass(s.classType))if("set"===i.method){if(!d)return void o.addMessage(l.Localizer.DiagnosticAddendum.propertyMissingSetter().format({name:n}))}else if("del"===i.method&&!d)return void o.addMessage(l.Localizer.DiagnosticAddendum.propertyMissingDeleter().format({name:n}));if(d){let n=Bt(d);if(6===n.category){const i=[{argumentCategory:0,type:C.ObjectType.create(p)},{argumentCategory:0,type:1&a?C.NoneType.create():C.ObjectType.create(t)},{argumentCategory:0,type:C.AnyType.create()}],s=De(e,i,n,void 0);s&&(n=s)}if(5===n.category)if(n=Xt(c||C.ObjectType.create(t),n,void 0!==c),"get"===i.method)s=Ut(n),7===u.classType.category&&(s=S.partiallySpecializeType(s,u.classType));else{if("set"===i.method&&n.details.parameters.length>=2){if(!$t(n.details.parameters[1].type,i.setType,o))return}s=C.AnyType.create()}return{type:s,isClassMember:!u.isInstanceMember}}}if("set"===i.method){let r=!1;if(u.symbol.hasTypedDeclarations()?r=!0:u.symbol.getDeclarations().some(t=>t.node===e)||(r=!0),r){let e=s;if(0==(1&a)&&(u.isInstanceMember||5!==s.category||(C.FunctionType.isClassMethod(s)||C.FunctionType.isInstanceMethod(s))&&(e=S.stripFirstParameter(s))),!$t(e,i.setType,o.createAddendum()))return void o.addMessage(l.Localizer.DiagnosticAddendum.memberAssignment().format({type:tn(i.setType),name:n,classType:Zt(t)}))}}return{type:s,isClassMember:!u.isInstanceMember}}if(!(8&a))if("get"===i.method){const n=te(e,t,"__getattribute__",{method:"get"},new r.DiagnosticAddendum,13);if(n&&5===n.category)return{type:Ut(n),isClassMember:!1};const i=te(e,t,"__getattr__",{method:"get"},new r.DiagnosticAddendum,9);if(i&&5===i.category)return{type:Ut(i),isClassMember:!1}}else if("set"===i.method){if(te(e,t,"__setattr__",{method:"get"},new r.DiagnosticAddendum,13))return{type:C.AnyType.create(),isClassMember:!1}}else{if(s.assert("del"===i.method),te(e,t,"__detattr__",{method:"get"},new r.DiagnosticAddendum,13))return{type:C.AnyType.create(),isClassMember:!1}}o.addMessage(l.Localizer.DiagnosticAddendum.memberUnknown().format({name:n}))}function ke(e,t,n,i){var o;if(10===t.category||5===t.category||7===t.category&&t.typeArguments){if(C.isUnionableType([t])){const n=[];if(S.doForSubtypes(t,e=>{S.addTypeVarsToListIfUnique(n,S.getTypeVarArgumentsRecursive(e))}),n.length>0){const s=Ee(e.items,i);s.length>n.length&&de(l.Localizer.Diagnostic.typeArgsTooMany().format({expected:n.length,received:s.length}),s[n.length].node);const a=new x.TypeVarMap,c=new r.DiagnosticAddendum;n.forEach((e,t)=>{Ht(e,t<s.length?S.convertToInstance(s[t].type):C.UnknownType.create(),!1,c,a)}),c.isEmpty()||de(l.Localizer.Diagnostic.typeNotSpecializable().format({type:tn(t)})+c.getString(),e.items);let p=S.specializeType(t,a);if(t.typeAliasInfo&&p!==t){const e=[];null===(o=t.typeAliasInfo.typeParameters)||void 0===o||o.forEach(t=>{e.push(a.getTypeVar(t.name)||C.UnknownType.create())}),p=C.TypeBase.cloneForTypeAlias(p,t.typeAliasInfo.aliasName,t.typeAliasInfo.typeParameters,e)}return{type:p,node:e}}}}const a=S.doForSubtypes(t,t=>{if(t=S.makeTypeVarsConcrete(t),C.isAnyOrUnknown(t))return t;if(7===t.category){if("set"===n.method?de(l.Localizer.Diagnostic.genericClassAssigned(),e.baseExpression):"del"===n.method&&de(l.Localizer.Diagnostic.genericClassDeleted(),e.baseExpression),C.ClassType.isSpecialBuiltIn(t,"Literal"))return function(e){if(0===e.items.items.length)return de(l.Localizer.Diagnostic.literalEmptyArgs(),e.baseExpression),C.UnknownType.create();const t=[];for(const n of e.items.items){let i;if(49===n.nodeType){const t=0!=(32&n.strings[0].token.flags),s=n.strings.map(e=>e.value).join("");i=je(e,t?"bytes":"str",s)}else 41===n.nodeType?!n.isImaginary&&n.isInteger&&(i=je(e,"int",n.value)):11===n.nodeType?31===n.constType?i=je(e,"bool",!0):14===n.constType?i=je(e,"bool",!1):24===n.constType&&(i=C.NoneType.create()):56===n.nodeType&&33===n.operator&&41===n.expression.nodeType&&!n.expression.isImaginary&&n.expression.isInteger&&(i=je(e,"int",-n.expression.value));if(!i){const e=X(n);if(8===e.type.category&&C.ClassType.isEnumClass(e.type.classType)&&void 0!==e.type.classType.literalValue)i=e.type.classType;else{let t=!0;S.doForSubtypes(e.type,e=>{7===e.category&&void 0!==e.literalValue||(t=!1)}),t&&(i=e.type)}}i||(de(l.Localizer.Diagnostic.literalUnsupportedType(),n),i=C.UnknownType.create()),t.push(i)}return C.combineTypes(t)}(e);if(C.ClassType.isBuiltIn(t,"InitVar")){const t=Ee(e.items,i);return 1===t.length?t[0].type:(de(l.Localizer.Diagnostic.typeArgsMismatchOne().format({received:t.length}),e.baseExpression),C.UnknownType.create())}if(C.ClassType.isEnumClass(t))return C.ObjectType.create(t);let s=i;return 7===t.category&&C.ClassType.isBuiltIn(t,"Tuple")&&(s|=512),Ct(t,Ee(e.items,s),i,e)}if(8===t.category)return function(e,t,n){if(C.ClassType.isTypedDictClass(t.classType)){if(1!==e.items.items.length)return de(l.Localizer.Diagnostic.typeArgsMismatchOne().format({received:e.items.items.length}),e),C.UnknownType.create();const i=Qt(t.classType),s=X(e.items.items[0]).type;let o=new r.DiagnosticAddendum;const a=S.doForSubtypes(s,s=>{if(C.isAnyOrUnknown(s))return s;if(8===s.category&&C.ClassType.isBuiltIn(s.classType,"str")){if(void 0===s.classType.literalValue)return C.UnknownType.create();const r=s.classType.literalValue,a=i.get(r);if(!a)return o.addMessage(l.Localizer.DiagnosticAddendum.keyUndefined().format({name:r,type:tn(t)})),C.UnknownType.create();if("set"===n.method)$t(a.valueType,n.setType,o);else if("del"===n.method&&a.isRequired){fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.keyRequiredDeleted().format({name:r}),e)}return a.valueType}return o.addMessage(l.Localizer.DiagnosticAddendum.typeNotStringLiteral().format({type:tn(s)})),C.UnknownType.create()});if(n.setExpectedTypeDiag&&(o=n.setExpectedTypeDiag),!o.isEmpty()){let t;t="set"===n.method?l.Localizer.Diagnostic.typedDictSet():"del"===n.method?l.Localizer.Diagnostic.typedDictDelete():l.Localizer.Diagnostic.typedDictAccess(),fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",t+o.getString(),e)}return a}let i;"get"===n.method?i="__getitem__":"set"===n.method?i="__setitem__":(s.assert("del"===n.method),i="__delitem__");const o=ee(e,t,i,{method:"get"},new r.DiagnosticAddendum,9);if(!o){return fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.methodNotDefinedOnType().format({name:i,type:tn(t)}),e.baseExpression),C.UnknownType.create()}const a=e.items.items.map(e=>X(e).type);let c;if(1===a.length){c=a[0];const n=t.classType;if(7===n.category&&C.ClassType.isBuiltIn(n,"Tuple")&&n.typeArguments&&41===e.items.items[0].nodeType&&e.items.items[0].isInteger&&!e.items.items[0].isImaginary){const t=e.items.items[0];if(t.isInteger&&t.value>=0&&t.value<n.typeArguments.length)return n.typeArguments[t.value]}}else{const t=xt(e,"Tuple");c=7===t.category?S.convertToInstance(C.ClassType.cloneForSpecialization(t,a)):C.UnknownType.create()}const p=[{argumentCategory:0,type:c}];"set"===n.method&&p.push({argumentCategory:0,type:n.setType||C.AnyType.create()});return Fe(e,p,o,new x.TypeVarMap,!1,!0,void 0).returnType||C.UnknownType.create()}(e,t,n);if(C.isNoneOrNever(t))return fe(It(e).diagnosticRuleSet.reportOptionalSubscript,"reportOptionalSubscript",l.Localizer.Diagnostic.noneNotSubscriptable(),e.baseExpression),C.UnknownType.create();if(!C.isUnbound(t)){fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeNotSubscriptable().format({type:tn(t)}),e.baseExpression)}return C.UnknownType.create()});return e.items.items.forEach(e=>{X(e)}),{type:a,node:e}}function Ee(e,t){const n=[],i=-129&t;return e.items.forEach(e=>{n.push(function(e,t){let n;const i=353|t;n=32===e.nodeType?{type:C.UnknownType.create(),typeList:e.entries.map(e=>X(e,void 0,i)),node:e}:X(e,void 0,i);return n}(e,i))}),n}function we(e){let t,n;if(e.arguments.length>2&&de(l.Localizer.Diagnostic.superCallArgCount(),e.arguments[2]),e.arguments.length>0)t=X(e.arguments[0].valueExpression).type,C.isAnyOrUnknown(t)||7===t.category||de(l.Localizer.Diagnostic.superCallFirstArg().format({type:tn(t)}),e.arguments[0].valueExpression);else{const n=m.getEnclosingClass(e);if(n){const e=Qe(n);t=e?e.classType:C.UnknownType.create()}else de(l.Localizer.Diagnostic.superCallZeroArgForm(),e.leftExpression),t=C.UnknownType.create()}if(e.arguments.length>1){n=S.specializeType(X(e.arguments[1].valueExpression).type,void 0);let i=!1;if(C.isAnyOrUnknown(n));else if(8===n.category){const e=n.classType;7===t.category&&(S.derivesFromClassRecursive(e,t,!0)||(i=!0))}else 7===n.category?7===t.category&&(S.derivesFromClassRecursive(n,t,!0)||(i=!0)):i=!0;if(i){fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.superCallSecondArg().format({type:tn(t)}),e.arguments[1].valueExpression)}}const i=e.parent;if(36===i.nodeType){const e=i.memberName.value,n=S.lookUpClassMember(t,e,1);if(n&&7===n.classType.category)return C.ObjectType.create(n.classType)}if(7===t.category){const e=t.details.baseClasses;if(e.length>0){const t=e[0];if(7===t.category)return C.ObjectType.create(t)}}return C.UnknownType.create()}function Ae(e,t,n,i,a){let p;const u=S.makeTypeVarsConcrete(n.type),d=0!=(16&a);switch(u.category){case 7:if(C.ClassType.isBuiltIn(u)){const n=u.details.name;if("type"===n){if(1===t.length){const e=St(t[0]);8===e.category&&(p=e.classType)}else t.length>=2&&(p=function(e,t){const n=St(t[0]);if(8!==n.category||!C.ClassType.isBuiltIn(n.classType,"str"))return void de(l.Localizer.Diagnostic.typeClassFirstArg(),t[0].valueExpression||e);const i=n.classType.literalValue||"_",s=St(t[1]);if(8!==s.category||!C.ClassType.isBuiltIn(s.classType,"Tuple")||void 0===s.classType.typeArguments)return void de(l.Localizer.Diagnostic.typeClassSecondArg(),t[1].valueExpression||e);const r=C.ClassType.create(i,0,e.id);s.classType.typeArguments.forEach(n=>{7===n.category||C.isAnyOrUnknown(n)?r.details.baseClasses.push(n):me(n,t[1].valueExpression||e)}),S.computeMroLinearization(r)||de(l.Localizer.Diagnostic.methodOrdering(),e);return r}(e,t));p||(p=C.AnyType.create())}else if("TypeVar"===n)p=Oe(e,t,!1);else if("ParameterSpecification"===n)p=Oe(e,t,!0);else if("NamedTuple"===n)p=Me(e,t,!0);else if("Protocol"===n||"Generic"===n||"Callable"===n||"Type"===n){fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeNotIntantiable().format({type:n}),e)}else"Enum"===n||"IntEnum"===n||"Flag"===n||"IntFlag"===n?p=function(e,t,n){let i="enum";if(0===n.length)de(l.Localizer.Diagnostic.enumFirstArg(),e);else{const t=n[0];0!==t.argumentCategory?de(l.Localizer.Diagnostic.enumFirstArg(),n[0].valueExpression||e):t.valueExpression&&49===t.valueExpression.nodeType&&(i=t.valueExpression.strings.map(e=>e.value).join(""))}const r=C.ClassType.create(i,64,e.id);r.details.baseClasses.push(t),S.computeMroLinearization(r);const a=r.details.fields;if(a.set("__class__",_.Symbol.createWithType(36,r)),n.length<2)de(l.Localizer.Diagnostic.enumSecondArg(),e);else{const t=n[1];if(0===t.argumentCategory&&t.valueExpression&&49===t.valueExpression.nodeType){t.valueExpression.strings.map(e=>e.value).join("").split(" ").forEach(n=>{if(n=n.trim()){const i=C.UnknownType.create(),r=_.Symbol.createWithType(4,i),l=t.valueExpression;s.assert(49===l.nodeType);const p={type:1,node:l,path:It(e).filePath,range:o.convertOffsetsToRange(l.start,c.TextRange.getEnd(l),It(e).lines)};r.addDeclaration(p),a.set(n,r)}})}else de(l.Localizer.Diagnostic.enumSecondArg(),e)}return r}(e,u,t):"TypedDict"===n?p=function(e,t,n){let i="TypedDict";if(0===n.length)de(l.Localizer.Diagnostic.typedDictFirstArg(),e);else{const t=n[0];0===t.argumentCategory&&t.valueExpression&&49===t.valueExpression.nodeType?i=t.valueExpression.strings.map(e=>e.value).join(""):de(l.Localizer.Diagnostic.typedDictFirstArg(),n[0].valueExpression||e)}const s=C.ClassType.create(i,16,e.id);s.details.baseClasses.push(t),S.computeMroLinearization(s);const r=s.details.fields;r.set("__class__",_.Symbol.createWithType(36,s));let a=!1;if(n.length<2)de(l.Localizer.Diagnostic.typedDictSecondArgDict(),e);else{const t=n[1],i=new Map;if(0===t.argumentCategory&&t.valueExpression&&15===t.valueExpression.nodeType){a=!0,t.valueExpression.entries.forEach(t=>{if(17!==t.nodeType)return void de(l.Localizer.Diagnostic.typedDictSecondArgDictEntry(),t);if(49!==t.keyExpression.nodeType)return void de(l.Localizer.Diagnostic.typedDictEntryName(),t.keyExpression);const n=t.keyExpression.strings.map(e=>e.value).join("");if(!n)return void de(l.Localizer.Diagnostic.typedDictEmptyName(),t.keyExpression);if(i.has(n))return void de(l.Localizer.Diagnostic.typedDictEntryUnique(),t.keyExpression);i.set(n,!0),J(t.valueExpression,!0);const s=new _.Symbol(8),a={type:1,node:t.keyExpression,path:It(e).filePath,typeAnnotationNode:t.valueExpression,range:o.convertOffsetsToRange(t.keyExpression.start,c.TextRange.getEnd(t.keyExpression),It(e).lines)};s.addDeclaration(a),r.set(n,s)})}else if(t.name)for(let t=1;t<n.length;t++){const s=n[t];if(!s.name||!s.valueExpression)continue;if(i.has(s.name.value)){de(l.Localizer.Diagnostic.typedDictEntryUnique(),s.valueExpression);continue}i.set(s.name.value,!0),J(s.valueExpression,!0);const a=new _.Symbol(8),p={type:1,node:s.name,path:It(e).filePath,typeAnnotationNode:s.valueExpression,range:o.convertOffsetsToRange(s.name.start,c.TextRange.getEnd(s.valueExpression),It(e).lines)};a.addDeclaration(p),r.set(s.name.value,a)}else de(l.Localizer.Diagnostic.typedDictSecondArgDict(),e)}a&&(n.length>=3&&(!n[2].name||"total"!==n[2].name.value||!n[2].valueExpression||11!==n[2].valueExpression.nodeType||14!==n[2].valueExpression.constType&&31!==n[2].valueExpression.constType?de(l.Localizer.Diagnostic.typedDictTotalParam(),n[2].valueExpression||e):14===n[2].valueExpression.constType&&(s.details.flags|=32)),n.length>3&&de(l.Localizer.Diagnostic.typedDictExtraArgs(),n[3].valueExpression||e));return ae(e,s),s}(e,u,t):"auto"===n&&0===t.length&&(p=kt(e,"int"))}else if(C.ClassType.hasAbstractMethods(u)){const t=Yt(u),n=new r.DiagnosticAddendum,i=2;t.forEach((e,s)=>{if(s===i)n.addMessage(l.Localizer.DiagnosticAddendum.memberIsAbstractMore().format({count:t.length-i}));else if(s<i&&7===e.classType.category){const t=e.classType.details.name;n.addMessage(l.Localizer.DiagnosticAddendum.memberIsAbstract().format({type:t,name:e.symbolName}))}}),fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeAbstract().format({type:u.details.name})+n.getString(),e)}p||(p=Ie(e,t,u,d,i).returnType);break;case 5:if("namedtuple"===u.details.builtInName)fe(It(e).diagnosticRuleSet.reportUntypedNamedTuple,"reportUntypedNamedTuple",l.Localizer.Diagnostic.namedTupleNoTypes(),e),p=Me(e,t,!1);else if("NewType"===u.details.builtInName){const n=Fe(e,t,u,new x.TypeVarMap,d,!0,i);p=n.argumentErrors?n.returnType:function(e,t){let n="_";if(t.length>=1){const e=t[0];0===e.argumentCategory&&e.valueExpression&&49===e.valueExpression.nodeType&&(n=e.valueExpression.strings.map(e=>e.value).join(""))}if(t.length>=2){const i=St(t[1],!0);if(7===i.category){const t=-4&i.details.flags,s=C.ClassType.create(n,t,e.id);return s.details.baseClasses.push(i),S.computeMroLinearization(s),s}}return}(e,t)}else p=Fe(e,t,u,new x.TypeVarMap,d,!0,i).returnType,"__import__"===u.details.builtInName&&(p=C.AnyType.create());p||(p=C.UnknownType.create());break;case 6:{const n=De(e,t,u,i);if(n)if("cast"===n.details.builtInName&&2===t.length){const n=St(t[0],!0),i=St(t[1]);7===n.category&&8===i.category&&C.isTypeSame(n,i.classType)&&fe(It(e).diagnosticRuleSet.reportUnnecessaryCast,"reportUnnecessaryCast",l.Localizer.Diagnostic.unnecessaryCast().format({type:tn(i)}),e),p=S.convertToInstance(n)}else p=Fe(e,t,n,new x.TypeVarMap,d,!0,i).returnType,p||(p=C.UnknownType.create());else{const n=m.printExpression(e),i=new r.DiagnosticAddendum,s=t.map(e=>tn(St(e)));9!==e.nodeType&&u.overloads[0].details.name&&i.addMessage(l.Localizer.DiagnosticAddendum.overloadCallName().format({name:u.overloads[0].details.name})),i.addMessage(l.Localizer.DiagnosticAddendum.argumentTypes().format({types:s.join(", ")})),fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.noOverload().format({expression:n})+i.getString(),e),p=C.UnknownType.create()}break}case 8:{const n=Se(u);if(n)C.isAnyOrUnknown(n)?p=n:7===n.category&&(p=Ie(e,t,n,d,i).returnType);else{const n=ee(e,u,"__call__",{method:"get"},new r.DiagnosticAddendum,9);n&&(p=Fe(e,t,n,new x.TypeVarMap,d,!0,i).returnType,p||(p=C.UnknownType.create()))}break}case 10:{const s=[];u.subtypes.forEach(r=>{if(C.isNoneOrNever(r))fe(It(e).diagnosticRuleSet.reportOptionalCall,"reportOptionalCall",l.Localizer.Diagnostic.noneNotCallable(),e);else{const o=Ae(e,t,{type:r,node:n.node},i,a);o&&s.push(o.type)}}),s.length>0&&(p=C.combineTypes(s));break}case 2:case 1:t.forEach(e=>St(e)),p=u}if(!p){fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeNotCallable().format({expression:m.printExpression(e),type:tn(u)}),e),p=C.UnknownType.create()}return 0==(2&a)&&7===p.category&&(p=Ct(p,void 0,a,e)),{type:p,node:n.node}}function De(e,t,n,i){let s;for(const r of n.overloads)if(C.FunctionType.isOverloaded(r)&&(At(e,()=>{Fe(e,t,r,new x.TypeVarMap,!0,!1,i).argumentErrors||(s=r)}),s))break;return s}function Ie(e,t,n,i,s){let o,a=!1,c=!1;const p=e=>5===e.category&&C.FunctionType.isSkipConstructorCheck(e),u=ee(e,C.ObjectType.create(n),"__init__",{method:"get"},new r.DiagnosticAddendum,13);if(u&&!p(u)){const l=new x.TypeVarMap;if(s&&$t(C.ObjectType.create(n),s,new r.DiagnosticAddendum,l),Fe(e,t,u,l,i,!0,C.NoneType.create()).argumentErrors)c=!0;else{const e=Pe(S.specializeType(n,l,!0),s);o=C.ObjectType.create(e)}a=!0,i=!0}if(!c){const l=xe(e,n,"__new__",{method:"get"},new r.DiagnosticAddendum,13);if(l&&!p(l.type)){const r=Xt(n,l.type,!0),p=new x.TypeVarMap,u=Fe(e,t,r,p,i,!0,s);if(u.argumentErrors)c=!0;else{const e=u.returnType;e&&8===e.category&&C.ClassType.isSameGenericClass(e.classType,n)&&((S.containsUnknown(e)||S.requiresSpecialization(e))&&void 0!==o||(o=e))}if(!o){const e=Pe(S.specializeType(n,p,!0),s);o=C.ObjectType.create(e)}a=!0}}if(a||t.forEach(e=>{e.valueExpression&&X(e.valueExpression)}),!a&&t.length>0){fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.constructorNoArgs().format({type:n.details.name}),e)}else if(!o){const e=Pe(n,s);o=C.ObjectType.create(e)}return{argumentErrors:c,returnType:o}}function Pe(e,t){if(!t)return e;const n=C.removeNoneFromUnion(t);if(8!==n.category)return e;if(8!==n.category)return e;const i=n.classType,s=new x.TypeVarMap;if($t(i,e,new r.DiagnosticAddendum,s))return S.specializeType(i,s);if(C.ClassType.isSameGenericClass(e,i)&&i.typeArguments&&e.typeArguments&&i.typeArguments.length===e.typeArguments.length){let t=!0;if(i.typeArguments.forEach((n,i)=>{$t(n,e.typeArguments[i],new r.DiagnosticAddendum,s)||(t=!1)}),t)return S.specializeType(i,s)}return e}function Fe(e,t,n,i,s,o=!0,a){let c={argumentErrors:!1};switch(n.category){case 1:case 2:t.forEach(e=>St(e)),c.returnType=n;break;case 5:c=Re(e,t,n,i,s,o,a);break;case 6:{const p=De(e,t,n,a);if(p)c=Re(e,t,p,i,s,o,a);else{const i=m.printExpression(e),s=new r.DiagnosticAddendum,o=t.map(e=>tn(St(e)));9!==e.nodeType&&n.overloads[0].details.name&&s.addMessage(l.Localizer.DiagnosticAddendum.overloadCallName().format({name:n.overloads[0].details.name})),s.addMessage(l.Localizer.DiagnosticAddendum.argumentTypes().format({types:o.join(", ")})),fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.noOverload().format({expression:i})+s.getString(),e)}break}case 7:if(C.ClassType.isSpecialBuiltIn(n)){fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeNotIntantiable().format({type:n.details.name}),e)}else c=Ie(e,t,n,s,a);break;case 8:{const p=ee(e,n,"__call__",{method:"get"},new r.DiagnosticAddendum,9);if(p&&5===p.category){c=Fe(e,t,S.stripFirstParameter(p),i,s,o,a)}else{fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.objectNotCallable().format({type:tn(n)}),e)}break}case 10:{const r=[];for(const c of n.subtypes)if(C.isNoneOrNever(c))fe(It(e).diagnosticRuleSet.reportOptionalCall,"reportOptionalCall",l.Localizer.Diagnostic.noneNotCallable(),e);else{const n=Fe(e,t,c,i,s,o,a);n.returnType&&r.push(n.returnType)}r.length>0&&(c.returnType=C.combineTypes(r));break}}return c.returnType||t.forEach(e=>St(e)),c}function Re(e,t,n,i,o,a=!0,c){let p=0;const u=n.details.parameters;c&&!S.requiresSpecialization(c)&&n.details.declaredReturnType&&$t(n.details.declaredReturnType,c,new r.DiagnosticAddendum,i);const d=u.find(e=>2===e.category);let h=!1;const f=new Map;u.forEach(e=>{e.name&&f.set(e.name,{argsNeeded:0!==e.category||e.hasDefault?0:1,argsReceived:0})});let m=u.findIndex(e=>1===e.category&&!e.name);const g=u.findIndex(e=>0===e.category&&!e.name);m<0&&(m=u.findIndex(e=>1===e.category),m>=0&&m++),m<0&&(m=u.findIndex(e=>2===e.category)),m<0&&(m=u.length);let y=t.findIndex(e=>2===e.argumentCategory||void 0!==e.name);y<0&&(y=t.length),g>=0&&y<g&&(y=Math.min(g,t.length));const _=[];let T;function v(e,t){e.active&&(T=t)}let b=void 0!==t.find(e=>1===e.argumentCategory),x=0,k=0;for(;p<y;){if(x===g){x++;continue}if(p<g&&t[p].name){fe(It(t[p].name).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.argPositional(),t[p].name)}if(x>=m){if(!b||1!==t[p].argumentCategory){const n=m;fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",1===n?l.Localizer.Diagnostic.argPositionalExpectedOne():l.Localizer.Diagnostic.argPositionalExpectedCount().format({expected:n}),t[p].valueExpression||e),h=!0}break}const i=C.FunctionType.getEffectiveParameterType(n,x);if(1===t[p].argumentCategory){if(!t[p].valueExpression)break;const n=St(t[p]);let s,r=!1;8===n.category&&C.ClassType.isBuiltIn(n.classType,"Tuple")&&n.classType.typeArguments&&n.classType.typeArguments.length>0&&!S.isEllipsisType(n.classType.typeArguments[n.classType.typeArguments.length-1])?(s=n.classType.typeArguments[k],b=void 0!==t.find((e,t)=>t>p&&1===e.argumentCategory),k++,k>=n.classType.typeArguments.length&&(k=0,r=!0)):s=re(n,!1,t[p].valueExpression,!1);const o={argumentCategory:0,type:s},a=u[x].name;_.push({paramType:i,requiresTypeVarMatching:S.requiresSpecialization(i),argument:o,errorNode:t[p].valueExpression||e,paramName:a}),v(t[p],u[x]),a&&f.get(a).argsReceived++,r&&p++,x++}else if(1===u[x].category)_.push({paramType:i,requiresTypeVarMatching:S.requiresSpecialization(i),argument:t[p],errorNode:t[p].valueExpression||e,paramName:u[x].name}),v(t[p],u[x]),p++;else{const n=u[x].name;_.push({paramType:i,requiresTypeVarMatching:S.requiresSpecialization(i),argument:t[p],errorNode:t[p].valueExpression||e,paramName:n}),v(t[p],u[x]),n&&f.get(n).argsReceived++,p++,x++}}if(!h){let i=!1;for(;p<t.length;){if(2===t[p].argumentCategory)St(t[p]),i=!0;else{const i=t[p].name;if(i){const r=i.value,o=f.get(r);if(o)if(o.argsReceived>0)fe(It(i).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.paramAlreadyAssigned().format({name:r}),i),h=!0;else{f.get(i.value).argsReceived++;const o=u.findIndex(e=>e.name===r);s.assert(o>=0);const a=C.FunctionType.getEffectiveParameterType(n,o);_.push({paramType:a,requiresTypeVarMatching:S.requiresSpecialization(a),argument:t[p],errorNode:t[p].valueExpression||e,paramName:r}),v(t[p],u[o])}else d?(_.push({paramType:d.type,requiresTypeVarMatching:S.requiresSpecialization(d.type),argument:t[p],errorNode:t[p].valueExpression||e,paramName:r}),v(t[p],d)):(fe(It(i).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.paramNameMissing().format({name:i.value}),i),h=!0)}}p++}if(!i&&!b&&!C.FunctionType.isDefaultParameterCheckDisabled(n)){const t=[...f.keys()].filter(e=>{const t=f.get(e);return t.argsReceived<t.argsNeeded});if(t.length>0){const n=t.map(e=>`"${e}"`).join(", ");fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",1===t.length?l.Localizer.Diagnostic.argMissingForParam().format({name:n}):l.Localizer.Diagnostic.argMissingForParams().format({names:n}),e),h=!0}u.forEach(t=>{if(0===t.category&&t.name){const n=f.get(t.name);0===n.argsNeeded&&0===n.argsReceived&&t.defaultType&&S.requiresSpecialization(t.type)&&_.push({paramType:t.type,requiresTypeVarMatching:!0,argument:{argumentCategory:0,type:t.defaultType},errorNode:e,paramName:t.name})}})}}["cast","isinstance","issubclass"].some(e=>e===n.details.builtInName)&&(o=!0);const E=_.filter(e=>e.requiresTypeVarMatching).length;if(E>0){const t=Math.min(E,2);for(let s=0;s<t;s++)At(e,()=>{_.forEach(e=>{e.requiresTypeVarMatching&&Ne(e,i,n.details.name,o)})});i.lock()}_.forEach(e=>{Ne(e,i,n.details.name,o)||(h=!0)}),Dt(void 0)||O.isIncompleteTypeMode()||t.forEach(e=>{e.valueExpression&&(_.some(t=>t.argument===e)||X(e.valueExpression))});const w=Ut(n,_,a&&!h),A=S.specializeType(w,i);return{argumentErrors:h,returnType:A,activeParam:T}}function Ne(e,t,n,i){let s,o;if(e.argument.valueExpression){let n=S.specializeType(e.paramType,t);1===n.category&&(n=void 0);const i=X(e.argument.valueExpression,n);s=i.type,o=i.expectedTypeDiagAddendum,e.argument&&e.argument.name&&!Dt(e.errorNode)&&W(e.argument.name,n||s)}else s=St(e.argument);let a=new r.DiagnosticAddendum;if(!$t(e.paramType,s,a.createAddendum(),t)){const t=It(e.errorNode),i=tn(s),r=tn(e.paramType);let c;return c=e.paramName?n?l.Localizer.Diagnostic.argAssignmentParamFunction().format({argType:i,paramType:r,functionName:n,paramName:e.paramName}):l.Localizer.Diagnostic.argAssignmentParam().format({argType:i,paramType:r,paramName:e.paramName}):n?l.Localizer.Diagnostic.argAssignmentFunction().format({argType:i,paramType:r,functionName:n}):l.Localizer.Diagnostic.argAssignment().format({argType:i,paramType:r}),o&&(a=o),fe(t.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",c+a.getString(),e.errorNode),!1}if(!i){const t=C.removeUnboundFromUnion(s),i=It(e.errorNode),o=new r.DiagnosticAddendum;e.paramName&&o.addMessage((n?l.Localizer.DiagnosticAddendum.argParamFunction().format({paramName:e.paramName,functionName:n}):l.Localizer.DiagnosticAddendum.argParam().format({paramName:e.paramName}))+o.getString()),1===t.category?fe(i.diagnosticRuleSet.reportUnknownArgumentType,"reportUnknownArgumentType",l.Localizer.Diagnostic.argTypeUnknown()+o.getString(),e.errorNode):S.containsUnknown(t,!0)&&(S.containsUnknown(e.paramType)||7===t.category||(o.addMessage(l.Localizer.DiagnosticAddendum.argumentType().format({type:tn(t)})),fe(i.diagnosticRuleSet.reportUnknownArgumentType,"reportUnknownArgumentType",l.Localizer.Diagnostic.argTypePartiallyUnknown()+o.getString(),e.errorNode)))}return!0}function Oe(e,t,n){let i="";if(n){const t=It(e);!t.isStubFile&&t.executionEnvironment.pythonVersion<a.PythonVersion.V39&&de(l.Localizer.Diagnostic.paramSpecIllegal(),e)}if(0===t.length)return void de(n?l.Localizer.Diagnostic.paramSpecFirstArg():l.Localizer.Diagnostic.typeVarFirstArg(),e);const s=t[0];s.valueExpression&&49===s.valueExpression.nodeType?i=s.valueExpression.strings.map(e=>e.value).join(""):de(n?l.Localizer.Diagnostic.paramSpecFirstArg():l.Localizer.Diagnostic.typeVarFirstArg(),s.valueExpression||e);const r=C.TypeVarType.createInstantiable(i,n);for(let i=1;i<t.length;i++){const s=t[i].name,o=s?s.value:void 0,a=new Map;if(o){if(a.get(o)&&de(l.Localizer.Diagnostic.duplicateParam().format({name:o}),t[i].valueExpression||e),"bound"!==o||n)"covariant"!==o||n?"contravariant"!==o||n?de(n?l.Localizer.Diagnostic.paramSpecUnknownParam().format({name:o}):l.Localizer.Diagnostic.typeVarUnknownParam().format({name:o}),t[i].valueExpression||e):t[i].valueExpression&&Le(t[i].valueExpression)&&(r.isContravariant?de(l.Localizer.Diagnostic.typeVarVariance(),t[i].valueExpression):r.isContravariant=!0):t[i].valueExpression&&Le(t[i].valueExpression)&&(r.isContravariant?de(l.Localizer.Diagnostic.typeVarVariance(),t[i].valueExpression):r.isCovariant=!0);else if(r.constraints.length>0)de(l.Localizer.Diagnostic.typeVarBoundAndConstrained(),t[i].valueExpression||e);else{const n=St(t[i],!0);S.requiresSpecialization(n)&&de(l.Localizer.Diagnostic.typeVarGeneric(),t[i].valueExpression||e),r.boundType=S.convertToInstance(n)}a.set(o,o)}else{if(n){de(l.Localizer.Diagnostic.paramSpecUnknownArg(),t[i].valueExpression||e);break}if(r.boundType)de(l.Localizer.Diagnostic.typeVarBoundAndConstrained(),t[i].valueExpression||e);else{const n=St(t[i],!0);S.requiresSpecialization(n)&&de(l.Localizer.Diagnostic.typeVarGeneric(),t[i].valueExpression||e),C.TypeVarType.addConstraint(r,S.convertToInstance(n))}}}return r}function Le(e){if(11===e.nodeType){if(14===e.constType)return!1;if(31===e.constType)return!0}return de(l.Localizer.Diagnostic.expectedBoolLiteral(),e),!1}function Me(e,t,n){let i="namedtuple";if(0===t.length)de(l.Localizer.Diagnostic.namedTupleFirstArg(),e);else{const n=t[0];0!==n.argumentCategory?de(l.Localizer.Diagnostic.namedTupleFirstArg(),t[0].valueExpression||e):n.valueExpression&&49===n.valueExpression.nodeType&&(i=n.valueExpression.strings.map(e=>e.value).join(""))}const s=C.ClassType.create(i,0,e.id),r=ce(e,"NamedTuple")||C.UnknownType.create();s.details.baseClasses.push(r),S.computeMroLinearization(s);const a=s.details.fields;if(a.set("__class__",_.Symbol.createWithType(36,s)),7===xt(e,"Tuple").category){const i=C.FunctionType.createInstance("__new__",65);i.details.declaredReturnType=C.ObjectType.create(s),m.isAssignmentToDefaultsFollowingNamedTuple(e)&&(i.details.flags|=32),C.FunctionType.addParameter(i,{category:0,name:"cls",type:s});const r={category:0,name:"self",type:C.ObjectType.create(s)};let p=!1;if(t.length<2)de(l.Localizer.Diagnostic.namedTupleSecondArg(),e),p=!0;else{const s=t[1];if(0!==s.argumentCategory)p=!0;else if(!n&&s.valueExpression&&49===s.valueExpression.nodeType){s.valueExpression.strings.map(e=>e.value).join("").split(/[,\s]+/).forEach(t=>{if(t=t.trim()){const r=C.UnknownType.create(),l={category:0,name:t,hasDeclaredType:n,type:r};C.FunctionType.addParameter(i,l);const p=_.Symbol.createWithType(8,r),u=s.valueExpression,d={type:1,node:u,path:It(e).filePath,range:o.convertOffsetsToRange(u.start,c.TextRange.getEnd(u),It(e).lines)};p.addDeclaration(d),a.set(t,p)}})}else if(s.valueExpression&&32===s.valueExpression.nodeType){const t=s.valueExpression,r=new Map;t.entries.forEach((t,s)=>{let p,u,d,h="";if(n)if(53===t.nodeType&&2===t.expressions.length){d=t.expressions[0],p=t.expressions[1];const e=X(p,void 0,416);e&&(u=S.convertToInstance(e.type))}else de(l.Localizer.Diagnostic.namedTupleNameType(),t);else d=t,u=C.UnknownType.create();d&&49===d.nodeType?(h=d.strings.map(e=>e.value).join(""),h||de(l.Localizer.Diagnostic.namedTupleEmptyName(),d)):de(l.Localizer.Diagnostic.namedTupleNameString(),d||t),h||(h="_"+s.toString()),r.has(h)&&de(l.Localizer.Diagnostic.namedTupleNameUnique(),d||t),r.set(h,h),u||(u=C.UnknownType.create());const f={category:0,name:h,hasDeclaredType:n,type:u};C.FunctionType.addParameter(i,f);const m=_.Symbol.createWithType(8,u);if(d&&49===d.nodeType){const t={type:1,node:d,path:It(e).filePath,typeAnnotationNode:p,range:o.convertOffsetsToRange(d.start,c.TextRange.getEnd(d),It(e).lines)};m.addDeclaration(t)}a.set(h,m)})}else p=!0}p&&C.FunctionType.addDefaultParameters(i);const u=C.FunctionType.createInstance("__init__",192);C.FunctionType.addParameter(u,r),C.FunctionType.addDefaultParameters(u),u.details.declaredReturnType=C.NoneType.create(),a.set("__new__",_.Symbol.createWithType(4,i)),a.set("__init__",_.Symbol.createWithType(4,u));const d=C.FunctionType.createInstance("keys",64),h=C.FunctionType.createInstance("items",64);d.details.declaredReturnType=kt(e,"list",[kt(e,"str")]),h.details.declaredReturnType=d.details.declaredReturnType,a.set("keys",_.Symbol.createWithType(8,d)),a.set("items",_.Symbol.createWithType(8,h));const f=C.FunctionType.createInstance("__len__",64);if(f.details.declaredReturnType=kt(e,"int"),C.FunctionType.addParameter(f,r),a.set("__len__",_.Symbol.createWithType(4,f)),p){const t=C.FunctionType.createInstance("__getattribute__",64);t.details.declaredReturnType=C.AnyType.create(),C.FunctionType.addParameter(t,r),C.FunctionType.addParameter(t,{category:0,name:"name",type:kt(e,"str")}),a.set("__getattribute__",_.Symbol.createWithType(4,t))}}return s}function Ue(e,t){const n={1:["__iadd__",0],34:["__isub__",33],27:["__imul__",26],14:["__ifloordiv__",13],11:["__itruediv__",10],25:["__imod__",24],30:["__ipow__",29],23:["__imatmul__",22],4:["__iand__",3],7:["__ior__",6],9:["__ixor__",8],18:["__ilshift__",17],32:["__irshift__",31]};let i;const s=S.makeTypeVarsConcrete(X(e.leftExpression).type),r=S.makeTypeVarsConcrete(X(e.rightExpression).type);if(i=S.doForSubtypes(s,i=>S.doForSubtypes(r,s=>{if(C.isAnyOrUnknown(i)||C.isAnyOrUnknown(s))return 1===i.category||1===s.category?C.UnknownType.create():C.AnyType.create();const r=n[e.operator][0];return Ve(i,[s],r,e,t)})),!i||C.isNever(i)){i=ze(n[e.operator][1],s,r,e,t)}return i}function ze(e,t,n,i,s){let r;if(k[e])r=S.doForSubtypes(t,t=>S.doForSubtypes(n,n=>{if(C.isAnyOrUnknown(t)||C.isAnyOrUnknown(n))return 1===t.category||1===n.category?C.UnknownType.create():C.AnyType.create();const r=k[e][0],o=Ve(t,[n],r,i,s);if(o)return o;const a=k[e][1];return Ve(n,[t],a,i,s)}));else if(E[e])r=S.doForSubtypes(t,t=>S.doForSubtypes(n,n=>{if(C.isAnyOrUnknown(t)||C.isAnyOrUnknown(n))return 1===t.category||1===n.category?C.UnknownType.create():C.AnyType.create();const r=E[e][0];return Ve(t,[n],r,i,s)}));else if(w[e])r=S.doForSubtypes(t,t=>S.doForSubtypes(n,n=>{if(C.isAnyOrUnknown(t)||C.isAnyOrUnknown(n))return 1===t.category||1===n.category?C.UnknownType.create():C.AnyType.create();const r=w[e][0],o=Ve(t,[n],r,i,s);if(o)return o;const a=w[e][1];return Ve(n,[t],a,i,s)}));else if(A[e]){if(36===e){if(t=S.removeTruthinessFromType(t),C.isNever(t))return n}else if(37===e&&(t=S.removeFalsinessFromType(t),C.isNever(t)))return n;41===e||42===e?(r=S.doForSubtypes(n,e=>S.doForSubtypes(t,t=>C.isAnyOrUnknown(e)||C.isAnyOrUnknown(t)?1===t.category||1===e.category?C.UnknownType.create():C.AnyType.create():Ve(e,[t],"__contains__",i,void 0))),r&&!C.isNever(r)&&(r=kt(i,"bool"))):r=S.doForSubtypes(t,t=>S.doForSubtypes(n,n=>36===e||37===e?C.combineTypes([t,n]):kt(i,"bool")))}if(!r||C.isNever(r)){fe(It(i).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeNotSupportBinaryOperator().format({operator:m.printOperator(e),leftType:tn(t),rightType:tn(n)}),i),r=C.UnknownType.create()}return r}function Ve(e,t,n,i,s){let o=!0;const a=(e,a)=>{const c=ee(i,e,n,{method:"get"},new r.DiagnosticAddendum,9,a);if(c){const e=t.map(e=>({argumentCategory:0,type:e}));let n;return wt(()=>{n=Fe(i,e,c,new x.TypeVarMap,!0,!0,s)}),n.argumentErrors&&(o=!1),n.returnType}o=!1},c=S.doForSubtypes(e,e=>{if(C.isAnyOrUnknown(e))return e;if(8===e.category)return a(e);if(7===e.category){const t=S.getMetaclass(e);if(t&&7===t.category)return a(C.ObjectType.create(t),e)}else if(C.isNoneOrNever(e)){const e=kt(i,"object");if(8===e.category)return a(e)}o=!1});if(o)return c}function Be(e,t,n,i,s){if("none"===e)return;const o=n.value,a=C.removeUnboundFromUnion(i);if(1===a.category)fe(e,t,l.Localizer.Diagnostic.typeUnknown().format({name:o}),s);else if(S.containsUnknown(a)){const n=new r.DiagnosticAddendum;n.addMessage(l.Localizer.DiagnosticAddendum.typeOfSymbol().format({name:o,type:tn(a)})),fe(e,t,l.Localizer.Diagnostic.typeUnknown().format({name:o})+n.getString(),s)}}function qe(e){for(const t of e.comprehensions)if(34===t.nodeType){const e=re(S.stripLiteralValue(X(t.iterableExpression).type),!!t.isAsync,t.iterableExpression,!1);_e(t.targetExpression,e,t.iterableExpression)}else s.assert(35===t.nodeType),Dt(t.testExpression)||X(t.testExpression);let t=C.UnknownType.create();if(17===e.expression.nodeType){t=kt(e,"Tuple",[S.stripLiteralValue(X(e.expression.keyExpression).type),S.stripLiteralValue(X(e.expression.valueExpression).type)])}else 16===e.expression.nodeType?X(e.expression.expandExpression):p.isExpressionNode(e)&&(t=S.stripLiteralValue(X(e.expression).type));return t}function We(e,t,n){const i=kt(e,t);return 8===i.category?C.ObjectType.create(C.ClassType.cloneWithLiteral(i.classType,n)):C.UnknownType.create()}function je(e,t,n){const i=kt(e,t);return 8===i.category?C.ClassType.cloneWithLiteral(i.classType,n):C.UnknownType.create()}function He(e,t,n,i=!1,s=!1){if(t&&(t.forEach((e,n)=>{S.isEllipsisType(e.type)?i?2===t.length&&1===n||de(l.Localizer.Diagnostic.ellipsisSecondArg(),e.node):de(l.Localizer.Diagnostic.ellipsisContext(),e.node):9===e.type.category?de(l.Localizer.Diagnostic.moduleContext(),e.node):!s&&S.isParameterSpecificationType(e.type)&&de(l.Localizer.Diagnostic.paramSpecContext(),e.node)}),C.ClassType.isBuiltIn(e,"Tuple")&&1===t.length)){const e=t[0].type;8===e.category&&C.ClassType.isBuiltIn(e.classType,"Tuple")&&e.classType.typeArguments&&0===e.classType.typeArguments.length&&(t=[])}let r=t?t.map(e=>S.convertToInstance(e.type)):[];if(void 0!==n)if(t&&r.length>n)de(l.Localizer.Diagnostic.typeArgsTooMany().format({expected:n,received:r.length}),t[n].node),r=r.slice(0,n);else if(r.length<n)for(;r.length<n;)r.push(C.UnknownType.create());return!t&&i&&(r.push(C.AnyType.create(!1)),r.push(C.AnyType.create(!0))),C.ClassType.cloneForSpecialization(e,r)}function $e(e,t){const n=m.getEnclosingClass(e,!0);if(n){const i=Qe(n);if(i&&C.ClassType.isEnumClass(i.classType)){if(C.ClassType.isBuiltIn(i.classType)){const e=i.classType.details.name;if(["Enum","IntEnum","Flag","IntFlag"].find(t=>t===e))return t}return C.ObjectType.create(C.ClassType.cloneWithLiteral(i.classType,new C.EnumLiteral(i.classType.details.name,e.value)))}}return t}function Ge(t,n,i){const s=C.ClassType.create(n,3,t.id),r=It(t);r.isTypingExtensionsStubFile&&(s.details.flags|=16384);const o=i.alias?i.alias:"object";let a;if("builtins"===i.module)a=xt(t,o);else if("collections"===i.module){if(r.collectionsModulePath){const t=e(r.collectionsModulePath);if(t){const e=t.symbolTable.get(o);e&&(a=Ot(e))}}}else if("self"===i.module){const e=Et(t,o);e&&(a=Ot(e.symbol))}return a&&7===a.category&&7===s.category?(s.details.baseClasses.push(a),i.alias&&(s.details.aliasClass=a)):s.details.baseClasses.push(C.UnknownType.create()),S.computeMroLinearization(s),s}function Ke(e){const t=It(e);if(q(e))return;let n,i=q(e.rightExpression),s=!1;if(!i&&((t.isTypingStubFile||t.isTypingExtensionsStubFile)&&(i=function(e){if(39!==e.leftExpression.nodeType)return;const t=e.leftExpression.value;if("Any"===t)return C.AnyType.create();const n={overload:{alias:"",module:"builtins"},TypeVar:{alias:"",module:"builtins"},_promote:{alias:"",module:"builtins"},no_type_check:{alias:"",module:"builtins"},NoReturn:{alias:"",module:"builtins"},List:{alias:"list",module:"builtins"},Dict:{alias:"dict",module:"builtins"},DefaultDict:{alias:"defaultdict",module:"collections"},Set:{alias:"set",module:"builtins"},FrozenSet:{alias:"frozenset",module:"builtins"},Deque:{alias:"deque",module:"collections"},ChainMap:{alias:"ChainMap",module:"collections"}}[t];return n?Ge(e,t,n):void 0}(e),i&&W(e.rightExpression,i)),!i)){const o=ie(e.leftExpression);let a=2;let c;if(t.isStubFile&&(a|=1),function(e){if(55===e.nodeType&&39===e.valueExpression.nodeType){const t=Et(e,e.valueExpression.value);if(t){return void 0!==t.symbol.getDeclarations().find(e=>f.isTypeAliasDeclaration(e))}}return!1}(e.leftExpression))a|=416,c=e.leftExpression.valueExpression;else if(39===e.leftExpression.nodeType){const t=Et(e.leftExpression,e.leftExpression.value);t&&1===t.symbol.getDeclarations().length&&(c=e.leftExpression)}const l=X(e.rightExpression,o,a);let p=l.type;n=l.expectedTypeDiagAddendum,l.isResolutionCyclical&&(s=!0);const u=y.evaluateStaticBoolExpression(e.rightExpression,t.executionEnvironment);if(void 0!==u){const t=kt(e,"bool");8===t.category&&(p=C.ObjectType.create(C.ClassType.cloneWithLiteral(t.classType,u)))}if(o){$t(o,p,new r.DiagnosticAddendum)&&(p=Kt(o,p))}if(i=p,39!==e.leftExpression.nodeType||e.typeAnnotationComment||(i=$e(e.leftExpression,i)),c&&C.TypeBase.isInstantiable(i)){const e=[];11!==i.category&&S.doForSubtypes(i,t=>{S.addTypeVarsToListIfUnique(e,S.getTypeVarArgumentsRecursive(t))}),i=C.TypeBase.cloneForTypeAlias(i,c.value,e.length>0?e:void 0)}}s||(_e(e.leftExpression,i,e.rightExpression,n),W(e,i))}function Ye(e){if(q(e))return;const t=Ue(e,void 0);_e(e.destExpression,t,e.rightExpression),W(e,t)}function Qe(e){let t=q(e.name),n=q(e);if(t)return{classType:t,decoratedType:n||C.UnknownType.create()};const i=g.getScopeForNode(e),s=It(e);let r=0;(4===i.type||s.isTypingStubFile||s.isTypingExtensionsStubFile||s.isBuiltInStubFile)&&(r|=1,s.isTypingExtensionsStubFile&&(r|=16384),"property"===e.name.value&&(r|=512)),t=C.ClassType.create(e.name.value,r,e.id,m.getDocString(e.suite.statements)),K(i.lookUpSymbol(e.name.value),d.getDeclaration(e),t),W(e,t),W(e.name,t);const o=[];let c,p=!1,u=0;e.arguments.forEach(e=>{if(e.name&&"metaclass"!==e.name.value){if("total"===e.name.value&&C.ClassType.isTypedDictClass(t)){const n=y.evaluateStaticBoolExpression(e.valueExpression,s.executionEnvironment);void 0===n?de(l.Localizer.Diagnostic.typedDictTotalParam(),e.valueExpression):n||(t.details.flags|=32)}}else{let n=X(e.valueExpression).type;const i=!!e.name;if(i&&(p&&de(l.Localizer.Diagnostic.metaclassDuplicate(),e),p=!0),10===n.category&&(n=C.removeUnboundFromUnion(n)),C.isAnyOrUnknown(n)||0===n.category||(n=S.transformTypeObjectToClass(n),7!==n.category?(fe(s.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.baseClassInvalid(),e),n=C.UnknownType.create()):(C.ClassType.isBuiltIn(n,"Protocol")&&(!s.isStubFile&&!C.ClassType.isTypingExtensionClass(n)&&s.executionEnvironment.pythonVersion<a.PythonVersion.V37&&de(l.Localizer.Diagnostic.protocolIllegal(),e.valueExpression),t.details.flags|=2048),C.ClassType.isBuiltIn(n,"property")&&(t.details.flags|=512),s.executionEnvironment.pythonVersion>=a.PythonVersion.V36&&C.ClassType.isBuiltIn(n,"NamedTuple")&&(t.details.flags|=4),C.ClassType.isBuiltIn(n,"TypedDict")||C.ClassType.isTypedDictClass(n)?t.details.flags|=16:C.ClassType.isTypedDictClass(t)&&!C.ClassType.isTypedDictClass(n)&&de(l.Localizer.Diagnostic.typedDictBaseClass(),e),S.derivesFromClassRecursive(n,t,!0)&&(de(l.Localizer.Diagnostic.baseClassCircular(),e),n=C.UnknownType.create()))),(1===n.category||10===n.category&&n.subtypes.some(e=>1===e.category))&&fe(s.diagnosticRuleSet.reportUntypedBaseClass,"reportUntypedBaseClass",l.Localizer.Diagnostic.baseClassUnknown(),e),i)7!==n.category&&1!==n.category||(t.details.metaClass=n,7===n.category&&(C.ClassType.isBuiltIn(n,"EnumMeta")?t.details.flags|=64:C.ClassType.isBuiltIn(n,"ABCMeta")&&(t.details.flags|=128)));else if(t.details.baseClasses.push(n),7===n.category&&(C.ClassType.isEnumClass(n)&&(t.details.flags|=64),C.ClassType.supportsAbstractMethods(n)&&(t.details.flags|=128),C.ClassType.isPropertyClass(n)&&(t.details.flags|=512),C.ClassType.isFinal(n))){const t=Zt(n);de(l.Localizer.Diagnostic.baseClassFinal().format({type:t}),e.valueExpression)}S.addTypeVarsToListIfUnique(o,S.getTypeVarArgumentsRecursive(n)),7===n.category&&C.ClassType.isBuiltIn(n,"Generic")&&(c?de(l.Localizer.Diagnostic.baseClassDoubleGeneric(),e.valueExpression):(c=[],S.addTypeVarsToListIfUnique(c,S.getTypeVarArgumentsRecursive(n)))),i||u++}}),0===u&&(C.ClassType.isBuiltIn(t,"object")||t.details.baseClasses.push(xt(e,"object"))),t.details.typeParameters=c||o,S.computeMroLinearization(t)||de(l.Localizer.Diagnostic.methodOrdering(),e.name);const h=g.getScopeForNode(e.suite);if(t.details.fields=h.symbolTable,C.ClassType.isTypedDictClass(t)&&ae(e,t),C.ClassType.supportsAbstractMethods(t)&&Yt(t).length>0&&(t.details.flags|=256),!s.isStubFile&&0===t.details.typeParameters.length){const e=t.details.fields.get("__init__");if(e){const n=e.getTypedDeclarations();if(1===n.length&&3===n[0].type){const e=n[0].node.parameters;if(e.length>1&&!e.some(e=>e.typeAnnotation)){const n=e.filter((e,t)=>t>0&&e.name&&0===e.category);n.length>0&&(t.details.flags|=4096,t.details.typeParameters=n.map(e=>C.TypeVarType.createInstance("__type_of_"+e.name.value,!1,!0)))}}}}n=t;let f=!1;for(let i=e.decorators.length-1;i>=0;i--){const r=e.decorators[i],o=Xe(n,t,r);1===o.category?f||(fe(s.diagnosticRuleSet.reportUntypedClassDecorator,"reportUntypedClassDecorator",l.Localizer.Diagnostic.classDecoratorTypeUnknown(),e.decorators[i].leftExpression),f=!0):n=o}if(C.ClassType.isDataClass(t)){let n=C.ClassType.isSkipSynthesizedInit(t);if(!n){const e=S.lookUpClassMember(t,"__init__",2);if(e){const t=Bt(e);5===t.category&&C.FunctionType.isSynthesizedMethod(t)||(n=!0)}}oe(e,t,n)}return W(e.name,t),W(e,n),{classType:t,decoratedType:n}}function Xe(e,t,n){const i=X(n.leftExpression).type;if(6===i.category){const s=i.overloads;if(s.length>0&&"dataclass"===s[0].details.builtInName){let i=!1;return n.arguments&&n.arguments.forEach(e=>{if(e.name&&"init"===e.name.value&&e.valueExpression){const t=It(n);y.evaluateStaticBoolExpression(e.valueExpression,t.executionEnvironment)||(i=!0)}}),t.details.flags|=4,i&&(t.details.flags|=8),e}}else 5===i.category&&("final"===i.details.builtInName?t.details.flags|=1024:"runtime_checkable"===i.details.builtInName&&(t.details.flags|=8192));return Z(n,e)}function Je(e){const t=It(e);let n=q(e.name),i=q(e);if(n)return{functionType:n,decoratedType:i||C.UnknownType.create()};const s=d.getDeclaration(e),o=m.getEnclosingClass(e,!0);let a;if(o){const e=Qe(o);if(!e)return;a=e.classType}let c=tt(e,!!o);s.isGenerator&&(c|=16),t.isStubFile&&(c|=2048),e.isAsync&&(c|=512),n=C.FunctionType.createInstance(e.name.value,c,m.getDocString(e.suite.statements)),(t.isBuiltInStubFile||t.isTypingStubFile||t.isTypingExtensionsStubFile)&&(n.details.builtInName=e.name.value),n.details.declaration=s,K(g.getScopeForNode(e).lookUpSymbol(e.name.value),s,n),W(e,n),W(e.name,n);const p=a&&C.ClassType.isPseudoGenericClass(a)&&"__init__"===e.name.value;if(e.returnTypeAnnotation){const t=J(e.returnTypeAnnotation);n.details.declaredReturnType=t}else t.isStubFile&&("__init__"===e.name.value?n.details.declaredReturnType=C.NoneType.create():n.details.declaredReturnType=C.UnknownType.create());const u=[];let h=0;if(e.parameters.forEach((i,s)=>{let o,c,d,f,m=!1;if(i.typeAnnotation?c=J(i.typeAnnotation):p&&s>0&&0===i.category&&i.name&&(c=a.details.typeParameters[h],h++),c&&(i.defaultValue&&11===i.defaultValue.nodeType&&24===i.defaultValue.constType&&(m=!0,t.diagnosticRuleSet.strictParameterNoneValue||(c=C.combineTypes([c,C.NoneType.create()]))),d=S.specializeType(c,void 0)),i.defaultValue&&(f=X(i.defaultValue,c,1).type),c){if(i.defaultValue&&f&&d){const e=new r.DiagnosticAddendum;if(!$t(d,f,e)){const n=fe(t.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.paramAssignmentMismatch().format({sourceType:tn(f),paramType:tn(c)})+e.getString(),i.defaultValue);if(m&&i.typeAnnotation){const e={action:"pyright.addoptionalforparam",offsetOfTypeNode:i.typeAnnotation.start+1};n&&n.addAction(e)}}}o=c}const g={category:i.category,name:i.name?i.name.value:void 0,hasDefault:!!i.defaultValue,defaultType:f,hasDeclaredType:!!i.typeAnnotation,type:o||C.UnknownType.create()};if(C.FunctionType.addParameter(n,g),i.name){const t=et(e,i.category,g.type);u.push(t)}else u.push(g.type)}),a&&n.details.parameters.length>0&&!e.parameters[0].typeAnnotation){const e=Ze(n.details.flags,a);e&&(n.details.parameters[0].type=e,2!==e.category&&(n.details.parameters[0].isTypeInferred=!0),u[0]=e)}u.forEach((t,i)=>{const s=e.parameters[i].name;s&&(1===t.category&&(n.details.flags|=8192),W(s,t))}),i=e.isAsync?function(e,t){const n=C.FunctionType.clone(t);t.details.declaredReturnType&&(n.details.declaredReturnType=it(e,t.details.declaredReturnType));return n.details.flags|=1024,n}(e,n):n;let f=!1;for(let s=e.decorators.length-1;s>=0;s--){const r=e.decorators[s],o=nt(i,n,r);1===o.category?f||(fe(t.diagnosticRuleSet.reportUntypedFunctionDecorator,"reportUntypedFunctionDecorator",l.Localizer.Diagnostic.functionDecoratorTypeUnknown(),e.decorators[s].leftExpression),f=!0):i=o}return 5===i.category&&(i=function(e,t){const n=d.getDeclaration(e),i=Et(e,e.name.value);if(i){const e=i.symbol.getDeclarations();let s=e.findIndex(e=>e===n);if(s>0){const n=[t];for(;s>0;){const t=e[s-1];if(3!==t.type)break;const i=Je(t.node);if(!i)break;if(5===i.decoratedType.category){if(!C.FunctionType.isOverloaded(i.decoratedType))break;n.unshift(i.decoratedType)}else{if(6!==i.decoratedType.category)break;{const e=i.decoratedType.overloads[i.decoratedType.overloads.length-1];if(!C.FunctionType.isOverloaded(e))break;n.unshift(e)}}s--}if(n.length>1){const e=C.OverloadedFunctionType.create();return e.overloads=n,e}}}return t}(e,i)),W(e.name,n),W(e,i),{functionType:n,decoratedType:i}}function Ze(e,t){if(0==(4&e)&&t){if(C.ClassType.isProtocolClass(t))return C.AnyType.create();if(3&e){const e=C.TypeVarType.createInstance("__type_of_cls_"+t.details.name,!1,!0);return e.boundType=S.selfSpecializeClassType(t,!0),e}if(0==(4&e)){const e=C.TypeVarType.createInstance("__type_of_self_"+t.details.name,!1,!0);return e.boundType=C.ObjectType.create(S.selfSpecializeClassType(t,!0)),e}}}function et(e,t,n){switch(t){case 0:return n;case 1:{const t=ce(e,"Tuple");return t&&7===t.category?C.ObjectType.create(C.ClassType.cloneForSpecialization(t,[n,C.AnyType.create(!0)])):C.UnknownType.create()}case 2:{const t=xt(e,"Dict"),i=kt(e,"str");return 7===t.category&&8===i.category?C.ObjectType.create(C.ClassType.cloneForSpecialization(t,[i,n])):C.UnknownType.create()}}}function tt(e,t){let n=0;"__new__"===e.name.value&&t&&(n|=1);for(const i of e.decorators){const e=X(i.leftExpression,void 0,2).type;5===e.category?"abstractmethod"===e.details.builtInName?t&&(n|=8):"final"===e.details.builtInName&&(n|=4096):7===e.category&&(C.ClassType.isBuiltIn(e,"staticmethod")?t&&(n|=4):C.ClassType.isBuiltIn(e,"classmethod")&&t&&(n|=2))}return n}function nt(e,t,n){const i=X(n.leftExpression,void 0,2).type;if(7===i.category&&C.ClassType.isSpecialBuiltIn(i,"overload")&&5===e.category)return e.details.flags|=256,e;const s=Z(n,e);if(5===i.category){if("abstractmethod"===i.details.builtInName)return e;if(36===n.leftExpression.nodeType){const e=X(n.leftExpression.leftExpression).type;if(S.isProperty(e)){const i=n.leftExpression.memberName.value;if("setter"===i)return function(e,t){if(!S.isProperty(e))return e;const n=e.classType,i=C.ClassType.create(n.details.name,n.details.flags,n.details.typeSourceId);S.computeMroLinearization(i);const s=C.ObjectType.create(i),r=i.details.fields;n.details.fields.forEach((e,t)=>{e.isIgnoredForProtocolMatch()||r.set(t,e)});const o=_.Symbol.createWithType(4,t);r.set("fset",o);const a=C.FunctionType.createInstance("__set__",64);a.details.parameters.push({category:0,name:"self",type:t.details.parameters.length>0?t.details.parameters[0].type:C.AnyType.create()}),a.details.parameters.push({category:0,name:"obj",type:s}),a.details.declaredReturnType=C.NoneType.create();let c=C.UnknownType.create();t.details.parameters.length>=2&&0===t.details.parameters[1].category&&t.details.parameters[1].name&&(c=t.details.parameters[1].type);a.details.parameters.push({category:0,name:"value",type:c});const l=_.Symbol.createWithType(4,a);return r.set("__set__",l),s}(e,t);if("deleter"===i)return function(e,t){if(!S.isProperty(e))return e;const n=e.classType,i=C.ClassType.create(n.details.name,n.details.flags,n.details.typeSourceId);S.computeMroLinearization(i);const s=C.ObjectType.create(i),r=i.details.fields;n.details.fields.forEach((e,t)=>{e.isIgnoredForProtocolMatch()||r.set(t,e)});const o=_.Symbol.createWithType(4,t);r.set("fdel",o);const a=C.FunctionType.createInstance("__delete__",64);a.details.parameters.push({category:0,name:"self",type:t.details.parameters.length>0?t.details.parameters[0].type:C.AnyType.create()}),a.details.parameters.push({category:0,name:"obj",type:s}),a.details.declaredReturnType=C.NoneType.create();const c=_.Symbol.createWithType(4,a);return r.set("__delete__",c),s}(e,t)}}}else if(7===i.category){if(C.ClassType.isBuiltIn(i))switch(i.details.name){case"classmethod":case"staticmethod":return e}if(C.ClassType.isPropertyClass(i)&&5===e.category)return function(e,t,n){const i=C.ClassType.create(e,512,n);S.computeMroLinearization(i);const s=C.ObjectType.create(i),r=i.details.fields,o=_.Symbol.createWithType(4,t);r.set("fget",o);const a=C.FunctionType.createInstance("__get__",64);a.details.parameters.push({category:0,name:"self",type:t.details.parameters.length>0?t.details.parameters[0].type:C.AnyType.create()}),a.details.parameters.push({category:0,name:"obj",type:s}),a.details.declaredReturnType=t.details.declaredReturnType,a.details.declaration=t.details.declaration;const c=_.Symbol.createWithType(4,a);return r.set("__get__",c),["getter","setter","deleter"].forEach(e=>{const t=C.FunctionType.createInstance(e,64);t.details.parameters.push({category:0,name:"self",type:s}),t.details.parameters.push({category:0,name:"accessor",type:C.AnyType.create()}),t.details.declaredReturnType=s;const n=_.Symbol.createWithType(4,t);r.set(e,n)}),s}(i.details.name,e,n.id)}return 5===e.category&&5===s.category&&C.FunctionType.isOverloaded(e)&&(s.details.flags|=256),s}function it(e,t){let n;if(8===t.category){const i=t.classType;if(C.ClassType.isBuiltIn(i))if("Generator"===i.details.name){const t=ce(e,"AsyncGenerator");if(t&&7===t.category){const e=[],s=i.typeArguments;s&&s.length>0&&e.push(s[0]),s&&s.length>1&&e.push(s[1]),n=C.ObjectType.create(C.ClassType.cloneForSpecialization(t,e))}}else["AsyncGenerator","AsyncIterator","AsyncIterable"].some(e=>e===i.details.name)&&(n=t)}if(!n){const i=ce(e,"Awaitable");n=i&&7===i.category?C.ObjectType.create(C.ClassType.cloneForSpecialization(i,[t])):C.UnknownType.create()}return n}function st(e,t){s.assert(!e.returnTypeAnnotation);let n=q(e.suite);if(n)return n;if(!I.has(e.id)){I.set(e.id,!0);try{const i=d.getDeclaration(e);if(i.yieldExpressions){const t=[];i.yieldExpressions.forEach(e=>{if(le(e))if(62===e.nodeType){const n=re(X(e.expression).type,!1,e,!1);t.push(n||C.UnknownType.create())}else if(e.expression){const n=X(e.expression).type;t.push(n||C.UnknownType.create())}else t.push(C.NoneType.create())}),0===t.length&&t.push(C.NoneType.create()),n=C.combineTypes(t);const s=ce(e,"Generator");n=s&&7===s.category?C.ObjectType.create(C.ClassType.cloneForSpecialization(s,[n])):C.UnknownType.create()}else{const s=!pe(e),r=pe(e.suite);if(It(e).isStubFile)n=C.UnknownType.create();else if(s)if(t)n=C.UnknownType.create();else{const t=ce(e,"NoReturn");n=t&&7===t.category?C.ObjectType.create(t):C.UnknownType.create()}else{const e=[];i.returnExpressions&&i.returnExpressions.forEach(t=>{if(le(t))if(t.returnExpression){const n=X(t.returnExpression).type;e.push(n||C.UnknownType.create())}else e.push(C.NoneType.create())}),!s&&r&&e.push(C.NoneType.create()),n=C.combineTypes(e)}}n=C.removeUnboundFromUnion(n),W(e.suite,n)}finally{I.delete(e.id)}}return n}function rt(e){if(q(e))return;const t=re(X(e.iterableExpression).type,!!e.isAsync,e.iterableExpression,!e.isAsync);_e(e.targetExpression,t,e.targetExpression),W(e,t)}function ot(e){if(s.assert(void 0!==e.typeExpression),q(e))return;const t=X(e.typeExpression).type;function n(e,t){if(C.isAnyOrUnknown(e))return e;if(7===e.category)return C.ObjectType.create(e);if(8===e.category){const n=re(e,!1,t,!1);return S.doForSubtypes(n,e=>{if(C.isAnyOrUnknown(e))return e;const t=S.transformTypeObjectToClass(e);return 7===t.category?C.ObjectType.create(t):C.UnknownType.create()})}return C.UnknownType.create()}const i=S.doForSubtypes(t,t=>{const i=S.getSpecializedTupleType(t);if(i&&i.typeArguments){const t=i.typeArguments.map(t=>n(t,e.typeExpression));return C.combineTypes(t)}return n(t,e.typeExpression)});e.name&&_e(e.name,i),W(e,i)}function at(e){if(q(e))return;let t=X(e.expression).type;const n=e.parent&&59===e.parent.nodeType&&!!e.parent.isAsync;if(S.isOptionalType(t)){fe(It(e).diagnosticRuleSet.reportOptionalContextManager,"reportOptionalContextManager",l.Localizer.Diagnostic.noneNotUsableWith(),e.expression),t=C.removeNoneFromUnion(t)}const i=n?"__aenter__":"__enter__",s=S.doForSubtypes(t,t=>{if(t=S.makeTypeVarsConcrete(t),C.isAnyOrUnknown(t))return t;const s=new r.DiagnosticAddendum,o=new r.DiagnosticAddendum;if(8===t.category){const r=ee(e.expression,t,i,{method:"get"},s,0);if(r){let t;return t=5===r.category?Ut(r):C.UnknownType.create(),n&&(t=se(t,e)),t}if(!n){ee(e.expression,t,"__aenter__",{method:"get"},s,0)&&o.addMessage(l.Localizer.DiagnosticAddendum.asyncHelp())}}return fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeNotUsableWith().format({type:tn(t),method:i})+o.getString(),e.expression),C.UnknownType.create()}),o=n?"__aexit__":"__exit__";S.doForSubtypes(t,t=>{if(t=S.makeTypeVarsConcrete(t),C.isAnyOrUnknown(t))return;const n=new r.DiagnosticAddendum;if(8===t.category){if(ee(e.expression,t,o,{method:"get"},n,0))return}fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeNotUsableWith().format({type:tn(t),method:o}),e.expression)}),e.target&&_e(e.target,s,e.target),W(e,s)}function ct(e){if(q(e))return;let t;if(t=e.alias?e.alias:e.module.nameParts[0],!t)return;let n=ut(e,t.value)||C.UnknownType.create();const i=q(e);i&&9===i.category&&n&&C.isTypeSame(n,i)&&(n=i),ge(t,n),W(e,n)}function lt(t){if(q(t))return;const n=t.alias||t.name;let i=ut(t,n.value);if(!i){const n=t.parent;s.assert(n&&22===n.nodeType),s.assert(!n.isWildcardImport);const r=d.getImportInfo(n.module);if(r&&r.isImportFound&&!r.isNativeLib){const n=r.resolvedPaths[r.resolvedPaths.length-1],i=e(n);if(i){const e=It(t);(e.executionEnvironment.pythonVersion<a.PythonVersion.V37||!i.symbolTable.get("__getattr__"))&&fe(e.diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.importSymbolUnknown().format({name:t.name.value}),t.name)}}i=C.UnknownType.create()}ge(n,i),W(t,i)}function pt(e){if(q(e))return;const t=e.module.nameParts[0];let n=ut(e,t.value)||C.UnknownType.create();const i=q(e);i&&9===i.category&&n&&C.isTypeSame(n,i)&&(n=i),ge(t,n),W(e,n)}function ut(e,t){const n=Et(e,t);if(!n)return;let i=n.symbol.getDeclarations().find(t=>t.node===e);if(i||(i=n.symbol.getDeclarations().find(e=>6===e.type)),!i)return;s.assert(6===i.type);const r=Nt(i,!0);return r?Rt(i):r}function dt(e){let t=e,n=e;function i(e){return!(42!==e.nodeType||!e.parent||31!==e.parent.nodeType)||(!(1!==e.nodeType||!e.parent||9!==e.parent.nodeType)||(9===e.nodeType||15===e.nodeType||28===e.nodeType||32===e.nodeType||31===e.nodeType||36===e.nodeType||46===e.nodeType||50===e.nodeType||53===e.nodeType||57===e.nodeType||17===e.nodeType||16===e.nodeType||33===e.nodeType))}for(;n;){const e=i(n);if(!e&&!p.isExpressionNode(n))break;e&&(t=n),n=n.parent}const s=t.parent;if(3===s.nodeType)return void(t===s.typeAnnotationComment?J(t,m.isFinalAllowedForAssignmentTarget(s.leftExpression)):Ke(s));if(5===s.nodeType)return void Ye(s);const r=e=>{const t=e.parent;if(3===(null==t?void 0:t.nodeType)&&t.leftExpression===s)Ke(t);else{const t=J(e.typeAnnotation,m.isFinalAllowedForAssignmentTarget(e.valueExpression));t&&W(e.valueExpression,t)}};if(55===s.nodeType)return void r(s);if(38===s.nodeType)return void X(t);if(45===s.nodeType&&s.returnExpression){const t=m.getEnclosingFunction(e),n=t?Vt(t):void 0;return void X(s.returnExpression,n,0)}const o=p.isExpressionNode(s)&&0!==s.nodeType?s:t;55===o.nodeType?r(o):X(o)}function ht(e){s.assert(void 0!==e.name);const t=e.parent;if(31===t.nodeType)return void dt(t);s.assert(29===t.nodeType);const n=t;if(e.typeAnnotation)W(e.name,et(e,e.category,J(e.typeAnnotation)));else{if(0===n.parameters.findIndex(t=>t===e)){const t=m.getEnclosingClass(n,!0);if(t){const i=Qe(t);if(i){const t=Ze(tt(n,!0),i.classType);return void W(e.name,t||C.UnknownType.create())}}}W(e.name,C.UnknownType.create())}}function ft(e){let t=e;for(;t;){switch(t.nodeType){case 3:return void Ke(t);case 4:return void X(t);case 5:return void Ye(t);case 10:return void Qe(t);case 42:return void ht(t);case 31:return void dt(t);case 29:return void Je(t);case 27:return void rt(t);case 26:return void ot(t);case 60:return void at(t);case 34:{const e=t.parent;return s.assert(33===e.nodeType),void dt(e)}case 21:return void ct(t);case 23:return void lt(t);case 22:return void pt(t)}t=t.parent}s.fail("Unexpected assignment target")}function mt(e,t){const n=d.getImportInfo(e.node.module);s.assert(void 0!==n&&n.isImportFound),s.assert(e.node.isWildcardImport);const i=Et(e.node,t);s.assert(void 0!==i);const r=i.symbol.getDeclarations().find(t=>t.node===e.node);return r&&Rt(r)||C.UnknownType.create()}function gt(e){if(P.has(e.id))return P.get(e.id);P.set(e.id,!1);let t=!1;const n=function e(t){if(39===t.nodeType){const e=Et(t,t.value);if(!e)return;const n=e.symbol,i=Mt(n);if(i)return i;const s=n.getDeclarations();if(0===s.length)return;const r=s[s.length-1];return 2===r.type?(ht(r.node),q(r.node.name)):6===r.type?Rt(r):void 0}if(36===t.nodeType){const n=t.memberName.value;let i,s=e(t.leftExpression);if(!s)return;if(s=S.makeTypeVarsConcrete(s),9===s.category)i=C.ModuleType.getField(s,n);else if(7===s.category){const e=S.lookUpClassMember(s,n);i=e?e.symbol:void 0}else if(8===s.category){const e=S.lookUpClassMember(s.classType,n);i=e?e.symbol:void 0}if(!i)return;return Mt(i)}}(e.leftExpression);if(n){let e;if(5===n.category)e=n;else if(6===n.category){const t=n;e=t.overloads[t.overloads.length-1]}e&&(e.details.declaredReturnType?t=S.isNoReturnType(e.details.declaredReturnType):e.inferredReturnType?t=S.isNoReturnType(e.inferredReturnType):e.details.declaration&&(e.details.declaration.yieldExpressions||C.FunctionType.isAbstractMethod(e)||C.FunctionType.isStubDefinition(e)||(t=!pe(e.details.declaration.node))))}return P.set(e.id,t),t}function yt(e,t,n){const i=h.createKeyForReference(e),r=m.getExecutionScopeNode(e),o=d.getCodeFlowExpressions(r);if(s.assert(void 0!==o),!o.has(i))return;const a=m.getExecutionScopeNode(e);let c;j(a)?c=function(){const e=z.length;return s.assert(e>0),z[e-1].codeFlowAnalyzer}():(c=F.get(a.id),c||(c=_t(),F.set(a.id,c)));const l=O.isIncompleteTypeMode(),p=c.getTypeFromCodeFlow(e,t,n);return p.isIncomplete?O.enterIncompleteTypeMode():l||O.leaveIncompleteTypeMode(),p.type}function _t(){const e=new Map;return{getTypeFromCodeFlow:function(t,n,i){const r=d.getFlowNode(t),o=h.createKeyForReference(t)+"."+n.toString();let a=e.get(o);function c(e,t,n){if(n){const n=a.get(e.id);if(void 0===n)U++;else if(t&&n.isIncompleteType){const e=n;e.type&&!C.isTypeSame(e.type,t)&&U++}}else U++;const i=n?{isIncompleteType:!0,type:t,incompleteSubtypes:[],generationCount:U}:t;return a.set(e.id,i),N.trackEntry(a,e.id),{type:t,isIncomplete:n,generationCount:U,incompleteSubtypes:n?[]:void 0}}function l(e,t,n){const i=a.get(e.id);void 0!==i&&b.isIncompleteType(i)||s.fail("setIncompleteSubtype can be called only on a valid incomplete cache entry");const r=i.incompleteSubtypes;return t<r.length?r[t]=n:(s.assert(r.length===t),r.push(n)),U++,u(e)}function p(e){a.delete(e.id)}function u(e){if(!a.has(e.id))return;const t=a.get(e.id);if(void 0===t)return{type:t,isIncomplete:!1};if(!b.isIncompleteType(t))return{type:t,isIncomplete:!1};let n=t.type;if(t.incompleteSubtypes.length>0){const e=[];t.incompleteSubtypes.forEach(t=>{t&&e.push(t)}),n=e.length>0?C.combineTypes(e):void 0}return{type:n,isIncomplete:!0,incompleteSubtypes:t.incompleteSubtypes,generationCount:t.generationCount}}function f(e){let t=e.node;const n=e.node.parent;n&&(29!==n.nodeType&&10!==n.nodeType||(t=n));let i=q(t);return i||(ft(e.node),i=q(t)),i}return a||(a=new Map,e.set(o,a)),r?function e(t,n,i,r){let o=t;for(B();;){const t=u(o);if(t&&(!t.isIncomplete||t.generationCount===U))return t;if(o.flags&h.FlowFlags.Unreachable)return c(o,void 0,!1);if(o.flags&h.FlowFlags.Call){const e=o;if(gt(e.node))return c(o,void 0,!1);o=e.antecedent}else if(o.flags&h.FlowFlags.Assignment){const e=o;if(i===e.targetSymbolId&&m.isMatchingExpression(n,e.node)){if(o.flags&h.FlowFlags.Unbind)return c(o,C.UnboundType.create(),!1);if(t)return{type:void 0,isIncomplete:!0};c(o,void 0,!0);const n=f(e);return c(o,n,!1)}o=e.antecedent}else if(o.flags&h.FlowFlags.AssignmentAlias){const e=o;i===e.targetSymbolId&&(i=e.aliasSymbolId),o=e.antecedent}else{if(o.flags&h.FlowFlags.BranchLabel){const t=[];let s=!1;o.antecedents.forEach(o=>{const a=e(o,n,i,r);a.isIncomplete&&(s=!0),a.type&&t.push(a.type)});const a=C.combineTypes(t);return c(o,a,s)}if(o.flags&h.FlowFlags.LoopLabel){const t=o;let s=!1,a=!1,d=u(o);return void 0===d&&(a=!0,d=c(o,void 0,!0)),t.antecedents.forEach((t,a)=>{if(a>=d.incompleteSubtypes.length){d=l(o,a,void 0);const c=e(t,n,i,r);c.isIncomplete&&0===a&&(s=!0),d=l(o,a,c.type)}}),a?s?(p(o),{type:d.type,isIncomplete:!0}):c(o,d.type,!1):d}if(o.flags&(h.FlowFlags.TrueCondition|h.FlowFlags.FalseCondition)){const t=o,s=vt(n,t);if(s){const a=e(t.antecedent,n,i,r);let l=a.type;return l&&(l=s(l)),c(o,l,a.isIncomplete)}o=t.antecedent}else if(o.flags&h.FlowFlags.PreFinallyGate){const e=o;if(e.isGateClosed)return{type:void 0,isIncomplete:!1};o=e.antecedent}else{if(o.flags&h.FlowFlags.PostFinally){const t=o,s=t.preFinallyGate.isGateClosed;try{t.preFinallyGate.isGateClosed=!0;const a=e(t.antecedent,n,i,r);return a.isIncomplete?a:c(o,a.type,!1)}finally{t.preFinallyGate.isGateClosed=s}}if(o.flags&h.FlowFlags.Start)return c(o,r,!1);if(!(o.flags&h.FlowFlags.WildcardImport))return s.fail("Unexpected flow node flags"),c(o,void 0,!1);{const e=o;if(39===n.nodeType){const t=n.value;if(e.names.some(e=>e===t)){const n=mt(e,t);return c(o,n,!1)}}o=e.antecedent}}}}}(r,t,n,i):{type:i,isIncomplete:!1}}}}function Tt(e,t){const n=new Map;if(D.has(e.id))return!0;D.set(e.id,!0);try{return function e(t,i){let r=t;for(;;){if(n.has(r.id))return!1;if(n.set(r.id,!0),r.flags&h.FlowFlags.Unreachable)return!1;if(r===i)return!0;if(r.flags&h.FlowFlags.Call){const e=r;if(void 0===i&&gt(e.node))return!1;r=e.antecedent}else if(r.flags&h.FlowFlags.Assignment){r=r.antecedent}else if(r.flags&h.FlowFlags.AssignmentAlias){r=r.antecedent}else{if(r.flags&(h.FlowFlags.BranchLabel|h.FlowFlags.LoopLabel)){const t=r;for(const n of t.antecedents)if(e(n,i))return!0;return!1}if(r.flags&(h.FlowFlags.TrueCondition|h.FlowFlags.FalseCondition)){r=r.antecedent}else if(r.flags&h.FlowFlags.PreFinallyGate){const e=r;if(e.isGateClosed)return!1;r=e.antecedent}else{if(r.flags&h.FlowFlags.PostFinally){const t=r,n=t.preFinallyGate.isGateClosed;try{return t.preFinallyGate.isGateClosed=!0,e(t.antecedent,i)}finally{t.preFinallyGate.isGateClosed=n}}if(r.flags&h.FlowFlags.Start)return!i;if(!(r.flags&h.FlowFlags.WildcardImport))return s.fail("Unexpected flow node flags"),!1;r=r.antecedent}}}}(e,t)}finally{D.delete(e.id)}}function vt(e,t){let n=t.expression;const i=!!(t.flags&h.FlowFlags.TrueCondition);if(4===n.nodeType&&(m.isMatchingExpression(e,n.rightExpression)?n=n.rightExpression:m.isMatchingExpression(e,n.name)&&(n=n.name)),7===n.nodeType){const t=39===n.operator||40===n.operator,s=12===n.operator||28===n.operator;if(t||s){const r=39===n.operator||12===n.operator?i:!i;if(11===n.rightExpression.nodeType&&24===n.rightExpression.constType){let t=n.leftExpression;if(4===t.nodeType&&(t=t.name),m.isMatchingExpression(e,t))return e=>{if(10===e.category){const t=e.subtypes.filter(e=>!!C.isAnyOrUnknown(e)||C.isNoneOrNever(e)===r);return C.combineTypes(t)}return C.isNoneOrNever(e)&&!r?C.NeverType.create():e}}if(t&&9===n.leftExpression.nodeType){const t=X(n.leftExpression.leftExpression).type;if(7===t.category&&C.ClassType.isBuiltIn(t,"type")&&1===n.leftExpression.arguments.length&&0===n.leftExpression.arguments[0].argumentCategory){const t=n.leftExpression.arguments[0].valueExpression;if(m.isMatchingExpression(e,t)){const e=X(n.rightExpression).type;if(7===e.category)return t=>S.doForSubtypes(t,t=>{if(8===t.category){const n=C.ClassType.isSameGenericClass(t.classType,e);return r?n?t:void 0:n?void 0:t}return C.isNoneOrNever(t)&&r?void 0:t})}}}if(t&&m.isMatchingExpression(e,n.leftExpression)){const e=X(n.rightExpression).type;if(8===e.category&&C.ClassType.isEnumClass(e.classType)&&void 0!==e.classType.literalValue)return t=>bt(t,e,r)}if(s){const t=12===n.operator?i:!i;if(m.isMatchingExpression(e,n.leftExpression)){const e=X(n.rightExpression).type;if(8===e.category&&void 0!==e.classType.literalValue)return n=>bt(n,e,t)}if(m.isMatchingExpression(e,n.rightExpression)){const e=X(n.leftExpression).type;if(8===e.category&&void 0!==e.classType.literalValue)return n=>bt(n,e,t)}}}if(41===n.operator&&i&&m.isMatchingExpression(e,n.leftExpression)){const e=X(n.rightExpression).type;return t=>function(e,t){if(8!==t.category||!C.ClassType.isBuiltIn(t.classType))return e;const n=t.classType,i=n.details.aliasClass?n.details.aliasClass.details.name:n.details.name;if(!["list","set","frozenset","deque"].some(e=>e===i))return e;if(!n.typeArguments||1!==n.typeArguments.length)return e;const s=n.typeArguments[0];let o=!0;const a=S.doForSubtypes(e,e=>C.isAnyOrUnknown(e)?(o=!1,e):$t(s,e,new r.DiagnosticAddendum)?e:void 0);return o?a:e}(t,e)}}if(9===n.nodeType&&39===n.leftExpression.nodeType)if("isinstance"!==n.leftExpression.value&&"issubclass"!==n.leftExpression.value||2!==n.arguments.length){if("callable"===n.leftExpression.value&&1===n.arguments.length){const t=n.arguments[0].valueExpression;if(m.isMatchingExpression(e,t))return e=>function(e,t,n){return S.doForSubtypes(e,e=>{switch(e.category){case 5:case 6:case 7:return t?e:void 0;case 9:return t?void 0:e;case 8:{const i=Se(e);return i&&7===i.category||ee(n,e,"__call__",{method:"get"},new r.DiagnosticAddendum,9)?t?e:void 0:t?void 0:e}default:return e}})}(e,i,n)}}else{const t="isinstance"===n.leftExpression.value,s=n.arguments[0].valueExpression,r=n.arguments[1].valueExpression;if(m.isMatchingExpression(e,s)){const e=function(e){if(7===e.category)return[e];if(8===e.category){const t=e.classType;if(C.ClassType.isBuiltIn(t,"Tuple")&&t.typeArguments){let e=!1;const n=[];if(t.typeArguments.forEach(t=>{7===t.category?n.push(t):e=!0}),!e)return n}}return}(X(r,void 0,160).type);if(e)return n=>function(e,t,n,i){let s=S.doForSubtypes(e,e=>S.transformTypeObjectToClass(e));s=S.makeTypeVarsConcrete(s);const r=e=>{const s=[];let r=!1,o=!1;for(const n of t){const t=C.ClassType.isDerivedFrom(e,n),a=C.ClassType.isDerivedFrom(n,e);t&&(r=!0),a&&t&&!C.ClassType.isSameGenericClass(e,n)&&(o=!0),i&&(t?s.push(e):a&&s.push(n))}return i||r&&!o||s.push(e),n?s.map(e=>C.ObjectType.create(e)):s};if(n&&8===s.category){const e=r(s.classType);return C.combineTypes(e)}if(!n&&7===s.category){const e=r(s);return C.combineTypes(e)}if(10===s.category){let e=[];return s.subtypes.forEach(t=>{C.isAnyOrUnknown(t)?e.push(t):n&&8===t.category?e=e.concat(r(t.classType)):n||7!==t.category?i||e.push(t):e=e.concat(r(t))}),C.combineTypes(e)}n&&i&&C.isAnyOrUnknown(s)&&(e=C.combineTypes(t.map(e=>C.ObjectType.create(e))));return e}(n,e,t,i)}}if(m.isMatchingExpression(e,n))return e=>S.doForSubtypes(e,e=>{if(i){if(S.canBeTruthy(e))return S.removeFalsinessFromType(e)}else if(S.canBeFalsy(e))return S.removeTruthinessFromType(e)})}function bt(e,t,n){let i=!0;const s=S.doForSubtypes(e,e=>{if(8===e.category&&C.ClassType.isSameGenericClass(t.classType,e.classType)){if(void 0!==e.classType.literalValue){const i=C.ClassType.isLiteralValueSame(e.classType,t.classType);if(i&&!n||!i&&n)return;return e}if(n)return t;{const n=S.enumerateLiteralsForType(e);if(n)return C.combineTypes(n.filter(e=>!C.ClassType.isLiteralValueSame(e.classType,t.classType)))}}return i=!1,e});return i?s:e}function Ct(e,t,n,i){if(C.ClassType.isSpecialBuiltIn(e))switch(e.details.name){case"Callable":return function(e){const t=C.FunctionType.createInstantiable("",0);return t.details.declaredReturnType=C.AnyType.create(),e&&e.length>0?e[0].typeList?e[0].typeList.forEach((e,n)=>{S.isEllipsisType(e.type)?de(l.Localizer.Diagnostic.ellipsisContext(),e.node):9===e.type.category?de(l.Localizer.Diagnostic.moduleContext(),e.node):S.isParameterSpecificationType(e.type)&&de(l.Localizer.Diagnostic.paramSpecContext(),e.node),C.FunctionType.addParameter(t,{category:0,name:"p"+n.toString(),isNameSynthesized:!0,type:S.convertToInstance(e.type),hasDeclaredType:!0})}):S.isEllipsisType(e[0].type)?C.FunctionType.addDefaultParameters(t):S.isParameterSpecificationType(e[0].type)?(C.FunctionType.addDefaultParameters(t),t.details.parameterSpecification=e[0].type):de(l.Localizer.Diagnostic.callableFirstArg(),e[0].node):C.FunctionType.addDefaultParameters(t,!0),e&&e.length>1?(S.isEllipsisType(e[1].type)?de(l.Localizer.Diagnostic.ellipsisContext(),e[1].node):9===e[1].type.category?de(l.Localizer.Diagnostic.moduleContext(),e[1].node):S.isParameterSpecificationType(e[1].type)&&de(l.Localizer.Diagnostic.paramSpecContext(),e[1].node),t.details.declaredReturnType=S.convertToInstance(e[1].type)):t.details.declaredReturnType=C.UnknownType.create(),e&&e.length>2&&de(l.Localizer.Diagnostic.callableExtraArgs(),e[2].node),t}(t);case"Optional":return function(e,t){return t&&1===t.length?(S.isEllipsisType(t[0].type)?de(l.Localizer.Diagnostic.ellipsisContext(),t[0].node):9===t[0].type.category?de(l.Localizer.Diagnostic.moduleContext(),t[0].node):S.isParameterSpecificationType(t[0].type)?de(l.Localizer.Diagnostic.paramSpecContext(),t[0].node):C.TypeBase.isInstantiable(t[0].type)||me(t[0].type,t[0].node),C.combineTypes([t[0].type,C.NoneType.create()])):(de(l.Localizer.Diagnostic.optionalExtraArgs(),e),C.UnknownType.create())}(i,t);case"Type":return He(e,t,1);case"ClassVar":return function(e,t){if(!t||0===t.length)return de(l.Localizer.Diagnostic.classVarFirstArgMissing(),e),C.UnknownType.create();if(t.length>1)return de(l.Localizer.Diagnostic.classVarTooManyArgs(),t[1].node),C.UnknownType.create();let n=t[0].type;return S.requiresSpecialization(n)&&(n=S.specializeType(n,void 0)),n}(i,t);case"Deque":case"List":case"FrozenSet":case"Set":return He(e,t,1);case"ChainMap":case"Dict":case"DefaultDict":return He(e,t,2);case"Protocol":return He(e,t,void 0);case"Tuple":return He(e,t,void 0,!0);case"Union":return function(e){const t=[];if(e)for(const n of e)t.push(n.type),S.isEllipsisType(n.type)?de(l.Localizer.Diagnostic.ellipsisContext(),n.node):9===n.type.category?de(l.Localizer.Diagnostic.moduleContext(),n.node):S.isParameterSpecificationType(n.type)?de(l.Localizer.Diagnostic.paramSpecContext(),n.node):C.TypeBase.isInstantiable(n.type)||me(n.type,n.node);return t.length>0?C.combineTypes(t):C.NeverType.create()}(t);case"Generic":return function(e,t,n){n&&0!==n.length||de(l.Localizer.Diagnostic.genericClassDeleted(),e);const i=[];return n&&n.forEach(e=>{if(11!==e.type.category)de(l.Localizer.Diagnostic.genericTypeArgTypeVar(),e.node);else{for(const t of i)if(t===e.type){de(l.Localizer.Diagnostic.genericTypeArgUnique(),e.node);break}i.push(e.type)}}),He(t,n,void 0,!1,!0)}(i,e,t);case"Final":return function(e,t,n){return 64&n?(de(l.Localizer.Diagnostic.finalContext(),e),C.AnyType.create()):t&&0!==t.length?(t.length>1&&de(l.Localizer.Diagnostic.finalTooManyArgs(),e),t[0].type):C.AnyType.create()}(i,t,n);case"Annotated":return function(e,t){return!t||t.length<1?(de(l.Localizer.Diagnostic.annotatedTypeArgMissing(),e),C.AnyType.create()):(S.isEllipsisType(t[0].type)?de(l.Localizer.Diagnostic.ellipsisContext(),t[0].node):9===t[0].type.category?de(l.Localizer.Diagnostic.moduleContext(),t[0].node):S.isParameterSpecificationType(t[0].type)&&de(l.Localizer.Diagnostic.paramSpecContext(),t[1].node),t[0].type)}(i,t)}let s=t?t.length:0;const o=C.ClassType.getTypeParameters(e);if(0===o.length&&0===s)return e;t&&s>o.length&&(0===o.length?de(l.Localizer.Diagnostic.typeArgsExpectingNone(),t[o.length].node):de(l.Localizer.Diagnostic.typeArgsTooMany().format({expected:o.length,received:s}),t[o.length].node),s=o.length),t&&t.forEach(e=>{S.isEllipsisType(e.type)?de(l.Localizer.Diagnostic.ellipsisContext(),e.node):9===e.type.category&&de(l.Localizer.Diagnostic.moduleContext(),e.node)});const a=t?t.map(e=>S.convertToInstance(e.type)):[],c=C.ClassType.getTypeParameters(e);for(let e=a.length;e<c.length;e++)a.push(S.getConcreteTypeFromTypeVar(c[e]));return a.forEach((e,n)=>{if(n<s){const i=new r.DiagnosticAddendum;if(!function(e,t,n,i=0,s=0){if(s>C.maxTypeRecursionCount)return!0;if(C.isAnyOrUnknown(t))return!0;let r=t;if(11===t.category){if(C.isTypeSame(t,e))return!0;r=S.getConcreteTypeFromTypeVar(t,s+1)}const o=e.boundType;if(o&&!$t(o,r,n.createAddendum(),void 0,i,s+1))return n.addMessage(l.Localizer.DiagnosticAddendum.typeBound().format({sourceType:tn(r),destType:tn(o),name:e.name})),!1;const a=e.constraints;if(0===a.length)return!0;for(const e of a){if(C.isAnyOrUnknown(e))return!0;if(10===r.category){if(r.subtypes.find(t=>C.isSameWithoutLiteralValue(e,t)))return!0}else if(C.isSameWithoutLiteralValue(e,r))return!0}return n.addMessage(l.Localizer.DiagnosticAddendum.typeConstrainedTypeVar().format({type:tn(r),name:e.name})),!1}(o[n],e,i)){fe(It(t[n].node).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.typeVarAssignmentMismatch().format({type:tn(e),name:o[n].name})+i.getString(),t[n].node)}}}),C.ClassType.cloneForSpecialization(e,a)}function St(e,t=!1){return e.type?e.type:X(e.valueExpression,void 0,t?416:0).type}function xt(e,t){const n=g.getScopeForNode(e),i=g.getBuiltInScope(n).lookUpSymbol(t);return i?Ot(i):C.UnknownType.create()}function kt(e,t,n){const i=xt(e,t);if(7===i.category){let e=i;return n&&(e=C.ClassType.cloneForSpecialization(e,n)),C.ObjectType.create(e)}return i}function Et(e,t){return g.getScopeForNode(e).lookUpSymbolRecursive(t)}function wt(e){const t=M;M=!0;try{e()}finally{M=t}}function At(e,t){N.enterSpeculativeContext(e);try{t()}finally{N.leaveSpeculativeContext()}}function Dt(e){const t=N.getSpeculativeRootNode();return!!t&&(void 0===e||m.isNodeContainedWithin(e,t))}function It(e){for(;37!==e.nodeType;)e=e.parent;return d.getFileInfo(e)}function Pt(e,t){if(5===e.category&&e.details.declaration){const n=e.details.declaration;if(3===n.type){const e=n.node,i=d.getScope(e).lookUpSymbol(t);if(i)return i.getDeclarations().find(e=>2===e.type)}}}function Ft(e){switch(e.type){case 0:{if("Any"===e.intrinsicType)return C.AnyType.create();if("class"===e.intrinsicType){const t=Qe(m.getEnclosingClass(e.node));return t?t.classType:void 0}const t=kt(e.node,"str"),n=kt(e.node,"int");if(8===n.category&&8===t.category){if("str"===e.intrinsicType)return t;if("int"===e.intrinsicType)return n;if("Iterable[str]"===e.intrinsicType){const n=xt(e.node,"Iterable");if(7===n.category)return C.ObjectType.create(C.ClassType.cloneForSpecialization(n,[t]))}if("Dict[str, Any]"===e.intrinsicType){const n=xt(e.node,"Dict");if(7===n.category)return C.ObjectType.create(C.ClassType.cloneForSpecialization(n,[t,C.AnyType.create()]))}}return C.UnknownType.create()}case 4:{const t=Qe(e.node);return t?t.decoratedType:void 0}case 5:return J(e.node.typeAnnotation);case 3:{const t=Je(e.node);return t?t.decoratedType:void 0}case 2:{let t=e.node.typeAnnotation;if(t&&49===t.nodeType&&(t=t.typeAnnotation),t){const n=J(t);return et(e.node,e.node.category,n)}return}case 1:{let t=e.typeAnnotationNode;if(t&&49===t.nodeType&&(t=t.typeAnnotation),t){let n=J(t);if(n)return 39===e.node.nodeType&&(n=$e(e.node,n)),n}return}case 6:return}}function Rt(t){const n=Nt(t,!0);if(!n)return C.UnknownType.create();function i(e,t,n){if(t.path){const i=n(t.path);if(!i)return C.UnknownType.create();e.fields=i.symbolTable,e.docString=i.docString}return t.implicitImports&&t.implicitImports.forEach((t,s)=>{const r=i(C.ModuleType.create(),t,n),o=_.Symbol.createWithType(0,r);e.loaderFields.set(s,o)}),e}if(6===n.type){const t=C.ModuleType.create();if(!n.symbolName)return i(t,n,e);if(n.submoduleFallback)return i(t,n.symbolName&&n.submoduleFallback?n.submoduleFallback:n,e)}const s=Ft(n);if(s)return s;if(2===n.type){const e=q(n.node.name);return e||(ht(n.node),q(n.node.name))}if(1===n.type&&n.inferredTypeSource){let e=q(n.node);return e||(ft(n.inferredTypeSource),e=q(n.node)),e&&39===n.node.nodeType&&(e=$e(n.node,e)),e}}function Nt(t,n){let i=t;const s=[];for(;;){if(6!==i.type)return i;if(!i.symbolName)return i;if(!n&&i.usesLocalName)return i;let r;if(i.path&&(r=e(i.path),!r))return;const o=r?r.symbolTable.get(i.symbolName):void 0;if(!o)return i.submoduleFallback?Nt(i.submoduleFallback,n):void 0;let a=o.getTypedDeclarations();if(0===a.length&&(a=o.getDeclarations(),0===a.length))return;if(i=a[a.length-1],s.find(e=>e===i))return t;s.push(i)}}function Ot(e){return Lt(e).type}function Lt(e,t){if(e.hasTypedDeclarations())return{type:Mt(e)||C.UnknownType.create(),isResolutionCyclical:!1};const n=[],i=e.isPrivateMember(),s=e.getDeclarations(),r=v.isFinalVariable(e);let o=!1;return s.forEach(s=>{let a=!0;if(void 0!==t&&6!==s.type){m.getExecutionScopeNode(t)===m.getExecutionScopeNode(s.node)&&(function(e,t){const n=d.getFlowNode(e),i=d.getFlowNode(t);return!(!n||!i)&&(n===i||Tt(i,n))}(s.node,t)||(a=!1))}if(a)if($(e,s))try{let t=Rt(s);if(G(e)&&(o=!0),t){const e=1===s.type&&!!s.isConstant;t=S.stripLiteralTypeArgsValue(t),1===s.type&&(i||e||r||(t=S.stripLiteralValue(t))),n.push(t)}}catch(t){throw G(e),t}else o=!0}),n.length>0?{type:C.combineTypes(n),isResolutionCyclical:!1}:{type:C.UnboundType.create(),isResolutionCyclical:o}}function Mt(e){const t=e.getSynthesizedType();if(t)return t;const n=e.getTypedDeclarations();if(0===n.length)return;let i=n.length-1;for(;i>=0;){const t=n[i],s=Y(e,t);if(s)return s;if(H(e,t)<0){if($(e,t))try{const n=Ft(t);if(!G(e))return;return n}catch(t){throw G(e),t}break}i--}}function Ut(e,t,n=!0){const i=C.FunctionType.getSpecializedReturnType(e);return i||(n?zt(e,t):C.UnknownType.create())}function zt(e,t){let n;if(C.FunctionType.isStubDefinition(e))return C.UnknownType.create();if(e.inferredReturnType)n=e.inferredReturnType;else{if(e.details.declaration){const t=e.details.declaration.node;!function(e){const t=N.disableSpeculativeMode();try{e()}finally{N.enableSpeculativeMode(t)}}(()=>{n=st(t,C.FunctionType.isAbstractMethod(e))}),n&&C.FunctionType.isWrapReturnTypeInAwait(e)&&(n=it(t,n))}n||(n=C.UnknownType.create()),e.inferredReturnType=n}if(S.containsUnknown(n)&&C.FunctionType.hasUnannotatedParams(e)&&!C.FunctionType.isStubDefinition(e)&&t){const i=function(e,t){let n;if(!e.details.declaration)return;const i=e.details.declaration.node;if(t.some(e=>!e.paramName))return;if(z.some(e=>e.functionNode===i))return;const s=Je(i);if(!s)return;if(z.length>=3)return;if(wt(()=>{const r=V;z.push({functionNode:i,codeFlowAnalyzer:_t()});try{V=new Map;let o=!0;i.parameters.forEach((e,n)=>{if(e.name){let r;const a=t.find(t=>e.name.value===t.paramName);a&&a.argument.valueExpression?(r=X(a.argument.valueExpression).type,o=!1):e.defaultValue?(r=X(e.defaultValue).type,o=!1):0===n&&(C.FunctionType.isInstanceMethod(s.functionType)||C.FunctionType.isClassMethod(s.functionType))&&s.functionType.details.parameters.length>0&&i.parameters[0].name&&(r=s.functionType.details.parameters[0].type),r||(r=C.UnknownType.create()),W(e.name,r)}}),o||(n=st(i,C.FunctionType.isAbstractMethod(e)))}finally{z.pop(),V=r}}),n)return C.FunctionType.isWrapReturnTypeInAwait(e)&&!S.isNoReturnType(n)&&(n=it(i,n)),n;return}(e,t);i&&(n=i)}return n}function Vt(e){const t=Je(e);return t?C.FunctionType.isAbstractMethod(t.functionType)?C.AnyType.create():C.FunctionType.isGenerator(t.functionType)?S.getDeclaredGeneratorReturnType(t.functionType):t.functionType.details.declaredReturnType:C.AnyType.create()}function Bt(e){return 7===e.classType.category?S.partiallySpecializeType(Ot(e.symbol),e.classType):C.UnknownType.create()}function qt(e,t,n,i,r,o,a){if(C.ClassType.isProtocolClass(e))return function e(t,n,i,s,r){const o=t.details.fields;if(C.isTypeSame(n,t))return!0;const a=C.ClassType.cloneForSpecialization(t,void 0),c=new x.TypeVarMap;let p=!0;const u=S.buildTypeVarMapFromSpecializedClass(n);if(o.forEach((e,t)=>{if(e.isClassMember()&&!e.isIgnoredForProtocolMatch()){const s=S.lookUpClassMember(n,t);if(s){const n=Mt(e);if(n){$t(n,S.specializeType(Bt(s),u,!1),i.createAddendum(),c,0,r+1)||(i.addMessage(l.Localizer.DiagnosticAddendum.memberTypeMismatch().format({name:t})),p=!1)}e.isClassVar()&&!s.symbol.isClassMember()&&(i.addMessage(l.Localizer.DiagnosticAddendum.protocolMemberClassVar().format({name:t})),p=!1)}else i.addMessage(l.Localizer.DiagnosticAddendum.protocolMemberMissing().format({name:t})),p=!1}}),t.details.baseClasses.forEach(o=>{if(7===o.category&&!C.ClassType.isBuiltIn(o,"object")&&!C.ClassType.isBuiltIn(o,"Protocol")){e(Wt(t,o,r+1),n,i,s,r+1)||(p=!1)}}),p&&t.details.typeParameters.length>0){const e=S.specializeType(a,c,!1);jt(t,e,i,s,r)||(p=!1)}return p}(e,t,n,i,o);if(C.ClassType.isTypedDictClass(e)&&C.ClassType.isTypedDictClass(t))return function(e,t,n,i){let s=!0;const r=Qt(e),o=Qt(t);return r.forEach((r,a)=>{const c=o.get(a);c?(r.isRequired&&!c.isRequired?(n.addMessage(l.Localizer.DiagnosticAddendum.typedDictFieldRequired().format({name:a,type:tn(e)})),s=!1):!r.isRequired&&c.isRequired&&(n.addMessage(l.Localizer.DiagnosticAddendum.typedDictFieldNotRequired().format({name:a,type:tn(e)})),s=!1),C.isTypeSame(r.valueType,c.valueType,i+1)||(n.addMessage(l.Localizer.DiagnosticAddendum.memberTypeMismatch().format({name:a})),s=!1)):(n.addMessage(l.Localizer.DiagnosticAddendum.typedDictFieldMissing().format({name:a,type:tn(t)})),s=!1)}),s}(e,t,n,o);if(C.ClassType.isPropertyClass(e)&&C.ClassType.isPropertyClass(t)){let i=!0;const s=e.details.fields.get("fget"),r=t.details.fields.get("fget");if(s&&r){const e=Mt(s),t=Mt(r);if(e&&t&&5===e.category&&5===t.category){$t(Ut(e),Ut(t),n)||(i=!1)}}return i}if(C.ClassType.isBuiltIn(e,"float")&&C.ClassType.isBuiltIn(t,"int")&&0==(1&r))return!0;if(C.ClassType.isBuiltIn(e,"complex")&&(C.ClassType.isBuiltIn(t,"int")||C.ClassType.isBuiltIn(t,"float"))&&0==(1&r))return!0;if(0==(1&r)||C.ClassType.isSameGenericClass(t,e)){const r=[];if(C.ClassType.isDerivedFrom(t,e,r))return s.assert(r.length>0),function(e,t,n,i,s,r){let o=t,a=s;for(let t=n.length-1;t>=0;t--){const s=n[t];if(1===s.category)return!0;if(C.ClassType.isBuiltIn(s,"object"))return!0;if(t<n.length-1&&(o=Wt(o,s,r+1)),0===t&&C.ClassType.isSpecialBuiltIn(e)&&"Tuple"===e.details.name){if(e.typeArguments&&o.typeArguments){const t=e.typeArguments;let n=t.length;const s=2===n&&S.isEllipsisType(t[1]);s&&(n=1);const c=o.typeArguments;let p=c.length;const u=2===p&&S.isEllipsisType(c[1]);if(u&&(p=1),c.length!==n&&!s&&!u)return i.addMessage(l.Localizer.DiagnosticAddendum.tupleSizeMismatch().format({expected:n,received:c.length})),!1;for(let e=0;e<Math.max(n,p);e++){const n=(s?t[0]:t[e])||C.AnyType.create(),o=(u?c[0]:c[e])||C.AnyType.create();if(!$t(n,o,i.createAddendum(),a,0,r+1))return i.addMessage(l.Localizer.DiagnosticAddendum.tupleEntryTypeMismatch().format({entry:e+1})),!1}}return!0}if(0!==C.ClassType.getTypeParameters(s).length){if(!s.typeArguments)return!0;if(!jt(s,o,i,a,r))return!1;a=new x.TypeVarMap}}if(e.typeArguments){if(!jt(e,o,i,s,r))return!1}else if(s&&e.details.typeParameters.length>0&&o.typeArguments&&!s.isLocked())for(let t=0;t<e.details.typeParameters.length;t++){const n=t<o.typeArguments.length?o.typeArguments[t]:C.UnknownType.create();s.setTypeVar(e.details.typeParameters[t].name,n,!0)}return!0}(e,t,r,n,i,o+1)}const c=a?C.ObjectType.create(e):e,p=a?C.ObjectType.create(t):t;return n.addMessage(l.Localizer.DiagnosticAddendum.typeIncompatible().format({sourceType:tn(p),destType:tn(c)})),!1}function Wt(e,t,n){if(0===C.ClassType.getTypeParameters(t).length)return t;const i=S.buildTypeVarMapFromSpecializedClass(e),r=S.specializeType(t,i,!1,n+1);return s.assert(7===r.category),r}function jt(e,t,n,i,o){s.assert(C.ClassType.isSameGenericClass(e,t));const a=C.ClassType.getTypeParameters(e),c=e.typeArguments;s.assert(void 0!==c);const p=t.typeArguments;if(p&&(C.ClassType.isSpecialBuiltIn(t)||p.length===a.length))for(let e=0;e<p.length;e++){const t=p[e],s=e>=c.length?c.length-1:e,u=c[s],d=s<a.length?a[s]:void 0,h=new r.DiagnosticAddendum;if(!d||d.isCovariant){if(!$t(u,t,h,i,0,o+1)){if(d){const e=n.createAddendum();e.addMessage(l.Localizer.DiagnosticAddendum.typeVarIsCovariant().format({name:d.name})),e.addAddendum(h)}return!1}}else if(d.isContravariant){if(!$t(t,u,h,i,2,o+1)){const e=n.createAddendum();return e.addMessage(l.Localizer.DiagnosticAddendum.typeVarIsContravariant().format({name:d.name})),e.addAddendum(h),!1}}else if(!$t(u,t,h,i,1,o+1)){const e=n.createAddendum();return e.addMessage(l.Localizer.DiagnosticAddendum.typeVarIsInvariant().format({name:d.name})),e.addAddendum(h),!1}}return!0}function Ht(e,t,n,i,s,o=0,a=0){const c=s.getTypeVar(e.name);if(e.isParameterSpec)return i.addMessage(l.Localizer.DiagnosticAddendum.typeParamSpec().format({type:tn(t),name:e.name})),!1;if(e.constraints.length>0){const n=e.constraints.find(e=>$t(e,t,new r.DiagnosticAddendum));if(!n)return i.addMessage(l.Localizer.DiagnosticAddendum.typeConstraint().format({type:tn(t),name:e.name})),!1;if(c){if(!C.isTypeSame(c,n))return i.addMessage(l.Localizer.DiagnosticAddendum.typeConstraint().format({type:tn(n),name:tn(c)})),!1}else s.isLocked()||s.setTypeVar(e.name,n,!1);return!0}let p=t;const u=s.isNarrowable(e.name)&&!s.isLocked(),d=n&&u;if(c){const e=new r.DiagnosticAddendum;if(n){if(u&&$t(t,c,e,s,o,a+1))C.isAnyOrUnknown(c)||1===t.category||(p=c);else if(!$t(c,t,new r.DiagnosticAddendum,s,o,a+1))return i.addMessage(l.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:tn(t),destType:tn(c)})),!1}else if($t(c,t,e,s,o,a+1))u||1!==c.category&&(p=c);else{if(s.isLocked())return i.addMessage(l.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:tn(c),destType:tn(t)})),!1;$t(t,c,new r.DiagnosticAddendum,s,o,a+1)||(p=C.combineTypes([c,t]))}}return e.boundType&&!$t(e.boundType,p,i.createAddendum(),void 0,o,a+1)?(i.addMessage(l.Localizer.DiagnosticAddendum.typeBound().format({sourceType:tn(p),destType:tn(e.boundType),name:e.name})),!1):(s.isLocked()||s.setTypeVar(e.name,p,d),!0)}function $t(e,t,n,i,s=0,o=0){if(o>C.maxTypeRecursionCount)return!0;if(e===t)return!0;if(0===e.category||0===t.category)return!0;const a=0!=(2&s);if(s&=-3,11===e.category)return!(i&&!Ht(e,t,!1,n,i,s,o+1));if(C.isAnyOrUnknown(e))return!0;if(C.isAnyOrUnknown(t)){if(i){const n=S.isEllipsisType(t)?C.AnyType.create():t;S.setTypeArgumentsRecursive(e,n,i)}return!0}if(11===t.category){if(a&&i)return!!Ht(t,e,!0,n,i,s,o+1);const r=S.getConcreteTypeFromTypeVar(t);return $t(e,r,n,void 0,s,o+1)}if(o>C.maxTypeRecursionCount)return!0;if(1&s&&(10===t.category||10===e.category))return!!C.isTypeSame(t,e)||(n.addMessage(l.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:tn(t),destType:tn(e)})),!1);if(10===t.category){let r=!1;return t.subtypes.forEach(t=>{$t(e,t,n.createAddendum(),i,s,o+1)||(n.addMessage(l.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:tn(t),destType:tn(e)})),r=!0)}),!r}if(10===e.category){const a=new r.DiagnosticAddendum;let c=!1;return 3===t.category&&e.subtypes.some(e=>3===e.category)?c=!0:e.subtypes.forEach(e=>{$t(e,t,a,i,s,o+1)&&(c=!0)}),!!c||(n.addAddendum(a),!1)}if(3===e.category&&3===t.category)return!0;if(8===t.category&&C.ClassType.isBuiltIn(t.classType,"Type")){const r=t.classType.typeArguments;if(r&&r.length>=1){if(C.isAnyOrUnknown(r[0]))return!0;if(8===r[0].category)return $t(e,r[0].classType,n.createAddendum(),i,s,o+1)}}if(7===e.category&&7===t.category)return qt(e,t,n,i,s,o+1,!1);if(8===e.category){const r=e.classType;if(C.ClassType.isBuiltIn(r,"type")&&(7===t.category||5===t.category||6===t.category))return!0;if(C.ClassType.isBuiltIn(r,"Type")){const e=r.typeArguments;if(e&&e.length>=1){if(C.isAnyOrUnknown(e[0]))return!0;if(8===e[0].category)return $t(e[0].classType,t,n.createAddendum(),i,s,o+1);if(11===e[0].category){if(7===t.category)return $t(e[0],C.ObjectType.create(t),n.createAddendum(),i,s,o+1);if(5===t.category||6===t.category)return $t(e[0],t,n.createAddendum(),i,s,o+1)}}}if(8===t.category){if(void 0!==e.classType.literalValue){const i=t.classType.literalValue;if(void 0===i||!C.ClassType.isLiteralValueSame(t.classType,e.classType))return n.addMessage(l.Localizer.DiagnosticAddendum.literalAssignmentMismatch().format({sourceType:void 0!==i?S.printLiteralType(t):tn(t),destType:S.printLiteralType(e)})),!1}return!!qt(r,t.classType,n,i,s,o+1,!0)}if(5===t.category){const s=function(e){if(!C.ClassType.isProtocolClass(e.classType))return;const t=S.lookUpObjectMember(e,"__call__");if(!t)return;const n=Bt(t);if(5===n.category)return Xt(e,n);return}(e);if(s)return!!Gt(s,t,n.createAddendum(),i,o+1,!0);if(C.ClassType.isBuiltIn(e.classType)&&"object"===e.classType.details.name)return!0}else if(9===t.category){if(C.ClassType.isBuiltIn(r,"ModuleType"))return!0}else if(7===t.category){if(C.ClassType.isBuiltIn(e.classType,"object"))return!0;const a=S.getMetaclass(t);if(a){if(C.isAnyOrUnknown(a))return!0;if(7===a.category)return i&&C.ClassType.isBuiltIn(a,"EnumMeta")&&(i.isLocked()||i.setTypeVar("_T",C.ObjectType.create(t),!1)),qt(r,a,n,i,s,o+1,!1)}}}if(5===e.category){let r;if(6===t.category){const a=t.overloads,c=a.findIndex(t=>{const r=i?i.clone():void 0;return $t(e,t,n.createAddendum(),r,s,o+1)});if(c<0)return n.addMessage(l.Localizer.DiagnosticAddendum.noOverloadAssignable().format({type:tn(e)})),!1;r=a[c]}else if(5===t.category)r=t;else if(8===t.category){const e=S.lookUpObjectMember(t,"__call__");if(e){const t=Bt(e);5===t.category&&(r=S.stripFirstParameter(t))}}else if(7===t.category){const e=C.FunctionType.createInstance("__new__",69);e.details.declaredReturnType=C.ObjectType.create(t);const n=S.lookUpClassMember(t,"__new__",12),i=n?Bt(n):void 0;i&&5===i.category?i.details.parameters.forEach((t,n)=>{n>0&&C.FunctionType.addParameter(e,t)}):C.FunctionType.addDefaultParameters(e),r=e}if(r)return Gt(e,r,n.createAddendum(),i,o+1,!1)}if((C.isNoneOrNever(t)||9===t.category)&&8===e.category){const t=e.classType;if(C.ClassType.isBuiltIn(t,"object"))return!0}return!(4!==t.category||8!==e.category||!C.ClassType.isBuiltIn(e.classType,"NoReturn"))||(C.isNoneOrNever(e)?(n.addMessage(l.Localizer.DiagnosticAddendum.assignToNone()),!1):(n.addMessage(l.Localizer.DiagnosticAddendum.typeAssignmentMismatch().format({sourceType:tn(t),destType:tn(e)})),!1))}function Gt(e,t,n,i,s,r){let o=!0;const a=t.details.parameters.filter(e=>e.name).length,c=e.details.parameters.filter(e=>e.name).length,p=Math.min(a,c);for(let r=0;r<p;r++){const a=t.details.parameters[r],c=e.details.parameters[r],p=n.createAddendum();if(0!==a.category||0!==c.category)break;const u=C.FunctionType.getEffectiveParameterType(t,r),d=C.FunctionType.getEffectiveParameterType(e,r);$t(u,d,p.createAddendum(),i,2,s+1);const h=S.specializeType(d,i,!1,s+1);$t(u,h,p.createAddendum(),void 0,0,s+1)||(p.addMessage(l.Localizer.DiagnosticAddendum.paramAssignment().format({index:r+1,sourceType:tn(h),destType:tn(u)})),o=!1)}const u=t.details.parameters,d=e.details.parameters,h=void 0!==u.find(e=>e.name&&0!==e.category),f=void 0!==d.find(e=>e.name&&0!==e.category);if(r){const e=new Map;let t=!1;d.forEach(n=>{t?n.name&&0===n.category&&e.set(n.name,n):1===n.category&&(t=!0)});let r=!1;u.forEach(t=>{if(r){if(t.name&&0===t.category){const r=e.get(t.name),a=n.createAddendum();if(r){const n=S.specializeType(r.type,i,!1,s+1);$t(t.type,n,a.createAddendum(),void 0,0,s+1)||(a.addMessage(l.Localizer.DiagnosticAddendum.namedParamTypeMismatch().format({name:t.name,sourceType:tn(n),destType:tn(t.type)})),o=!1),e.delete(t.name)}else a.addMessage(l.Localizer.DiagnosticAddendum.namedParamMissingInDest().format({name:t.name})),o=!1}}else 1===t.category&&(r=!0)}),e.forEach((e,t)=>{n.createAddendum().addMessage(l.Localizer.DiagnosticAddendum.namedParamMissingInSource().format({name:t})),o=!1})}if(!h&&!f){const e=u.filter(e=>!!e.name&&!e.hasDefault).length;c<e&&(n.addMessage(l.Localizer.DiagnosticAddendum.functionTooFewParams().format({expected:e,received:c})),o=!1),c>a&&(n.addMessage(l.Localizer.DiagnosticAddendum.functionTooManyParams().format({expected:a,received:c})),o=!1)}const m=Ut(e);if(!C.isAnyOrUnknown(m)){const e=Ut(t);$t(m,e,n.createAddendum(),i,0,s+1)||(n.addMessage(l.Localizer.DiagnosticAddendum.functionReturnTypeMismatch().format({sourceType:tn(e),destType:tn(m)})),o=!1)}return e.details.parameterSpecification&&i&&!i.isLocked()&&i.setParameterSpecification(e.details.parameterSpecification.name,t),o}function Kt(e,t){const n=new r.DiagnosticAddendum;return 10===e.category?S.doForSubtypes(e,e=>10===t.category?t.subtypes.some(t=>$t(e,t,n))?e:void 0:$t(e,t,n)?e:void 0):$t(e,t,n)?e:C.NeverType.create()}function Yt(e){const t=new Map;e.details.mro.forEach(e=>{7===e.category&&e.details.fields.forEach((n,i)=>{const s=v.getLastTypedDeclaredForSymbol(n);if(n.isClassMember()&&s&&3===s.type){const r=tt(s.node,!0);if(!t.has(i)){const s=!!(8&r);t.set(i,{symbol:n,symbolName:i,isAbstract:s,classType:e})}}})});const n=[];return t.forEach(e=>{e.isAbstract&&n.push(e)}),n}function Qt(e){const t=new Map;return function e(t,n,i=0){if(s.assert(C.ClassType.isTypedDictClass(t)),i>C.maxTypeRecursionCount)return;t.details.baseClasses.forEach(t=>{7===t.category&&C.ClassType.isTypedDictClass(t)&&e(t,n,i+1)}),t.details.fields.forEach((e,i)=>{if(!e.isIgnoredForProtocolMatch()){const s=v.getLastTypedDeclaredForSymbol(e);s&&1===s.type&&n.set(i,{valueType:Mt(e)||C.UnknownType.create(),isRequired:!C.ClassType.isCanOmitDictValues(t),isProvided:!1})}})}(e,t),t}function Xt(e,t,n=!1){if(5===t.category){if(!e)return S.stripFirstParameter(t);if(C.FunctionType.isInstanceMethod(t)&&!n){if(8===e.category)return Jt(e,t)}else if(C.FunctionType.isClassMethod(t)||n)return Jt(7===e.category?e:e.classType,t)}else if(6===t.category){const i=C.OverloadedFunctionType.create();return t.overloads.forEach(t=>{C.OverloadedFunctionType.addOverload(i,Xt(e,t,n))}),i}return t}function Jt(e,t){const n=7===e.category?e:e.classType,i=n.typeArguments?S.buildTypeVarMapFromSpecializedClass(n):new x.TypeVarMap;if(t.details.parameters.length>0){$t(t.details.parameters[0].type,e,new r.DiagnosticAddendum,i)}Ut(t);const s=S.specializeType(t,i,!1);return S.stripFirstParameter(s)}function Zt(e,n=0){let i=e.details.name;if(!C.ClassType.isPseudoGenericClass(e))if(e.typeArguments)e.typeArguments.length>0?(0==(2&t)||e.typeArguments.some(e=>!C.isAnyOrUnknown(e)))&&(i+="["+e.typeArguments.map(e=>tn(e,!1,n+1)).join(", ")+"]"):C.ClassType.isBuiltIn(e,"Tuple")&&(i+="[()]");else{const s=C.ClassType.getTypeParameters(e);s.length>0&&(0==(2&t)||s.some(e=>!C.isAnyOrUnknown(e)))&&(i+="["+s.map(e=>tn(e,!1,n+1)).join(", ")+"]")}return i}function en(e,n=0){const i=e.details.parameters.map((t,i)=>{let s="";1===t.category?s+="*":2===t.category&&(s+="**"),t.name&&(s+=t.name);let r="=";if(0===t.category)if(t.name){if(t.hasDeclaredType||t.isTypeInferred){const t=C.FunctionType.getEffectiveParameterType(e,i);s+=": "+(n<C.maxTypeRecursionCount?tn(t,!1,n+1):""),r=" = "}}else s+="/";if(e.details.declaration){const t=e.ignoreFirstParamOfDeclaration?i+1:i,n=e.details.declaration.node.parameters[t];n.defaultValue&&(s+=r+m.printExpression(n.defaultValue))}return s}),s=Ut(e);let r=n<C.maxTypeRecursionCount?tn(s,!1,n+1):"";return 4&t&&10===s.category&&n>0&&(r=`(${r})`),[i,r]}function tn(e,n=!1,i=0){if(i>=C.maxTypeRecursionCount)return"...";if(e.typeAliasInfo&&!n){let n=e.typeAliasInfo.aliasName;return e.typeAliasInfo.typeArguments?(0==(2&t)||e.typeAliasInfo.typeArguments.some(e=>!C.isAnyOrUnknown(e)))&&(n+="["+e.typeAliasInfo.typeArguments.map(e=>tn(e,!1,i+1)).join(", ")+"]"):e.typeAliasInfo.typeParameters&&(0==(2&t)||e.typeAliasInfo.typeParameters.some(e=>!C.isAnyOrUnknown(e)))&&(n+="["+e.typeAliasInfo.typeParameters.map(e=>tn(e,!1,i+1)).join(", ")+"]"),n}switch(e.category){case 0:return"Unbound";case 1:return 0!=(1&t)?"Any":"Unknown";case 9:return"Module";case 7:return"Type["+Zt(e,i+1)+"]";case 8:{const t=e;if(void 0!==t.classType.literalValue)return S.printLiteralType(t);if(S.isProperty(e)){const t=S.lookUpObjectMember(e,"fget");if(t){const e=Bt(t);if(5===e.category){return tn(Ut(e),!1,i+1)}}}return Zt(t.classType,i+1)}case 5:{const t=en(e,i);return e.details.parameterSpecification?`Callable[${e.details.parameterSpecification.name}, ${t[1]}]`:`(${t[0].join(", ")}) -> ${t[1]}`}case 6:return`Overload[${e.overloads.map(e=>tn(e,!1,i+1)).join(", ")}]`;case 10:{const n=e;let s=n.subtypes;if(void 0!==s.find(e=>3===e.category)){const e=tn(C.removeNoneFromUnion(n),!1,i+1);return 4&t?e+" | None":"Optional["+e+"]"}s=[],s=s.concat(...n.subtypes),0!=(1&t)&&s.some(e=>2===e.category)&&(s=s.filter(e=>1!==e.category));const r=e=>7===e.category&&C.ClassType.isPseudoGenericClass(e)||8===e.category&&C.ClassType.isPseudoGenericClass(e.classType);if(s.some(e=>r(e))){const e=[];s.forEach(t=>{r(t)?7===t.category?e.some(e=>7===e.category&&C.ClassType.isSameGenericClass(e,t))||e.push(t):8===t.category&&(e.some(e=>8===e.category&&C.ClassType.isSameGenericClass(e.classType,t.classType))||e.push(t)):e.push(t)}),s=e}const o=e=>8===e.category&&void 0!==e.classType.literalValue,a=[];for(;s.length>0;){const e=s.shift();if(o(e)){const t=s.filter(e=>o(e));t.unshift(e);const n=t.map(e=>S.printLiteralValue(e));a.push(`Literal[${n.join(", ")}]`),t.length>1&&(s=s.filter(e=>!o(e)))}else a.push(tn(e,!1,i+1))}return 1===a.length?a[0]:4&t?a.join(" | "):`Union[${a.join(", ")}]`}case 11:return e.isSynthesized?e.boundType?tn(e.boundType,!1,i+1):0!=(1&t)?"Any":"Unknown":e.isParameterSpec?`ParameterSpecification('${e.name}')`:`TypeVar('${e.name}')`;case 3:return"None";case 4:return"Never";case 2:return e.isEllipsis?"...":"Any"}return""}return{runWithCancellationToken:function(e,t){try{return L=e,t()}finally{L=void 0}},getType:Q,getTypeOfClass:Qe,getTypeOfFunction:Je,evaluateTypesForStatement:ft,getDeclaredTypeForExpression:ie,verifyDeleteExpression:function(e){switch(e.nodeType){case 39:X(e);break;case 36:{const t=X(e.leftExpression),n=Ce(e,t,{method:"del"},0);W(e.memberName,n.type);break}case 24:{const t=X(e.baseExpression,void 0,2);ke(e,t.type,{method:"del"},0),W(e,C.UnboundType.create());break}case 0:wt(()=>{e.child&&X(e.child)});break;default:fe(It(e).diagnosticRuleSet.reportGeneralTypeIssues,"reportGeneralTypeIssues",l.Localizer.Diagnostic.delTargetExpr(),e);break}},isAfterNodeReachable:pe,isNodeReachable:le,getDeclarationsForNameNode:function(e){if(d.isCodeUnreachable(e))return;const t=[],n=e.value;if(e.parent&&23===e.parent.nodeType&&e.parent.alias&&e===e.parent.name){const n=g.getScopeForNode(e);if(n){const i=n.lookUpSymbolRecursive(e.parent.alias.value);if(i){const n=i.symbol.getDeclarations().filter(t=>6===t.type&&t.node===e.parent).map(e=>{if(6===e.type){const t=Object.assign({},e);return t.usesLocalName=!1,t}return e});t.push(...n)}}}else if(e.parent&&36===e.parent.nodeType&&e===e.parent.memberName){let n=Q(e.parent.leftExpression);if(n){n=S.specializeType(n,void 0);const i=e.parent.memberName.value;S.doForSubtypes(n,e=>{let n;if(7===e.category){let t=S.lookUpClassMember(e,i,16);t||(t=S.lookUpClassMember(e,i)),t&&(n=t.symbol)}else if(8===e.category){let t=S.lookUpObjectMember(e,i,16);t||(t=S.lookUpObjectMember(e,i)),t&&(n=t.symbol)}else 9===e.category&&(n=C.ModuleType.getField(e,i));if(n){const e=n.getTypedDeclarations();e.length>0?t.push(...e):t.push(...n.getDeclarations())}return e})}}else if(e.parent&&38===e.parent.nodeType){const n=e.parent.nameParts.findIndex(t=>t===e),i=d.getImportInfo(e.parent);if(n>=0&&i&&!i.isNativeLib&&n<i.resolvedPaths.length&&i.resolvedPaths[n]){const e={type:6,node:void 0,path:i.resolvedPaths[n],range:c.getEmptyRange(),implicitImports:new Map,usesLocalName:!1};t.push(e)}}else if(e.parent&&1===e.parent.nodeType&&e===e.parent.name){const n=e.parent,i=e.value;if(n.parent&&9===n.parent.nodeType){const e=Q(n.parent.leftExpression);if(e)if(5===e.category&&e.details.declaration){const n=Pt(e,i);n&&t.push(n)}else if(7===e.category){const s=ee(n.parent.leftExpression,C.ObjectType.create(e),"__init__",{method:"get"},new r.DiagnosticAddendum,13);if(s&&5===s.category){const n=Pt(s,i);if(n)t.push(n);else if(C.ClassType.isDataClass(e)){const n=S.lookUpClassMember(e,i);n&&t.push(...n.symbol.getDeclarations())}}}}}else{const i=g.getScopeForNode(e);if(i){const e=i.lookUpSymbolRecursive(n);if(!e)return;t.push(...e.symbol.getDeclarations())}}return t},getTypeForDeclaration:Ft,resolveAliasDeclaration:Nt,getTypeFromIterable:re,getTypedDictMembersForClass:Qt,getEffectiveTypeOfSymbol:Ot,getFunctionDeclaredReturnType:Vt,getFunctionInferredReturnType:zt,getBuiltInType:xt,getTypeOfMember:Bt,bindFunctionToClassOrObject:Xt,getBoundMethod:ne,getCallSignatureInfo:function(e,t,n){let i,s=e;for(;void 0!==s;){if(9===s.nodeType||13===s.nodeType){i=s;break}s=s.parent}if(!i||!i.arguments)return;if(t>=c.TextRange.getEnd(i))return;const r=i.leftExpression,o=Q(r);if(void 0===o)return;const a=[];let l=!1,p=0;function u(){a.push({argumentCategory:p,type:C.UnknownType.create(),active:!0})}i.arguments.forEach(e=>{let i=!1;if(!l){let s=e.start;const r=n.getItemAtPosition(s);r>=0&&(s=c.TextRange.getEnd(n.getItemAt(r-1)));let o=c.TextRange.getEnd(e);const a=n.getItemAtPosition(o);if(a>=0)for(let e=a;e<n.count;e++){const t=n.getItemAt(e);switch(t.type){case 12:case 14:break;default:continue}o=c.TextRange.getEnd(t);break}t<o&&(t>=s?i=!0:u(),l=!0)}p=e.argumentCategory,a.push({valueExpression:e.valueExpression,argumentCategory:e.argumentCategory,name:e.name,active:i})}),l||u();const d=[];function h(e){let t;At(i,()=>{t=Re(r,a,e,new x.TypeVarMap,!0,!0,void 0)}),d.push({type:e,activeParam:null==t?void 0:t.activeParam})}function f(e){5===e.category?h(e):e.overloads.forEach(h)}return S.doForSubtypes(o,e=>{switch(e.category){case 5:case 6:f(e);break;case 7:{let t;t=ne(e,"__init__",!1),t||(t=ne(e,"__new__",!0)),t&&f(t);break}case 8:{const t=ne(e.classType,"__call__",!1);t&&f(t);break}}}),0!==d.length?{callNode:i,signatures:d}:void 0},canAssignType:$t,canOverrideMethod:function(e,t,n){if(6===e.category&&(e=e.overloads[e.overloads.length-1]),5!==e.category)return n.addMessage(l.Localizer.DiagnosticAddendum.overrideType().format({type:tn(e)})),!1;let i=!0;const s=e.details.parameters,r=t.details.parameters;if(s.length!==r.length)return n.addMessage(l.Localizer.DiagnosticAddendum.overrideParamCount().format({baseCount:s.length,overrideCount:r.length})),!1;const o=Math.min(s.length,r.length);for(let a=0;a<o;a++){const o=s[a],c=r[a];if(o.name!==c.name)n.addMessage(l.Localizer.DiagnosticAddendum.overrideParamName().format({index:a+1,baseName:o.name||"*",overrideName:c.name||"*"})),i=!1;else{const s=C.FunctionType.getEffectiveParameterType(e,a),r=C.FunctionType.getEffectiveParameterType(t,a);$t(s,r,n.createAddendum())||(n.addMessage(l.Localizer.DiagnosticAddendum.overrideParamType().format({index:a+1,baseType:tn(s),overrideType:tn(r)})),i=!1)}}const a=Ut(e),c=Ut(t);return $t(a,c,n.createAddendum())||(n.addMessage(l.Localizer.DiagnosticAddendum.overrideReturnType().format({baseType:tn(a),overrideType:tn(c)})),i=!1),i},addError:de,addWarning:ue,addInformation:function(e,t,n){return he("information",e,t,n)},addUnusedCode:function(e,t){if(!M&&!Dt(e)&&!O.isIncompleteTypeMode()){It(e).diagnosticSink.addUnusedCodeWithTextRange(l.Localizer.Diagnostic.unreachableCode(),t)}},addDiagnostic:fe,addDiagnosticForTextRange:function(e,t,n,i,s){if("none"===t)return;const r=e.diagnosticSink.addDiagnosticWithTextRange(t,i,s);return r.setRule(n),r},printType:tn,printFunctionParts:en,getTypeCacheSize:function(){return R.size}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IncompleteTypeTracker=t.SpeculativeTypeTracker=t.isIncompleteType=void 0;const i=n(2);t.isIncompleteType=function(e){return!!e.isIncompleteType};t.SpeculativeTypeTracker=class{constructor(){this._speculativeContextStack=[]}enterSpeculativeContext(e){this._speculativeContextStack.push({speculativeRootNode:e,entriesToUndo:[]})}leaveSpeculativeContext(){i.assert(this._speculativeContextStack.length>0),this._speculativeContextStack.pop().entriesToUndo.forEach(e=>{e.cache.delete(e.id)})}isSpeculative(){return this._speculativeContextStack.length>0}getSpeculativeRootNode(){const e=this._speculativeContextStack.length;if(e>0)return this._speculativeContextStack[e-1].speculativeRootNode}trackEntry(e,t){const n=this._speculativeContextStack.length;n>0&&this._speculativeContextStack[n-1].entriesToUndo.push({cache:e,id:t})}disableSpeculativeMode(){const e=this._speculativeContextStack;return this._speculativeContextStack=[],e}enableSpeculativeMode(e){i.assert(0===this._speculativeContextStack.length),this._speculativeContextStack=e}};t.IncompleteTypeTracker=class{constructor(){this._entriesToUndo=[],this._requiresUndo=!1}trackEntry(e,t){this._requiresUndo&&this._entriesToUndo.push({cache:e,id:t})}leaveIncompleteTypeMode(){this._entriesToUndo.forEach(e=>{e.cache.delete(e.id)}),this._requiresUndo=!1,this._entriesToUndo=[]}enterIncompleteTypeMode(){this._requiresUndo=!0}isIncompleteTypeMode(){return this._requiresUndo}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeStubWriter=void 0;const i=n(7),s=n(6),r=n(11),o=n(45),a=n(15),c=n(21),l=n(17);class p{constructor(e){this.importName=e,this.isAccessed=!1}}class u extends p{constructor(e,t,n){super(e),this.alias=t,this.symbol=n}}class d extends p{constructor(e,t,n){super(e),this.isWildcardImport=t,this.node=n,this.symbols=[]}addSymbol(e,t,n,i=!1){this.symbols.find(e=>e.name===t)||this.symbols.push({symbol:e,name:t,alias:n,isAccessed:i})}}class h extends r.ParseTreeWalker{constructor(e,t){super(),this._accessedImportedSymbols=e,this._treatStringsAsSymbols=t}analyze(e){this.walk(e)}walk(e){i.isCodeUnreachable(e)||super.walk(e)}visitName(e){return this._accessedImportedSymbols.set(e.value,!0),!0}visitString(e){return this._treatStringsAsSymbols&&this._accessedImportedSymbols.set(e.value,!0),!0}}class f extends r.ParseTreeWalker{constructor(e,t,n){super(),this._stubPath=e,this._sourceFile=t,this._evaluator=n,this._indentAmount=0,this._includeAllImports=!1,this._typeStubText="",this._lineEnd="\n",this._tab="    ",this._classNestCount=0,this._functionNestCount=0,this._ifNestCount=0,this._emittedSuite=!1,this._emitDocString=!0,this._trackedImportAs=new Map,this._trackedImportFrom=new Map,this._accessedImportedSymbols=new Map,this._stubPath.endsWith("__init__.pyi")&&(this._includeAllImports=!0)}write(){const e=this._sourceFile.getParseResults();this._lineEnd=e.tokenizerOutput.predominantEndOfLineSequence,this._tab=e.tokenizerOutput.predominantTabSequence,this.walk(e.parseTree),this._writeFile()}walk(e){i.isCodeUnreachable(e)||super.walk(e)}visitClass(e){const t=e.name.value;this._emittedSuite=!0,this._emitDocString=!0,this._emitDecorators(e.decorators);let n="class "+t;return e.arguments.length>0&&(n+=`(${e.arguments.map(e=>{let t="";return e.name&&(t=e.name.value+"="),t+=this._printExpression(e.valueExpression),t}).join(", ")})`),n+=":",this._emitLine(n),this._emitSuite(()=>{this._classNestCount++,this.walk(e.suite),this._classNestCount--}),this._emitLine(""),this._emitLine(""),!1}visitFunction(e){const t=e.name.value;if(0===this._functionNestCount){this._emittedSuite=!0,this._emitDocString=!0,this._emitDecorators(e.decorators);let n=e.isAsync?"async ":"";n+="def "+t,n+=`(${e.parameters.map(e=>this._printParameter(e)).join(", ")})`,e.returnTypeAnnotation&&(n+=" -> "+this._printExpression(e.returnTypeAnnotation,!0)),n+=":",this._emitLine(n),this._emitSuite(()=>{this._functionNestCount++,this.walk(e.suite),this._functionNestCount--}),this._emitLine("")}return!1}visitWhile(e){return this._emitDocString=!1,!1}visitFor(e){return this._emitDocString=!1,!1}visitTry(e){return this._emitDocString=!1,!1}visitWith(e){return this._emitDocString=!1,!1}visitIf(e){if(this._emitDocString=!1,0===this._functionNestCount&&0===this._ifNestCount){this._ifNestCount++,this._emittedSuite=!0,this._emitLine("if "+this._printExpression(e.testExpression)+":"),this._emitSuite(()=>{this.walkMultiple(e.ifSuite.statements)});const t=e.elseSuite;t&&(this._emitLine("else:"),this._emitSuite(()=>{19===t.nodeType?this.walkMultiple([t.testExpression,t.ifSuite,t.elseSuite]):this.walkMultiple(t.statements)})),this._ifNestCount--}return!1}visitAssignment(e){let t="";if(39===e.leftExpression.nodeType){if("__all__"===e.leftExpression.value)return this._emitLine(this._printExpression(e,!1,!0)),!1;0===this._functionNestCount&&(t=this._printExpression(e.leftExpression))}else if(36===e.leftExpression.nodeType){const n=e.leftExpression.leftExpression;if(39===n.nodeType&&"self"===n.value){const n=e.leftExpression.memberName.value;a.isPrivateOrProtectedName(n)||(t=this._printExpression(e.leftExpression))}}if(t){const n=0===this._functionNestCount&&0===this._classNestCount;this._emittedSuite=!0,t+=" = ",t+=n?this._printExpression(e.rightExpression):"...",this._emitLine(t)}return!1}visitAugmentedAssignment(e){return 0===this._classNestCount&&0===this._functionNestCount&&39===e.leftExpression.nodeType&&"__all__"===e.leftExpression.value&&this._emitLine(this._printExpression(e,!1,!0)),!1}visitTypeAnnotation(e){if(0===this._functionNestCount){let t="";if(39===e.valueExpression.nodeType)t=this._printExpression(e.valueExpression);else if(36===e.valueExpression.nodeType){const n=e.valueExpression.leftExpression;if(39===n.nodeType&&"self"===n.value){const n=e.valueExpression.memberName.value;a.isPrivateOrProtectedName(n)||(t=this._printExpression(e.valueExpression))}}t&&(t+=": "+this._printExpression(e.typeAnnotation,!0),this._emitLine(t))}return!1}visitImport(e){if(this._functionNestCount>0||this._classNestCount>0)return!1;const t=o.getScopeForNode(e);return t&&e.list.forEach(e=>{const n=this._printModuleName(e.module);if(!this._trackedImportAs.has(n)){const i=e.alias?e.alias.value:e.module.nameParts.length>0?e.module.nameParts[0].value:"",s=t.lookUpSymbolRecursive(i);if(s){const t=new u(n,e.alias?e.alias.value:void 0,s.symbol);this._trackedImportAs.set(n,t)}}}),!1}visitImportFrom(e){if(this._functionNestCount>0||this._classNestCount>0)return!1;const t=o.getScopeForNode(e);if(t){const n=this._printModuleName(e.module);let i=this._trackedImportFrom.get(n);i||(i=new d(n,e.isWildcardImport,e),this._trackedImportFrom.set(n,i)),e.imports.forEach(e=>{const n=e.alias?e.alias.value:e.name.value,s=t.lookUpSymbolRecursive(n);s&&i.addSymbol(s.symbol,e.name.value,e.alias?e.alias.value:void 0,!1)})}return!1}visitStatementList(e){return e.statements.length>0&&49===e.statements[0].nodeType&&!this._emittedSuite&&this._emitDocString&&this._emitLine(this._printExpression(e.statements[0])),this._emitDocString=!1,this.walkMultiple(e.statements),!1}_emitSuite(e){this._increaseIndent(()=>{const t=this._emittedSuite;this._emittedSuite=!1,e(),this._emittedSuite||this._emitLine("..."),this._emittedSuite=t})}_increaseIndent(e){this._indentAmount++,e(),this._indentAmount--}_emitDecorators(e){e.forEach(e=>{let t="@"+this._printExpression(e.leftExpression);e.arguments&&(t+=`(${e.arguments.map(e=>this._printArgument(e)).join(", ")})`),this._emitLine(t)})}_printHeaderDocString(){return'"""'+this._lineEnd+"This type stub file was generated by pyright."+this._lineEnd+'"""'+this._lineEnd+this._lineEnd}_emitLine(e){for(let e=0;e<this._indentAmount;e++)this._typeStubText+=this._tab;this._typeStubText+=e+this._lineEnd}_printModuleName(e){let t="";for(let n=0;n<e.leadingDots;n++)t+=".";return t+=e.nameParts.map(e=>e.value).join("."),t}_addImplicitImportFrom(e,t){let n=this._trackedImportFrom.get(e);n||(n=new d(e,!1),this._trackedImportFrom.set(e,n)),t.forEach(e=>{n.addSymbol(void 0,e,void 0,!0)})}_printParameter(e){let t="";1===e.category?t+="*":2===e.category&&(t+="**"),e.name&&(t+=e.name.value);let n="";if(e.typeAnnotation)n=this._printExpression(e.typeAnnotation,!0);else if(e.defaultValue){const t=this._evaluator.getType(e.defaultValue);if(t&&!l.containsUnknown(t))if(c.isNoneOrNever(t))n="Optional[Any]",this._addImplicitImportFrom("typing",["Any","Optional"]);else if(8===t.category){const e=t.classType;c.ClassType.isBuiltIn(e,"bool")&&(n="bool")}}return n&&(t+=": "+n),e.defaultValue&&(t+=n?" = ...":"=..."),t}_printArgument(e){let t="";return 1===e.argumentCategory?t+="*":2===e.argumentCategory&&(t+="**"),e.name&&(t+=e.name.value+"="),t+this._printExpression(e.valueExpression)}_printExpression(e,t=!1,n=!1){return new h(this._accessedImportedSymbols,n).analyze(e),s.printExpression(e,t?1:0)}_printTrackedImports(){let e="",t=!1;return this._trackedImportAs.forEach(n=>{this._accessedImportedSymbols.get(n.alias||n.importName)&&(n.isAccessed=!0),(n.isAccessed||this._includeAllImports)&&(e+="import "+n.importName,n.alias&&(e+=" as "+n.alias),e+=this._lineEnd,t=!0)}),this._trackedImportFrom.forEach(n=>{n.symbols.forEach(e=>{this._accessedImportedSymbols.get(e.alias||e.name)&&(e.isAccessed=!0)}),n.isWildcardImport&&(e+=`from ${n.importName} import *`+this._lineEnd,t=!0);const i=n.symbols.filter(e=>e.isAccessed||this._includeAllImports).sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0);i.length>0&&(e+=`from ${n.importName} import `,e+=i.map(e=>{let t=e.name;return e.alias&&(t+=" as "+e.alias),t}).join(", "),e+=this._lineEnd,t=!0)}),t&&(e+=this._lineEnd),e}_writeFile(){let e=this._printHeaderDocString();e+=this._printTrackedImports(),e+=this._typeStubText,this._sourceFile.fileSystem.writeFileSync(this._stubPath,e,"utf8")}}t.TypeStubWriter=f},function(e,t,n){"use strict";const{EventEmitter:i}=n(154),s=n(12),r=n(3),{promisify:o}=n(18),a=n(155),c=n(161).default,l=n(166),p=n(80),u=n(168),d=n(79),h=n(175),f=n(179),{EV_ALL:m,EV_READY:g,EV_ADD:y,EV_CHANGE:_,EV_UNLINK:T,EV_ADD_DIR:v,EV_UNLINK_DIR:b,EV_RAW:C,EV_ERROR:S,STR_CLOSE:x,STR_END:k,BACK_SLASH_RE:E,DOUBLE_SLASH_RE:w,SLASH_OR_BACK_SLASH_RE:A,DOT_RE:D,REPLACER_RE:I,SLASH:P,BRACE_START:F,BANG:R,ONE_DOT:N,TWO_DOTS:O,GLOBSTAR:L,SLASH_GLOBSTAR:M,ANYMATCH_OPTS:U,STRING_TYPE:z,FUNCTION_TYPE:V,EMPTY_STR:B,EMPTY_FN:q,isWindows:W,isMacos:j}=n(50),H=o(s.stat),$=o(s.readdir),G=(e=[])=>Array.isArray(e)?e:[e],K=(e,t=[])=>(e.forEach(e=>{Array.isArray(e)?K(e,t):t.push(e)}),t),Y=e=>{const t=K(G(e));if(!t.every(e=>typeof e===z))throw new TypeError("Non-string provided as watch path: "+t);return t.map(X)},Q=e=>{let t=e.replace(E,P);for(;t.match(w);)t=t.replace(w,P);return t},X=e=>Q(r.normalize(Q(e))),J=(e=B)=>t=>typeof t!==z?t:X(r.isAbsolute(t)?t:r.join(e,t)),Z=(e,t)=>void 0===e[t];class ee{constructor(e,t){this.path=e,this._removeWatcher=t,this.items=new Set}add(e){const{items:t}=this;t&&e!==N&&e!==O&&t.add(e)}async remove(e){const{items:t}=this;if(!t)return;if(t.delete(e),t.size>0)return;const n=this.path;try{await $(n)}catch(e){this._removeWatcher&&this._removeWatcher(r.dirname(n),r.basename(n))}}has(e){const{items:t}=this;if(t)return t.has(e)}getChildren(){const{items:e}=this;if(e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}}class te{constructor(e,t,n,i){this.fsw=i,this.path=e=e.replace(I,B),this.watchPath=t,this.fullWatchPath=r.resolve(t),this.hasGlob=t!==e,e===B&&(this.hasGlob=!1),this.globSymlink=!(!this.hasGlob||!n)&&void 0,this.globFilter=!!this.hasGlob&&c(e,void 0,U),this.dirParts=this.getDirParts(e),this.dirParts.forEach(e=>{e.length>1&&e.pop()}),this.followSymlinks=n,this.statMethod=n?"stat":"lstat"}checkGlobSymlink(e){return void 0===this.globSymlink&&(this.globSymlink=e.fullParentDir!==this.fullWatchPath&&{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return r.join(this.watchPath,r.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){const{stats:t}=e;if(t&&t.isSymbolicLink())return this.filterDir(e);const n=this.entryPath(e);return(!this.hasGlob||typeof this.globFilter!==V||this.globFilter(n))&&this.fsw._isntIgnored(n,t)&&this.fsw._hasReadPermissions(t)}getDirParts(e){if(!this.hasGlob)return[];const t=[];return(e.includes(F)?u.expand(e):[e]).forEach(e=>{t.push(r.relative(this.watchPath,e).split(A))}),t}filterDir(e){if(this.hasGlob){const t=this.getDirParts(this.checkGlobSymlink(e));let n=!1;this.unmatchedGlob=!this.dirParts.some(e=>e.every((e,i)=>(e===L&&(n=!0),n||!t[0][i]||c(e,t[0][i],U))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}}class ne extends i{constructor(e){super();const t={};e&&Object.assign(t,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,Z(t,"persistent")&&(t.persistent=!0),Z(t,"ignoreInitial")&&(t.ignoreInitial=!1),Z(t,"ignorePermissionErrors")&&(t.ignorePermissionErrors=!1),Z(t,"interval")&&(t.interval=100),Z(t,"binaryInterval")&&(t.binaryInterval=300),Z(t,"disableGlobbing")&&(t.disableGlobbing=!1),t.enableBinaryInterval=t.binaryInterval!==t.interval,Z(t,"useFsEvents")&&(t.useFsEvents=!t.usePolling),f.canUse()||(t.useFsEvents=!1),Z(t,"usePolling")&&!t.useFsEvents&&(t.usePolling=j);const n=process.env.CHOKIDAR_USEPOLLING;if(void 0!==n){const e=n.toLowerCase();t.usePolling="false"!==e&&"0"!==e&&("true"===e||"1"===e||!!e)}const i=process.env.CHOKIDAR_INTERVAL;i&&(t.interval=Number.parseInt(i,10)),Z(t,"atomic")&&(t.atomic=!t.usePolling&&!t.useFsEvents),t.atomic&&(this._pendingUnlinks=new Map),Z(t,"followSymlinks")&&(t.followSymlinks=!0),Z(t,"awaitWriteFinish")&&(t.awaitWriteFinish=!1),!0===t.awaitWriteFinish&&(t.awaitWriteFinish={});const s=t.awaitWriteFinish;s&&(s.stabilityThreshold||(s.stabilityThreshold=2e3),s.pollInterval||(s.pollInterval=100),this._pendingWrites=new Map),t.ignored&&(t.ignored=G(t.ignored));let r=0;this._emitReady=()=>{r++,r>=this._readyCount&&(this._emitReady=q,this._readyEmitted=!0,process.nextTick(()=>this.emit(g)))},this._emitRaw=(...e)=>this.emit(C,...e),this._readyEmitted=!1,this.options=t,t.useFsEvents?this._fsEventsHandler=new f(this):this._nodeFsHandler=new h(this),Object.freeze(t)}add(e,t,n){const{cwd:i,disableGlobbing:s}=this.options;this.closed=!1;let o=Y(e);return i&&(o=o.map(e=>{const t=((e,t)=>r.isAbsolute(e)?e:e.startsWith(R)?R+r.join(t,e.slice(1)):r.join(t,e))(e,i);return s||!p(e)?t:d(t)})),o=o.filter(e=>e.startsWith(R)?(this._ignoredPaths.add(e.slice(1)),!1):(this._ignoredPaths.delete(e),this._ignoredPaths.delete(e+M),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=o.length),this.options.persistent&&(this._readyCount*=2),o.forEach(e=>this._fsEventsHandler._addToFsEvents(e))):(this._readyCount||(this._readyCount=0),this._readyCount+=o.length,Promise.all(o.map(async e=>{const i=await this._nodeFsHandler._addToNodeFs(e,!n,0,0,t);return i&&this._emitReady(),i})).then(e=>{this.closed||e.filter(e=>e).forEach(e=>{this.add(r.dirname(e),r.basename(t||e))})})),this}unwatch(e){if(this.closed)return this;const t=Y(e),{cwd:n}=this.options;return t.forEach(e=>{r.isAbsolute(e)||this._closers.has(e)||(n&&(e=r.join(n,e)),e=r.resolve(e)),this._closePath(e),this._ignoredPaths.add(e),this._watched.has(e)&&this._ignoredPaths.add(e+M),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();const e=[];return this._closers.forEach(t=>t.forEach(t=>{const n=t();n instanceof Promise&&e.push(n)})),this._streams.forEach(e=>e.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(e=>e.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(e=>{this["_"+e].clear()}),this._closePromise=e.length?Promise.all(e).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){const e={};return this._watched.forEach((t,n)=>{const i=this.options.cwd?r.relative(this.options.cwd,n):n;e[i||N]=t.getChildren().sort()}),e}emitWithAll(e,t){this.emit(...t),e!==S&&this.emit(m,...t)}async _emit(e,t,n,i,s){if(this.closed)return;const o=this.options;W&&(t=r.normalize(t)),o.cwd&&(t=r.relative(o.cwd,t));const a=[e,t];void 0!==s?a.push(n,i,s):void 0!==i?a.push(n,i):void 0!==n&&a.push(n);const c=o.awaitWriteFinish;let l;if(c&&(l=this._pendingWrites.get(t)))return l.lastChange=new Date,this;if(o.atomic){if(e===T)return this._pendingUnlinks.set(t,a),setTimeout(()=>{this._pendingUnlinks.forEach((e,t)=>{this.emit(...e),this.emit(m,...e),this._pendingUnlinks.delete(t)})},"number"==typeof o.atomic?o.atomic:100),this;e===y&&this._pendingUnlinks.has(t)&&(e=a[0]=_,this._pendingUnlinks.delete(t))}if(c&&(e===y||e===_)&&this._readyEmitted){const n=(t,n)=>{t?(e=a[0]=S,a[1]=t,this.emitWithAll(e,a)):n&&(a.length>2?a[2]=n:a.push(n),this.emitWithAll(e,a))};return this._awaitWriteFinish(t,c.stabilityThreshold,e,n),this}if(e===_){if(!this._throttle(_,t,50))return this}if(o.alwaysStat&&void 0===n&&(e===y||e===v||e===_)){const e=o.cwd?r.join(o.cwd,t):t;let n;try{n=await H(e)}catch(e){}if(!n||this.closed)return;a.push(n)}return this.emitWithAll(e,a),this}_handleError(e){const t=e&&e.code;return e&&"ENOENT"!==t&&"ENOTDIR"!==t&&(!this.options.ignorePermissionErrors||"EPERM"!==t&&"EACCES"!==t)&&this.emit(S,e),e||this.closed}_throttle(e,t,n){this._throttled.has(e)||this._throttled.set(e,new Map);const i=this._throttled.get(e),s=i.get(t);if(s)return s.count++,!1;let r;const o=()=>{const e=i.get(t),n=e?e.count:0;return i.delete(t),clearTimeout(r),e&&clearTimeout(e.timeoutObject),n};r=setTimeout(o,n);const a={timeoutObject:r,clear:o,count:0};return i.set(t,a),a}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,t,n,i){let o,a=e;this.options.cwd&&!r.isAbsolute(e)&&(a=r.join(this.options.cwd,e));const c=new Date,l=n=>{s.stat(a,(s,r)=>{if(s||!this._pendingWrites.has(e))return void(s&&"ENOENT"!==s.code&&i(s));const a=Number(new Date);n&&r.size!==n.size&&(this._pendingWrites.get(e).lastChange=a),a-this._pendingWrites.get(e).lastChange>=t?(this._pendingWrites.delete(e),i(void 0,r)):o=setTimeout(l,this.options.awaitWriteFinish.pollInterval,r)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:c,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(o),n)}),o=setTimeout(l,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,t){if(this.options.atomic&&D.test(e))return!0;if(!this._userIgnored){const{cwd:e}=this.options,t=this.options.ignored,n=t&&t.map(J(e)),i=G(n).filter(e=>typeof e===z&&!p(e)).map(e=>e+M),s=this._getGlobIgnored().map(J(e)).concat(n,i);this._userIgnored=c(s,void 0,U)}return this._userIgnored([e,t])}_isntIgnored(e,t){return!this._isIgnored(e,t)}_getWatchHelpers(e,t){const n=t||this.options.disableGlobbing||!p(e)?e:l(e),i=this.options.followSymlinks;return new te(e,n,i,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));const t=r.resolve(e);return this._watched.has(t)||this._watched.set(t,new ee(t,this._boundRemove)),this._watched.get(t)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;const t=511&(e&&Number.parseInt(e.mode,10)),n=Number.parseInt(t.toString(8)[0],10);return Boolean(4&n)}_remove(e,t,n){const i=r.join(e,t),s=r.resolve(i);if(n=null!=n?n:this._watched.has(i)||this._watched.has(s),!this._throttle("remove",i,100))return;n||this.options.useFsEvents||1!==this._watched.size||this.add(e,t,!0),this._getWatchedDir(i).getChildren().forEach(e=>this._remove(i,e));const o=this._getWatchedDir(e),a=o.has(t);o.remove(t);let c=i;if(this.options.cwd&&(c=r.relative(this.options.cwd,i)),this.options.awaitWriteFinish&&this._pendingWrites.has(c)){if(this._pendingWrites.get(c).cancelWait()===y)return}this._watched.delete(i),this._watched.delete(s);const l=n?b:T;a&&!this._isIgnored(i)&&this._emit(l,i),this.options.useFsEvents||this._closePath(i)}_closePath(e){const t=this._closers.get(e);if(!t)return;t.forEach(e=>e()),this._closers.delete(e);const n=r.dirname(e);this._getWatchedDir(n).remove(r.basename(e))}_addPathCloser(e,t){if(!t)return;let n=this._closers.get(e);n||(n=[],this._closers.set(e,n)),n.push(t)}_readdirp(e,t){if(this.closed)return;const n={type:m,alwaysStat:!0,lstat:!0,...t};let i=a(e,n);return this._streams.add(i),i.once(x,()=>{i=void 0}),i.once(k,()=>{i&&(this._streams.delete(i),i=void 0)}),i}}t.FSWatcher=ne;t.watch=(e,t)=>{const n=new ne(t);return n.add(e),n}},function(e,t){e.exports=require("events")},function(e,t,n){"use strict";const i=n(12),{Readable:s}=n(156),r=n(3),{promisify:o}=n(18),a=n(157),c=o(i.readdir),l=o(i.stat),p=o(i.lstat),u=o(i.realpath),d=new Set(["ENOENT","EPERM","EACCES","ELOOP"]),h="files",f="directories",m="files_directories",g="all",y=[h,f,m,g],_=e=>{if(void 0!==e){if("function"==typeof e)return e;if("string"==typeof e){const t=a(e.trim());return e=>t(e.basename)}if(Array.isArray(e)){const t=[],n=[];for(const i of e){const e=i.trim();"!"===e.charAt(0)?n.push(a(e.slice(1))):t.push(a(e))}return n.length>0?t.length>0?e=>t.some(t=>t(e.basename))&&!n.some(t=>t(e.basename)):e=>!n.some(t=>t(e.basename)):e=>t.some(t=>t(e.basename))}}};class T extends s{static get defaultOptions(){return{root:".",fileFilter:e=>!0,directoryFilter:e=>!0,type:h,lstat:!1,depth:2147483648,alwaysStat:!1}}constructor(e={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:e.highWaterMark||4096});const t={...T.defaultOptions,...e},{root:n,type:s}=t;this._fileFilter=_(t.fileFilter),this._directoryFilter=_(t.directoryFilter);const o=t.lstat?p:l;"win32"===process.platform&&3===l.length?this._stat=e=>o(e,{bigint:!0}):this._stat=o,this._maxDepth=t.depth,this._wantsDir=[f,m,g].includes(s),this._wantsFile=[h,m,g].includes(s),this._wantsEverything=s===g,this._root=r.resolve(n),this._isDirent="Dirent"in i&&!t.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent},this.parents=[this._exploreDir(n,1)],this.reading=!1,this.parent=void 0}async _read(e){if(!this.reading){this.reading=!0;try{for(;!this.destroyed&&e>0;){const{path:t,depth:n,files:i=[]}=this.parent||{};if(i.length>0){const s=i.splice(0,e).map(e=>this._formatEntry(e,t));for(const t of await Promise.all(s)){if(this.destroyed)return;const i=await this._getEntryType(t);"directory"===i&&this._directoryFilter(t)?(n<=this._maxDepth&&this.parents.push(this._exploreDir(t.fullPath,n+1)),this._wantsDir&&(this.push(t),e--)):("file"===i||this._includeAsFile(t))&&this._fileFilter(t)&&this._wantsFile&&(this.push(t),e--)}}else{const e=this.parents.pop();if(!e){this.push(null);break}if(this.parent=await e,this.destroyed)return}}}catch(e){this.destroy(e)}finally{this.reading=!1}}}async _exploreDir(e,t){let n;try{n=await c(e,this._rdOptions)}catch(e){this._onError(e)}return{files:n,depth:t,path:e}}async _formatEntry(e,t){let n;try{const i=this._isDirent?e.name:e,s=r.resolve(r.join(t,i));n={path:r.relative(this._root,s),fullPath:s,basename:i},n[this._statsProp]=this._isDirent?e:await this._stat(s)}catch(e){this._onError(e)}return n}_onError(e){var t;t=e,d.has(t.code)&&!this.destroyed?this.emit("warn",e):this.destroy(e)}async _getEntryType(e){const t=e&&e[this._statsProp];if(t){if(t.isFile())return"file";if(t.isDirectory())return"directory";if(t&&t.isSymbolicLink())try{const t=await u(e.fullPath),n=await p(t);if(n.isFile())return"file";if(n.isDirectory())return"directory"}catch(e){this._onError(e)}}}_includeAsFile(e){const t=e&&e[this._statsProp];return t&&this._wantsEverything&&!t.isDirectory()}}const v=(e,t={})=>{let n=t.entryType||t.type;if("both"===n&&(n=m),n&&(t.type=n),!e)throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");if("string"!=typeof e)throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");if(n&&!y.includes(n))throw new Error("readdirp: Invalid type passed. Use one of "+y.join(", "));return t.root=e,new T(t)};v.promise=(e,t={})=>new Promise((n,i)=>{const s=[];v(e,t).on("data",e=>s.push(e)).on("end",()=>n(s)).on("error",e=>i(e))}),v.ReaddirpStream=T,v.default=v,e.exports=v},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";e.exports=n(158)},function(e,t,n){"use strict";const i=n(3),s=n(159),r=n(160),o=n(46),a=n(37),c=(e,t,n=!1)=>{if(Array.isArray(e)){const i=e.map(e=>c(e,t,n));return e=>{for(const t of i){const n=t(e);if(n)return n}return!1}}const i=(s=e)&&"object"==typeof s&&!Array.isArray(s)&&e.tokens&&e.input;var s;if(""===e||"string"!=typeof e&&!i)throw new TypeError("Expected pattern to be a non-empty string");const r=t||{},a=o.isWindows(t),l=i?c.compileRe(e,t):c.makeRe(e,t,!1,!0),p=l.state;delete l.state;let u=()=>!1;if(r.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};u=c(r.ignore,e,n)}const d=(n,i=!1)=>{const{isMatch:s,match:o,output:d}=c.test(n,l,t,{glob:e,posix:a}),h={glob:e,state:p,regex:l,posix:a,input:n,output:d,match:o,isMatch:s};return"function"==typeof r.onResult&&r.onResult(h),!1===s?(h.isMatch=!1,!!i&&h):u(n)?("function"==typeof r.onIgnore&&r.onIgnore(h),h.isMatch=!1,!!i&&h):("function"==typeof r.onMatch&&r.onMatch(h),!i||h)};return n&&(d.state=p),d};c.test=(e,t,n,{glob:i,posix:s}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const r=n||{},a=r.format||(s?o.toPosixSlashes:null);let l=e===i,p=l&&a?a(e):e;return!1===l&&(p=a?a(e):e,l=p===i),!1!==l&&!0!==r.capture||(l=!0===r.matchBase||!0===r.basename?c.matchBase(e,t,n,s):t.exec(p)),{isMatch:Boolean(l),match:l,output:p}},c.matchBase=(e,t,n,s=o.isWindows(n))=>(t instanceof RegExp?t:c.makeRe(t,n)).test(i.basename(e)),c.isMatch=(e,t,n)=>c(t,n)(e),c.parse=(e,t)=>Array.isArray(e)?e.map(e=>c.parse(e,t)):r(e,{...t,fastpaths:!1}),c.scan=(e,t)=>s(e,t),c.compileRe=(e,t,n=!1,i=!1)=>{if(!0===n)return e.output;const s=t||{},r=s.contains?"":"^",o=s.contains?"":"$";let a=`${r}(?:${e.output})${o}`;e&&!0===e.negated&&(a=`^(?!${a}).*$`);const l=c.toRegex(a,t);return!0===i&&(l.state=e),l},c.makeRe=(e,t,n=!1,i=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");const s=t||{};let o,a={negated:!1,fastpaths:!0},l="";return e.startsWith("./")&&(e=e.slice(2),l=a.prefix="./"),!1===s.fastpaths||"."!==e[0]&&"*"!==e[0]||(o=r.fastpaths(e,t)),void 0===o?(a=r(e,t),a.prefix=l+(a.prefix||"")):a.output=o,c.compileRe(a,t,n,i)},c.toRegex=(e,t)=>{try{const n=t||{};return new RegExp(e,n.flags||(n.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},c.constants=a,e.exports=c},function(e,t,n){"use strict";const i=n(46),{CHAR_ASTERISK:s,CHAR_AT:r,CHAR_BACKWARD_SLASH:o,CHAR_COMMA:a,CHAR_DOT:c,CHAR_EXCLAMATION_MARK:l,CHAR_FORWARD_SLASH:p,CHAR_LEFT_CURLY_BRACE:u,CHAR_LEFT_PARENTHESES:d,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_PLUS:f,CHAR_QUESTION_MARK:m,CHAR_RIGHT_CURLY_BRACE:g,CHAR_RIGHT_PARENTHESES:y,CHAR_RIGHT_SQUARE_BRACKET:_}=n(37),T=e=>e===p||e===o,v=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};e.exports=(e,t)=>{const n=t||{},b=e.length-1,C=!0===n.parts||!0===n.scanToEnd,S=[],x=[],k=[];let E,w,A=e,D=-1,I=0,P=0,F=!1,R=!1,N=!1,O=!1,L=!1,M=!1,U=!1,z=!1,V=!1,B=0,q={value:"",depth:0,isGlob:!1};const W=()=>D>=b,j=()=>(E=w,A.charCodeAt(++D));for(;D<b;){let e;if(w=j(),w!==o){if(!0===M||w===u){for(B++;!0!==W()&&(w=j());)if(w!==o)if(w!==u){if(!0!==M&&w===c&&(w=j())===c){if(F=q.isBrace=!0,N=q.isGlob=!0,V=!0,!0===C)continue;break}if(!0!==M&&w===a){if(F=q.isBrace=!0,N=q.isGlob=!0,V=!0,!0===C)continue;break}if(w===g&&(B--,0===B)){M=!1,F=q.isBrace=!0,V=!0;break}}else B++;else U=q.backslashes=!0,j();if(!0===C)continue;break}if(w!==p){if(!0!==n.noext){if(!0===(w===f||w===r||w===s||w===m||w===l)&&A.charCodeAt(D+1)===d){if(N=q.isGlob=!0,O=q.isExtglob=!0,V=!0,!0===C){for(;!0!==W()&&(w=j());)if(w!==o){if(w===y){N=q.isGlob=!0,V=!0;break}}else U=q.backslashes=!0,w=j();continue}break}}if(w===s){if(E===s&&(L=q.isGlobstar=!0),N=q.isGlob=!0,V=!0,!0===C)continue;break}if(w===m){if(N=q.isGlob=!0,V=!0,!0===C)continue;break}if(w===h)for(;!0!==W()&&(e=j());)if(e!==o){if(e===_){if(R=q.isBracket=!0,N=q.isGlob=!0,V=!0,!0===C)continue;break}}else U=q.backslashes=!0,j();if(!0===n.nonegate||w!==l||D!==I){if(!0!==n.noparen&&w===d){if(N=q.isGlob=!0,!0===C){for(;!0!==W()&&(w=j());)if(w!==d){if(w===y){V=!0;break}}else U=q.backslashes=!0,w=j();continue}break}if(!0===N){if(V=!0,!0===C)continue;break}}else z=q.negated=!0,I++}else{if(S.push(D),x.push(q),q={value:"",depth:0,isGlob:!1},!0===V)continue;if(E===c&&D===I+1){I+=2;continue}P=D+1}}else U=q.backslashes=!0,w=j(),w===u&&(M=!0)}!0===n.noext&&(O=!1,N=!1);let H=A,$="",G="";I>0&&($=A.slice(0,I),A=A.slice(I),P-=I),H&&!0===N&&P>0?(H=A.slice(0,P),G=A.slice(P)):!0===N?(H="",G=A):H=A,H&&""!==H&&"/"!==H&&H!==A&&T(H.charCodeAt(H.length-1))&&(H=H.slice(0,-1)),!0===n.unescape&&(G&&(G=i.removeBackslashes(G)),H&&!0===U&&(H=i.removeBackslashes(H)));const K={prefix:$,input:e,start:I,base:H,glob:G,isBrace:F,isBracket:R,isGlob:N,isExtglob:O,isGlobstar:L,negated:z};if(!0===n.tokens&&(K.maxDepth=0,T(w)||x.push(q),K.tokens=x),!0===n.parts||!0===n.tokens){let t;for(let i=0;i<S.length;i++){const s=t?t+1:I,r=S[i],o=e.slice(s,r);n.tokens&&(0===i&&0!==I?(x[i].isPrefix=!0,x[i].value=$):x[i].value=o,v(x[i]),K.maxDepth+=x[i].depth),0===i&&""===o||k.push(o),t=r}if(t&&t+1<e.length){const i=e.slice(t+1);k.push(i),n.tokens&&(x[x.length-1].value=i,v(x[x.length-1]),K.maxDepth+=x[x.length-1].depth)}K.slashes=S,K.parts=k}return K}},function(e,t,n){"use strict";const i=n(37),s=n(46),{MAX_LENGTH:r,POSIX_REGEX_SOURCE:o,REGEX_NON_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_BACKREF:c,REPLACEMENTS:l}=i,p=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const n=`[${e.join("-")}]`;try{new RegExp(n)}catch(t){return e.map(e=>s.escapeRegex(e)).join("..")}return n},u=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,d=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=l[e]||e;const n={...t},d="number"==typeof n.maxLength?Math.min(r,n.maxLength):r;let h=e.length;if(h>d)throw new SyntaxError(`Input length: ${h}, exceeds maximum allowed length: ${d}`);const f={type:"bos",value:"",output:n.prepend||""},m=[f],g=n.capture?"":"?:",y=s.isWindows(t),_=i.globChars(y),T=i.extglobChars(_),{DOT_LITERAL:v,PLUS_LITERAL:b,SLASH_LITERAL:C,ONE_CHAR:S,DOTS_SLASH:x,NO_DOT:k,NO_DOT_SLASH:E,NO_DOTS_SLASH:w,QMARK:A,QMARK_NO_DOT:D,STAR:I,START_ANCHOR:P}=_,F=e=>`(${g}(?:(?!${P}${e.dot?x:v}).)*?)`,R=n.dot?"":k,N=n.dot?A:D;let O=!0===n.bash?F(n):I;n.capture&&(O=`(${O})`),"boolean"==typeof n.noext&&(n.noextglob=n.noext);const L={input:e,index:-1,start:0,dot:!0===n.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:m};e=s.removePrefix(e,L),h=e.length;const M=[],U=[],z=[];let V,B=f;const q=()=>L.index===h-1,W=L.peek=(t=1)=>e[L.index+t],j=L.advance=()=>e[++L.index],H=()=>e.slice(L.index+1),$=(e="",t=0)=>{L.consumed+=e,L.index+=t},G=e=>{L.output+=null!=e.output?e.output:e.value,$(e.value)},K=()=>{let e=1;for(;"!"===W()&&("("!==W(2)||"?"===W(3));)j(),L.start++,e++;return e%2!=0&&(L.negated=!0,L.start++,!0)},Y=e=>{L[e]++,z.push(e)},Q=e=>{L[e]--,z.pop()},X=e=>{if("globstar"===B.type){const t=L.braces>0&&("comma"===e.type||"brace"===e.type),n=!0===e.extglob||M.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||n||(L.output=L.output.slice(0,-B.output.length),B.type="star",B.value="*",B.output=O,L.output+=B.output)}if(M.length&&"paren"!==e.type&&!T[e.value]&&(M[M.length-1].inner+=e.value),(e.value||e.output)&&G(e),B&&"text"===B.type&&"text"===e.type)return B.value+=e.value,void(B.output=(B.output||"")+e.value);e.prev=B,m.push(e),B=e},J=(e,t)=>{const i={...T[t],conditions:1,inner:""};i.prev=B,i.parens=L.parens,i.output=L.output;const s=(n.capture?"(":"")+i.open;Y("parens"),X({type:e,value:t,output:L.output?"":S}),X({type:"paren",extglob:!0,value:j(),output:s}),M.push(i)},Z=e=>{let t=e.close+(n.capture?")":"");if("negate"===e.type){let i=O;e.inner&&e.inner.length>1&&e.inner.includes("/")&&(i=F(n)),(i!==O||q()||/^\)+$/.test(H()))&&(t=e.close=")$))"+i),"bos"===e.prev.type&&q()&&(L.negatedExtglob=!0)}X({type:"paren",extglob:!0,value:V,output:t}),Q("parens")};if(!1!==n.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let i=!1,r=e.replace(c,(e,t,n,s,r,o)=>"\\"===s?(i=!0,e):"?"===s?t?t+s+(r?A.repeat(r.length):""):0===o?N+(r?A.repeat(r.length):""):A.repeat(n.length):"."===s?v.repeat(n.length):"*"===s?t?t+s+(r?O:""):O:t?e:"\\"+e);return!0===i&&(r=!0===n.unescape?r.replace(/\\/g,""):r.replace(/\\+/g,e=>e.length%2==0?"\\\\":e?"\\":"")),r===e&&!0===n.contains?(L.output=e,L):(L.output=s.wrapOutput(r,L,t),L)}for(;!q();){if(V=j(),"\0"===V)continue;if("\\"===V){const e=W();if("/"===e&&!0!==n.bash)continue;if("."===e||";"===e)continue;if(!e){V+="\\",X({type:"text",value:V});continue}const t=/^\\+/.exec(H());let i=0;if(t&&t[0].length>2&&(i=t[0].length,L.index+=i,i%2!=0&&(V+="\\")),!0===n.unescape?V=j()||"":V+=j()||"",0===L.brackets){X({type:"text",value:V});continue}}if(L.brackets>0&&("]"!==V||"["===B.value||"[^"===B.value)){if(!1!==n.posix&&":"===V){const e=B.value.slice(1);if(e.includes("[")&&(B.posix=!0,e.includes(":"))){const e=B.value.lastIndexOf("["),t=B.value.slice(0,e),n=B.value.slice(e+2),i=o[n];if(i){B.value=t+i,L.backtrack=!0,j(),f.output||1!==m.indexOf(B)||(f.output=S);continue}}}("["===V&&":"!==W()||"-"===V&&"]"===W())&&(V="\\"+V),"]"!==V||"["!==B.value&&"[^"!==B.value||(V="\\"+V),!0===n.posix&&"!"===V&&"["===B.value&&(V="^"),B.value+=V,G({value:V});continue}if(1===L.quotes&&'"'!==V){V=s.escapeRegex(V),B.value+=V,G({value:V});continue}if('"'===V){L.quotes=1===L.quotes?0:1,!0===n.keepQuotes&&X({type:"text",value:V});continue}if("("===V){Y("parens"),X({type:"paren",value:V});continue}if(")"===V){if(0===L.parens&&!0===n.strictBrackets)throw new SyntaxError(u("opening","("));const e=M[M.length-1];if(e&&L.parens===e.parens+1){Z(M.pop());continue}X({type:"paren",value:V,output:L.parens?")":"\\)"}),Q("parens");continue}if("["===V){if(!0!==n.nobracket&&H().includes("]"))Y("brackets");else{if(!0!==n.nobracket&&!0===n.strictBrackets)throw new SyntaxError(u("closing","]"));V="\\"+V}X({type:"bracket",value:V});continue}if("]"===V){if(!0===n.nobracket||B&&"bracket"===B.type&&1===B.value.length){X({type:"text",value:V,output:"\\"+V});continue}if(0===L.brackets){if(!0===n.strictBrackets)throw new SyntaxError(u("opening","["));X({type:"text",value:V,output:"\\"+V});continue}Q("brackets");const e=B.value.slice(1);if(!0===B.posix||"^"!==e[0]||e.includes("/")||(V="/"+V),B.value+=V,G({value:V}),!1===n.literalBrackets||s.hasRegexChars(e))continue;const t=s.escapeRegex(B.value);if(L.output=L.output.slice(0,-B.value.length),!0===n.literalBrackets){L.output+=t,B.value=t;continue}B.value=`(${g}${t}|${B.value})`,L.output+=B.value;continue}if("{"===V&&!0!==n.nobrace){Y("braces");const e={type:"brace",value:V,output:"(",outputIndex:L.output.length,tokensIndex:L.tokens.length};U.push(e),X(e);continue}if("}"===V){const e=U[U.length-1];if(!0===n.nobrace||!e){X({type:"text",value:V,output:V});continue}let t=")";if(!0===e.dots){const e=m.slice(),i=[];for(let t=e.length-1;t>=0&&(m.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&i.unshift(e[t].value);t=p(i,n),L.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){const n=L.output.slice(0,e.outputIndex),i=L.tokens.slice(e.tokensIndex);e.value=e.output="\\{",V=t="\\}",L.output=n;for(const e of i)L.output+=e.output||e.value}X({type:"brace",value:V,output:t}),Q("braces"),U.pop();continue}if("|"===V){M.length>0&&M[M.length-1].conditions++,X({type:"text",value:V});continue}if(","===V){let e=V;const t=U[U.length-1];t&&"braces"===z[z.length-1]&&(t.comma=!0,e="|"),X({type:"comma",value:V,output:e});continue}if("/"===V){if("dot"===B.type&&L.index===L.start+1){L.start=L.index+1,L.consumed="",L.output="",m.pop(),B=f;continue}X({type:"slash",value:V,output:C});continue}if("."===V){if(L.braces>0&&"dot"===B.type){"."===B.value&&(B.output=v);const e=U[U.length-1];B.type="dots",B.output+=V,B.value+=V,e.dots=!0;continue}if(L.braces+L.parens===0&&"bos"!==B.type&&"slash"!==B.type){X({type:"text",value:V,output:v});continue}X({type:"dot",value:V,output:v});continue}if("?"===V){if(!(B&&"("===B.value)&&!0!==n.noextglob&&"("===W()&&"?"!==W(2)){J("qmark",V);continue}if(B&&"paren"===B.type){const e=W();let t=V;if("<"===e&&!s.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===B.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(H()))&&(t="\\"+V),X({type:"text",value:V,output:t});continue}if(!0!==n.dot&&("slash"===B.type||"bos"===B.type)){X({type:"qmark",value:V,output:D});continue}X({type:"qmark",value:V,output:A});continue}if("!"===V){if(!0!==n.noextglob&&"("===W()&&("?"!==W(2)||!/[!=<:]/.test(W(3)))){J("negate",V);continue}if(!0!==n.nonegate&&0===L.index){K();continue}}if("+"===V){if(!0!==n.noextglob&&"("===W()&&"?"!==W(2)){J("plus",V);continue}if(B&&"("===B.value||!1===n.regex){X({type:"plus",value:V,output:b});continue}if(B&&("bracket"===B.type||"paren"===B.type||"brace"===B.type)||L.parens>0){X({type:"plus",value:V});continue}X({type:"plus",value:b});continue}if("@"===V){if(!0!==n.noextglob&&"("===W()&&"?"!==W(2)){X({type:"at",extglob:!0,value:V,output:""});continue}X({type:"text",value:V});continue}if("*"!==V){"$"!==V&&"^"!==V||(V="\\"+V);const e=a.exec(H());e&&(V+=e[0],L.index+=e[0].length),X({type:"text",value:V});continue}if(B&&("globstar"===B.type||!0===B.star)){B.type="star",B.star=!0,B.value+=V,B.output=O,L.backtrack=!0,L.globstar=!0,$(V);continue}let t=H();if(!0!==n.noextglob&&/^\([^?]/.test(t)){J("star",V);continue}if("star"===B.type){if(!0===n.noglobstar){$(V);continue}const i=B.prev,s=i.prev,r="slash"===i.type||"bos"===i.type,o=s&&("star"===s.type||"globstar"===s.type);if(!0===n.bash&&(!r||t[0]&&"/"!==t[0])){X({type:"star",value:V,output:""});continue}const a=L.braces>0&&("comma"===i.type||"brace"===i.type),c=M.length&&("pipe"===i.type||"paren"===i.type);if(!r&&"paren"!==i.type&&!a&&!c){X({type:"star",value:V,output:""});continue}for(;"/**"===t.slice(0,3);){const n=e[L.index+4];if(n&&"/"!==n)break;t=t.slice(3),$("/**",3)}if("bos"===i.type&&q()){B.type="globstar",B.value+=V,B.output=F(n),L.output=B.output,L.globstar=!0,$(V);continue}if("slash"===i.type&&"bos"!==i.prev.type&&!o&&q()){L.output=L.output.slice(0,-(i.output+B.output).length),i.output="(?:"+i.output,B.type="globstar",B.output=F(n)+(n.strictSlashes?")":"|$)"),B.value+=V,L.globstar=!0,L.output+=i.output+B.output,$(V);continue}if("slash"===i.type&&"bos"!==i.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";L.output=L.output.slice(0,-(i.output+B.output).length),i.output="(?:"+i.output,B.type="globstar",B.output=`${F(n)}${C}|${C}${e})`,B.value+=V,L.output+=i.output+B.output,L.globstar=!0,$(V+j()),X({type:"slash",value:"/",output:""});continue}if("bos"===i.type&&"/"===t[0]){B.type="globstar",B.value+=V,B.output=`(?:^|${C}|${F(n)}${C})`,L.output=B.output,L.globstar=!0,$(V+j()),X({type:"slash",value:"/",output:""});continue}L.output=L.output.slice(0,-B.output.length),B.type="globstar",B.output=F(n),B.value+=V,L.output+=B.output,L.globstar=!0,$(V);continue}const i={type:"star",value:V,output:O};!0!==n.bash?!B||"bracket"!==B.type&&"paren"!==B.type||!0!==n.regex?(L.index!==L.start&&"slash"!==B.type&&"dot"!==B.type||("dot"===B.type?(L.output+=E,B.output+=E):!0===n.dot?(L.output+=w,B.output+=w):(L.output+=R,B.output+=R),"*"!==W()&&(L.output+=S,B.output+=S)),X(i)):(i.output=V,X(i)):(i.output=".*?","bos"!==B.type&&"slash"!==B.type||(i.output=R+i.output),X(i))}for(;L.brackets>0;){if(!0===n.strictBrackets)throw new SyntaxError(u("closing","]"));L.output=s.escapeLast(L.output,"["),Q("brackets")}for(;L.parens>0;){if(!0===n.strictBrackets)throw new SyntaxError(u("closing",")"));L.output=s.escapeLast(L.output,"("),Q("parens")}for(;L.braces>0;){if(!0===n.strictBrackets)throw new SyntaxError(u("closing","}"));L.output=s.escapeLast(L.output,"{"),Q("braces")}if(!0===n.strictSlashes||"star"!==B.type&&"bracket"!==B.type||X({type:"maybe_slash",value:"",output:C+"?"}),!0===L.backtrack){L.output="";for(const e of L.tokens)L.output+=null!=e.output?e.output:e.value,e.suffix&&(L.output+=e.suffix)}return L};d.fastpaths=(e,t)=>{const n={...t},o="number"==typeof n.maxLength?Math.min(r,n.maxLength):r,a=e.length;if(a>o)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${o}`);e=l[e]||e;const c=s.isWindows(t),{DOT_LITERAL:p,SLASH_LITERAL:u,ONE_CHAR:d,DOTS_SLASH:h,NO_DOT:f,NO_DOTS:m,NO_DOTS_SLASH:g,STAR:y,START_ANCHOR:_}=i.globChars(c),T=n.dot?m:f,v=n.dot?g:f,b=n.capture?"":"?:";let C=!0===n.bash?".*?":y;n.capture&&(C=`(${C})`);const S=e=>!0===e.noglobstar?C:`(${b}(?:(?!${_}${e.dot?h:p}).)*?)`,x=e=>{switch(e){case"*":return`${T}${d}${C}`;case".*":return`${p}${d}${C}`;case"*.*":return`${T}${C}${p}${d}${C}`;case"*/*":return`${T}${C}${u}${d}${v}${C}`;case"**":return T+S(n);case"**/*":return`(?:${T}${S(n)}${u})?${v}${d}${C}`;case"**/*.*":return`(?:${T}${S(n)}${u})?${v}${C}${p}${d}${C}`;case"**/.*":return`(?:${T}${S(n)}${u})?${p}${d}${C}`;default:{const t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;const n=x(t[1]);if(!n)return;return n+p+t[2]}}},k=s.removePrefix(e,{negated:!1,prefix:""});let E=x(k);return E&&!0!==n.strictSlashes&&(E+=u+"?"),E},e.exports=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(162),s=n(79),r={returnIndex:!1},o=(e,t,n,i)=>{const r=Array.isArray(n),o=r?n[0]:n;if(!r&&"string"!=typeof o)throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(o));const a=s(o);for(let e=0;e<t.length;e++){if((0,t[e])(a))return!!i&&-1}const c=r&&[a].concat(n.slice(1));for(let t=0;t<e.length;t++){const n=e[t];if(r?n(...c):n(a))return!i||t}return!!i&&-1},a=(e,t,n=r)=>{if(null==e)throw new TypeError("anymatch: specify first argument");const s="boolean"==typeof n?{returnIndex:n}:n,a=s.returnIndex||!1,c=(l=e,Array.isArray(l)?l:[l]);var l;const p=c.filter(e=>"string"==typeof e&&"!"===e.charAt(0)).map(e=>e.slice(1)).map(e=>i(e,s)),u=c.map(e=>((e,t)=>{if("function"==typeof e)return e;if("string"==typeof e){const n=i(e,t);return t=>e===t||n(t)}return e instanceof RegExp?t=>e.test(t):e=>!1})(e,s));return null==t?(e,t=!1)=>o(u,p,e,"boolean"==typeof t&&t):o(u,p,t,a)};a.default=a,e.exports=a},function(e,t,n){"use strict";e.exports=n(163)},function(e,t,n){"use strict";const i=n(3),s=n(164),r=n(165),o=n(47),a=n(38),c=(e,t,n=!1)=>{if(Array.isArray(e)){const i=e.map(e=>c(e,t,n));return e=>{for(const t of i){const n=t(e);if(n)return n}return!1}}if("string"!=typeof e||""===e)throw new TypeError("Expected pattern to be a non-empty string");const i=t||{},s=o.isWindows(t),r=c.makeRe(e,t,!1,!0),a=r.state;delete r.state;let l=()=>!1;if(i.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};l=c(i.ignore,e,n)}const p=(n,o=!1)=>{const{isMatch:p,match:u,output:d}=c.test(n,r,t,{glob:e,posix:s}),h={glob:e,state:a,regex:r,posix:s,input:n,output:d,match:u,isMatch:p};return"function"==typeof i.onResult&&i.onResult(h),!1===p?(h.isMatch=!1,!!o&&h):l(n)?("function"==typeof i.onIgnore&&i.onIgnore(h),h.isMatch=!1,!!o&&h):("function"==typeof i.onMatch&&i.onMatch(h),!o||h)};return n&&(p.state=a),p};c.test=(e,t,n,{glob:i,posix:s}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const r=n||{},a=r.format||(s?o.toPosixSlashes:null);let l=e===i,p=l&&a?a(e):e;return!1===l&&(p=a?a(e):e,l=p===i),!1!==l&&!0!==r.capture||(l=!0===r.matchBase||!0===r.basename?c.matchBase(e,t,n,s):t.exec(p)),{isMatch:!!l,match:l,output:p}},c.matchBase=(e,t,n,s=o.isWindows(n))=>(t instanceof RegExp?t:c.makeRe(t,n)).test(i.basename(e)),c.isMatch=(e,t,n)=>c(t,n)(e),c.parse=(e,t)=>r(e,t),c.scan=(e,t)=>s(e,t),c.makeRe=(e,t,n=!1,i=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");const s=t||{},o=s.contains?"":"^",a=s.contains?"":"$";let l,p={negated:!1,fastpaths:!0},u="";if(e.startsWith("./")&&(e=e.slice(2),u=p.prefix="./"),!1===s.fastpaths||"."!==e[0]&&"*"!==e[0]||(l=r.fastpaths(e,t)),void 0===l&&(p=c.parse(e,t),p.prefix=u+(p.prefix||""),l=p.output),!0===n)return l;let d=`${o}(?:${l})${a}`;p&&!0===p.negated&&(d=`^(?!${d}).*$`);const h=c.toRegex(d,t);return!0===i&&(h.state=p),h},c.toRegex=(e,t)=>{try{const n=t||{};return new RegExp(e,n.flags||(n.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},c.constants=a,e.exports=c},function(e,t,n){"use strict";const i=n(47),{CHAR_ASTERISK:s,CHAR_AT:r,CHAR_BACKWARD_SLASH:o,CHAR_COMMA:a,CHAR_DOT:c,CHAR_EXCLAMATION_MARK:l,CHAR_FORWARD_SLASH:p,CHAR_LEFT_CURLY_BRACE:u,CHAR_LEFT_PARENTHESES:d,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_PLUS:f,CHAR_QUESTION_MARK:m,CHAR_RIGHT_CURLY_BRACE:g,CHAR_RIGHT_PARENTHESES:y,CHAR_RIGHT_SQUARE_BRACKET:_}=n(38);e.exports=(e,t)=>{const n=t||{},T=e.length-1;let v,b,C=-1,S=0,x=0,k=!1,E=!1,w=!1,A=0,D=!1;const I=()=>C>=T,P=()=>(v=b,e.charCodeAt(++C));for(;C<T;){let t;if(b=P(),b===o){E=!0,t=P(),t===u&&(D=!0);continue}if(!0===D||b===u)for(A++;!I()&&(t=P());)if(t!==o)if(t!==u){if(!D&&t===c&&(t=P())===c){k=!0;break}if(!D&&t===a){k=!0;break}if(t===g&&(A--,0===A)){D=!1;break}}else A++;else E=!0,t=P();if(b===p){if(v===c&&C===S+1){S+=2;continue}x=C+1;continue}if(b===s){k=!0;break}if(b===s||b===m){k=!0;break}if(b===h)for(;!I()&&(t=P());)if(t!==o){if(t===_){k=!0;break}}else E=!0,t=P();if((b===f||b===r||b===l)&&e.charCodeAt(C+1)===d){k=!0;break}if(n.nonegate||b!==l||C!==S){if(!0!==n.noparen&&b===d)for(;!I()&&(b=P());)if(b!==o){if(b===y){k=!0;break}}else E=!0,b=P();if(k)break}else w=!0,S++}!0===n.noext&&(k=!1);let F="";const R=e;let N=e,O="";return S>0&&(F=e.slice(0,S),e=e.slice(S),x-=S),N&&!0===k&&x>0?(N=e.slice(0,x),O=e.slice(x)):!0===k?(N="",O=e):N=e,N&&""!==N&&"/"!==N&&N!==e&&(e=>e===p||e===o)(N.charCodeAt(N.length-1))&&(N=N.slice(0,-1)),!0===n.unescape&&(O&&(O=i.removeBackslashes(O)),N&&!0===E&&(N=i.removeBackslashes(N))),{prefix:F,input:R,base:N,glob:O,negated:w,isGlob:k}}},function(e,t,n){"use strict";const i=n(38),s=n(47),{MAX_LENGTH:r,POSIX_REGEX_SOURCE:o,REGEX_NON_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_BACKREF:c,REPLACEMENTS:l}=i,p=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const n=`[${e.join("-")}]`;try{new RegExp(n)}catch(t){return e.map(e=>s.escapeRegex(e)).join("..")}return n},u=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,d=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=l[e]||e;const n={...t},d="number"==typeof n.maxLength?Math.min(r,n.maxLength):r;let h=e.length;if(h>d)throw new SyntaxError(`Input length: ${h}, exceeds maximum allowed length: ${d}`);const f={type:"bos",value:"",output:n.prepend||""},m=[f],g=n.capture?"":"?:",y=s.isWindows(t),_=i.globChars(y),T=i.extglobChars(_),{DOT_LITERAL:v,PLUS_LITERAL:b,SLASH_LITERAL:C,ONE_CHAR:S,DOTS_SLASH:x,NO_DOT:k,NO_DOT_SLASH:E,NO_DOTS_SLASH:w,QMARK:A,QMARK_NO_DOT:D,STAR:I,START_ANCHOR:P}=_,F=e=>`(${g}(?:(?!${P}${e.dot?x:v}).)*?)`,R=n.dot?"":k,N=n.dot?A:D;let O=!0===n.bash?F(n):I;n.capture&&(O=`(${O})`),"boolean"==typeof n.noext&&(n.noextglob=n.noext);const L={input:e,index:-1,start:0,dot:!0===n.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,tokens:m};e=s.removePrefix(e,L),h=e.length;const M=[],U=[];let z,V=f;const B=()=>L.index===h-1,q=L.peek=(t=1)=>e[L.index+t],W=L.advance=()=>e[++L.index],j=()=>e.slice(L.index+1),H=(e="",t=0)=>{L.consumed+=e,L.index+=t},$=e=>{L.output+=null!=e.output?e.output:e.value,H(e.value)},G=()=>{let e=1;for(;"!"===q()&&("("!==q(2)||"?"===q(3));)W(),L.start++,e++;return e%2!=0&&(L.negated=!0,L.start++,!0)},K=e=>{L[e]++,U.push(e)},Y=e=>{L[e]--,U.pop()},Q=e=>{if("globstar"===V.type){const t=L.braces>0&&("comma"===e.type||"brace"===e.type),n=!0===e.extglob||M.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||n||(L.output=L.output.slice(0,-V.output.length),V.type="star",V.value="*",V.output=O,L.output+=V.output)}M.length&&"paren"!==e.type&&!T[e.value]&&(M[M.length-1].inner+=e.value),(e.value||e.output)&&$(e),V&&"text"===V.type&&"text"===e.type?V.value+=e.value:(e.prev=V,m.push(e),V=e)},X=(e,t)=>{const i={...T[t],conditions:1,inner:""};i.prev=V,i.parens=L.parens,i.output=L.output;const s=(n.capture?"(":"")+i.open;K("parens"),Q({type:e,value:t,output:L.output?"":S}),Q({type:"paren",extglob:!0,value:W(),output:s}),M.push(i)},J=e=>{let t=e.close+(n.capture?")":"");if("negate"===e.type){let i=O;e.inner&&e.inner.length>1&&e.inner.includes("/")&&(i=F(n)),(i!==O||B()||/^\)+$/.test(j()))&&(t=e.close=")$))"+i),"bos"===e.prev.type&&B()&&(L.negatedExtglob=!0)}Q({type:"paren",extglob:!0,value:z,output:t}),Y("parens")};if(!1!==n.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let i=!1,r=e.replace(c,(e,t,n,s,r,o)=>"\\"===s?(i=!0,e):"?"===s?t?t+s+(r?A.repeat(r.length):""):0===o?N+(r?A.repeat(r.length):""):A.repeat(n.length):"."===s?v.repeat(n.length):"*"===s?t?t+s+(r?O:""):O:t?e:"\\"+e);return!0===i&&(r=!0===n.unescape?r.replace(/\\/g,""):r.replace(/\\+/g,e=>e.length%2==0?"\\\\":e?"\\":"")),r===e&&!0===n.contains?(L.output=e,L):(L.output=s.wrapOutput(r,L,t),L)}for(;!B();){if(z=W(),"\0"===z)continue;if("\\"===z){const e=q();if("/"===e&&!0!==n.bash)continue;if("."===e||";"===e)continue;if(!e){z+="\\",Q({type:"text",value:z});continue}const t=/^\\+/.exec(j());let i=0;if(t&&t[0].length>2&&(i=t[0].length,L.index+=i,i%2!=0&&(z+="\\")),!0===n.unescape?z=W()||"":z+=W()||"",0===L.brackets){Q({type:"text",value:z});continue}}if(L.brackets>0&&("]"!==z||"["===V.value||"[^"===V.value)){if(!1!==n.posix&&":"===z){const e=V.value.slice(1);if(e.includes("[")&&(V.posix=!0,e.includes(":"))){const e=V.value.lastIndexOf("["),t=V.value.slice(0,e),n=V.value.slice(e+2),i=o[n];if(i){V.value=t+i,L.backtrack=!0,W(),f.output||1!==m.indexOf(V)||(f.output=S);continue}}}("["===z&&":"!==q()||"-"===z&&"]"===q())&&(z="\\"+z),"]"!==z||"["!==V.value&&"[^"!==V.value||(z="\\"+z),!0===n.posix&&"!"===z&&"["===V.value&&(z="^"),V.value+=z,$({value:z});continue}if(1===L.quotes&&'"'!==z){z=s.escapeRegex(z),V.value+=z,$({value:z});continue}if('"'===z){L.quotes=1===L.quotes?0:1,!0===n.keepQuotes&&Q({type:"text",value:z});continue}if("("===z){K("parens"),Q({type:"paren",value:z});continue}if(")"===z){if(0===L.parens&&!0===n.strictBrackets)throw new SyntaxError(u("opening","("));const e=M[M.length-1];if(e&&L.parens===e.parens+1){J(M.pop());continue}Q({type:"paren",value:z,output:L.parens?")":"\\)"}),Y("parens");continue}if("["===z){if(!0!==n.nobracket&&j().includes("]"))K("brackets");else{if(!0!==n.nobracket&&!0===n.strictBrackets)throw new SyntaxError(u("closing","]"));z="\\"+z}Q({type:"bracket",value:z});continue}if("]"===z){if(!0===n.nobracket||V&&"bracket"===V.type&&1===V.value.length){Q({type:"text",value:z,output:"\\"+z});continue}if(0===L.brackets){if(!0===n.strictBrackets)throw new SyntaxError(u("opening","["));Q({type:"text",value:z,output:"\\"+z});continue}Y("brackets");const e=V.value.slice(1);if(!0===V.posix||"^"!==e[0]||e.includes("/")||(z="/"+z),V.value+=z,$({value:z}),!1===n.literalBrackets||s.hasRegexChars(e))continue;const t=s.escapeRegex(V.value);if(L.output=L.output.slice(0,-V.value.length),!0===n.literalBrackets){L.output+=t,V.value=t;continue}V.value=`(${g}${t}|${V.value})`,L.output+=V.value;continue}if("{"===z&&!0!==n.nobrace){K("braces"),Q({type:"brace",value:z,output:"("});continue}if("}"===z){if(!0===n.nobrace||0===L.braces){Q({type:"text",value:z,output:z});continue}let e=")";if(!0===L.dots){const t=m.slice(),i=[];for(let e=t.length-1;e>=0&&(m.pop(),"brace"!==t[e].type);e--)"dots"!==t[e].type&&i.unshift(t[e].value);e=p(i,n),L.backtrack=!0}Q({type:"brace",value:z,output:e}),Y("braces");continue}if("|"===z){M.length>0&&M[M.length-1].conditions++,Q({type:"text",value:z});continue}if(","===z){let e=z;L.braces>0&&"braces"===U[U.length-1]&&(e="|"),Q({type:"comma",value:z,output:e});continue}if("/"===z){if("dot"===V.type&&L.index===L.start+1){L.start=L.index+1,L.consumed="",L.output="",m.pop(),V=f;continue}Q({type:"slash",value:z,output:C});continue}if("."===z){if(L.braces>0&&"dot"===V.type){"."===V.value&&(V.output=v),V.type="dots",V.output+=z,V.value+=z,L.dots=!0;continue}if(L.braces+L.parens===0&&"bos"!==V.type&&"slash"!==V.type){Q({type:"text",value:z,output:v});continue}Q({type:"dot",value:z,output:v});continue}if("?"===z){if(!(V&&"("===V.value)&&!0!==n.noextglob&&"("===q()&&"?"!==q(2)){X("qmark",z);continue}if(V&&"paren"===V.type){const e=q();let t=z;if("<"===e&&!s.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===V.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(j()))&&(t="\\"+z),Q({type:"text",value:z,output:t});continue}if(!0!==n.dot&&("slash"===V.type||"bos"===V.type)){Q({type:"qmark",value:z,output:D});continue}Q({type:"qmark",value:z,output:A});continue}if("!"===z){if(!0!==n.noextglob&&"("===q()&&("?"!==q(2)||!/[!=<:]/.test(q(3)))){X("negate",z);continue}if(!0!==n.nonegate&&0===L.index){G();continue}}if("+"===z){if(!0!==n.noextglob&&"("===q()&&"?"!==q(2)){X("plus",z);continue}if(V&&"("===V.value||!1===n.regex){Q({type:"plus",value:z,output:b});continue}if(V&&("bracket"===V.type||"paren"===V.type||"brace"===V.type)||L.parens>0){Q({type:"plus",value:z});continue}Q({type:"plus",value:b});continue}if("@"===z){if(!0!==n.noextglob&&"("===q()&&"?"!==q(2)){Q({type:"at",extglob:!0,value:z,output:""});continue}Q({type:"text",value:z});continue}if("*"!==z){"$"!==z&&"^"!==z||(z="\\"+z);const e=a.exec(j());e&&(z+=e[0],L.index+=e[0].length),Q({type:"text",value:z});continue}if(V&&("globstar"===V.type||!0===V.star)){V.type="star",V.star=!0,V.value+=z,V.output=O,L.backtrack=!0,H(z);continue}let t=j();if(!0!==n.noextglob&&/^\([^?]/.test(t)){X("star",z);continue}if("star"===V.type){if(!0===n.noglobstar){H(z);continue}const i=V.prev,s=i.prev,r="slash"===i.type||"bos"===i.type,o=s&&("star"===s.type||"globstar"===s.type);if(!0===n.bash&&(!r||t[0]&&"/"!==t[0])){Q({type:"star",value:z,output:""});continue}const a=L.braces>0&&("comma"===i.type||"brace"===i.type),c=M.length&&("pipe"===i.type||"paren"===i.type);if(!r&&"paren"!==i.type&&!a&&!c){Q({type:"star",value:z,output:""});continue}for(;"/**"===t.slice(0,3);){const n=e[L.index+4];if(n&&"/"!==n)break;t=t.slice(3),H("/**",3)}if("bos"===i.type&&B()){V.type="globstar",V.value+=z,V.output=F(n),L.output=V.output,H(z);continue}if("slash"===i.type&&"bos"!==i.prev.type&&!o&&B()){L.output=L.output.slice(0,-(i.output+V.output).length),i.output="(?:"+i.output,V.type="globstar",V.output=F(n)+(n.strictSlashes?")":"|$)"),V.value+=z,L.output+=i.output+V.output,H(z);continue}if("slash"===i.type&&"bos"!==i.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";L.output=L.output.slice(0,-(i.output+V.output).length),i.output="(?:"+i.output,V.type="globstar",V.output=`${F(n)}${C}|${C}${e})`,V.value+=z,L.output+=i.output+V.output,H(z+W()),Q({type:"slash",value:z,output:""});continue}if("bos"===i.type&&"/"===t[0]){V.type="globstar",V.value+=z,V.output=`(?:^|${C}|${F(n)}${C})`,L.output=V.output,H(z+W()),Q({type:"slash",value:z,output:""});continue}L.output=L.output.slice(0,-V.output.length),V.type="globstar",V.output=F(n),V.value+=z,L.output+=V.output,H(z);continue}const i={type:"star",value:z,output:O};!0!==n.bash?!V||"bracket"!==V.type&&"paren"!==V.type||!0!==n.regex?(L.index!==L.start&&"slash"!==V.type&&"dot"!==V.type||("dot"===V.type?(L.output+=E,V.output+=E):!0===n.dot?(L.output+=w,V.output+=w):(L.output+=R,V.output+=R),"*"!==q()&&(L.output+=S,V.output+=S)),Q(i)):(i.output=z,Q(i)):(i.output=".*?","bos"!==V.type&&"slash"!==V.type||(i.output=R+i.output),Q(i))}for(;L.brackets>0;){if(!0===n.strictBrackets)throw new SyntaxError(u("closing","]"));L.output=s.escapeLast(L.output,"["),Y("brackets")}for(;L.parens>0;){if(!0===n.strictBrackets)throw new SyntaxError(u("closing",")"));L.output=s.escapeLast(L.output,"("),Y("parens")}for(;L.braces>0;){if(!0===n.strictBrackets)throw new SyntaxError(u("closing","}"));L.output=s.escapeLast(L.output,"{"),Y("braces")}if(!0===n.strictSlashes||"star"!==V.type&&"bracket"!==V.type||Q({type:"maybe_slash",value:"",output:C+"?"}),!0===L.backtrack){L.output="";for(const e of L.tokens)L.output+=null!=e.output?e.output:e.value,e.suffix&&(L.output+=e.suffix)}return L};d.fastpaths=(e,t)=>{const n={...t},o="number"==typeof n.maxLength?Math.min(r,n.maxLength):r,a=e.length;if(a>o)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${o}`);e=l[e]||e;const c=s.isWindows(t),{DOT_LITERAL:p,SLASH_LITERAL:u,ONE_CHAR:d,DOTS_SLASH:h,NO_DOT:f,NO_DOTS:m,NO_DOTS_SLASH:g,STAR:y,START_ANCHOR:_}=i.globChars(c),T=n.dot?m:f,v=n.dot?g:f,b=n.capture?"":"?:";let C=!0===n.bash?".*?":y;n.capture&&(C=`(${C})`);const S=e=>!0===e.noglobstar?C:`(${b}(?:(?!${_}${e.dot?h:p}).)*?)`,x=e=>{switch(e){case"*":return`${T}${d}${C}`;case".*":return`${p}${d}${C}`;case"*.*":return`${T}${C}${p}${d}${C}`;case"*/*":return`${T}${C}${u}${d}${v}${C}`;case"**":return T+S(n);case"**/*":return`(?:${T}${S(n)}${u})?${v}${d}${C}`;case"**/*.*":return`(?:${T}${S(n)}${u})?${v}${C}${p}${d}${C}`;case"**/.*":return`(?:${T}${S(n)}${u})?${p}${d}${C}`;default:{const n=/^(.*?)\.(\w+)$/.exec(e);if(!n)return;const i=x(n[1],t);if(!i)return;return i+p+n[2]}}},k=s.removePrefix(e,{negated:!1,prefix:""});let E=x(k);return E&&!0!==n.strictSlashes&&(E+=u+"?"),E},e.exports=d},function(e,t,n){"use strict";var i=n(80),s=n(3).posix.dirname,r="win32"===n(33).platform(),o=/\\/g,a=/[\{\[].*[\/]*.*[\}\]]$/,c=/(^|[^\\])([\{\[]|\([^\)]+$)/,l=/\\([\*\?\|\[\]\(\)\{\}])/g;e.exports=function(e,t){Object.assign({flipBackslashes:!0},t).flipBackslashes&&r&&e.indexOf("/")<0&&(e=e.replace(o,"/")),a.test(e)&&(e+="/"),e+="a";do{e=s(e)}while(i(e)||c.test(e));return e.replace(l,"$1")}},function(e,t){
/*!
 * is-extglob <https://github.com/jonschlinkert/is-extglob>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */
e.exports=function(e){if("string"!=typeof e||""===e)return!1;for(var t;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}},function(e,t,n){"use strict";const i=n(48),s=n(169),r=n(172),o=n(173),a=(e,t={})=>{let n=[];if(Array.isArray(e))for(let i of e){let e=a.create(i,t);Array.isArray(e)?n.push(...e):n.push(e)}else n=[].concat(a.create(e,t));return t&&!0===t.expand&&!0===t.nodupes&&(n=[...new Set(n)]),n};a.parse=(e,t={})=>o(e,t),a.stringify=(e,t={})=>i("string"==typeof e?a.parse(e,t):e,t),a.compile=(e,t={})=>("string"==typeof e&&(e=a.parse(e,t)),s(e,t)),a.expand=(e,t={})=>{"string"==typeof e&&(e=a.parse(e,t));let n=r(e,t);return!0===t.noempty&&(n=n.filter(Boolean)),!0===t.nodupes&&(n=[...new Set(n)]),n},a.create=(e,t={})=>""===e||e.length<3?[e]:!0!==t.expand?a.compile(e,t):a.expand(e,t),e.exports=a},function(e,t,n){"use strict";const i=n(81),s=n(49);e.exports=(e,t={})=>{let n=(e,r={})=>{let o=s.isInvalidBrace(r),a=!0===e.invalid&&!0===t.escapeInvalid,c=!0===o||!0===a,l=!0===t.escapeInvalid?"\\":"",p="";if(!0===e.isOpen)return l+e.value;if(!0===e.isClose)return l+e.value;if("open"===e.type)return c?l+e.value:"(";if("close"===e.type)return c?l+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":c?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){let n=s.reduce(e.nodes),r=i(...n,{...t,wrap:!1,toRegex:!0});if(0!==r.length)return n.length>1&&r.length>1?`(${r})`:r}if(e.nodes)for(let t of e.nodes)p+=n(t,e);return p};return n(e)}},function(e,t,n){"use strict";
/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const i=n(171),s=(e,t,n)=>{if(!1===i(e))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===t||e===t)return String(e);if(!1===i(t))throw new TypeError("toRegexRange: expected the second argument to be a number.");let r={relaxZeros:!0,...n};"boolean"==typeof r.strictZeros&&(r.relaxZeros=!1===r.strictZeros);let c=e+":"+t+"="+String(r.relaxZeros)+String(r.shorthand)+String(r.capture)+String(r.wrap);if(s.cache.hasOwnProperty(c))return s.cache[c].result;let l=Math.min(e,t),p=Math.max(e,t);if(1===Math.abs(l-p)){let n=e+"|"+t;return r.capture?`(${n})`:!1===r.wrap?n:`(?:${n})`}let u=f(e)||f(t),d={min:e,max:t,a:l,b:p},h=[],m=[];if(u&&(d.isPadded=u,d.maxLen=String(d.max).length),l<0){m=o(p<0?Math.abs(p):1,Math.abs(l),d,r),l=d.a=0}return p>=0&&(h=o(l,p,d,r)),d.negatives=m,d.positives=h,d.result=function(e,t,n){let i=a(e,t,"-",!1,n)||[],s=a(t,e,"",!1,n)||[],r=a(e,t,"-?",!0,n)||[];return i.concat(r).concat(s).join("|")}(m,h,r),!0===r.capture?d.result=`(${d.result})`:!1!==r.wrap&&h.length+m.length>1&&(d.result=`(?:${d.result})`),s.cache[c]=d,d.result};function r(e,t,n){if(e===t)return{pattern:e,count:[],digits:0};let i=function(e,t){let n=[];for(let i=0;i<e.length;i++)n.push([e[i],t[i]]);return n}(e,t),s=i.length,r="",o=0;for(let e=0;e<s;e++){let[t,s]=i[e];t===s?r+=t:"0"!==t||"9"!==s?r+=h(t,s,n):o++}return o&&(r+=!0===n.shorthand?"\\d":"[0-9]"),{pattern:r,count:[o],digits:s}}function o(e,t,n,i){let s,o=function(e,t){let n=1,i=1,s=p(e,n),r=new Set([t]);for(;e<=s&&s<=t;)r.add(s),n+=1,s=p(e,n);for(s=u(t+1,i)-1;e<s&&s<=t;)r.add(s),i+=1,s=u(t+1,i)-1;return r=[...r],r.sort(c),r}(e,t),a=[],l=e;for(let e=0;e<o.length;e++){let t=o[e],c=r(String(l),String(t),i),p="";n.isPadded||!s||s.pattern!==c.pattern?(n.isPadded&&(p=m(t,n,i)),c.string=p+c.pattern+d(c.count),a.push(c),l=t+1,s=c):(s.count.length>1&&s.count.pop(),s.count.push(c.count[0]),s.string=s.pattern+d(s.count),l=t+1)}return a}function a(e,t,n,i,s){let r=[];for(let s of e){let{string:e}=s;i||l(t,"string",e)||r.push(n+e),i&&l(t,"string",e)&&r.push(n+e)}return r}function c(e,t){return e>t?1:t>e?-1:0}function l(e,t,n){return e.some(e=>e[t]===n)}function p(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function u(e,t){return e-e%Math.pow(10,t)}function d(e){let[t=0,n=""]=e;return n||t>1?`{${t+(n?","+n:"")}}`:""}function h(e,t,n){return`[${e}${t-e==1?"":"-"}${t}]`}function f(e){return/^-?(0+)\d/.test(e)}function m(e,t,n){if(!t.isPadded)return e;let i=Math.abs(t.maxLen-String(e).length),s=!1!==n.relaxZeros;switch(i){case 0:return"";case 1:return s?"0?":"0";case 2:return s?"0{0,2}":"00";default:return s?`0{0,${i}}`:`0{${i}}`}}s.cache={},s.clearCache=()=>s.cache={},e.exports=s},function(e,t,n){"use strict";
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}},function(e,t,n){"use strict";const i=n(81),s=n(48),r=n(49),o=(e="",t="",n=!1)=>{let i=[];if(e=[].concat(e),!(t=[].concat(t)).length)return e;if(!e.length)return n?r.flatten(t).map(e=>`{${e}}`):t;for(let s of e)if(Array.isArray(s))for(let e of s)i.push(o(e,t,n));else for(let e of t)!0===n&&"string"==typeof e&&(e=`{${e}}`),i.push(Array.isArray(e)?o(s,e,n):s+e);return r.flatten(i)};e.exports=(e,t={})=>{let n=void 0===t.rangeLimit?1e3:t.rangeLimit,a=(e,c={})=>{e.queue=[];let l=c,p=c.queue;for(;"brace"!==l.type&&"root"!==l.type&&l.parent;)l=l.parent,p=l.queue;if(e.invalid||e.dollar)return void p.push(o(p.pop(),s(e,t)));if("brace"===e.type&&!0!==e.invalid&&2===e.nodes.length)return void p.push(o(p.pop(),["{}"]));if(e.nodes&&e.ranges>0){let a=r.reduce(e.nodes);if(r.exceedsLimit(...a,t.step,n))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let c=i(...a,t);return 0===c.length&&(c=s(e,t)),p.push(o(p.pop(),c)),void(e.nodes=[])}let u=r.encloseBrace(e),d=e.queue,h=e;for(;"brace"!==h.type&&"root"!==h.type&&h.parent;)h=h.parent,d=h.queue;for(let t=0;t<e.nodes.length;t++){let n=e.nodes[t];"comma"!==n.type||"brace"!==e.type?"close"!==n.type?n.value&&"open"!==n.type?d.push(o(d.pop(),n.value)):n.nodes&&a(n,e):p.push(o(p.pop(),d,u)):(1===t&&d.push(""),d.push(""))}return d};return r.flatten(a(e))}},function(e,t,n){"use strict";const i=n(48),{MAX_LENGTH:s,CHAR_BACKSLASH:r,CHAR_BACKTICK:o,CHAR_COMMA:a,CHAR_DOT:c,CHAR_LEFT_PARENTHESES:l,CHAR_RIGHT_PARENTHESES:p,CHAR_LEFT_CURLY_BRACE:u,CHAR_RIGHT_CURLY_BRACE:d,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_RIGHT_SQUARE_BRACKET:f,CHAR_DOUBLE_QUOTE:m,CHAR_SINGLE_QUOTE:g,CHAR_NO_BREAK_SPACE:y,CHAR_ZERO_WIDTH_NOBREAK_SPACE:_}=n(174);e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");let n=t||{},T="number"==typeof n.maxLength?Math.min(s,n.maxLength):s;if(e.length>T)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${T})`);let v,b={type:"root",input:e,nodes:[]},C=[b],S=b,x=b,k=0,E=e.length,w=0,A=0;const D=()=>e[w++],I=e=>{if("text"===e.type&&"dot"===x.type&&(x.type="text"),!x||"text"!==x.type||"text"!==e.type)return S.nodes.push(e),e.parent=S,e.prev=x,x=e,e;x.value+=e.value};for(I({type:"bos"});w<E;)if(S=C[C.length-1],v=D(),v!==_&&v!==y)if(v!==r)if(v!==f)if(v!==h)if(v!==l)if(v!==p)if(v!==m&&v!==g&&v!==o)if(v!==u)if(v!==d)if(v===a&&A>0){if(S.ranges>0){S.ranges=0;let e=S.nodes.shift();S.nodes=[e,{type:"text",value:i(S)}]}I({type:"comma",value:v}),S.commas++}else if(v===c&&A>0&&0===S.commas){let e=S.nodes;if(0===A||0===e.length){I({type:"text",value:v});continue}if("dot"===x.type){if(S.range=[],x.value+=v,x.type="range",3!==S.nodes.length&&5!==S.nodes.length){S.invalid=!0,S.ranges=0,x.type="text";continue}S.ranges++,S.args=[];continue}if("range"===x.type){e.pop();let t=e[e.length-1];t.value+=x.value+v,x=t,S.ranges--;continue}I({type:"dot",value:v})}else I({type:"text",value:v});else{if("brace"!==S.type){I({type:"text",value:v});continue}let e="close";S=C.pop(),S.close=!0,I({type:e,value:v}),A--,S=C[C.length-1]}else{A++;let e=x.value&&"$"===x.value.slice(-1)||!0===S.dollar;S=I({type:"brace",open:!0,close:!1,dollar:e,depth:A,commas:0,ranges:0,nodes:[]}),C.push(S),I({type:"open",value:v})}else{let e,n=v;for(!0!==t.keepQuotes&&(v="");w<E&&(e=D());)if(e!==r){if(e===n){!0===t.keepQuotes&&(v+=e);break}v+=e}else v+=e+D();I({type:"text",value:v})}else{if("paren"!==S.type){I({type:"text",value:v});continue}S=C.pop(),I({type:"text",value:v}),S=C[C.length-1]}else S=I({type:"paren",nodes:[]}),C.push(S),I({type:"text",value:v});else{k++;let e;for(;w<E&&(e=D());)if(v+=e,e!==h)if(e!==r){if(e===f&&(k--,0===k))break}else v+=D();else k++;I({type:"text",value:v})}else I({type:"text",value:"\\"+v});else I({type:"text",value:(t.keepEscaping?v:"")+D()});do{if(S=C.pop(),"root"!==S.type){S.nodes.forEach(e=>{e.nodes||("open"===e.type&&(e.isOpen=!0),"close"===e.type&&(e.isClose=!0),e.nodes||(e.type="text"),e.invalid=!0)});let e=C[C.length-1],t=e.nodes.indexOf(S);e.nodes.splice(t,1,...S.nodes)}}while(C.length>0);return I({type:"eos"}),b}},function(e,t,n){"use strict";e.exports={MAX_LENGTH:65536,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:"",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"}},function(e,t,n){"use strict";const i=n(12),s=n(3),{promisify:r}=n(18),o=n(176),{isWindows:a,EMPTY_FN:c,EMPTY_STR:l,KEY_LISTENERS:p,KEY_ERR:u,KEY_RAW:d,HANDLER_KEYS:h,EV_CHANGE:f,EV_ADD:m,EV_ADD_DIR:g,EV_ERROR:y,STR_DATA:_,STR_END:T,BRACE_START:v,STAR:b}=n(50),C=r(i.open),S=r(i.stat),x=r(i.lstat),k=r(i.close),E=r(i.realpath),w={lstat:x,stat:S},A=(e,t)=>{e instanceof Set?e.forEach(t):t(e)},D=(e,t,n)=>{let i=e[t];i instanceof Set||(e[t]=i=new Set([i])),i.add(n)},I=(e,t,n)=>{const i=e[t];i instanceof Set?i.delete(n):i===n&&delete e[t]},P=e=>e instanceof Set?0===e.size:!e,F=new Map;function R(e,t,n,r,o){const a=(t,i)=>{n(e),o(t,i,{watchedPath:e}),i&&e!==i&&N(s.resolve(e,i),p,s.join(e,i))};try{return i.watch(e,t,a)}catch(e){r(e)}}const N=(e,t,n,i,s)=>{const r=F.get(e);r&&A(r[t],e=>{e(n,i,s)})},O=(e,t,n,i)=>{const{listener:s,errHandler:r,rawEmitter:o}=i;let c,l=F.get(t);if(!n.persistent)return c=R(e,n,s,r,o),c.close.bind(c);if(l)D(l,p,s),D(l,u,r),D(l,d,o);else{if(c=R(e,n,N.bind(null,t,p),r,N.bind(null,t,d)),!c)return;c.on(y,async n=>{const i=N.bind(null,t,u);if(l.watcherUnusable=!0,a&&"EPERM"===n.code)try{const t=await C(e,"r");await k(t),i(n)}catch(e){}else i(n)}),l={listeners:s,errHandlers:r,rawEmitters:o,watcher:c},F.set(t,l)}return()=>{I(l,p,s),I(l,u,r),I(l,d,o),P(l.listeners)&&(l.watcher.close(),F.delete(t),h.forEach((e=>t=>{const n=e[t];n instanceof Set?n.clear():delete e[t]})(l)),l.watcher=void 0,Object.freeze(l))}},L=new Map;e.exports=class{constructor(e){this.fsw=e,this._boundHandleError=t=>e._handleError(t)}_watchWithNodeFs(e,t){const n=this.fsw.options,r=s.dirname(e),a=s.basename(e);this.fsw._getWatchedDir(r).add(a);const l=s.resolve(e),u={persistent:n.persistent};let h;return t||(t=c),n.usePolling?(u.interval=n.enableBinaryInterval&&o(a)?n.binaryInterval:n.interval,h=((e,t,n,s)=>{const{listener:r,rawEmitter:o}=s;let a=L.get(t),c=new Set,l=new Set;const u=a&&a.options;return u&&(u.persistent<n.persistent||u.interval>n.interval)&&(c=a.listeners,l=a.rawEmitters,i.unwatchFile(t),a=void 0),a?(D(a,p,r),D(a,d,o)):(a={listeners:r,rawEmitters:o,options:n,watcher:i.watchFile(t,n,(n,i)=>{A(a.rawEmitters,e=>{e(f,t,{curr:n,prev:i})});const s=n.mtimeMs;(n.size!==i.size||s>i.mtimeMs||0===s)&&A(a.listeners,t=>t(e,n))})},L.set(t,a)),()=>{I(a,p,r),I(a,d,o),P(a.listeners)&&(L.delete(t),i.unwatchFile(t),a.options=a.watcher=void 0,Object.freeze(a))}})(e,l,u,{listener:t,rawEmitter:this.fsw._emitRaw})):h=O(e,l,u,{listener:t,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),h}_handleFile(e,t,n){if(this.fsw.closed)return;const i=s.dirname(e),r=s.basename(e),o=this.fsw._getWatchedDir(i);let a=t;if(o.has(r))return;const c=this._watchWithNodeFs(e,async(t,n)=>{if(this.fsw._throttle("watch",e,5))if(n&&0!==n.mtimeMs){if(o.has(r)){const t=n.atimeMs,i=n.mtimeMs;(!t||t<=i||i!==a.mtimeMs)&&this.fsw._emit(f,e,n),a=n}}else try{const t=await S(e);if(this.fsw.closed)return;const n=t.atimeMs,i=t.mtimeMs;(!n||n<=i||i!==a.mtimeMs)&&this.fsw._emit(f,e,t),a=t}catch(e){this.fsw._remove(i,r)}});if((!n||!this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(m,e,0))return;this.fsw._emit(m,e,t)}return c}async _handleSymlink(e,t,n,i){if(this.fsw.closed)return;const s=e.fullPath,r=this.fsw._getWatchedDir(t);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();const t=await E(n);if(this.fsw.closed)return;return r.has(i)?this.fsw._symlinkPaths.get(s)!==t&&(this.fsw._symlinkPaths.set(s,t),this.fsw._emit(f,n,e.stats)):(r.add(i),this.fsw._symlinkPaths.set(s,t),this.fsw._emit(m,n,e.stats)),this.fsw._emitReady(),!0}if(this.fsw._symlinkPaths.has(s))return!0;this.fsw._symlinkPaths.set(s,!0)}_handleRead(e,t,n,i,r,o,a){if(e=s.join(e,l),!n.hasGlob&&!(a=this.fsw._throttle("readdir",e,1e3)))return;const c=this.fsw._getWatchedDir(n.path),p=new Set;let u=this.fsw._readdirp(e,{fileFilter:e=>n.filterPath(e),directoryFilter:e=>n.filterDir(e),depth:0}).on(_,async a=>{if(this.fsw.closed)return void(u=void 0);const l=a.path;let d=s.join(e,l);p.add(l),a.stats.isSymbolicLink()&&await this._handleSymlink(a,e,d,l)||(this.fsw.closed?u=void 0:l!==i&&(i||c.has(l))||(this.fsw._incrReadyCount(),d=s.join(r,s.relative(r,d)),this._addToNodeFs(d,t,n,o+1)))}).on(y,this._boundHandleError);return new Promise(t=>u.once(T,()=>{if(this.fsw.closed)return void(u=void 0);const l=!!a&&a.clear();t(),c.getChildren().filter(t=>t!==e&&!p.has(t)&&(!n.hasGlob||n.filterPath({fullPath:s.resolve(e,t)}))).forEach(t=>{this.fsw._remove(e,t)}),u=void 0,l&&this._handleRead(e,!1,n,i,r,o,a)}))}async _handleDir(e,t,n,i,r,o,a){const c=this.fsw._getWatchedDir(s.dirname(e)),l=c.has(s.basename(e));let p;n&&this.fsw.options.ignoreInitial||r||l||o.hasGlob&&!o.globFilter(e)||this.fsw._emit(g,e,t),c.add(s.basename(e)),this.fsw._getWatchedDir(e);const u=this.fsw.options.depth;if((null==u||i<=u)&&!this.fsw._symlinkPaths.has(a)){if(!r&&(await this._handleRead(e,n,o,r,e,i,void 0),this.fsw.closed))return;p=this._watchWithNodeFs(e,(t,n)=>{n&&0===n.mtimeMs||this._handleRead(t,!1,o,r,e,i,void 0)})}return p}async _addToNodeFs(e,t,n,i,r){const o=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return o(),!1;const a=this.fsw._getWatchHelpers(e,i);!a.hasGlob&&n&&(a.hasGlob=n.hasGlob,a.globFilter=n.globFilter,a.filterPath=e=>n.filterPath(e),a.filterDir=e=>n.filterDir(e));try{const n=await w[a.statMethod](a.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(a.watchPath,n))return o(),!1;const c=this.fsw.options.followSymlinks&&!e.includes(b)&&!e.includes(v);let l;if(n.isDirectory()){const s=c?await E(e):e;if(this.fsw.closed)return;if(l=await this._handleDir(a.watchPath,n,t,i,r,a,s),this.fsw.closed)return;e!==s&&void 0!==s&&this.fsw._symlinkPaths.set(s,!0)}else if(n.isSymbolicLink()){const r=c?await E(e):e;if(this.fsw.closed)return;const o=s.dirname(a.watchPath);if(this.fsw._getWatchedDir(o).add(a.watchPath),this.fsw._emit(m,a.watchPath,n),l=await this._handleDir(o,n,t,i,e,a,r),this.fsw.closed)return;void 0!==r&&this.fsw._symlinkPaths.set(s.resolve(e),r)}else l=this._handleFile(a.watchPath,n,t);return o(),this.fsw._addPathCloser(e,l),!1}catch(t){if(this.fsw._handleError(t))return o(),e}}}},function(e,t,n){"use strict";const i=n(3),s=n(177),r=new Set(s);e.exports=e=>r.has(i.extname(e).slice(1).toLowerCase())},function(e,t,n){e.exports=n(178)},function(e){e.exports=JSON.parse('["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","oga","ogg","ogv","otf","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rtf","rz","s3m","s7z","scpt","sgi","shar","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"]')},function(e,t,n){"use strict";const i=n(12),s=n(3),{promisify:r}=n(18);let o;try{o=n(180)}catch(e){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(e)}if(o){const e=process.version.match(/v(\d+)\.(\d+)/);if(e&&e[1]&&e[2]){const t=Number.parseInt(e[1],10),n=Number.parseInt(e[2],10);8===t&&n<16&&(o=void 0)}}const{EV_ADD:a,EV_CHANGE:c,EV_ADD_DIR:l,EV_UNLINK:p,EV_ERROR:u,STR_DATA:d,STR_END:h,FSEVENT_CREATED:f,FSEVENT_MODIFIED:m,FSEVENT_DELETED:g,FSEVENT_MOVED:y,FSEVENT_UNKNOWN:_,FSEVENT_TYPE_FILE:T,FSEVENT_TYPE_DIRECTORY:v,FSEVENT_TYPE_SYMLINK:b,ROOT_GLOBSTAR:C,DIR_SUFFIX:S,DOT_SLASH:x,FUNCTION_TYPE:k,EMPTY_FN:E,IDENTITY_FN:w}=n(50),A=r(i.stat),D=r(i.lstat),I=r(i.realpath),P={stat:A,lstat:D},F=new Map,R=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),N=(e,t)=>({stop:o.watch(e,t)});const O=e=>{let t=0;for(const n of F.keys())if(0===n.indexOf(e)&&(t++,t>=10))return!0;return!1},L=(e,t)=>{let n=0;for(;!e.indexOf(t)&&(e=s.dirname(e))!==t;)n++;return n},M=(e,t)=>e.type===v&&t.isDirectory()||e.type===b&&t.isSymbolicLink()||e.type===T&&t.isFile();e.exports=class{constructor(e){this.fsw=e}checkIgnored(e,t){const n=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,t))return n.add(e),t&&t.isDirectory()&&n.add(e+C),!0;n.delete(e),n.delete(e+C)}addOrChange(e,t,n,i,s,r,o,l){const p=s.has(r)?c:a;this.handleEvent(p,e,t,n,i,s,r,o,l)}async checkExists(e,t,n,i,s,r,o,a){try{const c=await A(e);if(this.fsw.closed)return;if(this.fsw.closed)return;M(o,c)?this.addOrChange(e,t,n,i,s,r,o,a):this.handleEvent(p,e,t,n,i,s,r,o,a)}catch(c){"EACCES"===c.code?this.addOrChange(e,t,n,i,s,r,o,a):this.handleEvent(p,e,t,n,i,s,r,o,a)}}handleEvent(e,t,n,i,s,r,o,c,u){if(!this.fsw.closed&&!this.checkIgnored(t))if(e===p){const e=c.type===v;(e||r.has(o))&&this.fsw._remove(s,o,e)}else{if(e===a){if(c.type===v&&this.fsw._getWatchedDir(t),c.type===b&&u.followSymlinks){const e=void 0===u.depth?void 0:L(n,i)+1;return this._addToFsEvents(t,!1,!0,e)}this.fsw._getWatchedDir(s).add(o)}const r=c.type===v?e+S:e;this.fsw._emit(r,t),r===l&&this._addToFsEvents(t,!1,!0)}}_watchWithFsEvents(e,t,n,i){if(this.fsw.closed)return;if(this.fsw._isIgnored(e))return;const r=this.fsw.options,a=function(e,t,n,i,r){let a=s.extname(e)?s.dirname(e):e;const c=s.dirname(a);let l=F.get(a);O(c)&&(a=c);const p=s.resolve(e),u=p!==t,d=(e,i,r)=>{u&&(e=e.replace(t,p)),e!==p&&e.indexOf(p+s.sep)||n(e,i,r)};let h=!1;for(const e of F.keys())if(0===t.indexOf(s.resolve(e)+s.sep)){a=e,l=F.get(a),h=!0;break}return l||h?l.listeners.add(d):(l={listeners:new Set([d]),rawEmitter:i,watcher:N(a,(e,t)=>{if(r.closed)return;const n=o.getInfo(e,t);l.listeners.forEach(i=>{i(e,t,n)}),l.rawEmitter(n.event,e,n)})},F.set(a,l)),()=>{const e=l.listeners;if(e.delete(d),!e.size&&(F.delete(a),l.watcher))return l.watcher.stop().then(()=>{l.rawEmitter=l.watcher=void 0,Object.freeze(l)})}}(e,t,async(o,a,c)=>{if(this.fsw.closed)return;if(void 0!==r.depth&&L(o,t)>r.depth)return;const l=n(s.join(e,s.relative(e,o)));if(i&&!i(l))return;const u=s.dirname(l),d=s.basename(l),h=this.fsw._getWatchedDir(c.type===v?l:u);if(R.has(a)||c.event===_)if(typeof r.ignored===k){let e;try{e=await A(l)}catch(e){}if(this.fsw.closed)return;if(this.checkIgnored(l,e))return;M(c,e)?this.addOrChange(l,o,t,u,h,d,c,r):this.handleEvent(p,l,o,t,u,h,d,c,r)}else this.checkExists(l,o,t,u,h,d,c,r);else switch(c.event){case f:case m:return this.addOrChange(l,o,t,u,h,d,c,r);case g:case y:return this.checkExists(l,o,t,u,h,d,c,r)}},this.fsw._emitRaw,this.fsw);return this.fsw._emitReady(),a}async _handleFsEventsSymlink(e,t,n,i){if(!this.fsw.closed&&!this.fsw._symlinkPaths.has(t)){this.fsw._symlinkPaths.set(t,!0),this.fsw._incrReadyCount();try{const t=await I(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(t))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(t||e,i=>{let r=e;return t&&t!==x?r=i.replace(t,e):i!==x&&(r=s.join(e,i)),n(r)},!1,i)}catch(e){if(this.fsw._handleError(e))return this.fsw._emitReady()}}}emitAdd(e,t,n,i,r){const o=n(e),c=t.isDirectory(),p=this.fsw._getWatchedDir(s.dirname(o)),u=s.basename(o);c&&this.fsw._getWatchedDir(o),p.has(u)||(p.add(u),i.ignoreInitial&&!0!==r||this.fsw._emit(c?l:a,o,t))}initWatch(e,t,n,i){if(this.fsw.closed)return;const r=this._watchWithFsEvents(n.watchPath,s.resolve(e||n.watchPath),i,n.globFilter);this.fsw._addPathCloser(t,r)}async _addToFsEvents(e,t,n,i){if(this.fsw.closed)return;const r=this.fsw.options,o=typeof t===k?t:w,a=this.fsw._getWatchHelpers(e);try{const t=await P[a.statMethod](a.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(a.watchPath,t))throw null;if(t.isDirectory()){if(a.globFilter||this.emitAdd(o(e),t,o,r,n),i&&i>r.depth)return;this.fsw._readdirp(a.watchPath,{fileFilter:e=>a.filterPath(e),directoryFilter:e=>a.filterDir(e),...(c=r.depth-(i||0),isNaN(c)?{}:{depth:c})}).on(d,e=>{if(this.fsw.closed)return;if(e.stats.isDirectory()&&!a.filterPath(e))return;const t=s.join(a.watchPath,e.path),{fullPath:i}=e;if(a.followSymlinks&&e.stats.isSymbolicLink()){const e=void 0===r.depth?void 0:L(t,s.resolve(a.watchPath))+1;this._handleFsEventsSymlink(t,i,o,e)}else this.emitAdd(t,e.stats,o,r,n)}).on(u,E).on(h,()=>{this.fsw._emitReady()})}else this.emitAdd(a.watchPath,t,o,r,n),this.fsw._emitReady()}catch(e){e&&!this.fsw._handleError(e)||(this.fsw._emitReady(),this.fsw._emitReady())}var c;if(r.persistent&&!0!==n)if(typeof t===k)this.initWatch(void 0,e,a,o);else{let t;try{t=await I(a.watchPath)}catch(e){}this.initWatch(t,e,a,o)}}},e.exports.canUse=()=>o&&F.size<128},function(e,t,n){"use strict";if("darwin"!==process.platform)throw new Error(`Module 'fsevents' is not compatible with platform '${process.platform}'`);const i=n(181),s=i.constants;function r(e){return s.ItemIsFile&e?"file":s.ItemIsDir&e?"directory":s.ItemIsSymlink&e?"symlink":void 0}function o(e){return s.ItemRemoved&e?"deleted":s.ItemRenamed&e?"moved":s.ItemCreated&e?"created":s.ItemModified&e?"modified":s.RootChanged&e?"root-changed":s.ItemCloned&e?"cloned":function(e){for(let t in e)if(e[t])return!0;return!1}(e)?"modified":"unknown"}function a(e){return{inode:!!(s.ItemInodeMetaMod&e),finder:!!(s.ItemFinderInfoMod&e),access:!!(s.ItemChangeOwner&e),xattrs:!!(s.ItemXattrMod&e)}}t.watch=function(e,t){if("string"!=typeof e)throw new TypeError("fsevents argument 1 must be a string and not a "+typeof e);if("function"!=typeof t)throw new TypeError("fsevents argument 2 must be a function and not a "+typeof t);let n=i.start(e,t);if(!n)throw new Error("could not watch: "+e);return()=>{const e=n?Promise.resolve(n).then(i.stop):Promise.resolve(void 0);return n=void 0,e}},t.getInfo=function(e,t){return{path:e,flags:t,event:o(t),type:r(t),changes:a(t)}},t.constants=s},function(e,t,n){(function(e){try{global.process.dlopen(e,"/Users/xm0003/src/coc-pyright/pyright-1.1.51/server/node_modules/fsevents/fsevents.node")}catch(e){throw new Error("Cannot open /Users/xm0003/src/coc-pyright/pyright-1.1.51/server/node_modules/fsevents/fsevents.node: "+e)}}).call(this,n(182)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandController=void 0;const s=n(10),r=n(184),o=n(186),a=n(187);t.CommandController=class{constructor(e){this._createStub=new r.CreateTypeStubCommand(e),this._restartServer=new a.RestartServerCommand(e),this._quickAction=new o.QuickActionCommand(e)}execute(e,t){return i(this,void 0,void 0,(function*(){switch(e.command){case"pyright.organizeimports":case"pyright.addoptionalforparam":return this._quickAction.execute(e,t);case"pyright.createtypestub":return this._createStub.execute(e,t);case"pyright.restartserver":return this._restartServer.execute(e);default:return new s.ResponseError(1,"Unsupported command")}}))}isLongRunningCommand(e){switch(e){case"pyright.createtypestub":return!0;default:return!1}}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateTypeStubCommand=void 0;const s=n(82),r=n(0),o=n(39),a=n(4),c=n(83);t.CreateTypeStubCommand=class{constructor(e){this._ls=e}execute(e,t){return i(this,void 0,void 0,(function*(){if(e.arguments&&e.arguments.length>=2){const n=e.arguments[0],i=e.arguments[1],s=e.arguments[2],l=yield this._createTypeStubService(s),p={workspaceName:"Create Type Stub "+i,rootPath:n,rootUri:a.convertPathToUri(n),serviceInstance:l,disableLanguageServices:!0,disableOrganizeImports:!0,isInitialized:o.createDeferred()},u=yield this._ls.getSettings(p);c.AnalyzerServiceExecutor.runWithOptions(this._ls.rootPath,p,u,i,!1);try{yield l.writeTypeStubInBackground(t),l.dispose();const e=`Type stub was successfully created for '${i}'.`;this._ls.window.showInformationMessage(e),this._handlePostCreateTypeStub()}catch(e){if(r.OperationCanceledException.is(e)){const e=`Type stub creation for '${i}' was canceled`;this._ls.console.error(e)}else{let t="";e instanceof Error&&(t=": "+e.message),t=`An error occurred when creating type stub for '${i}'`+t,this._ls.console.error(t),this._ls.window.showErrorMessage(t)}}}}))}_createTypeStubService(e){return i(this,void 0,void 0,(function*(){if(e){return(yield this._ls.getWorkspaceForFile(e)).serviceInstance.clone("Type stub",this._ls.createBackgroundAnalysis())}return new s.AnalyzerService("Type stub",this._ls.fs,this._ls.console)}))}_handlePostCreateTypeStub(){this._ls.reanalyze()}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundAnalysisProgram=void 0;const s=n(51),r=n(63);t.BackgroundAnalysisProgram=class{constructor(e,t,n,i,s,o){this._console=e,this._configOptions=t,this._importResolver=n,this._program=new r.Program(this._importResolver,this._configOptions,this._console,i),this._backgroundAnalysis=s,this._maxAnalysisTime=o}get configOptions(){return this._configOptions}get importResolver(){return this._importResolver}get program(){return this._program}get backgroundAnalysis(){return this._backgroundAnalysis}setConfigOptions(e){var t;this._configOptions=e,null===(t=this._backgroundAnalysis)||void 0===t||t.setConfigOptions(e),this._program.setConfigOptions(e)}setImportResolver(e){this._importResolver=e,this._program.setImportResolver(e)}setTrackedFiles(e){var t;null===(t=this._backgroundAnalysis)||void 0===t||t.setTrackedFiles(e);const n=this._program.setTrackedFiles(e);this._reportDiagnosticsForRemovedFiles(n)}setAllowedThirdPartyImports(e){var t;null===(t=this._backgroundAnalysis)||void 0===t||t.setAllowedThirdPartyImports(e),this._program.setAllowedThirdPartyImports(e)}setFileOpened(e,t,n){var i;null===(i=this._backgroundAnalysis)||void 0===i||i.setFileOpened(e,t,n),this._program.setFileOpened(e,t,n)}updateOpenFileContents(e,t,n){this.setFileOpened(e,t,n),this.markFilesDirty([e],!0)}setFileClosed(e){var t;null===(t=this._backgroundAnalysis)||void 0===t||t.setFileClosed(e);const n=this._program.setFileClosed(e);this._reportDiagnosticsForRemovedFiles(n)}markAllFilesDirty(e){var t;null===(t=this._backgroundAnalysis)||void 0===t||t.markAllFilesDirty(e),this._program.markAllFilesDirty(e)}markFilesDirty(e,t){var n;null===(n=this._backgroundAnalysis)||void 0===n||n.markFilesDirty(e,t),this._program.markFilesDirty(e,t)}setCompletionCallback(e){var t;this._onAnalysisCompletion=e,null===(t=this._backgroundAnalysis)||void 0===t||t.setCompletionCallback(e)}startAnalysis(e){return this._backgroundAnalysis?(this._backgroundAnalysis.startAnalysis(e),!1):s.analyzeProgram(this._program,this._maxAnalysisTime,this._configOptions,this._onAnalysisCompletion,this._console,e)}getDiagnosticsForRange(e,t,n){return i(this,void 0,void 0,(function*(){return this._backgroundAnalysis?this._backgroundAnalysis.getDiagnosticsForRange(e,t,n):this._program.getDiagnosticsForRange(e,t)}))}writeTypeStub(e,t,n,r){return i(this,void 0,void 0,(function*(){return this._backgroundAnalysis?this._backgroundAnalysis.writeTypeStub(e,t,n,r):(s.analyzeProgram(this._program,void 0,this._configOptions,this._onAnalysisCompletion,this._console,r),this._program.writeTypeStub(e,t,n,r))}))}invalidateAndForceReanalysis(){var e;null===(e=this._backgroundAnalysis)||void 0===e||e.invalidateAndForceReanalysis(),this._importResolver.invalidateCache(),this._program.markAllFilesDirty(!0)}invalidateCache(){this._importResolver.invalidateCache()}restart(){var e;null===(e=this._backgroundAnalysis)||void 0===e||e.restart()}_reportDiagnosticsForRemovedFiles(e){e.length>0&&!this._backgroundAnalysis&&this._onAnalysisCompletion&&this._onAnalysisCompletion({diagnostics:e,filesInProgram:this._program.getFileCount(),filesRequiringAnalysis:this._program.getFilesToAnalyzeCount(),checkingOnlyOpenFiles:this._program.isCheckingOnlyOpenFiles(),fatalErrorOccurred:!1,configParseErrorOccurred:!1,elapsedTime:0})}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.QuickActionCommand=void 0;const s=n(4),r=n(85);t.QuickActionCommand=class{constructor(e){this._ls=e}execute(e,t){return i(this,void 0,void 0,(function*(){if(e.arguments&&e.arguments.length>=1){const n=e.arguments[0],i=e.arguments.slice(1),o=s.convertUriToPath(n),a=yield this._ls.getWorkspaceForFile(o);if("pyright.organizeimports"===e.command&&a.disableOrganizeImports)return[];const c=a.serviceInstance.performQuickAction(o,e.command,i,t);return r.convertTextEdits(n,c)}}))}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RestartServerCommand=void 0;t.RestartServerCommand=class{constructor(e){this._ls=e}execute(e){return i(this,void 0,void 0,(function*(){this._ls.restart()}))}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerBase=void 0,n(189);const s=n(12),r=n(190),o=n(43),a=n(82),c=n(0),l=n(42),p=n(84),u=n(32),d=n(16),h=n(39),f=n(78),m=n(4),g=n(191),y=n(85),_=n(83),T=n(72),v=n(22),b=n(192);t.LanguageServerBase=class{constructor(e){var t;this._serverOptions=e,this._connection=r.createConnection(this._GetConnectionOptions()),this._hasConfigurationCapability=!1,this._hasWatchFileCapability=!1,this._fileWatchers=[],this.rootPath="",this.console=new d.ConsoleWithLogLevel(this._connection.console),this.console.info(`${e.productName} language server ${e.version&&e.version+" "}starting`),this.fs=f.createFromRealFileSystem(this.console,this);const n=this.fs.getModulePath();n&&this.fs.chdir(n),global.__rootDirectory=e.rootDirectory,this.console.info("Server root directory: "+e.rootDirectory),this._workspaceMap=new b.WorkspaceMap(this),this._setupConnection(null!==(t=e.supportedCommands)&&void 0!==t?t:[]),this._progressReporter=new g.ProgressReportTracker(this._serverOptions.progressReporterFactory?this._serverOptions.progressReporterFactory(this._connection):void 0),this._connection.listen()}isLongRunningCommand(e){return!0}getConfiguration(e,t){if(this._hasConfigurationCapability){const n={scopeUri:e.rootUri?e.rootUri:void 0,section:t};return this._connection.workspace.getConfiguration(n)}if(this._defaultClientConfig)return l.getNestedProperty(this._defaultClientConfig,t)}isOpenFilesOnly(e){return"workspace"!==e}getSeverityOverrides(e){const t=e;if(p.getDiagnosticSeverityOverrides().includes(t))return t}getDiagnosticRuleName(e){const t=e;if(u.getDiagLevelDiagnosticRules().includes(t))return t}createImportResolver(e,t){return new o.ImportResolver(e,t)}setExtension(e){this._serverOptions.extension=e}get window(){return this._connection.window}createAnalyzerService(e){this.console.log(`Starting service instance "${e}"`);const t=new a.AnalyzerService(e,this.fs,this.console,this.createImportResolver.bind(this),void 0,this._serverOptions.extension,this.createBackgroundAnalysis(),this._serverOptions.maxAnalysisTimeInForeground);return t.setCompletionCallback(e=>this.onAnalysisCompletedHandler(e)),t}getWorkspaceForFile(e){return i(this,void 0,void 0,(function*(){const t=this._workspaceMap.getWorkspaceForFile(e);return yield t.isInitialized.promise,t}))}reanalyze(){this._workspaceMap.forEach(e=>{e.serviceInstance.invalidateAndForceReanalysis()})}restart(){this._workspaceMap.forEach(e=>{e.serviceInstance.restart()})}createFileWatcher(e,t){const n=this,i=[],r=[],o=this._workspaceMap.getNonDefaultWorkspaces();e.forEach(e=>{o.some(t=>m.containsPath(t.rootPath,e))?i.push(e):r.push(e)});const a=r.map(e=>s.watch(e,{recursive:!0},t)),c={close(){n._fileWatchers=n._fileWatchers.filter(e=>e!==c),a.forEach(e=>{e.close()})},workspacePaths:i,eventHandler:t};return this._fileWatchers.push(c),c}_setupConnection(e){this._connection.onInitialize(t=>{var n,i,s;this.rootPath=t.rootPath||"";const o=t.capabilities;return this._hasConfigurationCapability=!!(null===(n=o.workspace)||void 0===n?void 0:n.configuration),this._hasWatchFileCapability=!!(null===(s=null===(i=o.workspace)||void 0===i?void 0:i.didChangeWatchedFiles)||void 0===s?void 0:s.dynamicRegistration),t.workspaceFolders?t.workspaceFolders.forEach(e=>{const t=m.convertUriToPath(e.uri);this._workspaceMap.set(t,{workspaceName:e.name,rootPath:t,rootUri:e.uri,serviceInstance:this.createAnalyzerService(e.name),disableLanguageServices:!1,disableOrganizeImports:!1,isInitialized:h.createDeferred()})}):t.rootPath&&this._workspaceMap.set(t.rootPath,{workspaceName:"",rootPath:t.rootPath,rootUri:"",serviceInstance:this.createAnalyzerService(t.rootPath),disableLanguageServices:!1,disableOrganizeImports:!1,isInitialized:h.createDeferred()}),{capabilities:{textDocumentSync:r.TextDocumentSyncKind.Full,definitionProvider:{workDoneProgress:!0},referencesProvider:{workDoneProgress:!0},documentSymbolProvider:{workDoneProgress:!0},workspaceSymbolProvider:{workDoneProgress:!0},hoverProvider:{workDoneProgress:!0},documentHighlightProvider:{workDoneProgress:!0},renameProvider:{workDoneProgress:!0},completionProvider:{triggerCharacters:[".","["],resolveProvider:!0,workDoneProgress:!0},signatureHelpProvider:{triggerCharacters:["(",",",")"],workDoneProgress:!0},codeActionProvider:{codeActionKinds:[r.CodeActionKind.QuickFix,r.CodeActionKind.SourceOrganizeImports],workDoneProgress:!0},executeCommandProvider:{commands:e,workDoneProgress:!0},callHierarchyProvider:!0}}}),this._connection.onDidChangeConfiguration(e=>{this.console.log("Received updated settings"),(null==e?void 0:e.settings)&&(this._defaultClientConfig=null==e?void 0:e.settings),this.updateSettingsForAllWorkspaces()}),this._connection.onCodeAction((e,t)=>this.executeCodeAction(e,t)),this._connection.onDefinition((e,t)=>i(this,void 0,void 0,(function*(){this.recordUserInteractionTime();const n=m.convertUriToPath(e.textDocument.uri),i={line:e.position.line,character:e.position.character},s=yield this.getWorkspaceForFile(n);if(s.disableLanguageServices)return;const o=s.serviceInstance.getDefinitionForPosition(n,i,t);return o?o.map(e=>r.Location.create(m.convertPathToUri(e.path),e.range)):void 0}))),this._connection.onReferences((e,t,n)=>i(this,void 0,void 0,(function*(){this._pendingFindAllRefsCancellationSource&&(this._pendingFindAllRefsCancellationSource.cancel(),this._pendingFindAllRefsCancellationSource=void 0);const i=yield this._getProgressReporter(e.workDoneToken,n,v.Localizer.CodeAction.findingReferences()),s=c.CancelAfter(t,i.token);this._pendingFindAllRefsCancellationSource=s;try{const t=m.convertUriToPath(e.textDocument.uri),n={line:e.position.line,character:e.position.character},o=yield this.getWorkspaceForFile(t);if(o.disableLanguageServices)return;const a=o.serviceInstance.getReferencesForPosition(t,n,e.context.includeDeclaration,s.token);if(!a)return;return a.map(e=>r.Location.create(m.convertPathToUri(e.path),e.range))}finally{i.reporter.done(),s.dispose()}}))),this._connection.onDocumentSymbol((e,t)=>i(this,void 0,void 0,(function*(){this.recordUserInteractionTime();const n=m.convertUriToPath(e.textDocument.uri),i=yield this.getWorkspaceForFile(n);if(i.disableLanguageServices)return;const s=[];return i.serviceInstance.addSymbolsForDocument(n,s,t),s}))),this._connection.onWorkspaceSymbol((e,t)=>i(this,void 0,void 0,(function*(){const n=[];return this._workspaceMap.forEach(s=>i(this,void 0,void 0,(function*(){yield s.isInitialized.promise,s.disableLanguageServices||s.serviceInstance.addSymbolsForWorkspace(n,e.query,t)}))),n}))),this._connection.onHover((e,t)=>i(this,void 0,void 0,(function*(){const n=m.convertUriToPath(e.textDocument.uri),i={line:e.position.line,character:e.position.character},s=(yield this.getWorkspaceForFile(n)).serviceInstance.getHoverForPosition(n,i,t);return T.convertHoverResults(s)}))),this._connection.onDocumentHighlight((e,t)=>i(this,void 0,void 0,(function*(){const n=m.convertUriToPath(e.textDocument.uri),i={line:e.position.line,character:e.position.character};return(yield this.getWorkspaceForFile(n)).serviceInstance.getDocumentHighlight(n,i,t)}))),this._connection.onSignatureHelp((e,t)=>i(this,void 0,void 0,(function*(){const n=m.convertUriToPath(e.textDocument.uri),i={line:e.position.line,character:e.position.character},s=yield this.getWorkspaceForFile(n);if(s.disableLanguageServices)return;const o=s.serviceInstance.getSignatureHelpForPosition(n,i,t);return o?{signatures:o.signatures.map(e=>{let t=[];return e.parameters&&(t=e.parameters.map(e=>r.ParameterInformation.create([e.startOffset,e.endOffset],e.documentation))),r.SignatureInformation.create(e.label,e.documentation,...t)}),activeSignature:void 0!==o.activeSignature?o.activeSignature:null,activeParameter:void 0!==o.activeParameter?o.activeParameter:-1}:void 0})));let t=r.CompletionTriggerKind.Invoked;this._connection.onCompletion((e,n)=>i(this,void 0,void 0,(function*(){var i,s;const o=t!==r.CompletionTriggerKind.TriggerForIncompleteCompletions||(null===(i=e.context)||void 0===i?void 0:i.triggerKind)!==r.CompletionTriggerKind.TriggerForIncompleteCompletions;t=null===(s=e.context)||void 0===s?void 0:s.triggerKind;const a=m.convertUriToPath(e.textDocument.uri),c={line:e.position.line,character:e.position.character},l=yield this.getWorkspaceForFile(a);if(l.disableLanguageServices)return;const p=yield l.serviceInstance.getCompletionsForPosition(a,c,l.rootPath,n);return p&&(p.isIncomplete=o),p}))),this._connection.onCompletionResolve((e,t)=>i(this,void 0,void 0,(function*(){const n=e.data;if(n&&n.filePath){(yield this.getWorkspaceForFile(n.workspacePath)).serviceInstance.resolveCompletionItem(n.filePath,e,t)}return e}))),this._connection.onRenameRequest((e,t)=>i(this,void 0,void 0,(function*(){const n=m.convertUriToPath(e.textDocument.uri),i={line:e.position.line,character:e.position.character},s=yield this.getWorkspaceForFile(n);if(s.disableLanguageServices)return;const r=s.serviceInstance.renameSymbolAtPosition(n,i,e.newName,t);return r?y.convertWorkspaceEdits(r):void 0}))),this._connection.languages.callHierarchy.onPrepare((e,t)=>i(this,void 0,void 0,(function*(){const n=m.convertUriToPath(e.textDocument.uri),i={line:e.position.line,character:e.position.character},s=yield this.getWorkspaceForFile(n);if(s.disableLanguageServices)return null;const r=s.serviceInstance.getCallForPosition(n,i,t)||null;return r?(r.uri=m.convertPathToUri(r.uri),[r]):null}))),this._connection.languages.callHierarchy.onIncomingCalls((e,t)=>i(this,void 0,void 0,(function*(){const n=m.convertUriToPath(e.item.uri),i={line:e.item.range.start.line,character:e.item.range.start.character},s=yield this.getWorkspaceForFile(n);if(s.disableLanguageServices)return null;const r=s.serviceInstance.getIncomingCallsForPosition(n,i,t)||null;return r&&0!==r.length?(r.forEach(e=>{e.from.uri=m.convertPathToUri(e.from.uri)}),r):null}))),this._connection.languages.callHierarchy.onOutgoingCalls((e,t)=>i(this,void 0,void 0,(function*(){const n=m.convertUriToPath(e.item.uri),i={line:e.item.range.start.line,character:e.item.range.start.character},s=yield this.getWorkspaceForFile(n);if(s.disableLanguageServices)return null;const r=s.serviceInstance.getOutgoingCallsForPosition(n,i,t)||null;return r&&0!==r.length?(r.forEach(e=>{e.to.uri=m.convertPathToUri(e.to.uri)}),r):null}))),this._connection.onDidOpenTextDocument(e=>i(this,void 0,void 0,(function*(){const t=m.convertUriToPath(e.textDocument.uri);(yield this.getWorkspaceForFile(t)).serviceInstance.setFileOpened(t,e.textDocument.version,e.textDocument.text)}))),this._connection.onDidChangeTextDocument(e=>i(this,void 0,void 0,(function*(){this.recordUserInteractionTime();const t=m.convertUriToPath(e.textDocument.uri);(yield this.getWorkspaceForFile(t)).serviceInstance.updateOpenFileContents(t,e.textDocument.version,e.contentChanges[0].text)}))),this._connection.onDidCloseTextDocument(e=>i(this,void 0,void 0,(function*(){const t=m.convertUriToPath(e.textDocument.uri);(yield this.getWorkspaceForFile(t)).serviceInstance.setFileClosed(t)}))),this._connection.onDidChangeWatchedFiles(e=>{e.changes.forEach(e=>{const t=m.convertUriToPath(e.uri),n=1===e.type?"add":"change";this._fileWatchers.forEach(e=>{e.workspacePaths.some(e=>m.containsPath(e,t))&&e.eventHandler(n,t)})})}),this._connection.onInitialized(()=>{this._connection.workspace.onDidChangeWorkspaceFolders(e=>{e.removed.forEach(e=>{const t=m.convertUriToPath(e.uri);this._workspaceMap.delete(t)}),e.added.forEach(e=>i(this,void 0,void 0,(function*(){const t=m.convertUriToPath(e.uri),n={workspaceName:e.name,rootPath:t,rootUri:e.uri,serviceInstance:this.createAnalyzerService(e.name),disableLanguageServices:!1,disableOrganizeImports:!1,isInitialized:h.createDeferred()};this._workspaceMap.set(t,n),yield this.updateSettingsForWorkspace(n)})))}),this._hasWatchFileCapability&&this._connection.client.register(r.DidChangeWatchedFilesNotification.type,{watchers:[...a.configFileNames.map(e=>({globPattern:"**/"+e,kind:r.WatchKind.Create|r.WatchKind.Change|r.WatchKind.Delete})),{globPattern:"**/*.{py,pyi}",kind:r.WatchKind.Create|r.WatchKind.Change|r.WatchKind.Delete}]})}),this._connection.onExecuteCommand((e,t,n)=>i(this,void 0,void 0,(function*(){this._pendingCommandCancellationSource&&(this._pendingCommandCancellationSource.cancel(),this._pendingCommandCancellationSource=void 0);const s=t=>i(this,void 0,void 0,(function*(){const n=yield this.executeCommand(e,t);r.WorkspaceEdit.is(n)&&this._connection.workspace.applyEdit(n)}));if(this.isLongRunningCommand(e.command)){const i=yield this._getProgressReporter(e.workDoneToken,n,v.Localizer.CodeAction.executingCommand()),r=c.CancelAfter(t,i.token);this._pendingCommandCancellationSource=r;try{s(r.token)}finally{i.reporter.done(),r.dispose()}}else s(t)})))}updateSettingsForAllWorkspaces(){this._workspaceMap.forEach(e=>{this.updateSettingsForWorkspace(e).ignoreErrors()})}onAnalysisCompletedHandler(e){if(e.diagnostics.forEach(e=>{this._connection.sendDiagnostics({uri:m.convertPathToUri(e.filePath),diagnostics:this._convertDiagnostics(e.diagnostics)})}),this._progressReporter.isEnabled(e))if(e.filesRequiringAnalysis>0){this._progressReporter.begin();const t=1===e.filesRequiringAnalysis?v.Localizer.CodeAction.filesToAnalyzeOne():v.Localizer.CodeAction.filesToAnalyzeCount().format({count:e.filesRequiringAnalysis});this._progressReporter.report(t)}else this._progressReporter.end()}updateSettingsForWorkspace(e){var t;return i(this,void 0,void 0,(function*(){const n=yield this.getSettings(e);this.console.level=null!==(t=n.logLevel)&&void 0!==t?t:d.LogLevel.Info,this.updateOptionsAndRestartService(e,n),e.disableLanguageServices=!!n.disableLanguageServices,e.disableOrganizeImports=!!n.disableOrganizeImports,e.isInitialized.resolve(!0)}))}updateOptionsAndRestartService(e,t,n){_.AnalyzerServiceExecutor.runWithOptions(this.rootPath,e,t,n)}convertLogLevel(e){if(!e)return d.LogLevel.Info;switch(e.toLowerCase()){case"error":return d.LogLevel.Error;case"warning":return d.LogLevel.Warn;case"info":return d.LogLevel.Info;case"trace":return d.LogLevel.Log;default:return d.LogLevel.Info}}_getProgressReporter(e,t,n){return i(this,void 0,void 0,(function*(){if(e)return{reporter:t,token:r.CancellationToken.None};const i=yield this._connection.window.createWorkDoneProgress();return i.begin(n,void 0,void 0,!0),{reporter:i,token:i.token}}))}_GetConnectionOptions(){return{cancellationStrategy:c.getCancellationStrategyFromArgv(process.argv)}}_convertDiagnostics(e){return e.map(e=>{const t=function(e){switch(e){case 0:return r.DiagnosticSeverity.Error;case 1:return r.DiagnosticSeverity.Warning;case 2:return r.DiagnosticSeverity.Information;case 3:return r.DiagnosticSeverity.Hint}}(e.category);let n=this._serverOptions.productName;const i=e.getRule();i&&(n=`${n} (${i})`);const s=r.Diagnostic.create(e.range,e.message,t,void 0,n);3===e.category&&(s.tags=[r.DiagnosticTag.Unnecessary],s.severity=r.DiagnosticSeverity.Hint);const o=e.getRelatedInfo();return o.length>0&&(s.relatedInformation=o.map(e=>r.DiagnosticRelatedInformation.create(r.Location.create(m.convertPathToUri(e.filePath),e.range),e.message))),s})}recordUserInteractionTime(){this._workspaceMap.forEach(e=>{e.serviceInstance.recordUserInteractionTime()})}}},function(e,t){Promise.prototype.ignoreErrors=function(){this.catch(()=>{})}},function(e,t,n){"use strict";e.exports=n(10)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressReportTracker=void 0;t.ProgressReportTracker=class{constructor(e){this._reporter=e,this._isDisplayingProgress=!1}isEnabled(e){var t,n;return!!this._isDisplayingProgress||null!==(n=null===(t=this._reporter)||void 0===t?void 0:t.isEnabled(e))&&void 0!==n&&n}begin(){var e;this._isDisplayingProgress||(this._isDisplayingProgress=!0,null===(e=this._reporter)||void 0===e||e.begin())}report(e){var t;this._isDisplayingProgress&&(null===(t=this._reporter)||void 0===t||t.report(e))}end(){var e;this._isDisplayingProgress&&(this._isDisplayingProgress=!1,null===(e=this._reporter)||void 0===e||e.end())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceMap=void 0;const i=n(39);class s extends Map{constructor(e){super(),this._ls=e,this._defaultWorkspacePath="<default>"}getNonDefaultWorkspaces(){const e=[];return this.forEach(t=>{t.rootPath&&e.push(t)}),e}getWorkspaceForFile(e){let t,n;if(this.forEach(i=>{i.rootPath&&e.startsWith(i.rootPath)&&(void 0===t||i.rootPath.startsWith(t))&&(t=i.rootPath,n=i)}),void 0===n){let e=this.get(this._defaultWorkspacePath);if(!e){const t=[...this.keys()];if(1===t.length)return this.get(t[0]);e={workspaceName:"",rootPath:"",rootUri:"",serviceInstance:this._ls.createAnalyzerService(this._defaultWorkspacePath),disableLanguageServices:!1,disableOrganizeImports:!1,isInitialized:i.createDeferred()},this.set(this._defaultWorkspacePath,e),this._ls.updateSettingsForWorkspace(e).ignoreErrors()}return e}return n}}t.WorkspaceMap=s},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeActionProvider=void 0;const s=n(10),r=n(0),o=n(4),a=n(22);t.CodeActionProvider=class{static getCodeActionsForPosition(e,t,n,c){return i(this,void 0,void 0,(function*(){r.throwIfCancellationRequested(c);const i=s.CodeAction.create(a.Localizer.CodeAction.organizeImports(),s.Command.create(a.Localizer.CodeAction.organizeImports(),"pyright.organizeimports",o.convertPathToUri(t)),s.CodeActionKind.SourceOrganizeImports),l=[];if(e.disableOrganizeImports||l.push(i),!e.disableLanguageServices){const i=yield e.serviceInstance.getDiagnosticsForRange(t,n,c),r=i.find(e=>{const t=e.getActions();return t&&t.find(e=>"pyright.createtypestub"===e.action)});if(r){const n=r.getActions().find(e=>"pyright.createtypestub"===e.action);if(n){const i=s.CodeAction.create(a.Localizer.CodeAction.createTypeStubFor().format({moduleName:n.moduleName}),s.Command.create(a.Localizer.CodeAction.createTypeStub(),"pyright.createtypestub",e.rootPath,n.moduleName,t),s.CodeActionKind.QuickFix);l.push(i)}}const o=i.find(e=>{const t=e.getActions();return t&&t.find(e=>"pyright.addoptionalforparam"===e.action)});if(o){const e=o.getActions().find(e=>"pyright.addoptionalforparam"===e.action);if(e){const t=s.CodeAction.create(a.Localizer.CodeAction.addOptionalToAnnotation(),s.Command.create(a.Localizer.CodeAction.addOptionalToAnnotation(),"pyright.addoptionalforparam",e.offsetOfTypeNode),s.CodeActionKind.QuickFix);l.push(t)}}}return l}))}}},function(e){e.exports=JSON.parse('{"name":"pyright-server","displayName":"pyright","description":"Type checker for the Python language","version":"1.1.51","license":"MIT","scripts":{"start":"npm run start:serverDebug && npm run start:server","start:serverDebug":"npm i && npm run build:serverDebug","start:serverProd":"npm i && npm run build:serverProd","build":"npm run build:serverProd && npm run build:serverDebug && npm run build:cli","build:serverDebug":"tsc && npm run installServer","build:serverProd":"npm run installServer && webpack --config webpack.config-server.js","installServer":"node ./customInstallServerIntoExtension.js ../client ./package.json ./tsconfig.json ./package-lock.json","build:cli":"node ./copyTypeshedFallback.js && npm run eslint && webpack --config webpack.config-cli.js","eslint":"eslint src/**/*.ts","watch":"tsc --watch","test":"jest --detectOpenHandles --forceExit","test:pipeline":"jest --detectOpenHandles --forceExit --reporters=jest-junit --reporters=default --coverage --coverageReporters=cobertura --coverageReporters=html --coverageReporters=json"},"dependencies":{"assert":"^2.0.0","chalk":"^4.1.0","chokidar":"^3.4.0","command-line-args":"^5.1.1","leven":"^3.1.0","typescript-char":"^0.0.0","vscode-languageserver":"^7.0.0-next.4","vscode-uri":"^2.1.2"},"devDependencies":{"@types/chalk":"^2.2.0","@types/chokidar":"^2.1.3","@types/command-line-args":"^5.0.0","@types/fs-extra":"^9.0.1","@types/jest":"^26.0.0","@types/node":"^14.0.13","@typescript-eslint/eslint-plugin":"^3.3.0","@typescript-eslint/parser":"^3.3.0","eslint":"^7.3.0","eslint-config-prettier":"^6.11.0","fs-extra":"^9.0.1","jest":"^26.0.1","jest-junit":"^11.0.0","node-loader":"^0.6.0","prettier":"2.0.5","ts-jest":"^26.1.0","ts-loader":"^7.0.5","typescript":"^3.9.5","webpack":"^4.43.0","webpack-cli":"^3.3.12"},"types":"out/main.d.ts","main":"out/main.js"}')}]);
//# sourceMappingURL=server.bundle.js.map